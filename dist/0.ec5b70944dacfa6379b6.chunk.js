webpackJsonp([0,6],{"+2IH":function(t,n,i){"use strict";function e(t){return s["ɵvid"](0,[(t()(),s["ɵeld"](0,null,null,1,"p",[],null,null,null,null,null)),(t()(),s["ɵted"](null,["Описание - ",""]))],null,function(t,n){t(n,1,0,n.component.unit.description)})}function o(t){return s["ɵvid"](0,[(t()(),s["ɵeld"](0,null,null,55,"div",[["class","row"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n    "])),(t()(),s["ɵeld"](0,null,null,7,"div",[["class","col-md-12"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n        "])),(t()(),s["ɵeld"](0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),s["ɵted"](null,["Тема - ",""])),(t()(),s["ɵted"](null,["\n        "])),(t()(),s["ɵand"](16777216,null,null,1,null,e)),s["ɵdid"](16384,null,0,l.NgIf,[s.ViewContainerRef,s.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),s["ɵted"](null,["\n    "])),(t()(),s["ɵted"](null,["\n\n    "])),(t()(),s["ɵeld"](0,null,null,43,"div",[["class","col-md-12"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n\n        "])),(t()(),s["ɵeld"](0,null,null,37,"ul",[["class","nav nav-pills"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n            "])),(t()(),s["ɵeld"](0,null,null,10,"li",[["class","nav-item"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n                "])),(t()(),s["ɵeld"](0,null,null,7,"a",[["class","nav-link"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,n,i){var e=!0;if("click"===n){e=!1!==s["ɵnov"](t,18).onClick(i.button,i.ctrlKey,i.metaKey,i.shiftKey)&&e}return e},null,null)),s["ɵdid"](671744,[[2,4]],0,a.y,[a.c,a.a,l.LocationStrategy],{routerLink:[0,"routerLink"]},null),s["ɵpad"](1),s["ɵdid"](1720320,null,2,a.z,[a.c,s.ElementRef,s.Renderer,s.ChangeDetectorRef],{routerLinkActive:[0,"routerLinkActive"]},null),s["ɵqud"](603979776,1,{links:1}),s["ɵqud"](603979776,2,{linksWithHrefs:1}),s["ɵpad"](1),(t()(),s["ɵted"](null,["Теория"])),(t()(),s["ɵted"](null,["\n            "])),(t()(),s["ɵted"](null,["\n            "])),(t()(),s["ɵeld"](0,null,null,10,"li",[["class","nav-item"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n                "])),(t()(),s["ɵeld"](0,null,null,7,"a",[["class","nav-link"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,n,i){var e=!0;if("click"===n){e=!1!==s["ɵnov"](t,30).onClick(i.button,i.ctrlKey,i.metaKey,i.shiftKey)&&e}return e},null,null)),s["ɵdid"](671744,[[4,4]],0,a.y,[a.c,a.a,l.LocationStrategy],{routerLink:[0,"routerLink"]},null),s["ɵpad"](1),s["ɵdid"](1720320,null,2,a.z,[a.c,s.ElementRef,s.Renderer,s.ChangeDetectorRef],{routerLinkActive:[0,"routerLinkActive"]},null),s["ɵqud"](603979776,3,{links:1}),s["ɵqud"](603979776,4,{linksWithHrefs:1}),s["ɵpad"](1),(t()(),s["ɵted"](null,["Практика"])),(t()(),s["ɵted"](null,["\n            "])),(t()(),s["ɵted"](null,["\n            "])),(t()(),s["ɵeld"](0,null,null,10,"li",[["class","nav-item"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n                "])),(t()(),s["ɵeld"](0,null,null,7,"a",[["class","nav-link"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,n,i){var e=!0;if("click"===n){e=!1!==s["ɵnov"](t,42).onClick(i.button,i.ctrlKey,i.metaKey,i.shiftKey)&&e}return e},null,null)),s["ɵdid"](671744,[[6,4]],0,a.y,[a.c,a.a,l.LocationStrategy],{routerLink:[0,"routerLink"]},null),s["ɵpad"](1),s["ɵdid"](1720320,null,2,a.z,[a.c,s.ElementRef,s.Renderer,s.ChangeDetectorRef],{routerLinkActive:[0,"routerLinkActive"]},null),s["ɵqud"](603979776,5,{links:1}),s["ɵqud"](603979776,6,{linksWithHrefs:1}),s["ɵpad"](1),(t()(),s["ɵted"](null,["Тест"])),(t()(),s["ɵted"](null,["\n            "])),(t()(),s["ɵted"](null,["\n        "])),(t()(),s["ɵted"](null,["\n\n        "])),(t()(),s["ɵeld"](16777216,null,null,1,"router-outlet",[],null,null,null,null,null)),s["ɵdid"](212992,null,0,a.A,[a.q,s.ViewContainerRef,s.ComponentFactoryResolver,[8,null],s.ChangeDetectorRef],null,null),(t()(),s["ɵted"](null,["\n\n    "])),(t()(),s["ɵted"](null,["\n\n"]))],function(t,n){t(n,8,0,n.component.unit.description),t(n,18,0,t(n,19,0,"theory")),t(n,20,0,t(n,23,0,"active")),t(n,30,0,t(n,31,0,"schema")),t(n,32,0,t(n,35,0,"active")),t(n,42,0,t(n,43,0,"test")),t(n,44,0,t(n,47,0,"active")),t(n,53,0)},function(t,n){t(n,5,0,n.component.unit.name),t(n,17,0,s["ɵnov"](n,18).target,s["ɵnov"](n,18).href),t(n,29,0,s["ɵnov"](n,30).target,s["ɵnov"](n,30).href),t(n,41,0,s["ɵnov"](n,42).target,s["ɵnov"](n,42).href)})}function r(t){return s["ɵvid"](0,[(t()(),s["ɵeld"](0,null,null,1,"unit",[],null,null,null,o,c)),s["ɵdid"](245760,null,0,h.a,[u.a,a.a],null,null)],function(t,n){t(n,1,0)},null)}var s=i("3j3K"),l=i("2Je8"),a=i("5oXY"),h=i("cm73"),u=i("aXs8");i.d(n,"a",function(){return d});var f=[],c=s["ɵcrt"]({encapsulation:2,styles:f,data:{}}),d=s["ɵccf"]("unit",h.a,r,{},{},[])},"/Drs":function(t,n,i){"use strict";var e=i("3p2b"),o=[{value:"WBSOBS",class:e.a,name:"WBS/OBS"}];n.a=o},"0LsZ":function(t,n,i){"use strict";var e=i("TemG"),o=i("5oXY"),r=i("aXs8");i.d(n,"a",function(){return s});var s=function(){function t(t,n,i){this.TestService=t,this.UnitService=n,this.route=i}return t.prototype.ngOnInit=function(){var t=this;this.subscription=this.UnitService.unit$.subscribe(function(n){t.test=n.test?t.TestService.fillableTest(n.test):t.TestService.initializeTest(+t.route.parent.params.value.id)}),this.UnitService.callEvent("test")},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.save=function(){var t=this;this.TestService.store(this.test).subscribe(function(n){t.UnitService.pushTest(n),t.test=n})},t.prototype.setRightAnswer=function(t,n){t.hash=n.hash},t.ctorParameters=function(){return[{type:e.a},{type:r.a},{type:o.a}]},t}()},"1+LI":function(t,n,i){"use strict";i.d(n,"a",function(){return e});var e=function(){function t(t){void 0===t&&(t={}),this.name="",this.description="",Object.assign(this,t)}return t}()},"1nWc":function(t,n,i){"use strict";i.d(n,"a",function(){return e});var e=function(){function t(t){void 0===t&&(t={}),this.questions=[],Object.assign(this,t)}return t}()},"2Khz":function(t,n,i){"use strict";var e=i("xAJs"),o=(i.n(e),i("Fzro")),r=i("lHWG"),s=i("e7xV"),l=i("OyfR");i.d(n,"a",function(){return u});var a=this&&this.__awaiter||function(t,n,i,e){return new(i||(i=Promise))(function(o,r){function s(t){try{a(e.next(t))}catch(t){r(t)}}function l(t){try{a(e.throw(t))}catch(t){r(t)}}function a(t){t.done?o(t.value):new i(function(n){n(t.value)}).then(s,l)}a((e=e.apply(t,n||[])).next())})},h=this&&this.__generator||function(t,n){function i(t){return function(n){return e([t,n])}}function e(i){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,r&&(s=r[2&i[0]?"return":i[0]?"throw":"next"])&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[0,s.value]),i[0]){case 0:case 1:s=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(s=l.trys,!(s=s.length>0&&s[s.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){l.label=i[1];break}if(6===i[0]&&l.label<s[1]){l.label=s[1],s=i;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(i);break}s[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(t,l)}catch(t){i=[6,t],r=0}finally{o=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var o,r,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return{next:i(0),throw:i(1),return:i(2)}},u=function(){function t(t,n,i){this.http=t,this.originalHttp=n,this.jwt=i,this.prefix="theory/",this.api=""+this.http.adminPrefix+this.prefix}return t.prototype.file=function(t,n){return a(this,void 0,void 0,function(){var i,e;return h(this,function(r){return i=new o.l,i.append("Authorization","Bearer "+this.jwt.getToken()),e=new FormData,e.append("file",t,t.name),e.append("theory_id",n.toString()),[2,this.originalHttp.post("http://localhost:8000/api/files/",e,new o.g({headers:i})).toPromise()]})})},t.prototype.store=function(t){var n=this;return this.http.post(""+this.api,t).map(function(i){return a(n,void 0,void 0,function(){var n,e;return h(this,function(o){switch(o.label){case 0:return n=new s.a(i.json()),[4,this.file(t.file,n.id)];case 1:return e=o.sent(),n.file=e.json(),[2,n]}})})})},t.ctorParameters=function(){return[{type:r.a},{type:o.i},{type:l.a}]},t}()},"3p2b":function(t,n,i){"use strict";var e=i("PFUz"),o=(i.n(e),i("YJfO")),r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])};return function(n,i){function e(){this.constructor=n}t(n,i),n.prototype=null===i?Object.create(i):(e.prototype=i.prototype,new e)}}(),s=function(t){function n(n){function i(){for(var t=h;null!==a.diagram.model.findNodeDataForKey(t);)t=h--;return t}function o(t,n){var e=n.part;if(null!==e){var o=e.data;a.diagram.startTransaction("add employee");var r=a.getNode(i(),o.key);a.diagram.model.addNodeData(r),a.diagram.commitTransaction("add employee")}}function r(t,n){return t instanceof e.Node&&(t!==n&&!n.isInTreeOf(t))}function s(){return{font:"9pt  Segoe UI,sans-serif",stroke:"white"}}var l=t.call(this)||this;l.model={class:"go.TreeModel",nodeDataArray:[{key:1,name:"some name",title:"title",hash:l.hash()}]},l.div=n.nativeElement,l.maker=e.GraphObject.make;var a=l;l.diagram=l.maker(e.Diagram,l.div,{initialContentAlignment:e.Spot.Center,maxSelectionCount:1,validCycle:e.Diagram.CycleDestinationTree,"clickCreatingTool.archetypeNodeData":{},"clickCreatingTool.insertPart":function(t){return this.archetypeNodeData=a.getNode(i()),e.ClickCreatingTool.prototype.insertPart.call(this,t)},layout:l.maker(e.TreeLayout,{treeStyle:e.TreeLayout.StyleLastParents,arrangement:e.TreeLayout.ArrangementHorizontal,angle:90,layerSpacing:35,alternateAngle:90,alternateLayerSpacing:35,alternateAlignment:e.TreeLayout.AlignmentBus,alternateNodeSpacing:20}),"undoManager.isEnabled":!0}),l.diagram.addDiagramListener("Modified",function(t){var n=document.title.indexOf("*");l.diagram.isModified?n<0&&(document.title+="*"):n>=0&&(document.title=document.title.substr(0,n))}),l.diagram.addDiagramListener("SelectionDeleting",function(t){var n=t.subject.first();if(l.diagram.startTransaction("clear boss"),n instanceof e.Node)for(var i=n.findTreeChildrenNodes();i.next();){var o=i.value,r=o.findObject("boss");if(null===r)return;r.text=""}else if(n instanceof e.Link){var o=n.toNode,r=o.findObject("boss");if(null===r)return;r.text=""}l.diagram.commitTransaction("clear boss")}),l.diagram.layout.commitNodes=function(){e.TreeLayout.prototype.commitNodes.call(l.diagram.layout),l.diagram.layout.network.vertexes.each(function(t){if(t.node){var n=t.level%a.levelColors.length,i=a.levelColors[n],o=t.node.findObject("SHAPE");o&&(o.fill=l.maker(e.Brush,"Linear",{0:i,1:e.Brush.lightenBy(i,.05),start:e.Spot.Left,end:e.Spot.Right}))}})};var h=-1;return l.diagram.nodeTemplate=l.maker(e.Node,"Auto",{doubleClick:o},{mouseDragEnter:function(t,n,i){if(r(n.diagram.selection.first(),n)){var e=n.findObject("SHAPE");e&&(e._prevFill=e.fill,e.fill="darkred")}},mouseDragLeave:function(t,n,i){var e=n.findObject("SHAPE");e&&e._prevFill&&(e.fill=e._prevFill)},mouseDrop:function(t,n){var i=n.diagram,e=i.selection.first();if(r(e,n)){var o=e.findTreeParentLink();null!==o?o.fromNode=n:i.toolManager.linkingTool.insertLink(n,n.port,e,e.port)}}},new e.Binding("text","name"),new e.Binding("layerName","isSelected",function(t){return t?"Foreground":""}).ofObject(),l.maker(e.Shape,"Rectangle",{name:"SHAPE",fill:"white",stroke:null,portId:"",fromLinkable:!0,toLinkable:!0,cursor:"pointer"}),l.maker(e.Panel,"Horizontal",l.maker(e.Panel,"Table",{maxSize:new e.Size(150,999),margin:new e.Margin(6,10,0,3),defaultAlignment:e.Spot.Left},l.maker(e.RowColumnDefinition,{column:2,width:4}),l.maker(e.TextBlock,s(),{row:0,column:0,columnSpan:5,font:"12pt Segoe UI,sans-serif",editable:!0,isMultiline:!1,minSize:new e.Size(10,16)},new e.Binding("text","name").makeTwoWay()),l.maker(e.TextBlock,s(),{row:2,column:0},new e.Binding("text","key",function(t){return"ID: "+t})),l.maker("CheckBox","choice",{name:"CHOICE_HIDDEN",row:3,column:0,"Button.width":20,"Button.height":20,"ButtonBorder.figure":"Circle","ButtonBorder.stroke":"blue","ButtonIcon.figure":"Circle","ButtonIcon.fill":"blue","ButtonIcon.strokeWidth":0,"ButtonIcon.desiredSize":new e.Size(10,10)},l.maker(e.TextBlock,{text:"hidden",name:"CHECKBOXDA"}),{_doClick:function(t,n){var i=n.part.data;if(n.part.data.choice&&!l.itemContains(i))l.addItem(i);else{var e=l.itemContains(i);e&&l.removeItem(e)}}})))),l.diagram.nodeTemplate.contextMenu=l.maker(e.Adornment,"Vertical",l.maker("ContextMenuButton",l.maker(e.TextBlock,"Удалить ветку"),{click:function(t,n){var i=n.part.adornedPart;if(null!==i){l.diagram.startTransaction("reparent remove");for(var e=i.findTreeChildrenNodes();e.next();){var o=e.value;l.diagram.model.setParentKeyForNodeData(o.data,i.findTreeParentNode().data.key)}l.diagram.model.removeNodeData(i.data),l.diagram.commitTransaction("reparent remove")}}}),l.maker("ContextMenuButton",l.maker(e.TextBlock,"Удалить дерево"),{click:function(t,n){var i=n.part.adornedPart;null!==i&&(l.diagram.startTransaction("remove dept"),l.diagram.removeParts(i.findTreeParts()),l.diagram.commitTransaction("remove dept"))}})),l.diagram.linkTemplate=l.maker(e.Link,e.Link.Orthogonal,{corner:5,relinkableFrom:!0,relinkableTo:!0},l.maker(e.Shape,{strokeWidth:4,stroke:"#00a4a4"})),window.PIXELRATIO=l.diagram.computePixelRatio(),l}return r(n,t),n.prototype.getNode=function(t,n){var i={key:t,name:"(название)",title:"",hash:this.hash()};return n&&(i.parent=n),i},n.prototype.initDiagram=function(t){var n=this;this.diagram.model=e.Model.fromJson(t.diagram),this.initItems(t.palette),this.div.addEventListener("dragover",function(t){var i=t.target,o=window.PIXELRATIO;if(i instanceof HTMLCanvasElement){var r=i.getBoundingClientRect(),s=r.width;0===s&&(s=.001);var l=r.height;0===l&&(l=.001);var a=t.clientX-r.left*(i.width/o/s),h=t.clientY-r.top*(i.height/o/l),u=n.diagram.transformViewToDoc(new e.Point(a,h)),f=n.diagram.findPartAt(u,!0);f instanceof e.Node?(console.log("focus on go.Node",f.data),n.highlight(f,n.diagram)):n.highlight(null,n.diagram),"dropzone"!==t.target.className&&t.preventDefault()}},!1)},n}(o.a);n.a=s},"4RwO":function(t,n,i){"use strict";function e(t){return r["ɵvid"](0,[(t()(),r["ɵeld"](0,null,null,57,"div",[["class","row"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["\n    "])),(t()(),r["ɵeld"](0,null,null,54,"div",[["class","col-md-12"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["\n\n        "])),(t()(),r["ɵeld"](0,null,null,1,"h4",[],null,null,null,null,null)),(t()(),r["ɵted"](null,["Редактирование"])),(t()(),r["ɵted"](null,["\n\n        "])),(t()(),r["ɵeld"](0,null,null,48,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,n,i){var e=!0,o=t.component;if("submit"===n){e=!1!==r["ɵnov"](t,9).onSubmit(i)&&e}if("reset"===n){e=!1!==r["ɵnov"](t,9).onReset()&&e}if("ngSubmit"===n){e=!1!==o.update()&&e}return e},null,null)),r["ɵdid"](16384,null,0,l.m,[],null,null),r["ɵdid"](16384,null,0,l.n,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),r["ɵprd"](2048,null,l.j,null,[l.n]),r["ɵdid"](16384,null,0,l.o,[l.j],null,null),(t()(),r["ɵted"](null,["\n            "])),(t()(),r["ɵeld"](0,null,null,16,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["\n                "])),(t()(),r["ɵeld"](0,null,null,1,"label",[["class","col-sm-2 col-form-label"],["for","inputName"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["Имя"])),(t()(),r["ɵted"](null,["\n                "])),(t()(),r["ɵeld"](0,null,null,10,"div",[["class","col-sm-10"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["\n                    "])),(t()(),r["ɵeld"](0,null,null,7,"input",[["class","form-control"],["id","inputName"],["name","name"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,i){var e=!0,o=t.component;if("input"===n){e=!1!==r["ɵnov"](t,21)._handleInput(i.target.value)&&e}if("blur"===n){e=!1!==r["ɵnov"](t,21).onTouched()&&e}if("compositionstart"===n){e=!1!==r["ɵnov"](t,21)._compositionStart()&&e}if("compositionend"===n){e=!1!==r["ɵnov"](t,21)._compositionEnd(i.target.value)&&e}if("ngModelChange"===n){e=!1!==(o.unit.name=i)&&e}return e},null,null)),r["ɵdid"](16384,null,0,l.f,[r.Renderer,r.ElementRef,[2,l.g]],null,null),r["ɵdid"](16384,null,0,l.s,[],{required:[0,"required"]},null),r["ɵprd"](1024,null,l.t,function(t){return[t]},[l.s]),r["ɵprd"](1024,null,l.h,function(t){return[t]},[l.f]),r["ɵdid"](671744,null,0,l.i,[[2,l.j],[2,l.t],[8,null],[2,l.h]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["ɵprd"](2048,null,l.k,null,[l.i]),r["ɵdid"](16384,null,0,l.l,[l.k],null,null),(t()(),r["ɵted"](null,["\n                "])),(t()(),r["ɵted"](null,["\n\n            "])),(t()(),r["ɵted"](null,["\n            "])),(t()(),r["ɵeld"](0,null,null,14,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["\n                "])),(t()(),r["ɵeld"](0,null,null,1,"label",[["class","col-sm-2 col-form-label"],["for","inputDescription"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["Описание"])),(t()(),r["ɵted"](null,["\n                "])),(t()(),r["ɵeld"](0,null,null,8,"div",[["class","col-sm-10"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["\n                    "])),(t()(),r["ɵeld"](0,null,null,5,"input",[["class","form-control"],["id","inputDescription"],["name","description"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,i){var e=!0,o=t.component;if("input"===n){e=!1!==r["ɵnov"](t,39)._handleInput(i.target.value)&&e}if("blur"===n){e=!1!==r["ɵnov"](t,39).onTouched()&&e}if("compositionstart"===n){e=!1!==r["ɵnov"](t,39)._compositionStart()&&e}if("compositionend"===n){e=!1!==r["ɵnov"](t,39)._compositionEnd(i.target.value)&&e}if("ngModelChange"===n){e=!1!==(o.unit.description=i)&&e}return e},null,null)),r["ɵdid"](16384,null,0,l.f,[r.Renderer,r.ElementRef,[2,l.g]],null,null),r["ɵprd"](1024,null,l.h,function(t){return[t]},[l.f]),r["ɵdid"](671744,null,0,l.i,[[2,l.j],[8,null],[8,null],[2,l.h]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["ɵprd"](2048,null,l.k,null,[l.i]),r["ɵdid"](16384,null,0,l.l,[l.k],null,null),(t()(),r["ɵted"](null,["\n                "])),(t()(),r["ɵted"](null,["\n            "])),(t()(),r["ɵted"](null,["\n            "])),(t()(),r["ɵeld"](0,null,null,7,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["\n                "])),(t()(),r["ɵeld"](0,null,null,4,"div",[["class","offset-sm-2 col-sm-10"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["\n                    "])),(t()(),r["ɵeld"](0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["Обновить"])),(t()(),r["ɵted"](null,["\n                "])),(t()(),r["ɵted"](null,["\n            "])),(t()(),r["ɵted"](null,["\n        "])),(t()(),r["ɵted"](null,["\n\n    "])),(t()(),r["ɵted"](null,["\n"]))],function(t,n){var i=n.component;t(n,22,0,""),t(n,25,0,"name",i.unit.name),t(n,41,0,"description",i.unit.description)},function(t,n){t(n,7,0,r["ɵnov"](n,11).ngClassUntouched,r["ɵnov"](n,11).ngClassTouched,r["ɵnov"](n,11).ngClassPristine,r["ɵnov"](n,11).ngClassDirty,r["ɵnov"](n,11).ngClassValid,r["ɵnov"](n,11).ngClassInvalid,r["ɵnov"](n,11).ngClassPending),t(n,20,0,r["ɵnov"](n,22).required?"":null,r["ɵnov"](n,27).ngClassUntouched,r["ɵnov"](n,27).ngClassTouched,r["ɵnov"](n,27).ngClassPristine,r["ɵnov"](n,27).ngClassDirty,r["ɵnov"](n,27).ngClassValid,r["ɵnov"](n,27).ngClassInvalid,r["ɵnov"](n,27).ngClassPending),t(n,38,0,r["ɵnov"](n,43).ngClassUntouched,r["ɵnov"](n,43).ngClassTouched,r["ɵnov"](n,43).ngClassPristine,r["ɵnov"](n,43).ngClassDirty,r["ɵnov"](n,43).ngClassValid,r["ɵnov"](n,43).ngClassInvalid,r["ɵnov"](n,43).ngClassPending)})}function o(t){return r["ɵvid"](0,[(t()(),r["ɵeld"](0,null,null,1,"edit-unit",[],null,null,null,e,c)),r["ɵdid"](114688,null,0,s.a,[a.a,h.a,u.Location],null,null)],function(t,n){t(n,1,0)},null)}var r=i("3j3K"),s=i("FLb2"),l=i("NVOs"),a=i("aXs8"),h=i("5oXY"),u=i("2Je8");i.d(n,"a",function(){return d});var f=[],c=r["ɵcrt"]({encapsulation:2,styles:f,data:{}}),d=r["ɵccf"]("edit-unit",s.a,o,{},{},[])},"5jXI":function(t,n,i){"use strict";i.d(n,"a",function(){return e});var e=[".icon[_ngcontent-%COMP%]{display:block;overflow:show}.icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{max-width:100%}main[_ngcontent-%COMP%]{position:absolute}.fullscreen[_ngcontent-%COMP%]{width:40px;height:40px;margin:0 auto;display:block;position:relative}.fullscreen[_ngcontent-%COMP%]   .fs-icon[_ngcontent-%COMP%]{transition:.5s ease-out}.fullscreen[_ngcontent-%COMP%]   .fs-icon[_ngcontent-%COMP%]   .outline[_ngcontent-%COMP%]{fill:#82d44b}.fullscreen[_ngcontent-%COMP%]   .fs-icon[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{fill:#82d44b;transition:fill 1s ease}.fullscreen[_ngcontent-%COMP%]   .fs-icon[_ngcontent-%COMP%]   .tl[_ngcontent-%COMP%]{-webkit-animation:tl 1s ease-in-out;animation:tl 1s ease-in-out}.fullscreen[_ngcontent-%COMP%]   .fs-icon[_ngcontent-%COMP%]   .tl[_ngcontent-%COMP%], .fullscreen[_ngcontent-%COMP%]   .fs-icon[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{-webkit-transform:rotate(0deg);transform:rotate(0deg);-webkit-transform-origin:50%;-moz-transform-origin:50%;-ms-transform-origin:50%;-o-transform-origin:50%;-webkit-transform:50%;transform:50%;transition:.5s ease-out}.fullscreen[_ngcontent-%COMP%]   .fs-icon[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{-webkit-animation:tr 1s ease-in-out;animation:tr 1s ease-in-out}.fullscreen[_ngcontent-%COMP%]   .fs-icon[_ngcontent-%COMP%]   .bl[_ngcontent-%COMP%]{-webkit-animation:bl 1s ease-in-out;animation:bl 1s ease-in-out}.fullscreen[_ngcontent-%COMP%]   .fs-icon[_ngcontent-%COMP%]   .bl[_ngcontent-%COMP%], .fullscreen[_ngcontent-%COMP%]   .fs-icon[_ngcontent-%COMP%]   .br[_ngcontent-%COMP%]{-webkit-transform:rotate(0deg);transform:rotate(0deg);-webkit-transform-origin:50%;-moz-transform-origin:50%;-ms-transform-origin:50%;-o-transform-origin:50%;-webkit-transform:50%;transform:50%;transition:.5s ease-out}.fullscreen[_ngcontent-%COMP%]   .fs-icon[_ngcontent-%COMP%]   .br[_ngcontent-%COMP%]{-webkit-animation:br 1s ease-in-out;animation:br 1s ease-in-out}.fullscreen[_ngcontent-%COMP%]:hover   .fs-icon[_ngcontent-%COMP%]{-webkit-transform:scale(1.1);transform:scale(1.1);transition:.5s ease-out}.fullscreen[_ngcontent-%COMP%]:hover   .fs-icon[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{fill:#098032;transition:fill 1s ease;transition:-webkit-transform .5s ease-out;transition:transform .5s ease-out;transition:transform .5s ease-out,-webkit-transform .5s ease-out}.fullscreen[_ngcontent-%COMP%]:hover   .fs-icon[_ngcontent-%COMP%]   .tl[_ngcontent-%COMP%]{-webkit-transform:translate(-4px,-4px);transform:translate(-4px,-4px)}.fullscreen[_ngcontent-%COMP%]:hover   .fs-icon[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{-webkit-transform:translate(4px,-4px);transform:translate(4px,-4px)}.fullscreen[_ngcontent-%COMP%]:hover   .fs-icon[_ngcontent-%COMP%]   .bl[_ngcontent-%COMP%]{-webkit-transform:translate(-4px,4px);transform:translate(-4px,4px)}.fullscreen[_ngcontent-%COMP%]:hover   .fs-icon[_ngcontent-%COMP%]   .br[_ngcontent-%COMP%]{-webkit-transform:translate(4px,4px);transform:translate(4px,4px)}.fullscreen[_ngcontent-%COMP%]:active   .fs-icon[_ngcontent-%COMP%]{-webkit-transform:scale(1.1);transform:scale(1.1);transition:.5s ease-out}.fullscreen[_ngcontent-%COMP%]:active   .fs-icon[_ngcontent-%COMP%]   .arrow[_ngcontent-%COMP%]{fill:#82d44b;transition:fill 1s ease;opacity:0}.fullscreen[_ngcontent-%COMP%]:active   .fs-icon[_ngcontent-%COMP%]   .tl[_ngcontent-%COMP%]{-webkit-transform:translate(-60px,-60px);transform:translate(-60px,-60px);transition:.2s ease-out}.fullscreen[_ngcontent-%COMP%]:active   .fs-icon[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{-webkit-transform:translate(60px,-60px);transform:translate(60px,-60px);transition:.2s ease-out}.fullscreen[_ngcontent-%COMP%]:active   .fs-icon[_ngcontent-%COMP%]   .bl[_ngcontent-%COMP%]{-webkit-transform:translate(-60px,60px);transform:translate(-60px,60px);transition:.2s ease-out}.fullscreen[_ngcontent-%COMP%]:active   .fs-icon[_ngcontent-%COMP%]   .br[_ngcontent-%COMP%]{-webkit-transform:translate(60px,60px);transform:translate(60px,60px);transition:.2s ease-out}.fullscreen.full[_ngcontent-%COMP%]   .fs-icon[_ngcontent-%COMP%]   .br[_ngcontent-%COMP%], .fullscreen.full[_ngcontent-%COMP%]   .fs-icon[_ngcontent-%COMP%]   .tl[_ngcontent-%COMP%]{-webkit-transform:rotate(-180deg);transform:rotate(-180deg);-webkit-transform-origin:50%;-moz-transform-origin:50%;-ms-transform-origin:50%;-o-transform-origin:50%;-webkit-transform:50%;transform:50%;transition:.5s ease-out}.fullscreen.full[_ngcontent-%COMP%]   .fs-icon[_ngcontent-%COMP%]   .bl[_ngcontent-%COMP%], .fullscreen.full[_ngcontent-%COMP%]   .fs-icon[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{-webkit-transform:rotate(180deg);transform:rotate(180deg);-webkit-transform-origin:50%;-moz-transform-origin:50%;-ms-transform-origin:50%;-o-transform-origin:50%;-webkit-transform:50%;transform:50%;transition:.5s ease-out}.fullscreen.full[_ngcontent-%COMP%]:hover   .fs-icon[_ngcontent-%COMP%]{-webkit-transform:scale(1);transform:scale(1)}.fullscreen.full[_ngcontent-%COMP%]:hover   .fs-icon[_ngcontent-%COMP%]   .tl[_ngcontent-%COMP%]{-webkit-transform:translate(-8px,-8px);transform:translate(-8px,-8px)}.fullscreen.full[_ngcontent-%COMP%]:hover   .fs-icon[_ngcontent-%COMP%]   .tr[_ngcontent-%COMP%]{-webkit-transform:translate(8px,-8px);transform:translate(8px,-8px)}.fullscreen.full[_ngcontent-%COMP%]:hover   .fs-icon[_ngcontent-%COMP%]   .bl[_ngcontent-%COMP%]{-webkit-transform:translate(-8px,8px);transform:translate(-8px,8px)}.fullscreen.full[_ngcontent-%COMP%]:hover   .fs-icon[_ngcontent-%COMP%]   .br[_ngcontent-%COMP%]{-webkit-transform:translate(8px,8px);transform:translate(8px,8px)}@-webkit-keyframes tl{0%{-webkit-transform:translate(8px,8px);transform:translate(8px,8px);opacity:0}15%{opacity:0}40%{opacity:1}}@keyframes tl{0%{-webkit-transform:translate(8px,8px);transform:translate(8px,8px);opacity:0}15%{opacity:0}40%{opacity:1}}@-webkit-keyframes tr{0%{-webkit-transform:translate(-8px,8px);transform:translate(-8px,8px);opacity:0}15%{opacity:0}40%{opacity:1}}@keyframes tr{0%{-webkit-transform:translate(-8px,8px);transform:translate(-8px,8px);opacity:0}15%{opacity:0}40%{opacity:1}}@-webkit-keyframes bl{0%{-webkit-transform:translate(8px,-8px);transform:translate(8px,-8px);opacity:0}15%{opacity:0}40%{opacity:1}}@keyframes bl{0%{-webkit-transform:translate(8px,-8px);transform:translate(8px,-8px);opacity:0}15%{opacity:0}40%{opacity:1}}@-webkit-keyframes br{0%{-webkit-transform:translate(-8px,-8px);transform:translate(-8px,-8px);opacity:0}15%{opacity:0}40%{opacity:1}}@keyframes br{0%{-webkit-transform:translate(-8px,-8px);transform:translate(-8px,-8px);opacity:0}15%{opacity:0}40%{opacity:1}}"]},"7yQW":function(t,n,i){"use strict";function e(t){return s["ɵvid"](0,[(t()(),s["ɵeld"](0,null,null,23,"a",[["class","list-group-item list-group-item-action flex-column align-items-start active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,n,i){var e=!0;if("click"===n){e=!1!==s["ɵnov"](t,1).onClick(i.button,i.ctrlKey,i.metaKey,i.shiftKey)&&e}return e},null,null)),s["ɵdid"](671744,null,0,l.y,[l.c,l.a,a.LocationStrategy],{routerLink:[0,"routerLink"]},null),s["ɵpad"](2),(t()(),s["ɵted"](null,["\n                        "])),(t()(),s["ɵeld"](0,null,null,10,"div",[["class","d-flex w-100 justify-content-between"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n                            "])),(t()(),s["ɵeld"](0,null,null,1,"h5",[["class","mb-1"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["",""])),(t()(),s["ɵted"](null,["\n                            "])),(t()(),s["ɵeld"](0,null,null,4,"small",[],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n                                "])),(t()(),s["ɵeld"](0,null,null,1,"button",[["class","btn btn-danger btn-sm"],["type","button"]],null,[[null,"click"]],function(t,n,i){var e=!0,o=t.component;if("click"===n){e=!1!==o.removeCourse(i,t.context.$implicit.id)&&e}return e},null,null)),(t()(),s["ɵted"](null,["Удалить"])),(t()(),s["ɵted"](null,["\n                            "])),(t()(),s["ɵted"](null,["\n                        "])),(t()(),s["ɵted"](null,["\n                        "])),(t()(),s["ɵeld"](0,null,null,1,"p",[["class","mb-1"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["",""])),(t()(),s["ɵted"](null,["\n                        "])),(t()(),s["ɵeld"](0,null,null,3,"a",[["class","btn btn-primary btn-sm"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,n,i){var e=!0;if("click"===n){e=!1!==s["ɵnov"](t,20).onClick(i.button,i.ctrlKey,i.metaKey,i.shiftKey)&&e}return e},null,null)),s["ɵdid"](671744,null,0,l.y,[l.c,l.a,a.LocationStrategy],{routerLink:[0,"routerLink"]},null),s["ɵpad"](2),(t()(),s["ɵted"](null,["Редактировать"])),(t()(),s["ɵted"](null,["\n                    "]))],function(t,n){t(n,1,0,t(n,2,0,"course",n.context.$implicit.id)),t(n,20,0,t(n,21,0,"edit",n.context.$implicit.id))},function(t,n){t(n,0,0,s["ɵnov"](n,1).target,s["ɵnov"](n,1).href),t(n,7,0,n.context.$implicit.name),t(n,17,0,n.context.$implicit.description),t(n,19,0,s["ɵnov"](n,20).target,s["ɵnov"](n,20).href)})}function o(t){return s["ɵvid"](0,[(t()(),s["ɵeld"](0,null,null,75,"div",[["class","row"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n    "])),(t()(),s["ɵeld"](0,null,null,72,"div",[["class","col-md-12"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n        "])),(t()(),s["ɵeld"](0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),s["ɵted"](null,["Курсы"])),(t()(),s["ɵted"](null,["\n\n        "])),(t()(),s["ɵeld"](0,null,null,66,"div",[["class","row"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n            "])),(t()(),s["ɵeld"](0,null,null,7,"div",[["class","col-md-6"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n\n                "])),(t()(),s["ɵeld"](0,null,null,4,"div",[["class","list-group"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n                    "])),(t()(),s["ɵand"](16777216,null,null,1,null,e)),s["ɵdid"](802816,null,0,a.NgForOf,[s.ViewContainerRef,s.TemplateRef,s.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(t()(),s["ɵted"](null,["\n                "])),(t()(),s["ɵted"](null,["\n\n            "])),(t()(),s["ɵted"](null,["\n            "])),(t()(),s["ɵeld"](0,null,null,54,"div",[["class","col-md-6"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n                "])),(t()(),s["ɵeld"](0,null,null,1,"h4",[],null,null,null,null,null)),(t()(),s["ɵted"](null,["Добавить"])),(t()(),s["ɵted"](null,["\n\n                "])),(t()(),s["ɵeld"](0,null,null,48,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,n,i){var e=!0,o=t.component;if("submit"===n){e=!1!==s["ɵnov"](t,25).onSubmit(i)&&e}if("reset"===n){e=!1!==s["ɵnov"](t,25).onReset()&&e}if("ngSubmit"===n){e=!1!==o.addCourse()&&e}return e},null,null)),s["ɵdid"](16384,null,0,u.m,[],null,null),s["ɵdid"](16384,null,0,u.n,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),s["ɵprd"](2048,null,u.j,null,[u.n]),s["ɵdid"](16384,null,0,u.o,[u.j],null,null),(t()(),s["ɵted"](null,["\n                    "])),(t()(),s["ɵeld"](0,null,null,16,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n                        "])),(t()(),s["ɵeld"](0,null,null,1,"label",[["class","col-sm-2 col-form-label"],["for","inputName"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["Имя"])),(t()(),s["ɵted"](null,["\n                        "])),(t()(),s["ɵeld"](0,null,null,10,"div",[["class","col-sm-10"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n                            "])),(t()(),s["ɵeld"](0,null,null,7,"input",[["class","form-control"],["id","inputName"],["name","name"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,i){var e=!0,o=t.component;if("input"===n){e=!1!==s["ɵnov"](t,37)._handleInput(i.target.value)&&e}if("blur"===n){e=!1!==s["ɵnov"](t,37).onTouched()&&e}if("compositionstart"===n){e=!1!==s["ɵnov"](t,37)._compositionStart()&&e}if("compositionend"===n){e=!1!==s["ɵnov"](t,37)._compositionEnd(i.target.value)&&e}if("ngModelChange"===n){e=!1!==(o.course.name=i)&&e}return e},null,null)),s["ɵdid"](16384,null,0,u.f,[s.Renderer,s.ElementRef,[2,u.g]],null,null),s["ɵdid"](16384,null,0,u.s,[],{required:[0,"required"]},null),s["ɵprd"](1024,null,u.t,function(t){return[t]},[u.s]),s["ɵprd"](1024,null,u.h,function(t){return[t]},[u.f]),s["ɵdid"](671744,null,0,u.i,[[2,u.j],[2,u.t],[8,null],[2,u.h]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),s["ɵprd"](2048,null,u.k,null,[u.i]),s["ɵdid"](16384,null,0,u.l,[u.k],null,null),(t()(),s["ɵted"](null,["\n                        "])),(t()(),s["ɵted"](null,["\n\n                    "])),(t()(),s["ɵted"](null,["\n                    "])),(t()(),s["ɵeld"](0,null,null,14,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n                        "])),(t()(),s["ɵeld"](0,null,null,1,"label",[["class","col-sm-2 col-form-label"],["for","inputDescription"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["Описание"])),(t()(),s["ɵted"](null,["\n                        "])),(t()(),s["ɵeld"](0,null,null,8,"div",[["class","col-sm-10"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n                            "])),(t()(),s["ɵeld"](0,null,null,5,"input",[["class","form-control"],["id","inputDescription"],["name","description"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,i){var e=!0,o=t.component;if("input"===n){e=!1!==s["ɵnov"](t,55)._handleInput(i.target.value)&&e}if("blur"===n){e=!1!==s["ɵnov"](t,55).onTouched()&&e}if("compositionstart"===n){e=!1!==s["ɵnov"](t,55)._compositionStart()&&e}if("compositionend"===n){e=!1!==s["ɵnov"](t,55)._compositionEnd(i.target.value)&&e}if("ngModelChange"===n){e=!1!==(o.course.description=i)&&e}return e},null,null)),s["ɵdid"](16384,null,0,u.f,[s.Renderer,s.ElementRef,[2,u.g]],null,null),s["ɵprd"](1024,null,u.h,function(t){return[t]},[u.f]),s["ɵdid"](671744,null,0,u.i,[[2,u.j],[8,null],[8,null],[2,u.h]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),s["ɵprd"](2048,null,u.k,null,[u.i]),s["ɵdid"](16384,null,0,u.l,[u.k],null,null),(t()(),s["ɵted"](null,["\n                        "])),(t()(),s["ɵted"](null,["\n                    "])),(t()(),s["ɵted"](null,["\n                    "])),(t()(),s["ɵeld"](0,null,null,7,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n                        "])),(t()(),s["ɵeld"](0,null,null,4,"div",[["class","offset-sm-2 col-sm-10"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n                            "])),(t()(),s["ɵeld"](0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["Добавить"])),(t()(),s["ɵted"](null,["\n                        "])),(t()(),s["ɵted"](null,["\n                    "])),(t()(),s["ɵted"](null,["\n                "])),(t()(),s["ɵted"](null,["\n            "])),(t()(),s["ɵted"](null,["\n        "])),(t()(),s["ɵted"](null,["\n    "])),(t()(),s["ɵted"](null,["\n"]))],function(t,n){var i=n.component;t(n,14,0,i.courses),t(n,38,0,""),t(n,41,0,"name",i.course.name),t(n,57,0,"description",i.course.description)},function(t,n){t(n,23,0,s["ɵnov"](n,27).ngClassUntouched,s["ɵnov"](n,27).ngClassTouched,s["ɵnov"](n,27).ngClassPristine,s["ɵnov"](n,27).ngClassDirty,s["ɵnov"](n,27).ngClassValid,s["ɵnov"](n,27).ngClassInvalid,s["ɵnov"](n,27).ngClassPending),t(n,36,0,s["ɵnov"](n,38).required?"":null,s["ɵnov"](n,43).ngClassUntouched,s["ɵnov"](n,43).ngClassTouched,s["ɵnov"](n,43).ngClassPristine,s["ɵnov"](n,43).ngClassDirty,s["ɵnov"](n,43).ngClassValid,s["ɵnov"](n,43).ngClassInvalid,s["ɵnov"](n,43).ngClassPending),t(n,54,0,s["ɵnov"](n,59).ngClassUntouched,s["ɵnov"](n,59).ngClassTouched,s["ɵnov"](n,59).ngClassPristine,s["ɵnov"](n,59).ngClassDirty,s["ɵnov"](n,59).ngClassValid,s["ɵnov"](n,59).ngClassInvalid,s["ɵnov"](n,59).ngClassPending)})}function r(t){return s["ɵvid"](0,[(t()(),s["ɵeld"](0,null,null,1,"courses",[],null,null,null,o,d)),s["ɵdid"](114688,null,0,h.a,[f.a],null,null)],function(t,n){t(n,1,0)},null)}var s=i("3j3K"),l=i("5oXY"),a=i("2Je8"),h=i("K3+O"),u=i("NVOs"),f=i("F7VT");i.d(n,"a",function(){return p});var c=[],d=s["ɵcrt"]({encapsulation:2,styles:c,data:{}}),p=s["ɵccf"]("courses",h.a,r,{},{},[])},"95fO":function(t,n,i){"use strict";i.d(n,"a",function(){return e});var e=function(){function t(t){void 0===t&&(t={}),this.palette=[],this.diagram={class:"go.TreeModel",nodeDataArray:[]},Object.assign(this,t)}return t}()},"C/EC":function(t,n,i){"use strict";i.d(n,"a",function(){return e});var e=function(){function t(t){void 0===t&&(t={}),this.name="",this.answers=[],Object.assign(this,t)}return t}()},C6Wf:function(t,n,i){"use strict";var e=i("xAJs"),o=(i.n(e),i("lHWG")),r=i("atbp");i.d(n,"a",function(){return s});var s=function(){function t(t){this.http=t,this.prefix="lessons/",this.api=""+this.http.adminPrefix+this.prefix}return t.prototype.lesson=function(t){return this.http.get(""+this.api+t).map(function(t){return new r.a(t.json().data)})},t.prototype.all=function(t){return this.http.get(this.api+"course/"+t).map(function(t){var n=[];return t.json().data.map(function(t){n.push(new r.a(t))}),n})},t.prototype.store=function(t){return this.http.post(""+this.api,t).map(function(t){return new r.a(t.json().data)})},t.prototype.update=function(t){return this.http.patch(""+this.api+t.id,t).map(function(t){return t.json()})},t.prototype.delete=function(t){return this.http.delete(""+this.api+t).map(function(t){return t.json()})},t.ctorParameters=function(){return[{type:o.a}]},t}()},CWXz:function(t,n,i){"use strict";function e(t){return a["ɵvid"](0,[(t()(),a["ɵeld"](0,null,null,26,"li",[],null,null,null,null,null)),(t()(),a["ɵted"](null,["\n                            "])),(t()(),a["ɵeld"](0,null,null,1,"p",[],null,null,null,null,null)),(t()(),a["ɵted"](null,["Ответ(",") - ",""])),(t()(),a["ɵted"](null,["\n                            "])),(t()(),a["ɵeld"](0,null,null,20,"div",[["class","row"]],null,null,null,null,null)),(t()(),a["ɵted"](null,["\n                                "])),(t()(),a["ɵeld"](0,null,null,12,"div",[["class","col-md-10"]],null,null,null,null,null)),a["ɵdid"](278528,null,0,h.NgClass,[a.IterableDiffers,a.KeyValueDiffers,a.ElementRef,a.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),a["ɵpod"](["has-success"]),(t()(),a["ɵted"](null,["\n                                    "])),(t()(),a["ɵeld"](0,null,null,7,"input",[["class","form-control"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,i){var e=!0;if("input"===n){e=!1!==a["ɵnov"](t,14)._handleInput(i.target.value)&&e}if("blur"===n){e=!1!==a["ɵnov"](t,14).onTouched()&&e}if("compositionstart"===n){e=!1!==a["ɵnov"](t,14)._compositionStart()&&e}if("compositionend"===n){e=!1!==a["ɵnov"](t,14)._compositionEnd(i.target.value)&&e}if("ngModelChange"===n){e=!1!==(t.context.$implicit.name=i)&&e}return e},null,null)),a["ɵdid"](278528,null,0,h.NgClass,[a.IterableDiffers,a.KeyValueDiffers,a.ElementRef,a.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),a["ɵpod"](["form-control-success"]),a["ɵdid"](16384,null,0,u.f,[a.Renderer,a.ElementRef,[2,u.g]],null,null),a["ɵprd"](1024,null,u.h,function(t){return[t]},[u.f]),a["ɵdid"](671744,null,0,u.i,[[2,u.j],[8,null],[8,null],[2,u.h]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),a["ɵprd"](2048,null,u.k,null,[u.i]),a["ɵdid"](16384,null,0,u.l,[u.k],null,null),(t()(),a["ɵted"](null,["\n                                "])),(t()(),a["ɵted"](null,["\n                                "])),(t()(),a["ɵeld"](0,null,null,3,"div",[["class","col-md-2"]],null,null,null,null,null)),(t()(),a["ɵted"](null,["\n                                    "])),(t()(),a["ɵeld"](0,null,null,0,"input",[["type","radio"]],[[8,"checked",0]],[[null,"click"]],function(t,n,i){var e=!0,o=t.component;if("click"===n){e=!1!==o.setRightAnswer(t.parent.context.$implicit,t.context.$implicit)&&e}return e},null,null)),(t()(),a["ɵted"](null,["\n                                "])),(t()(),a["ɵted"](null,["\n                            "])),(t()(),a["ɵted"](null,["\n                        "]))],function(t,n){t(n,8,0,"col-md-10",t(n,9,0,n.parent.context.$implicit.hash===n.context.$implicit.hash)),t(n,12,0,"form-control",t(n,13,0,n.parent.context.$implicit.hash===n.context.$implicit.hash)),t(n,16,0,a["ɵinlineInterpolate"](2,"question-",n.parent.context.index,"-answer-",n.context.index,""),n.context.$implicit.name)},function(t,n){t(n,3,0,n.context.index+1,n.context.$implicit.name),t(n,11,0,a["ɵnov"](n,18).ngClassUntouched,a["ɵnov"](n,18).ngClassTouched,a["ɵnov"](n,18).ngClassPristine,a["ɵnov"](n,18).ngClassDirty,a["ɵnov"](n,18).ngClassValid,a["ɵnov"](n,18).ngClassInvalid,a["ɵnov"](n,18).ngClassPending),t(n,23,0,n.parent.context.$implicit.hash===n.context.$implicit.hash)})}function o(t){return a["ɵvid"](0,[(t()(),a["ɵeld"](0,null,null,26,"li",[["class","row"]],null,null,null,null,null)),(t()(),a["ɵted"](null,["\n\n                "])),(t()(),a["ɵeld"](0,null,null,14,"div",[["class","col-md-12"]],null,null,null,null,null)),(t()(),a["ɵted"](null,["\n\n                    "])),(t()(),a["ɵeld"](0,null,null,11,"div",[["class","form-group"]],null,null,null,null,null)),(t()(),a["ɵted"](null,["\n                        "])),(t()(),a["ɵeld"](0,null,null,1,"h6",[],null,null,null,null,null)),(t()(),a["ɵted"](null,["Вопрос(",") - ",""])),(t()(),a["ɵted"](null,["\n                        "])),(t()(),a["ɵeld"](0,null,null,5,"input",[["class","form-control"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,i){var e=!0;if("input"===n){e=!1!==a["ɵnov"](t,10)._handleInput(i.target.value)&&e}if("blur"===n){e=!1!==a["ɵnov"](t,10).onTouched()&&e}if("compositionstart"===n){e=!1!==a["ɵnov"](t,10)._compositionStart()&&e}if("compositionend"===n){e=!1!==a["ɵnov"](t,10)._compositionEnd(i.target.value)&&e}if("ngModelChange"===n){e=!1!==(t.context.$implicit.name=i)&&e}return e},null,null)),a["ɵdid"](16384,null,0,u.f,[a.Renderer,a.ElementRef,[2,u.g]],null,null),a["ɵprd"](1024,null,u.h,function(t){return[t]},[u.f]),a["ɵdid"](671744,null,0,u.i,[[2,u.j],[8,null],[8,null],[2,u.h]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),a["ɵprd"](2048,null,u.k,null,[u.i]),a["ɵdid"](16384,null,0,u.l,[u.k],null,null),(t()(),a["ɵted"](null,["\n                    "])),(t()(),a["ɵted"](null,["\n                "])),(t()(),a["ɵted"](null,["\n\n                "])),(t()(),a["ɵeld"](0,null,null,7,"div",[["class","col-md-9 col-md-offset-3"]],null,null,null,null,null)),(t()(),a["ɵted"](null,["\n                    "])),(t()(),a["ɵeld"](0,null,null,4,"ul",[],null,null,null,null,null)),(t()(),a["ɵted"](null,["\n                        "])),(t()(),a["ɵand"](16777216,null,null,1,null,e)),a["ɵdid"](802816,null,0,h.NgForOf,[a.ViewContainerRef,a.TemplateRef,a.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(t()(),a["ɵted"](null,["\n                    "])),(t()(),a["ɵted"](null,["\n                "])),(t()(),a["ɵted"](null,["\n\n            "]))],function(t,n){t(n,12,0,a["ɵinlineInterpolate"](1,"question-",n.context.index,""),n.context.$implicit.name),t(n,23,0,n.context.$implicit.answers)},function(t,n){t(n,7,0,n.context.index+1,n.context.$implicit.name),t(n,9,0,a["ɵnov"](n,14).ngClassUntouched,a["ɵnov"](n,14).ngClassTouched,a["ɵnov"](n,14).ngClassPristine,a["ɵnov"](n,14).ngClassDirty,a["ɵnov"](n,14).ngClassValid,a["ɵnov"](n,14).ngClassInvalid,a["ɵnov"](n,14).ngClassPending)})}function r(t){return a["ɵvid"](0,[(t()(),a["ɵeld"](0,null,null,4,"ul",[],null,null,null,null,null)),(t()(),a["ɵted"](null,["\n            "])),(t()(),a["ɵand"](16777216,null,null,1,null,o)),a["ɵdid"](802816,null,0,h.NgForOf,[a.ViewContainerRef,a.TemplateRef,a.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(t()(),a["ɵted"](null,["\n\n        "]))],function(t,n){t(n,3,0,n.component.test.questions)},null)}function s(t){return a["ɵvid"](0,[(t()(),a["ɵeld"](0,null,null,17,"div",[["class","col-md-12"]],null,null,null,null,null)),(t()(),a["ɵted"](null,["\n    "])),(t()(),a["ɵeld"](0,null,null,14,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,n,i){var e=!0,o=t.component;if("submit"===n){e=!1!==a["ɵnov"](t,4).onSubmit(i)&&e}if("reset"===n){e=!1!==a["ɵnov"](t,4).onReset()&&e}if("ngSubmit"===n){e=!1!==o.save()&&e}return e},null,null)),a["ɵdid"](16384,null,0,u.m,[],null,null),a["ɵdid"](16384,null,0,u.n,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),a["ɵprd"](2048,null,u.j,null,[u.n]),a["ɵdid"](16384,null,0,u.o,[u.j],null,null),(t()(),a["ɵted"](null,["\n\n        "])),(t()(),a["ɵand"](16777216,null,null,1,null,r)),a["ɵdid"](16384,null,0,h.NgIf,[a.ViewContainerRef,a.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),a["ɵted"](null,["\n\n        "])),(t()(),a["ɵeld"](0,null,null,4,"div",[["class","row"]],null,null,null,null,null)),(t()(),a["ɵted"](null,["\n            "])),(t()(),a["ɵeld"](0,null,null,1,"button",[["class","btn btn-primary btn-block"],["type","submit"]],null,null,null,null,null)),(t()(),a["ɵted"](null,["Сохранить"])),(t()(),a["ɵted"](null,["\n        "])),(t()(),a["ɵted"](null,["\n\n    "])),(t()(),a["ɵted"](null,["\n\n"]))],function(t,n){t(n,9,0,n.component.test)},function(t,n){t(n,2,0,a["ɵnov"](n,6).ngClassUntouched,a["ɵnov"](n,6).ngClassTouched,a["ɵnov"](n,6).ngClassPristine,a["ɵnov"](n,6).ngClassDirty,a["ɵnov"](n,6).ngClassValid,a["ɵnov"](n,6).ngClassInvalid,a["ɵnov"](n,6).ngClassPending)})}function l(t){return a["ɵvid"](0,[(t()(),a["ɵeld"](0,null,null,1,"test",[],null,null,null,s,v)),a["ɵdid"](245760,null,0,f.a,[c.a,d.a,p.a],null,null)],function(t,n){t(n,1,0)},null)}var a=i("3j3K"),h=i("2Je8"),u=i("NVOs"),f=i("0LsZ"),c=i("TemG"),d=i("aXs8"),p=i("5oXY");i.d(n,"a",function(){return g});var y=[],v=a["ɵcrt"]({encapsulation:2,styles:y,data:{}}),g=a["ɵccf"]("test",f.a,l,{},{},[])},D0P3:function(t,n,i){"use strict";var e=i("e7xV"),o=i("2Khz"),r=i("aXs8");i.d(n,"a",function(){return s});var s=function(){function t(t,n){this.TheoryService=t,this.UnitService=n,this.theory=new e.a}return t.prototype.ngOnInit=function(){var t=this;this.subscription=this.UnitService.unit$.subscribe(function(n){t.theory=n.theory?n.theory:new e.a,t.theory.unit_id=n.id}),this.UnitService.callEvent("theory")},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.onSelectFile=function(t){this.theory.file=t.srcElement.files[0]},t.prototype.save=function(){var t=this;this.TheoryService.store(this.theory).subscribe(function(n){n.then(function(n){t.UnitService.pushTheory(n),t.theory=n})})},t.ctorParameters=function(){return[{type:o.a},{type:r.a}]},t}()},DdRN:function(t,n,i){"use strict";var e=i("xAJs"),o=(i.n(e),i("jo6L")),r=i("95fO"),s=i("/Drs"),l=i("5oXY"),a=i("aXs8");i.d(n,"a",function(){return h});var h=function(){function t(t,n,i){this.SchemaService=t,this.route=n,this.UnitService=i,this.types=[],this.items=[],this.types=s.a,this.schema=new r.a}return t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe(),this.itemSub.unsubscribe()},t.prototype.ngOnInit=function(){var t=this;this.subscription=this.UnitService.unit$.subscribe(function(n){t.schema=n.schema?n.schema:new r.a,t.type=t.schema.type?t.schema.type:"WBSOBS",t.initDiagram()}),this.UnitService.callEvent("schema")},t.prototype.fullscreen=function(){var t=this.fullScreen.nativeElement;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()},t.prototype.save=function(){var t=this,n=this.diagram.getModel();this.schema.palette=n.palette,this.schema.diagram=n.diagram,this.schema.type=this.type,this.schema.unit_id=+this.route.parent.params.value.id,this.SchemaService.store(this.schema).subscribe(function(n){t.UnitService.pushSchema(n),t.schema=n})},t.prototype.initDiagram=function(){var t=this,n=s.a.findIndex(function(n,i){return t.type===n.value});this.diagram=new s.a[n].class(this.div),this.itemSub=this.diagram.items$.subscribe(function(n){t.items=n}),this.diagram.initDiagram(this.schema)},t.prototype.onSelectType=function(){this.type&&this.initDiagram()},t.ctorParameters=function(){return[{type:o.a},{type:l.a},{type:a.a}]},t}()},Ef0u:function(t,n,i){"use strict";var e=i("5oXY"),o=i("ylOH"),r=i("F7VT");i.d(n,"a",function(){return s});var s=function(){function t(t,n,i){this.CourseService=t,this.route=n,this.router=i,this.course=new o.a}return t.prototype.ngOnInit=function(){var t=this;this.route.params.subscribe(function(n){t.CourseService.course(+n.id).subscribe(function(n){t.course=n})})},t.prototype.update=function(){var t=this;this.CourseService.update(this.course).subscribe(function(){t.router.navigate(["/panel/courses"])})},t.ctorParameters=function(){return[{type:r.a},{type:e.a},{type:e.c}]},t}()},F7VT:function(t,n,i){"use strict";var e=i("xAJs"),o=(i.n(e),i("lHWG")),r=i("ylOH");i.d(n,"a",function(){return s});var s=function(){function t(t){this.http=t,this.prefix="courses/"}return t.prototype.course=function(t){return this.http.get(""+this.http.adminPrefix+this.prefix+t).map(function(t){return new r.a(t.json().data)})},t.prototype.all=function(){return this.http.get(""+this.http.adminPrefix+this.prefix).map(function(t){return t.json()})},t.prototype.store=function(t){return this.http.post(""+this.http.adminPrefix+this.prefix,t).map(function(t){return t.json()})},t.prototype.update=function(t){return this.http.patch(""+this.http.adminPrefix+this.prefix+t.id,t).map(function(t){return t.json()})},t.prototype.delete=function(t){return this.http.delete(""+this.http.adminPrefix+this.prefix+t).map(function(t){return t.json()})},t.ctorParameters=function(){return[{type:o.a}]},t}()},FIYr:function(t,n,i){"use strict";var e=i("ylOH"),o=i("atbp"),r=i("C6Wf"),s=i("F7VT"),l=i("5oXY");i.d(n,"a",function(){return a});var a=function(){function t(t,n,i){this.CourseService=t,this.LessonService=n,this.route=i,this.course=new e.a,this.lesson=new o.a,this.lessons=[]}return t.prototype.ngOnInit=function(){var t=this;this.route.params.subscribe(function(n){var i=+n.id;t.CourseService.course(i).subscribe(function(n){t.course=n,t.lesson.cource_id=t.course.id}),t.LessonService.all(i).subscribe(function(n){t.lessons=n})})},t.prototype.addLesson=function(){var t=this;this.LessonService.store(this.lesson).subscribe(function(n){t.lessons.push(n)})},t.prototype.removeLesson=function(t,n){var i=this;t.preventDefault(),t.stopPropagation(),this.LessonService.delete(n).subscribe(function(){i.lessons.map(function(t,e){t.id===n&&i.lessons.splice(e,1)})})},t.ctorParameters=function(){return[{type:s.a},{type:r.a},{type:l.a}]},t}()},FLb2:function(t,n,i){"use strict";var e=i("5oXY"),o=i("2Je8"),r=i("1+LI"),s=i("aXs8");i.d(n,"a",function(){return l});var l=function(){function t(t,n,i){this.UnitService=t,this.route=n,this.location=i,this.unit=new r.a}return t.prototype.ngOnInit=function(){var t=this;this.route.params.subscribe(function(n){t.UnitService.unit(+n.id).subscribe(function(n){t.unit=n})})},t.prototype.update=function(){var t=this;this.UnitService.update(this.unit).subscribe(function(){t.location.back()})},t.ctorParameters=function(){return[{type:s.a},{type:e.a},{type:o.Location}]},t}()},"K3+O":function(t,n,i){"use strict";var e=i("xAJs"),o=(i.n(e),i("F7VT")),r=i("ylOH");i.d(n,"a",function(){return s});var s=function(){function t(t){this.CourseService=t,this.courses=[],this.course=new r.a}return t.prototype.ngOnInit=function(){var t=this;this.CourseService.all().subscribe(function(n){t.courses=n.data})},t.prototype.addCourse=function(){var t=this;this.CourseService.store(this.course).subscribe(function(n){t.courses.push(n.data),t.course=new r.a})},t.prototype.removeCourse=function(t,n){var i=this;t.preventDefault(),t.stopPropagation(),this.CourseService.delete(n).subscribe(function(){i.courses.map(function(t,e){t.id===n&&i.courses.splice(e,1)})})},t.ctorParameters=function(){return[{type:o.a}]},t}()},P2Rt:function(t,n,i){"use strict";var e=i("FIYr"),o=i("ge7+"),r=i("cm73"),s=i("D0P3"),l=i("0LsZ"),a=i("K3+O"),h=i("Ef0u"),u=i("nakI"),f=i("FLb2"),c=i("DdRN");i.d(n,"a",function(){return d});var d=(a.a,h.a,e.a,u.a,o.a,f.a,r.a,s.a,c.a,l.a,function(){function t(){}return t}())},PFUz:function(t,n){!function(n){function i(t,n,i){Yh.mc(this),this.XB=t,this.Rb=n,this.XG=i}function e(){this.VB=[]}function o(){}function r(t){void 0===t&&(t=42),this.seed=t,this.sy=48271,this.Su=2147483647,this.HB=this.Su/this.sy,this.EG=this.Su%this.sy,this.DG=1/this.Su,this.random()}function s(){}function l(t){this.key=-1,this.value=t}function a(t,n){this.jl=t,this.kl=n,this.Uu=!1}function h(t){this.vc=t,this.Xh=null,t.Pb=null,this.Ta=t.F,this.uc=-1}function u(t){this.vc=t,t.Mi=null,this.Ta=t.F,this.uc=t.n.length}function f(t){Yh.mc(this),this.Q=!1,this.n=[],this.F=0,this.Mi=this.Pb=null,void 0===t||null===t?this.ma=null:"string"==typeof t?"object"===t||"string"===t||"number"===t||"boolean"===t||"function"===t?this.ma=t:Yh.Ea(t,"the string 'object', 'number', 'string', 'boolean', or 'function'","List constructor: type"):"function"==typeof t?this.ma=t===Object?"object":t===String?"string":t===Number?"number":t===Boolean?"boolean":t===Function?"function":t:Yh.Ea(t,"null, a primitive type name, or a class type","List constructor: type")}function c(t){this.Zh=t,t.Pb=null,this.Ta=t.F,this.Wa=null}function d(t){Yh.mc(this),this.Q=!1,void 0===t||null===t?this.ma=null:"string"==typeof t?"object"===t||"string"===t||"number"===t?this.ma=t:Yh.Ea(t,"the string 'object', 'number' or 'string'","Set constructor: type"):"function"==typeof t?this.ma=t===Object?"object":t===String?"string":t===Number?"number":t:Yh.Ea(t,"null, a primitive type name, or a class type","Set constructor: type"),this.od={},this.nd=0,this.Pb=null,this.F=0,this.Sh=this.Ca=null}function p(t){this.Fa=t,this.Ta=t.F,this.Wa=null}function y(t){Yh.mc(this),this.Q=!0,this.Fa=t}function v(t){this.Fa=t,t.Ni=null,this.Ta=t.F,this.Wa=null}function g(t,n){this.key=t,this.value=n,this.ip=this.Ya=null}function m(t){this.Fa=t,t.Pb=null,this.Ta=t.F,this.Wa=null}function b(t,n){Yh.mc(this),this.Q=!1,void 0===t||null===t?this.Rh=null:"string"==typeof t?"object"===t||"string"===t||"number"===t?this.Rh=t:Yh.Ea(t,"the string 'object', 'number' or 'string'","Map constructor: keytype"):"function"==typeof t?this.Rh=t===Object?"object":t===String?"string":t===Number?"number":t:Yh.Ea(t,"null, a primitive type name, or a class type","Map constructor: keytype"),void 0===n||null===n?this.pt=null:"string"==typeof n?"object"===n||"string"===n||"boolean"===n||"number"===n||"function"===n?this.pt=n:Yh.Ea(n,"the string 'object', 'number', 'string', 'boolean', or 'function'","Map constructor: valtype"):"function"==typeof n?this.pt=n===Object?"object":n===String?"string":n===Number?"number":n===Boolean?"boolean":n===Function?"function":n:Yh.Ea(n,"null, a primitive type name, or a class type","Map constructor: valtype"),this.od={},this.nd=0,this.Ni=this.Pb=null,this.F=0,this.Sh=this.Ca=null}function x(t,n){void 0===t?this.y=this.x=0:(this.x=t,this.y=n)}function w(t,n){if(0===t)return 0<n?90:0>n?270:0;if(0===n)return 0<t?0:180;if(isNaN(t)||isNaN(n))return 0;var i=180*Math.atan(Math.abs(n/t))/Math.PI;return 0>t?i=0>n?i+180:180-i:0>n&&(i=360-i),i}function k(t,n){return n.mi(t),t}function M(t,n){void 0===t?this.height=this.width=0:(this.width=t,this.height=n)}function P(t,n,i,e){void 0===t?this.height=this.width=this.y=this.x=0:t instanceof x?n instanceof x?(this.x=Math.min(t.x,n.x),this.y=Math.min(t.y,n.y),this.width=Math.abs(t.x-n.x),this.height=Math.abs(t.y-n.y)):n instanceof M?(this.x=t.x,this.y=t.y,this.width=n.width,this.height=n.height):Yh.k("Incorrect arguments supplied to Rect constructor"):(this.x=t,this.y=n,this.width=i,this.height=e)}function T(t,n,i){t.width=n,t.height=i}function S(t,n){return X(t.x,n.x)&&X(t.y,n.y)&&X(t.width,n.width)&&X(t.height,n.height)}function C(t,n,i,e,o){var r=t.width;return i+o<=-r?(t.x+=r/2,t.width=0):(t.x-=o,t.width+=i+o),i=t.height,n+e<=-i?(t.y+=i/2,t.height=0):(t.y-=n,t.height+=n+e),t}function N(t,n,i,e,o){var r=Math.max(t.x,n),s=Math.max(t.y,i);return n=Math.min(t.x+t.width,n+e),i=Math.min(t.y+t.height,i+o),t.x=r,t.y=s,t.width=Math.max(0,n-r),t.height=Math.max(0,i-s),t}function j(t,n){var i=t.width,e=n.width+10+10,o=t.x,r=n.x-10;return!(o>e+r||r>i+o)&&(i=t.height,e=n.height+10+10,o=t.y,r=n.y-10,!(o>e+r||r>i+o))}function L(t,n,i,e,o){var r=Math.min(t.x,n),s=Math.min(t.y,i);return n=Math.max(t.x+t.width,n+e),i=Math.max(t.y+t.height,i+o),t.x=r,t.y=s,t.width=n-r,t.height=i-s,t}function D(t,n,i,e){void 0===t?this.left=this.bottom=this.right=this.top=0:void 0===n?this.left=this.bottom=this.right=this.top=t:void 0===i?(e=n,this.top=t,this.right=n,this.bottom=t,this.left=e):void 0!==e?(this.top=t,this.right=n,this.bottom=i,this.left=e):Yh.k("Invalid arguments to Margin constructor")}function A(){this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0}function F(t,n,i,e){void 0===t?this.offsetY=this.offsetX=this.y=this.x=0:(void 0===n&&(n=0),void 0===i&&(i=0),void 0===e&&(e=0),this.x=t,this.y=n,this.offsetX=i,this.offsetY=e)}function O(t,n){return t.x=NaN,t.y=NaN,t.offsetX=n,t}function B(){this.Tb=[1,0,0,1,0,0]}function q(t){this.type=t,this.r2=this.y2=this.x2=this.r1=this.y1=this.x1=0,this.pE=[],this.pattern=null}function z(t,n,i){this.fillStyle="#000000",this.font="10px sans-serif",this.globalAlpha=1,this.lineCap="butt",this.In=0,this.lineJoin="miter",this.lineWidth=1,this.miterLimit=10,this.shadowBlur=0,this.shadowColor="rgba(0, 0, 0, 0)",this.shadowOffsetY=this.shadowOffsetX=0,this.strokeStyle="#000000",this.textAlign="start",this.Ip=!1,this.Cg=this.Ys=this.Xs=0,this.document=n||document,this.EE=i,this.Ex=null,this.path=[],this.vh=new B,this.stack=[],this.xf=[],this.hx=t,this.dJ="http://www.w3.org/2000/svg",this.width=this.hx.width,this.height=this.hx.height,this.hm=E(this,"svg",{width:this.width+"px",height:this.height+"px",XL:"0 0 "+this.hx.width+" "+this.hx.height}),this.hm.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),this.hm.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),K(this,1,0,0,1,0,0),t=Yh.nm++,n=E(this,"clipPath",{id:"mainClip"+t}),n.appendChild(E(this,"rect",{x:0,y:0,width:this.width,height:this.height})),this.hm.appendChild(n),this.xf[0].setAttributeNS(null,"clip-path","url(#mainClip"+t+")")}function E(t,n,i,e){if(t=t.document.createElementNS(t.dJ,n),Yh.Qa(i))for(var o in i)t.setAttributeNS("href"===o?"http://www.w3.org/1999/xlink":"",o,i[o]);return void 0!==e&&(t.textContent=e),t}function I(t,n,i,e,o){1!==t.globalAlpha&&(i.opacity=t.globalAlpha),"fill"===n?(t.fillStyle instanceof q?i.fill=R(t,t.fillStyle):(/^rgba\(/.test(t.fillStyle)&&(n=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.fillStyle),i.fill="rgb("+n[1]+","+n[2]+","+n[3]+")",i["fill-opacity"]=n[4]),i.fill=t.fillStyle),i.stroke="none"):"stroke"===n&&(i.fill="none",t.strokeStyle instanceof q?i.stroke=R(t,t.strokeStyle):(/^rgba\(/.test(t.strokeStyle)&&(n=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(t.strokeStyle),i.stroke="rgb("+n[1]+","+n[2]+","+n[3]+")",i["stroke-opacity"]=n[4]),i.stroke=t.strokeStyle),i["stroke-width"]=t.lineWidth,i["stroke-linecap"]=t.lineCap,i["stroke-linejoin"]=t.lineJoin,i["stroke-miterlimit"]=t.miterLimit),t=e.Tb,t="matrix("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")",void 0!==o&&(t+=o),i.transform=t}function R(t,n){var i,e="GRAD"+Yh.nm++;if("linear"===n.type)i=E(t,"linearGradient",{x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2,id:e,gradientUnits:"userSpaceOnUse"});else if("radial"===n.type)i=E(t,"radialGradient",{x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2,r1:n.r1,r2:n.r2,id:e});else{if("pattern"!==n.type)throw Error("invalid gradient");var o=n.pattern;i={width:o.width,height:o.height,id:e,patternUnits:"userSpaceOnUse"};var r="";o instanceof HTMLCanvasElement&&(r=o.toDataURL()),o instanceof HTMLImageElement&&(r=o.src),o={x:0,y:0,width:o.width,height:o.height,href:r},i=E(t,"pattern",i),i.appendChild(E(t,"image",o))}for(var o=n.pE,r=o.length,s=[],l=0;l<r;l++){var a=o[l],h=a.color,a={offset:a.offset,"stop-color":h};/^rgba\(/.test(h)&&(h=/^\s*rgba\s*\(([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\s*,\s*([^,\s]+)\)\s*$/i.exec(h),a["stop-color"]="rgb("+h[1]+","+h[2]+","+h[3]+")",a["stop-opacity"]=h[4]),s.push(a)}for(s.sort(function(t,n){return t.offset>n.offset?1:-1}),l=0;l<r;l++)i.appendChild(E(t,"stop",s[l]));return t.hm.appendChild(i),"url(#"+e+")"}function G(t,n,i,e){i={x:i[0],y:i[1],width:i[2],height:i[3]},I(t,n,i,e),t.addElement("rect",i)}function V(t,n,i,e){for(var o=[],r=0;r<i.length;r++){var s=Yh.Il(i[r]),l=[s.shift()];if("A"===l[0])l.push(s.shift()+","+s.shift(),s.shift(),s.shift()+","+s.shift(),s.shift()+","+s.shift());else for(;s.length;)l.push(s.shift()+","+s.shift());o.push(l.join(" "))}i={d:o.join(" ")},I(t,n,i,e),"clipPath"===n?(n="CLIP"+Yh.nm++,e=E(t,"clipPath",{id:n}),e.appendChild(E(t,"path",i)),t.hm.appendChild(e),0<t.xf.length&&t.xf[t.xf.length-1].setAttributeNS(null,"clip-path","url(#"+n+")")):t.addElement("path",i)}function H(t,n,i,e,o,r,s){var l=Math.abs(o-r);if(o!==r){var a=n+e*Math.cos(r);r=i+e*Math.sin(r),l>=2*Math.PI?(H(t,n,i,e,o,o+Math.PI,s),H(t,n,i,e,o+Math.PI,o+2*Math.PI,s),t.path.push(["M",a,r])):(n+=e*Math.cos(o),i+=e*Math.sin(o),l=180*l/Math.PI,o=s?0:1,s=180<=l==!!s?0:1,0!==t.path.length?t.path.push(["L",n,i]):t.path.push(["M",n,i]),t.path.push(["A",e,e,l,s,o,a,r]))}}function K(t,n,i,e,o,r,s){var l=new B;l.Tb=[n,i,e,o,r,s],n={},I(t,"g",n,l),l=t.addElement("g",n),t.xf.push(l)}function U(t,n){this.ownerDocument=void 0===n?document:n;var i=this.ownerDocument.createElement("canvas");i.tabIndex=0,this.Hd=i,this.xk=new J(i),i.Z=t,Object.seal(this)}function J(t){t.getContext&&t.getContext("2d")||Yh.k("Browser does not support HTML Canvas Element"),this.ta=t.getContext("2d"),this.Ey=this.Gy=this.Fy="",this.Sq=!1,this.Cg=this.Ys=this.Xs=0,Object.seal(this)}function Y(t){if(0>=t)return 0;var n=ef;if(null===n){for(var n=[],i=0;2e3>=i;i++)n[i]=Math.sqrt(i);ef=n}return 1>t?(i=1/t,2e3>=i?1/n[0|i]:Math.sqrt(t)):2e3>=t?n[0|t]:Math.sqrt(t)}function W(t,n){var i=t-n;return.5>i&&-.5<i}function X(t,n){var i=t-n;return 5e-8>i&&-5e-8<i}function $(t,n,i,e,o,r,s){0>=o&&(o=1e-6);var l=0,a=0,h=0,u=0;if(t<i?(a=t,l=i):(a=i,l=t),n<e?(u=n,h=e):(u=e,h=n),t===i)return u<=s&&s<=h&&t-o<=r&&r<=t+o;if(n===e)return a<=r&&r<=l&&n-o<=s&&s<=n+o;if(l+=o,(a-=o)<=r&&r<=l&&(h+=o,(u-=o)<=s&&s<=h))if(l-a>h-u){if(!(t-i>o||i-t>o))return!0;if((r=(e-n)/(i-t)*(r-t)+n)-o<=s&&s<=r+o)return!0}else{if(!(n-e>o||e-n>o))return!0;if((s=(i-t)/(e-n)*(s-n)+t)-o<=r&&r<=s+o)return!0}return!1}function Q(t,n,i,e,o,r,s,l,a,h,u,f){if($(t,n,s,l,f,i,e)&&$(t,n,s,l,f,o,r))return $(t,n,s,l,f,h,u);var c=(t+i)/2,d=(n+e)/2,p=(i+o)/2,y=(e+r)/2;o=(o+s)/2,r=(r+l)/2,e=(c+p)/2,i=(d+y)/2;var p=(p+o)/2,y=(y+r)/2,v=(e+p)/2,g=(i+y)/2;return Q(t,n,c,d,e,i,v,g,a,h,u,f)||Q(v,g,p,y,o,r,s,l,a,h,u,f)}function Z(t,n,i,e,o,r,s,l,a,h){if($(t,n,s,l,a,i,e)&&$(t,n,s,l,a,o,r))L(h,t,n,0,0),L(h,s,l,0,0);else{var u=(t+i)/2,f=(n+e)/2,c=(i+o)/2,d=(e+r)/2;o=(o+s)/2,r=(r+l)/2,e=(u+c)/2,i=(f+d)/2;var c=(c+o)/2,d=(d+r)/2,p=(e+c)/2,y=(i+d)/2;Z(t,n,u,f,e,i,p,y,a,h),Z(p,y,c,d,o,r,s,l,a,h)}}function _(t,n,i,e,o,r,s,l,a,h){if($(t,n,s,l,a,i,e)&&$(t,n,s,l,a,o,r))0===h.length&&(h.push(t),h.push(n)),h.push(s),h.push(l);else{var u=(t+i)/2,f=(n+e)/2,c=(i+o)/2,d=(e+r)/2;o=(o+s)/2,r=(r+l)/2,e=(u+c)/2,i=(f+d)/2;var c=(c+o)/2,d=(d+r)/2,p=(e+c)/2,y=(i+d)/2;_(t,n,u,f,e,i,p,y,a,h),_(p,y,c,d,o,r,s,l,a,h)}}function tt(t,n,i,e,o,r,s,l,a,h,u,f,c,d){var p=1-a;t=t*p+i*a,n=n*p+e*a,i=i*p+o*a,e=e*p+r*a,o=o*p+s*a,r=r*p+l*a,l=t*p+i*a,s=n*p+e*a,i=i*p+o*a,e=e*p+r*a,h.x=t,h.y=n,u.x=l,u.y=s,f.x=l*p+i*a,f.y=s*p+e*a,c.x=i,c.y=e,d.x=o,d.y=r}function nt(t,n,i,e,o,r,s,l,a,h){if($(t,n,o,r,h,i,e))return $(t,n,o,r,h,l,a);var u=(t+i)/2,f=(n+e)/2;i=(i+o)/2,e=(e+r)/2;var c=(u+i)/2,d=(f+e)/2;return nt(t,n,u,f,c,d,s,l,a,h)||nt(c,d,i,e,o,r,s,l,a,h)}function it(t,n,i,e,o,r,s,l){if($(t,n,o,r,s,i,e))L(l,t,n,0,0),L(l,o,r,0,0);else{var a=(t+i)/2,h=(n+e)/2;i=(i+o)/2,e=(e+r)/2;var u=(a+i)/2,f=(h+e)/2;it(t,n,a,h,u,f,s,l),it(u,f,i,e,o,r,s,l)}}function et(t,n,i,e,o,r,s,l){if($(t,n,o,r,s,i,e))0===l.length&&(l.push(t),l.push(n)),l.push(o),l.push(r);else{var a=(t+i)/2,h=(n+e)/2;i=(i+o)/2,e=(e+r)/2;var u=(a+i)/2,f=(h+e)/2;et(t,n,a,h,u,f,s,l),et(u,f,i,e,o,r,s,l)}}function ot(t,n,i,e,o,r,s,l,a,h,u,f,c,d){if(0>=c&&(c=1e-6),$(t,n,s,l,c,i,e)&&$(t,n,s,l,c,o,r)){var p=(t-s)*(h-f)-(n-l)*(a-u);if(0===p)return!1;if(c=((t*l-n*s)*(a-u)-(t-s)*(a*f-h*u))/p,p=((t*l-n*s)*(h-f)-(n-l)*(a*f-h*u))/p,(a>u?a-u:u-a)<(h>f?h-f:f-h)){if(s=a=0,n<l?(a=n,s=l):(a=l,s=n),p<a||p>s)return!1}else if(t<s?a=t:(a=s,s=t),c<a||c>s)return!1;return d.x=c,d.y=p,!0}var p=(t+i)/2,y=(n+e)/2;i=(i+o)/2,e=(e+r)/2,o=(o+s)/2,r=(r+l)/2;var v=(p+i)/2,g=(y+e)/2;i=(i+o)/2,e=(e+r)/2;var m=(v+i)/2,b=(g+e)/2,x=(u-a)*(u-a)+(f-h)*(f-h),w=!1;return ot(t,n,p,y,v,g,m,b,a,h,u,f,c,d)&&(n=(d.x-a)*(d.x-a)+(d.y-h)*(d.y-h))<x&&(x=n,w=!0),t=d.x,p=d.y,ot(m,b,i,e,o,r,s,l,a,h,u,f,c,d)&&(n=(d.x-a)*(d.x-a)+(d.y-h)*(d.y-h),n<x?w=!0:(d.x=t,d.y=p)),w}function rt(t,n,i,e,o,r,s,l,a,h,u,f,c){var d=0;if(0>=c&&(c=1e-6),$(t,n,s,l,c,i,e)&&$(t,n,s,l,c,o,r)){if(0===(c=(t-s)*(h-f)-(n-l)*(a-u)))return d;var p=((t*l-n*s)*(a-u)-(t-s)*(a*f-h*u))/c,y=((t*l-n*s)*(h-f)-(n-l)*(a*f-h*u))/c;if(p>=u)return d;if((a>u?a-u:u-a)<(h>f?h-f:f-h)){if(t=a=0,n<l?(a=n,t=l):(a=l,t=n),y<a||y>t)return d}else if(t<s?(a=t,t=s):a=s,p<a||p>t)return d;0<c?d++:0>c&&d--}else{var p=(t+i)/2,y=(n+e)/2,v=(i+o)/2,g=(e+r)/2;o=(o+s)/2,r=(r+l)/2,e=(p+v)/2,i=(y+g)/2;var v=(v+o)/2,g=(g+r)/2,m=(e+v)/2,b=(i+g)/2,d=d+rt(t,n,p,y,e,i,m,b,a,h,u,f,c),d=d+rt(m,b,v,g,o,r,s,l,a,h,u,f,c)}return d}function st(t,n,i,e,o,r,s){if(X(t,i)){var l=0;return i=0,(n<e?(l=n,i=e):(l=e,i=n),(e=r)<l)?(s.x=t,s.y=l,!1):e>i?(s.x=t,s.y=i,!1):(s.x=t,s.y=e,!0)}return X(n,e)?(t<i?l=t:(l=i,i=t),(e=o)<l?(s.x=l,s.y=n,!1):e>i?(s.x=i,s.y=n,!1):(s.x=e,s.y=n,!0)):-5e-6>(l=((t-o)*(t-i)+(n-r)*(n-e))/((i-t)*(i-t)+(e-n)*(e-n)))?(s.x=t,s.y=n,!1):1.000005<l?(s.x=i,s.y=e,!1):(s.x=t+l*(i-t),s.y=n+l*(e-n),!0)}function lt(t,n,i,e,o,r,s,l,a){return W(t,i)&&W(n,e)?(a.x=t,a.y=n,!1):X(o,s)?X(t,i)?(st(t,n,i,e,o,r,a),!1):(r=(e-n)/(i-t)*(o-t)+n,st(t,n,i,e,o,r,a)):(l=(l-r)/(s-o),X(t,i)?(r=l*(t-o)+r,i=s=0,n<e?(s=n,i=e):(s=e,i=n),r<s?(a.x=t,a.y=s,!1):r>i?(a.x=t,a.y=i,!1):(a.x=t,a.y=r,!0)):(s=(e-n)/(i-t),X(l,s)?(st(t,n,i,e,o,r,a),!1):(o=(s*t-l*o+r-n)/(s-l),X(s,0)?(t<i?s=t:(s=i,i=t),o<s?(a.x=s,a.y=n,!1):o>i?(a.x=i,a.y=n,!1):(a.x=o,a.y=n,!0)):(r=s*(o-t)+n,st(t,n,i,e,o,r,a)))))}function at(t,n,i,e,o,r,s,l,a){var h=1e21,u=t,f=n;if(lt(t,n,t,e,o,r,s,l,a)){var c=(a.x-o)*(a.x-o)+(a.y-r)*(a.y-r);c<h&&(h=c,u=a.x,f=a.y)}return lt(i,n,i,e,o,r,s,l,a)&&(c=(a.x-o)*(a.x-o)+(a.y-r)*(a.y-r))<h&&(h=c,u=a.x,f=a.y),lt(t,n,i,n,o,r,s,l,a)&&(c=(a.x-o)*(a.x-o)+(a.y-r)*(a.y-r))<h&&(h=c,u=a.x,f=a.y),lt(t,e,i,e,o,r,s,l,a)&&(c=(a.x-o)*(a.x-o)+(a.y-r)*(a.y-r))<h&&(h=c,u=a.x,f=a.y),a.x=u,a.y=f,1e21>h}function ht(t,n,i,e,o,r,s,l,a){i=t-i;var h=o-s,u=s=0;return 0===i||0===h?0===i?(l=(r-l)/h,s=t,u=l*s+(r-l*o)):(e=(n-e)/i,s=o,u=e*s+(n-e*t)):(e=(n-e)/i,l=(r-l)/h,t=n-e*t,s=(r-l*o-t)/(e-l),u=e*s+t),a.m(s,u),a}function ut(t,n,i){var e=n.x,o=n.y,r=i.x,s=i.y,l=t.left,a=t.right,h=t.top,u=t.bottom;return e===r?(r=t=0,o<s?(t=o,r=s):(t=s,r=o),l<=e&&e<=a&&t<=u&&r>=h):o===s?(e<r?t=e:(t=r,r=e),h<=o&&o<=u&&t<=a&&r>=l):!!(t.Ha(n)||t.Ha(i)||ft(l,h,a,h,e,o,r,s)||ft(a,h,a,u,e,o,r,s)||ft(a,u,l,u,e,o,r,s)||ft(l,u,l,h,e,o,r,s))}function ft(t,n,i,e,o,r,s,l){return 0>=ct(t,n,i,e,o,r)*ct(t,n,i,e,s,l)&&0>=ct(o,r,s,l,t,n)*ct(o,r,s,l,i,e)}function ct(t,n,i,e,o,r){return i-=t,e-=n,t=o-t,n=r-n,r=t*e-n*i,0===r&&0<(r=t*i+n*e)&&0>(r=(t-i)*i+(n-e)*e)&&(r=0),0>r?-1:0<r?1:0}function dt(t){return 0>t&&(t+=360),360<=t&&(t-=360),t}function pt(t,n,i,e){var o=Math.PI;e||(n*=o/180,i*=o/180),e=n<i?1:-1;var r=[],s=o/2,l=n;for(n=Math.min(2*o,Math.abs(i-n));1e-5<n;){i=l+e*Math.min(n,s);var o=(i-l)/2,a=t*Math.cos(o),h=t*Math.sin(o),u=-h,f=a*a+u*u,c=f+a*a+u*h,f=4/3*(Math.sqrt(2*f*c)-c)/(a*h-u*a),h=a-f*u,a=u+f*a,u=-a,f=o+l,o=Math.cos(f),f=Math.sin(f);r.push([0+t*Math.cos(l),0+t*Math.sin(l),0+h*o-a*f,0+h*f+a*o,0+h*o-u*f,0+h*f+u*o,0+t*Math.cos(i),0+t*Math.sin(i)]),n-=Math.abs(i-l),l=i}return r}function yt(t,n,i,e,o,r,s){i=Math.floor((t-i)/o)*o+i,e=Math.floor((n-e)/r)*r+e;var l=i;i+o-t<o/2&&(l=i+o),t=e,e+r-n<r/2&&(t=e+r),s.m(l,t)}function vt(t,n){var i=Math.max(t,n),e=Math.min(t,n),o=1,r=1;do{o=i%e,i=r=e,e=o}while(0<o);return r}function gt(t,n,i,e){var o=0>i,r=0>e,s=0,l=s=0;t<n?(s=1,l=0):(s=0,l=1);var a=0,h=0,u=0,f=0,a=0===s?t:n,u=0===s?i:e;if((0===s?o:r)&&(u=-u),s=l,h=0===s?t:n,f=0===s?i:e,(0===s?o:r)&&(f=-f),t=t=0,0<f)if(0<u){for(n=a*a,t=h*h,a*=u,i=h*f,e=-t+i,o=-t+Math.sqrt(a*a+i*i),h=e,r=0;9999999999>r&&((h=.5*(e+o))!==e&&h!==o);++r)if(l=a/(h+n),s=i/(h+t),0<(l=l*l+s*s-1))e=h;else{if(!(0>l))break;o=h}u=n*u/(h+n)-u,f=t*f/(h+t)-f,t=Math.sqrt(u*u+f*f)}else t=Math.abs(f-h);else f=a*a-h*h,t=a*u,t<f?(f=t/f,t=h*Math.sqrt(Math.abs(1-f*f)),u=a*f-u,t=Math.sqrt(u*u+t*t)):t=Math.abs(u-a);return t}function mt(t){1<arguments.length&&Yh.k("Geometry constructor can take at most one optional argument, the Geometry type."),Yh.mc(this),this.Q=!1,void 0===t&&(t=lf),this.ma=t,this.Gb=this.yb=this.Gc=this.xc=0,this.Nj=new f(St),this.zv=this.Nj.F,this.jv=(new P).freeze(),this.cb=!0,this.Hq=this.ko=null,this.Iq=NaN,this.ei=eu,this.fi=fu,this.Oo=this.Qo=NaN,this.Di=Ic}function bt(t,n){if(t.type!==of||n.type!==lf)return!1;if(1===n.ec.count){var i=n.ec.ea(0);if(1===i.vb.count&&W(t.ha,i.ha)&&W(t.fa,i.fa)&&(i=i.vb.ea(0),i.type===ff&&W(t.C,i.C)&&W(t.D,i.D)))return!0}return!1}function xt(t,n){for(var i=t.length,e=Yh.K(),o=0;o<i;o++){var r=t[o];e.x=r[0],e.y=r[1],n.nb(e),r[0]=e.x,r[1]=e.y,e.x=r[2],e.y=r[3],n.nb(e),r[2]=e.x,r[3]=e.y,e.x=r[4],e.y=r[5],n.nb(e),r[4]=e.x,r[5]=e.y,e.x=r[6],e.y=r[7],n.nb(e),r[6]=e.x,r[7]=e.y}Yh.v(e)}function wt(t,n,i){switch(t.type){case of:case rf:case sf:i?n.m(t.xc,t.Gc,0,0):L(n,t.xc,t.Gc,0,0),L(n,t.yb,t.Gb,0,0);break;case lf:var e=t.ec;t=e.n;for(var e=e.length,o=0;o<e;o++){var r=t[o];i&&0===o?n.m(r.ha,r.fa,0,0):L(n,r.ha,r.fa,0,0);for(var s=r.vb.n,l=s.length,a=r.ha,h=r.fa,u=0;u<l;u++){var f=s[u];switch(f.type){case ff:case uf:a=f.C,h=f.D,L(n,a,h,0,0);break;case cf:Z(a,h,f.sc,f.Pc,f.Bh,f.Ch,f.C,f.D,.5,n),a=f.C,h=f.D;break;case df:it(a,h,f.sc,f.Pc,f.C,f.D,.5,n),a=f.C,h=f.D;break;case pf:case yf:var c=f.type===pf?Nt(f,r):jt(f,r,a,h),d=c.length;if(0===d){a=f.ka,h=f.ra,L(n,a,h,0,0);break}for(var f=null,p=0;p<d;p++)f=c[p],Z(f[0],f[1],f[2],f[3],f[4],f[5],f[6],f[7],.5,n);null!==f&&(a=f[6],h=f[7]);break;default:Yh.k("Unknown Segment type: "+f.type)}}}break;default:Yh.k("Unknown Geometry type: "+t.type)}}function kt(t,n,i,e,o,r,s,l){if($(o,r,s,l,.05,t,n))return NaN;var a=(t-i)*(r-l);if(0===a)return 0;var h=((t*e-n*i)*(o-s)-(t-i)*(o*l-r*s))/a;if(n=(t*e-n*i)*(r-l)/a,h>=t)return 0;if((o>s?o-s:s-o)<(r>l?r-l:l-r)){if(o=t=0,r<l?(t=r,o=l):(t=l,o=r),n<t||n>o)return 0}else if(o<s?(t=o,o=s):t=s,h<t||h>o)return 0;return 0<a?1:-1}function Mt(t,n,i,e){t=t.ec.n;for(var o=t.length,r=0;r<o;r++)if(t[r].Ha(n,i,e))return!0;return!1}function Pt(t){if(null===t.ko){t.zx()&&t.py();var n=t.ko=[],i=t.Hq=[],e=[],o=[];if(t.type===of)e.push(t.ha),e.push(t.fa),e.push(t.C),e.push(t.D),n.push(e),o.push(Math.sqrt((t.ha-t.C)*(t.ha-t.C)+(t.fa-t.D)*(t.fa-t.D))),i.push(o);else if(t.type===rf)e.push(t.ha),e.push(t.fa),e.push(t.C),e.push(t.fa),e.push(t.C),e.push(t.D),e.push(t.ha),e.push(t.D),e.push(t.ha),e.push(t.fa),n.push(e),o.push(Math.abs(t.ha-t.C)),o.push(Math.abs(t.fa-t.D)),o.push(Math.abs(t.ha-t.C)),o.push(Math.abs(t.fa-t.D)),i.push(o);else if(t.type===sf){var r=new St;r.ha=t.C,r.fa=(t.fa+t.D)/2;var s=new Ct(pf);if(s.ye=0,s.pf=360,s.ka=(t.ha+t.C)/2,s.ra=(t.fa+t.D)/2,s.radiusX=Math.abs(t.ha-t.C)/2,s.radiusY=Math.abs(t.fa-t.D)/2,r.add(s),t=Nt(s,r),0===(o=t.length))e.push(s.ka),e.push(s.ra);else for(var s=r.ha,r=r.fa,l=0;l<o;l++){var a=t[l];_(s,r,a[2],a[3],a[4],a[5],a[6],a[7],.5,e),s=a[6],r=a[7]}n.push(e),i.push(Tt(e))}else for(var h=t.ec.i;h.next();){var u=h.value,e=[];e.push(u.ha),e.push(u.fa);for(var s=u.ha,r=u.fa,f=s,c=r,d=u.vb.n,p=d.length,y=0;y<p;y++){var v=d[y];switch(v.ma){case uf:4<=e.length&&(n.push(e),i.push(Tt(e))),e=[],e.push(v.C),e.push(v.D),s=v.C,r=v.D,f=s,c=r;break;case ff:e.push(v.C),e.push(v.D),s=v.C,r=v.D;break;case cf:_(s,r,v.Bd,v.We,v.nh,v.Bg,v.yb,v.Gb,.5,e),s=v.C,r=v.D;break;case df:et(s,r,v.Bd,v.We,v.yb,v.Gb,.5,e),s=v.C,r=v.D;break;case pf:if(t=Nt(v,u),0===(o=t.length)){e.push(v.ka),e.push(v.ra),s=v.ka,r=v.ra;break}for(l=0;l<o;l++)a=t[l],_(s,r,a[2],a[3],a[4],a[5],a[6],a[7],.5,e),s=a[6],r=a[7];break;case yf:if(t=jt(v,u,s,r),0===(o=t.length)){e.push(v.ka),e.push(v.ra),s=v.ka,r=v.ra;break}for(l=0;l<o;l++)a=t[l],_(s,r,a[2],a[3],a[4],a[5],a[6],a[7],.5,e),s=a[6],r=a[7];break;default:Yh.k("Segment not of valid type: "+v.ma)}v.Qh&&(e.push(f),e.push(c))}4<=e.length&&(n.push(e),i.push(Tt(e)))}}}function Tt(t){for(var n=[],i=0,e=0,o=t.length,r=0;r<o;r+=2){var s=t[r],l=t[r+1];0!==r&&(i=Math.sqrt(Qh(i,e,s,l)),n.push(i)),i=s,e=l}return n}function St(t,n,i,e){Yh.mc(this),this.Q=!1,void 0===i&&(i=!0),this.Bm=i,void 0===e&&(e=!0),this.Ro=e,this.xc=void 0!==t?t:0,this.Gc=void 0!==n?n:0,this.mp=new f(Ct),this.yw=this.mp.F,this.cb=!0}function Ct(t,n,i,e,o,r,s,l){Yh.mc(this),this.Q=!1,void 0===t&&(t=ff),this.ma=t,this.yb=void 0!==n?n:0,this.Gb=void 0!==i?i:0,void 0===e&&(e=0),void 0===o&&(o=0),void 0===r&&(r=0),void 0===s&&(s=0),t===yf?(t=r%360,0>t&&(t+=360),this.Bd=t,this.We=0,this.nh=Math.max(e,0),this.Bg=Math.max(o,0),this.Wo="boolean"==typeof s&&!!s,this.po=!!l):(this.Bd=e,this.We=o,t===pf&&(r=Math.max(r,0)),this.nh=r,"number"==typeof s?(t===pf&&(s=Math.max(s,0)),this.Bg=s):this.Bg=0,this.po=this.Wo=!1),this.Qh=!1,this.cb=!0,this.lg=null}function Nt(t,n){if(null!==t.lg&&!1===n.cb)return t.lg;var i=t.radiusX,e=t.radiusY;if(void 0===e&&(e=i),0===i||0===e)return t.lg=[],t.lg;var o=t.Bd,r=t.We,s=pt(i<e?i:e,t.ye,t.ye+t.pf,!1);if(i!==e){var l=Yh.Gf();l.reset(),i<e?l.scale(1,e/i):l.scale(i/e,1),xt(s,l),Yh.ue(l)}for(i=s.length,e=0;e<i;e++)l=s[e],l[0]+=o,l[1]+=r,l[2]+=o,l[3]+=r,l[4]+=o,l[5]+=r,l[6]+=o,l[7]+=r;return t.lg=s,t.lg}function jt(t,n,i,e){function o(t,n,i,e){return(t*e<n*i?-1:1)*Math.acos((t*i+n*e)/(Math.sqrt(t*t+n*n)*Math.sqrt(i*i+e*e)))}if(null!==t.lg&&!1===n.cb)return t.lg;n=t.nh;var r=t.Bg;if(0===n||0===r)return t.lg=[],t.lg;var s=Math.PI/180*t.Bd,l=t.Wo,a=t.po,h=t.yb,u=t.Gb,f=Math.cos(s),c=Math.sin(s),d=f*(i-h)/2+c*(e-u)/2,s=-c*(i-h)/2+f*(e-u)/2,p=d*d/(n*n)+s*s/(r*r);return 1<p&&(n*=Math.sqrt(p),r*=Math.sqrt(p)),p=(l===a?-1:1)*Math.sqrt((n*n*r*r-n*n*s*s-r*r*d*d)/(n*n*s*s+r*r*d*d)),isNaN(p)&&(p=0),l=p*n*s/r,p=p*-r*d/n,isNaN(l)&&(l=0),isNaN(p)&&(p=0),i=(i+h)/2+f*l-c*p,e=(e+u)/2+c*l+f*p,u=o(1,0,(d-l)/n,(s-p)/r),f=(d-l)/n,h=(s-p)/r,d=(-d-l)/n,l=(-s-p)/r,s=o(f,h,d,l),d=(f*d+h*l)/(Math.sqrt(f*f+h*h)*Math.sqrt(d*d+l*l)),-1>=d?s=Math.PI:1<=d&&(s=0),!a&&0<s&&(s-=2*Math.PI),a&&0>s&&(s+=2*Math.PI),a=n>r?1:n/r,d=n>r?r/n:1,n=pt(n>r?n:r,u,u+s,!0),r=Yh.Gf(),r.reset(),r.translate(i,e),r.rotate(t.Bd,0,0),r.scale(a,d),xt(n,r),Yh.ue(r),t.lg=n,t.lg}function Lt(){this.Z=null,this.Lz=new x(0,0).freeze(),this.Sy=new x(0,0).freeze(),this.gv=this.dw=0,this.hv=1,this.Tv="",this.Iw=this.vv=!1,this.sv=this.iv=0,this.Ij=this.Ev=this.Pv=!1,this.tr=null,this.Gw=0,this.Eg=this.Fw=null}function Dt(){this.Z=null,this.Rb="",this.mw=this.Dw=null,this.Pq=!1}function At(){this.Qq=gf,this.Tm=this.cw="",this.ps=this.qs=this.us=this.vs=this.ts=this.Z=this.ke=null}function Ft(t){1<arguments.length&&Yh.k("Model constructor can only take one optional argument, the Array of node data."),Yh.mc(this),this.er=this.Rb="",this.Ki=!1,this.pz={},this.Ce=[],this.Ec=new b(null,Object),this.fk="key",this.uo=this.$o=null,this.Wq=this.Xq=!1,this.Gq=null,this.Om="category",this.Ei=new b(null,d),this.bk=null,this.cj=!1,this.Kz=null,this.oa=new ln,void 0!==t&&(this.eg=t)}function Ot(t){return',\n  "modelData": '+Gt(t,t.Gk)}function Bt(t,n){var i=n.modelData;Yh.Qa(i)&&(t.Bu(i),t.Gk=i)}function qt(t,n,i,e){if(n===i)return!0;if(typeof n!=typeof i||"function"==typeof n||"function"==typeof i)return!1;if(Array.isArray(n)&&Array.isArray(i)){if(e.ja(n)===i)return!0;if(e.add(n,i),n.length!==i.length)return!1;for(var o=0;o<n.length;o++)if(!qt(t,n[o],i[o],e))return!1;return!0}if(Yh.Qa(n)&&Yh.Qa(i)){if(e.ja(n)===i)return!0;e.add(n,i);for(o in n){var r=n[o];if(!It(o,r)){var s=i[o];if(void 0===s||!qt(t,r,s,e))return!1}}for(var l in i)if(s=i[l],!(It(l,s)||void 0!==(r=n[l])&&qt(t,r,s,e)))return!1;return!0}return!1}function zt(t,n,i){t[i]!==n[i]&&Yh.k("Model.computeJsonDifference: Model."+i+' is not the same in both models: "'+t[i]+'" and "'+n[i]+'"')}function Et(t,n,i){void 0===i&&(i=!1);var o=Yh.Za(n);if(0>=o)return"[]";var r=new e;r.add("[ "),i&&1<o&&r.add("\n");for(var s=0;s<o;s++){var l=Yh.Da(n,s);void 0!==l&&(0<s&&(r.add(","),i&&r.add("\n")),r.add(t.Ru(l)))}return i&&1<o&&r.add("\n"),r.add(" ]"),r.toString()}function It(t,n){return void 0===n||"__gohashid"===t||"_"===t[0]||"function"==typeof n}function Rt(t){return isNaN(t)?"NaN":1/0===t?"9e9999":-1/0===t?"-9e9999":t}function Gt(t,n){var e=n;if(e instanceof x)n={class:"go.Point",x:Rt(e.x),y:Rt(e.y)};else if(e instanceof M)n={class:"go.Size",width:Rt(e.width),height:Rt(e.height)};else if(e instanceof P)n={class:"go.Rect",x:Rt(e.x),y:Rt(e.y),width:Rt(e.width),height:Rt(e.height)};else if(e instanceof D)n={class:"go.Margin",top:Rt(e.top),right:Rt(e.right),bottom:Rt(e.bottom),left:Rt(e.left)};else if(e instanceof F)n=e.fd()?{class:"go.Spot",x:Rt(e.x),y:Rt(e.y),offsetX:Rt(e.offsetX),offsetY:Rt(e.offsetY)}:{class:"go.Spot",enum:e.toString()};else if(e instanceof mo){if(n={class:"go.Brush",type:e.type.name},e.type===mc?n.color=e.color:e.type!==bc&&e.type!==xc||(n.start=e.start,n.end=e.end,e.type===xc&&(0!==e.Mu&&(n.startRadius=Rt(e.Mu)),isNaN(e.Ht)||(n.endRadius=Rt(e.Ht)))),null!==e.uk){for(var o={},e=e.uk.i;e.next();)o[e.key]=e.value;n.colorStops=o}}else if(e instanceof mt)n={class:"go.Geometry",type:e.type.name},0!==e.ha&&(n.startX=Rt(e.ha)),0!==e.fa&&(n.startY=Rt(e.fa)),0!==e.C&&(n.endX=Rt(e.C)),0!==e.D&&(n.endY=Rt(e.D)),e.A.L(eu)||(n.spot1=e.A),e.B.L(fu)||(n.spot2=e.B),e.type===lf&&(n.path=af(e));else if(e instanceof i)n={class:"go.EnumValue",classType:Yh.jf(e.De),name:e.name};else if(e instanceof To||e instanceof Ei||e instanceof Oi||e instanceof Ft||e instanceof dn||e instanceof hn||e instanceof ql||e instanceof Il||e instanceof ln||e instanceof sn)return Yh.trace("ERROR: trying to convert a GraphObject or Diagram or Model or Tool or Layout or UndoManager into JSON text: "+e.toString()),"{}";var r,o="{",e=!0;for(r in n){var s=Yh.sb(n,r);if(!It(r,s))if(e?e=!1:o+=", ",o+='"'+r+'":',"points"===r&&s instanceof f&&s.ma===x){for(var l="[",s=s.i;s.next();){var a=s.value;1<l.length&&(l+=","),l+=t.Ru(a.x),l+=",",l+=t.Ru(a.y)}l+="]",o+=l}else o+=t.Ru(s)}return o+"}"}function Vt(t){return"number"==typeof t?t:"NaN"===t?NaN:"9e9999"===t?1/0:"-9e9999"===t?-1/0:parseFloat(t)}function Ht(t,n,i,e,o,r,s,l,a){void 0===l&&(l=null),void 0===a&&(a=null);var h=new At;h.ba=t,h.yc=i,h.of=n,h.propertyName=e,h.object=o,h.oldValue=r,h.Aj=l,h.newValue=s,h.zj=a,t.Vw(h)}function Kt(t,n,i){"string"!=typeof t&&"function"!=typeof t&&Yh.yd(t,"string or function",n,i)}function Ut(t){return"number"==typeof t||"string"==typeof t}function Jt(t,n,i){var e=t.ub(n);void 0!==e&&t.Ec.ja(e)===n||(t.HA(n),e=t.ub(n),void 0===e?Yh.k("Model.makeNodeDataKeyUnique failed on "+n+".  Data not added to Model."):(t.Ec.add(e,n),e=null,i&&(e=Yh.Za(t.Ce),Yh.rh(t.Ce,e,n)),Ht(t,"nodeDataArray",mf,"nodeDataArray",t,null,n,null,e),t.lq(n),t.kq(n)))}function Yt(t,n,i){var e=t.ub(n);if(void 0!==e&&t.Ec.remove(e),e=null,i){if(0>(e=Yh.Fl(t.Ce,n)))return;Yh.Ig(t.Ce,e)}Ht(t,"nodeDataArray",bf,"nodeDataArray",t,n,null,e,null),t.Pu(n)}function Wt(t,n,i){if(void 0!==n){var e=t.Ei.ja(n);null===e&&(e=new d(Object),t.Ei.add(n,e)),e.add(i)}}function Xt(t,n,i){if(void 0!==n){var e=t.Ei.ja(n);e instanceof d&&(void 0===i||null===i?t.Ei.remove(n):(e.remove(i),0===e.count&&t.Ei.remove(n)))}}function $t(t,n){if(void 0===n)return null;var i=t.Ei.ja(n);return i instanceof d?i:null}function Qt(t,n,i){if(t.aA&&Array.isArray(n)){var e=[];for(i=0;i<n.length;i++){var o=Qt(t,n[i],t.$z);e.push(o)}return Yh.mc(e),e}if(i&&Yh.Qa(n)){i=(i=n.constructor)?new i:{};for(e in n)if("__gohashid"!==e){var r,o=Yh.sb(n,e);r=o,r instanceof To||r instanceof Ei||r instanceof Oi||r instanceof Tr||r instanceof bi||r instanceof dn||r instanceof hn||r instanceof ql||r instanceof Lt||r instanceof Dt?("_"!==e[0]&&Yh.trace('Warning: found GraphObject or Diagram reference when copying model data on property "'+e+'" of data object: '+n.toString()+"  \nModel data should not have any references to a Diagram or any part of a diagram, such as: "+r.toString()),r=!0):r=r instanceof Ft||r instanceof ln||r instanceof sn||r instanceof At,r||(o=Qt(t,o,!1)),Yh.La(i,e,o)}return Yh.mc(i),i}return n instanceof x?n.copy():n instanceof M?n.copy():n instanceof P?n.copy():n instanceof F?n.copy():n instanceof D?n.copy():n}function Zt(t,n){Ft.call(this),2<arguments.length&&Yh.k("GraphLinksModel constructor can only take two optional arguments, the Array of node data and the Array of link data."),this.ef=[],this.Pi=new d(Object),this.ad=new b(null,Object),this.nl="",this.qm=this.to=this.ap=null,this.Th="from",this.Uh="to",this.Km=this.Jm="",this.Im="category",this.xg="",this.ep="isGroup",this.kh="group",this.Yq=!1,void 0!==t&&(this.eg=t),void 0!==n&&(this.Og=n)}function _t(t,n,i){if(""!==t.xj){var e=t.Tf(n);if(void 0!==e&&t.ad.ja(e)===n)return;if(t.GA(n),void 0===(e=t.Tf(n)))return void Yh.k("GraphLinksModel.makeLinkDataKeyUnique failed on "+n+". Data not added to model.");t.ad.add(e,n)}t.Pi.add(n),e=null,i&&(e=Yh.Za(t.ef),Yh.rh(t.ef,e,n)),Ht(t,"linkDataArray",mf,"linkDataArray",t,null,n,null,e),nn(t,n)}function tn(t,n,i){t.Pi.remove(n);var e=t.Tf(n);if(void 0!==e&&t.ad.remove(e),e=null,i){if(0>(e=Yh.Fl(t.ef,n)))return;Yh.Ig(t.ef,e)}if(Ht(t,"linkDataArray",bf,"linkDataArray",t,n,null,e,null),i=t.Ul(n),Xt(t,i,n),i=t.Vl(n),Xt(t,i,n),e=t.Bk(n),Yh.isArray(e))for(var o=Yh.Za(e),r=0;r<o;r++)i=Yh.Da(e,r),Xt(t,i,n)}function nn(t,n){var i=t.Ul(n),i=t.Ln(i);null===t.te(i)&&Wt(t,i,n),i=t.Vl(n),i=t.Ln(i),null===t.te(i)&&Wt(t,i,n);var e=t.Bk(n);if(Yh.isArray(e))for(var o=Yh.Za(e),r=0;r<o;r++)i=Yh.Da(e,r),null===t.te(i)&&Wt(t,i,n)}function en(t){1<arguments.length&&Yh.k("TreeModel constructor can only take one optional argument, the Array of node data."),Ft.call(this),this.lh="parent",this.Zq=!1,this.Rm="parentLinkCategory",void 0!==t&&(this.eg=t)}function on(t,n,i){Yh.mc(this),this.Q=!1,void 0===t?t="":Yh.j(t,"string",on,"constructor:targetprop"),void 0===n?n=t:Yh.j(n,"string",on,"constructor:sourceprop"),void 0===i?i=null:null!==i&&Yh.j(i,"function",on,"constructor:conv"),this.GD=-1,this.Eg=null,this.yp=t,this.xp=this.ht=0,this.Aw=null,this.Nr=!1,this.op=n,this.Vq=i,this.gs=wf,this.Oq=null,this.az=new d}function rn(t,n,i){t=t.xq;return null===t||""===t?n:"/"===t?i.U:"."===t?i:".."===t?i.O:n.ud(t)}function sn(){this.FG=new f(At).freeze(),this.Rb="",this.LC=!1}function ln(){this.qz=new d(Ft),this.df=!1,this.JG=new f(sn).freeze(),this.eh=-1,this.$C=999,this.Li=!1,this.rv=null,this.zl=0,this.WB=!1,this.jh=new f("string").freeze(),this.dp=new f("number"),this.bz=!0,this.lz=!1}function an(t,n,i){if(t.hb)return!1;t.Vz&&1>t.Gh&&Yh.trace("Ending transaction without having started a transaction: "+i);var e=1===t.Gh;e&&n&&t.cd("CommittingTransaction",i,t.lj);var o=0;if(0<t.Gh&&(t.zl--,t.isEnabled)){var r=t.jh.count;0<r&&(""===i&&(i=t.jh.ea(0)),t.jh.Ra(),t.jh.Yc(r-1),t.jh.freeze()),r=t.dp.count,0<r&&(o=t.dp.ea(r-1),t.dp.Yc(r-1))}if(r=t.lj,e){if(n){if(t.lz=!1,t.isEnabled&&null!==r){for(n=r,n.bu=!0,n.name=i,e=t.history,e.Ra(),o=e.count-1;o>t.qj;o--)r=e.ea(o),null!==r&&r.clear(),e.Yc(o),t.lz=!0;o=t.yF,0===o&&(o=1),0<o&&e.count>=o&&(r=e.ea(0),null!==r&&r.clear(),e.Yc(0),t.eh--),e.add(n),t.eh++,e.freeze(),r=n}t.cd("CommittedTransaction",i,r)}else{t.Li=!0;try{t.isEnabled&&null!==r&&(r.bu=!0,r.undo())}finally{t.cd("RolledBackTransaction",i,r),t.Li=!1}null!==r&&r.clear()}return t.rv=null,!0}if(t.isEnabled&&!n&&null!==r){for(t=o,i=r.Rf,n=i.count-1;n>=t;n--)e=i.ea(n),null!==e&&e.undo(),i.Ra(),i.Yc(n);i.freeze()}return!1}function hn(){0<arguments.length&&Yh.hd(hn),Yh.mc(this),this.Z=null,this.ZB=!1,this.tC=this.$B=!0,this.bC=this.cC=this.uC=this.dC=!1,this.ql=this.PB=null,this.$D=1.05,this.qC=1,this.mz=NaN,this.WC=null,this.Oz=NaN,this.Nz=zu,this.bj=null}function un(t,n,i,e,o,r){if(void 0===r&&(r=null),!(t.contains(n)||null!==r&&!r(n)||n instanceof Ds))if(t.add(n),n instanceof As){if(i&&n instanceof Ll)for(var s=n.Nc;s.next();)un(t,s.value,i,e,o,r);if(o)for(s=n.fe;s.next();){var l=s.value;if(!t.contains(l)){var a=l.Y,h=l.$;null!==a&&t.contains(a)&&null!==h&&t.contains(h)?un(t,l,i,e,o,r):null!==a&&null!==h||un(t,l,i,e,o,r)}}if(1<e)for(n=n.NE();n.next();)un(t,n.value,i,e-1,o,r)}else if(n instanceof Js)for(n=n.Xf;n.next();)un(t,n.value,i,e,o,r)}function fn(t,n,i,e,o){if(null===n||o&&!n.canCopy())return null;if(e.contains(n))return e.ja(n);var r=null,s=n.data;if(null!==s&&null!==i){var l=i.ba;n instanceof Js?l instanceof Zt&&(s=l.Yw(s),Yh.Qa(s)&&(l.ut(s),r=i.Sf(s))):(s=l.copyNodeData(s),Yh.Qa(s)&&(l.Cl(s),r=i.wh(s)))}else br(n),null!==(r=n.copy())&&(null!==i?i.add(r):null!==s&&null!==t.g&&t.zH&&(l=t.g.ba,s=r instanceof Js&&l instanceof Zt?l.Yw(s):l.copyNodeData(s),Yh.Qa(s)&&(r.data=s)));if(!(r instanceof as))return null;if(r.gb=!1,r.Ng=!1,e.add(n,r),n instanceof As){for(s=n.fe;s.next();){if(l=s.value,l.Y===n){var a=e.ja(l);null!==a&&(a.Y=r)}l.$===n&&null!==(a=e.ja(l))&&(a.$=r)}if(n instanceof Ll&&r instanceof Ll)for(s=r,n=n.Nc;n.next();)(l=fn(t,n.value,i,e,o))instanceof Js||null===l||(l.Pa=s)}else if(n instanceof Js&&r instanceof Js)for(s=n.Y,null!==s&&null!==(s=e.ja(s))&&(r.Y=s),s=n.$,null!==s&&null!==(s=e.ja(s))&&(r.$=s),n=n.Xf;n.next();)null!==(s=fn(t,n.value,i,e,o))&&s instanceof As&&(s.Mc=r);return r}function cn(t){var n=Yh.lb();for(t=t.i;t.next();){var i=t.value;i instanceof Js||n.push(i)}t=new d(as);for(var i=n.length,e=0;e<i;e++){for(var o=n[e],r=!0,s=0;s<i;s++)if(o.ni(n[s])){r=!1;break}r&&t.add(o)}return Yh.wa(n),t}function dn(){0<arguments.length&&Yh.hd(dn),Yh.mc(this),this.Z=null,this.Rb="",this.df=!0,this.JC=!1,this.UD=null,this.Lw=-1}function pn(t,n,i){if(n.Ac=!1,null===t||t.cu()){var e=0;n.left?e=1===n.Fe?1:2===n.Fe?2:1:n.right&&1===n.Fe&&(e=3);var o="";if(null!==t){switch(e){case 1:o="ObjectSingleClicked";break;case 2:o="ObjectDoubleClicked";break;case 3:o="ObjectContextClicked"}0!==e&&i.Aa(o,t)}else{switch(e){case 1:o="BackgroundSingleClicked";break;case 2:o="BackgroundDoubleClicked";break;case 3:o="BackgroundContextClicked"}0!==e&&i.Aa(o)}if(null!==t)for(;null!==t;){switch(i=null,e){case 1:i=t.click;break;case 2:i=t.Gt?t.Gt:t.click;break;case 3:i=t.Yz}if(null!==i&&(i(n,t),n.Ac))break;t=t.O}else{switch(t=null,e){case 1:t=i.click;break;case 2:t=i.Gt?i.Gt:i.click;break;case 3:t=i.Yz}null!==t&&t(n)}}}function yn(){dn.call(this),0<arguments.length&&Yh.hd(yn),this.name="Dragging",this.aC=this.NC=!0,this.Ir=this.zC=!1,this.RC=!0,this.cz=new M(NaN,NaN).freeze(),this.dz=eu,this.ez=new x(NaN,NaN).freeze(),this.yC=!1,this.hw=this.gw=this.Ty=this.YB=this.xC=this.iC=this.$i=null,this.or=this.PC=!1,this.rp=new x(NaN,NaN),this.Bw=new x,this.Ew=!1,this.MC=!0,this.Bo=100,this.Mj=[],this.IG=new d(as).freeze()}function vn(t,n){if(t.nj){var i=t.g;null!==i&&i.hn&&(i.ba instanceof Zt&&1===n.count&&n.first()instanceof Js?(t.ed=n.first(),t.ed.canRelinkFrom()&&t.ed.canRelinkTo()&&t.ed.Bt(),t.$i=i.bb.NF,null===t.$i&&(t.$i=new Jn,t.$i.Qc(i))):(t.ed=null,t.$i=null))}}function gn(t){return new En(void 0===t?qu:t.copy())}function mn(t,n,i,e){if(!n.contains(i)&&(!e||i.canMove()||i.canCopy()))if(i instanceof As){if(n.add(i,gn(i.location)),i instanceof Ll)for(var o=i.Nc;o.next();)mn(t,n,o.value,e);for(o=i.fe;o.next();){var r=o.value;if(!n.contains(r)){var s=r.Y,l=r.$;null!==s&&n.contains(s)&&null!==l&&n.contains(l)&&mn(t,n,r,e)}}if(t.OH)for(i=i.NE();i.next();)mn(t,n,i.value,e)}else if(i instanceof Js)for(r=i,n.add(r,gn()),i=r.Xf;i.next();)mn(t,n,i.value,e);else i instanceof Ds||n.add(i,gn(i.location))}function bn(t){var n=t.g;if(null!==n){var i=n.wb;n.wb=!0,An(t,n.R,null),n.wb=i}t.Mj.length=0}function xn(){var t=Cf;Tn(t),jn(t);var n=t.g;null!==n&&t.rp.I()&&(n.position=t.rp),null!==n&&oo(n)}function wn(t,n){if(null!==n){t.Ew=!0;for(var i=n.i;i.next();){var e=i.key;e instanceof Js&&(e.gm=!0)}}}function kn(t,n){if(null!==n){for(var i=n.i;i.next();){var e=i.key;e instanceof Js&&(e.gm=!1,nl(e)&&e.Yb())}t.Ew=!1}}function Mn(t,n){for(var i=1/0,e=1/0,o=-1/0,r=-1/0,s=t.i;s.next();){var l=s.value;if(l.de()&&l.isVisible()){var a=l.location,l=a.x,a=a.y;isNaN(l)||isNaN(a)||(l<i&&(i=l),a<e&&(e=a),l>o&&(o=l),a>r&&(r=a))}}1/0===i?n.m(0,0,0,0):n.m(i,e,o-i,r-e)}function Pn(t,n){if(null===t.cc){var i=t.g;if(!(null===i||n&&(i.fb||i.zf))&&null!==t.Xb){var e=i.oa;for(e.isEnabled&&e.nF?null!==e.lj&&0<e.lj.Rf.count&&(i.oa.mq(),i.Ub("Drag")):jn(t),i.wb=!n,i.Eq=!n,t.Kk=i.zc.da,e=t.BH?t.Xb.Fj():i.selection,e=i.Lp(e,i,!0),i=e.i;i.next();)i.value.location=i.key.location;i=Yh.Ff(),Mn(e,i),Yh.Db(i);for(var i=new b(as),o=t.Xb.i;o.next();){var r=o.key;r.de()&&r.canCopy()&&null!==(r=e.ja(r))&&(r.$e(),i.add(r,gn(r.location)))}for(e=e.i;e.next();)(o=e.value)instanceof Js&&o.canCopy()&&i.add(o,gn());t.cc=i,vn(t,i.Fj()),null!==t.ed&&(i=t.ed,e=i.Vn,i.Hk(t.Kk.x-(e.x+e.width/2),t.Kk.y-(e.y+e.height/2)))}}}function Tn(t){var n=t.g;if(null!==n){if(null!==t.cc&&(n.XA(t.cc.Fj(),!1),t.cc=null,null!==t.Xb))for(var i=t.Xb.i;i.next();)i.key instanceof Js&&(i.value.point=new x(0,0));n.wb=!1,n.Eq=!1,t.Kk=n.zc.da}}function Sn(t){if(null!==t.ed){if(t.nj&&null!==t.$i){var n=t.$i;null!==n.g&&(n.g.remove(n.Rd),n.g.remove(n.Sd))}t.ed=null,t.$i=null}}function Cn(t,n,i){var e=t.g;if(null!==e){var o=t.Kk,r=Yh.K();r.assign(e.R.da),t.moveParts(n,r.Zn(o),i),Yh.v(r)}}function Nn(t,n,i){if(null!==(n=n.Pa)){if(null!==(t=Nn(t,n,i)))return t;if(null!==(t=i.ja(n)))return t}return null}function jn(t){if(null!==t.Xb){for(var n=t.g,i=t.Xb.i;i.next();){var e=i.key;e.de()&&(e.location=i.value.point)}for(i=t.Xb.i;i.next();)if((e=i.key)instanceof Js&&e.gm){var o=i.value.point;t.Xb.add(e,gn()),e.Hk(-o.x,-o.y)}n.$f()}}function Ln(t,n){if(null===n)return!0;var i=n.U;return!!(null===i||i instanceof Ds||i.layer.Kc||t.Xb&&t.Xb.contains(i)||t.cc&&t.cc.contains(i))}function Dn(t,n){var i=t.g;if(null!==i){t.nj&&(null!==t.ed&&(t.ed.Y=null,t.ed.$=null),Bn(t,!1));var e=Qi(i,n,null,function(n){return!Ln(t,n)}),o=i.R;o.Pe=e;var r=i.wb,s=!1;try{if(i.wb=!0,s=An(t,o,e),!t.sa&&null===Cf)return;if(null===e){var l=i.$I;null!==l&&(l(o),s=!0)}if(!t.sa&&null===Cf)return;if(t.doDragOver(n,e),!t.sa&&null===Cf)return}finally{i.wb=r,s&&i.$f()}(i.me||i.ne)&&i.fA(o.cf)}}function An(t,n,i){var e=!1,o=t.Mj.length,r=0<o?t.Mj[0]:null;if(i===r)return!1;n.Ac=!1;for(var s=0;s<o;s++){var l=t.Mj[s],a=l.ZI;if(null!==a&&(a(n,l,i),e=!0,n.Ac))break}if(t.Mj.length=0,!t.sa&&null===Cf||null===i)return e;for(n.Ac=!1;null!==i;)t.Mj.push(i),i=Fn(i);for(o=t.Mj.length,s=0;s<o&&(l=t.Mj[s],null===(a=l.YI)||(a(n,l,r),e=!0,!n.Ac));s++);return e}function Fn(t){var n=t.O;return null!==n?n:t instanceof as&&!(t instanceof Ll)&&null!==(t=t.Pa)&&t.hI?t:null}function On(t,n,i){var e=t.$i;if(null===e)return null;var o=t.g.wn(n,e.LF,function(t){return e.findValidLinkablePort(t,i)});t=Yh.K();for(var r=1/0,s=null,o=o.i;o.next();){var l=o.value;if(null!==l.U){var a=l.Xa(lu,t),a=n.wf(a);a<r&&(s=l,r=a)}}return Yh.v(t),s}function Bn(t,n){var i=t.ed;if(null!==i&&!(2>i.qa)){var e=t.g;if(null!==e&&!e.fb){var o=t.$i;if(null!==o){var r=null,s=null;null===i.Y&&null!==(r=On(t,i.l(0),!1))&&(s=r.U);var l=null,a=null;null===i.$&&null!==(l=On(t,i.l(i.qa-1),!0))&&(a=l.U),o.isValidLink(s,r,a,l)?n?(i.Mp=i.l(0),i.Np=i.l(i.qa-1),i.gm=!1,i.Y=s,null!==r&&(i.Mg=r.Qd),i.$=a,null!==l&&(i.Fh=l.Qd),i.Jc!==t.gw&&e.Aa("LinkRelinked",i,t.gw),i.jd!==t.hw&&e.Aa("LinkRelinked",i,t.hw)):Yn(o,s,r,a,l):Yn(o,null,null,null,null)}}}}function qn(t,n){var i=t.g;if(null!==i){t.nj&&Bn(t,!0),bn(t);var e=Qi(i,n,null,function(n){return!Ln(t,n)}),o=i.R;if(o.Pe=e,null!==e){o.Ac=!1;for(var r=e;null!==r;){var s=r.KA;if(null!==s&&(s(o,r),o.Ac))break;r=Fn(r)}}else null!==(r=i.KA)&&r(o);if(t.sa||null!==Cf){for(o=(t.cc||t.Xb).i;o.next();)(r=o.key)instanceof As&&r.fe.each(function(t){t.gm=!1});if(t.doDropOnto(n,e),t.sa||null!==Cf){for(e=Yh.Ff(),o=i.selection.i;o.next();)(r=o.value)instanceof As&&to(i,r.getAvoidableRect(e));Yh.Db(e)}}}}function zn(t,n,i){if(null===t.cc){var e=t.g;if(null!==e&&!e.fb&&!e.zf){e.wb=!i,e.Eq=!i,t.Kk=e.R.da,i=e.Lp(n,e,!0);var o=Yh.Ff();Mn(n,o);var e=o.x+o.width/2,r=o.y+o.height/2;Yh.Db(o);var o=t.Bw,s=new b(as),l=Yh.K();for(n=n.i;n.next();){var a=n.value,h=i.ja(a);a.de()&&a.canCopy()?(a=a.location,l.m(o.x-(e-a.x),o.y-(r-a.y)),h.location=l,h.$e(),s.add(h,gn(l))):a instanceof Js&&a.canCopy()&&(h.Hk(o.x-e,o.y-r),s.add(h,gn()))}Yh.v(l),t.cc=s,vn(t,s.Fj()),null!==t.ed&&(i=t.ed,e=i.Vn,i.Hk(t.Kk.x-(e.x+e.width/2),t.Kk.y-(e.y+e.height/2)))}}}function En(t){this.point=t,this.iG=qu}function In(t,n,i){this.Oc=t,this.info=n,this.eI=i}function Rn(){0<arguments.length&&Yh.hd(Rn),dn.call(this),this.tD=100,this.UC=!1;var t=new Js,n=new Cr;n.Wf=!0,n.stroke="blue",t.add(n),n=new Cr,n.yq="Standard",n.fill="blue",n.stroke="blue",t.add(n),t.Yf="Tool",this.ND=t,t=new As,n=new Cr,n.Qd="",n.Cb="Rectangle",n.fill=null,n.stroke="magenta",n.kb=2,n.Ba=Ku,t.add(n),t.dm=!1,t.Yf="Tool",this.LD=t,this.MD=n,t=new As,n=new Cr,n.Qd="",n.Cb="Rectangle",n.fill=null,n.stroke="magenta",n.kb=2,n.Ba=Ku,t.add(n),t.dm=!1,t.Yf="Tool",this.OD=t,this.PD=n,this.rD=this.qD=this.mD=this.lD=this.nD=null,this.QC=!0,this.WG=new b(To,"boolean"),this.uD=this.ol=this.HD=null}function Gn(t,n,i,e){if(n===i)return!0;var o=n.Y;return!(null===o||!o.mf||(e.add(o),!Gn(t,o.Mc,i,e)))||!(null===(n=n.$)||!n.mf||(e.add(n),!Gn(t,n.Mc,i,e)))}function Vn(t,n,i,e,o){if(n===i)return!0;if(null===n||null===i)return!1;for(var r=n.fe;r.next();){var s=r.value;if(s!==e&&(!o||s.Lc)&&s.$===n&&(s=s.Y)!==n&&Vn(t,s,i,e,o))return!0}return!1}function Hn(t,n,i,e,o){if(i===e)return!0;if(null===i||null===e||n.contains(i))return!1;n.add(i);for(var r=i.fe;r.next();){var s=r.value;if(s!==o&&s.$===i&&(s=s.Y)!==i&&Hn(t,n,s,e,o))return!0}return!1}function Kn(t,n,i,e,o){if(i===e)return!0;if(null===i||null===e||n.contains(i))return!1;n.add(i);for(var r=i.fe;r.next();){var s=r.value;if(s!==o){var l=s.Y,s=s.$,l=l===i?s:l;if(l!==i&&Kn(t,n,l,e,o))return!0}}return!1}function Un(){0<arguments.length&&Yh.hd(Un),Rn.call(this),this.name="Linking",this.RB={},this.QB=null,this.aa=jf,this.CD=null}function Jn(){0<arguments.length&&Yh.hd(Jn),Rn.call(this),this.name="Relinking";var t=new Cr;t.Cb="Diamond",t.Ba=Ju,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="pointer",t.Me=0,this.DC=t,t=new Cr,t.Cb="Diamond",t.Ba=Ju,t.fill="lightblue",t.stroke="dodgerblue",t.cursor="pointer",t.Me=-1,this.QD=t,this.gc=null,this.oD=new P}function Yn(t,n,i,e,o){null!==t.g&&(null!==n?(t.copyPortProperties(n,i,t.Rd,t.$n,!1),t.g.add(t.Rd)):t.g.remove(t.Rd),null!==e?(t.copyPortProperties(e,o,t.Sd,t.ao,!0),t.g.add(t.Sd)):t.g.remove(t.Sd))}function Wn(){0<arguments.length&&Yh.hd(Wn),dn.call(this),this.name="LinkReshaping";var t=new Cr;t.Cb="Rectangle",t.Ba=Uu,t.fill="lightblue",t.stroke="dodgerblue",this.dl=t,t=new Cr,t.Cb="Diamond",t.Ba=Uu,t.fill="lightblue",t.stroke="dodgerblue",this.aD=t,this.vD=3,this.Dy=this.gc=null,this.gp=new x,this.jw=null}function Xn(t,n,i,e,o,r){return r?Math.abs(n.y-i.y)<t.Dh&&Math.abs(i.y-e.y)<t.Dh&&Math.abs(e.y-o.y)<t.Dh:Math.abs(n.x-i.x)<t.Dh&&Math.abs(i.x-e.x)<t.Dh&&Math.abs(e.x-o.x)<t.Dh}function $n(){0<arguments.length&&Yh.hd($n),dn.call(this),this.name="Resizing",this.Wh=new M(1,1).freeze(),this.Vh=new M(9999,9999).freeze(),this.Jj=new M(NaN,NaN).freeze(),this.Ir=!1,this.Dc=null;var t=new Cr;t.ph=lu,t.Cb="Rectangle",t.Ba=Uu,t.fill="lightblue",t.stroke="dodgerblue",t.kb=1,t.cursor="pointer",this.dl=t,this.gc=null,this.gp=new x,this.kD=new M,this.pD=new x,this.$y=new M(0,0),this.Zy=new M(1/0,1/0),this.Yy=new M(1,1),this.hD=!0}function Qn(){0<arguments.length&&Yh.hd(Qn),dn.call(this),this.name="Rotating",this.AD=45,this.zD=2,this.Dc=null;var t=new Cr;t.Cb="Ellipse",t.Ba=Ju,t.fill="lightblue",t.stroke="dodgerblue",t.kb=1,t.cursor="pointer",this.dl=t,this.gc=null,this.iw=0,this.wD=new x}function Zn(){dn.call(this),0<arguments.length&&Yh.hd(Zn),this.name="ClickSelecting"}function _n(){dn.call(this),0<arguments.length&&Yh.hd(_n),this.name="Action",this.io=null}function ti(){dn.call(this),0<arguments.length&&Yh.hd(ti),this.name="ClickCreating",this.qm=null,this.OC=!0,this.CC=new x(0,0)}function ni(){this.WD=this.ZC=this.gz=this.Cz=null}function ii(t,n,i){this.text=t,this.qE=n,this.visible=i}function ei(){dn.call(this),0<arguments.length&&Yh.hd(ei),this.name="ContextMenu",this.hC=this.Ky=this.eC=null,this.eD=new x,this.My=this.wm=null;var t=this;this.Jz=function(){t.stopTool()},oi(this)}function oi(t){var i=new ni;if(i.show=function(t,n,i){i.showDefaultContextMenu()},i.Dn=function(t,n){n.hideDefaultContextMenu()},t.wm=i,t.Jz=function(){t.stopTool()},!1===Yh.xE){var i=Yh.createElement("div"),e=Yh.createElement("div");i.style.cssText="top: 0px;z-index:300;position: fixed;display: none;text-align: center;left: 25%;width: 50%;background-color: #F5F5F5;padding: 16px;border: 16px solid #444;border-radius: 10px;margin-top: 10px",e.style.cssText="z-index:299;position: fixed;display: none;top: 0;left: 0;width: 100%;height: 100%;background-color: black;opacity: 0.8;";var o=Yh.createElement("style");n.document.getElementsByTagName("head")[0].appendChild(o),o.sheet.insertRule(".goCXul { list-style: none; }",0),o.sheet.insertRule(".goCXli {font:700 1.5em Helvetica, Arial, sans-serif;position: relative;min-width: 60px; }",0),o.sheet.insertRule(".goCXa {color: #444;display: inline-block;padding: 4px;text-decoration: none;margin: 2px;border: 1px solid gray;border-radius: 10px; }",0),i.addEventListener("contextmenu",ri,!1),i.addEventListener("selectstart",ri,!1),e.addEventListener("contextmenu",ri,!1),n.document.body&&(n.document.body.appendChild(i),n.document.body.appendChild(e)),Yh.Dt=i,Yh.Ct=e,Yh.xE=!0}}function ri(t){return t.preventDefault(),!1}function si(t){var n=t.g;if(null!==n)if(t.sa){var i=t.Jl;if(null!==i){if(!(i instanceof ni)){var e=n.Je(n.R.da,null,null);null!==e&&e.Zl(i)&&t.standardMouseClick(null,null)}t.stopTool(),t.canStart()&&(n.$a=t,t.doMouseUp())}}else t.canStart()&&(li(t,!0),t.sa||t.stopTool())}function li(t,n,i){if(void 0===i&&(i=null),n&&t.standardMouseSelect(),!t.standardMouseClick())if(t.sa=!0,n=t.wm,null===i&&(i=t.findObjectWithContextMenu()),null!==i){var e=i.contextMenu;null!==e?(t.$w=i instanceof To?i:null,t.showContextMenu(e,t.$w)):null!==n&&t.showContextMenu(n,t.$w)}else null!==n&&t.showContextMenu(n,null)}function ai(t){return null===t.g?null:(t=new f(ii),t.add(new ii("Copy",function(t){t.ob.copySelection()},function(t){return t.ob.canCopySelection()})),t.add(new ii("Cut",function(t){t.ob.cutSelection()},function(t){return t.ob.canCutSelection()})),t.add(new ii("Delete",function(t){t.ob.deleteSelection()},function(t){return t.ob.canDeleteSelection()})),t.add(new ii("Paste",function(t){t.ob.pasteSelection(t.R.da)},function(t){return t.ob.canPasteSelection()})),t.add(new ii("Select All",function(t){t.ob.selectAll()},function(t){return t.ob.canSelectAll()})),t.add(new ii("Undo",function(t){t.ob.undo()},function(t){return t.ob.canUndo()})),t.add(new ii("Redo",function(t){t.ob.redo()},function(t){return t.ob.canRedo()})),t.add(new ii("Scroll To Part",function(t){t.ob.scrollToPart()},function(t){return t.ob.canScrollToPart()})),t.add(new ii("Zoom To Fit",function(t){t.ob.zoomToFit()},function(t){return t.ob.canZoomToFit()})),t.add(new ii("Reset Zoom",function(t){t.ob.resetZoom()},function(t){return t.ob.canResetZoom()})),t.add(new ii("Group Selection",function(t){t.ob.groupSelection()},function(t){return t.ob.canGroupSelection()})),t.add(new ii("Ungroup Selection",function(t){t.ob.ungroupSelection()},function(t){return t.ob.canUngroupSelection()})),t.add(new ii("Edit Text",function(t){t.ob.editTextBlock()},function(t){return t.ob.canEditTextBlock()})),t)}function hi(){dn.call(this),0<arguments.length&&Yh.hd(hi),this.name="DragSelecting",this.Bo=175,this.TC=!1;var t=new as;t.Yf="Tool",t.dm=!1;var n=new Cr;n.name="SHAPE",n.Cb="Rectangle",n.fill=null,n.stroke="magenta",t.add(n),this.sm=t}function ui(){dn.call(this),0<arguments.length&&Yh.hd(ui),this.name="Panning",this.uz=new x,this.Ij=!1;var t=this;this.ED=function(){n.document.removeEventListener("scroll",t.ED,!1),t.stopTool()}}function fi(){0<arguments.length&&Yh.hd(fi),dn.call(this),this.name="TextEditing",this.Hz=this.lk=null,this.DD=Rf,this.xl=null,this.Ta=Vf,this.sl=null,this.bD=1,this.xD=!0;var t=new ni;this.jC=null,this.rC=t,this.Ny=null,ci(this,t)}function ci(t,n){var i=Yh.createElement("textarea");t.Ny=i,i.addEventListener("input",function(){if(null!==t.Yg){var n=t.SI(this.value),i=this.LJ;this.style.width=20+n.za.width*i+"px",this.style.height=10+n.za.height*i+"px",this.rows=n.GI}},!1),i.addEventListener("keydown",function(n){if(null!==t.Yg){var i=n.which;13===i?(!1===t.Yg.Bx&&n.preventDefault(),t.acceptText(If)):9===i?(t.acceptText(Ef),n.preventDefault()):27===i&&(t.doCancel(),null!==t.g&&t.g.doFocus())}},!1),i.addEventListener("focus",function(){pi(t)},!1),i.addEventListener("blur",function(){yi(t)},!1),n.zB=function(){return i.value},n.FA=i,n.show=function(t,n,e){if(e.state===Jf)i.style.border="3px solid red",i.focus();else{var o=t.Xa(lu),r=n.position,s=n.scale,l=t.oj()*s;l<e.BF&&(l=e.BF);var a=t.Ia.width*l+6,h=t.Ia.height*l+2,u=(o.x-r.x)*s,o=(o.y-r.y)*s;i.value=t.text,n.mj.style.font=t.font,i.style.cssText="position: absolute;z-index: 100;font: inherit;fontSize: "+100*l+"%;lineHeight: normal;width: "+a+"px;height: "+h+"px;left: "+((u-a/2|0)-1)+"px;top: "+((o-h/2|0)-1)+"px;text-align: "+t.textAlign+";margin: 0;padding: 1px;border: 0;outline: none;white-space: pre-wrap;overflow: hidden;",i.LJ=l,n.mj.appendChild(i),i.focus(),e.gy&&(i.select(),i.setSelectionRange(0,9999))}},n.Dn=function(t){t.mj.removeChild(i)}}function di(t){var n=t.Yg,i=t.g,e=t.kj;if(null!==n&&null!==e){var o=n.text,r="";e instanceof ni?null!==e.zB&&(r=e.zB()):(r=e.value,r="function"==typeof r?r():r),t.isValidText(n,o,r)?(t.Ub(t.name),t.Ta=Yf,e instanceof ni?e.show(n,i,t):null!==t.sl&&(e.style.border=t.sl,t.sl=null),t.Hf=t.name,n.text=r,null!==n.oG&&n.oG(n,o,r),null!==i&&i.Aa("TextEdited",n,o),t.Lk(),t.stopTool(),null!==i&&i.doFocus()):(t.Ta=Jf,null!==n.iA&&n.iA(t,o,r),e instanceof ni?e.show(n,i,t):(null===t.sl&&(t.sl=e.style.border,e.style.border="3px solid red"),"function"==typeof e.focus&&e.focus()))}}function pi(t){if(null!==t.kj){var n=t.Ny;t.Ta===Hf&&(t.Ta=Kf),"function"==typeof n.select&&t.gy&&(n.select(),n.setSelectionRange(0,9999))}}function yi(t){if(null!==t.kj){var n=t.Ny;"function"==typeof n.focus&&n.focus(),"function"==typeof n.select&&t.gy&&(n.select(),n.setSelectionRange(0,9999))}}function vi(){dn.call(this),this.name="ToolManager",this.LG=new f(dn),this.MG=new f(dn),this.NG=new f(dn),this.GC=this.HC=850,this.wC=new M(2,2).Ga(),this.RD=5e3,this.fD=Wf,this.EC=$f,this.qv=this.kC=null,this.en=-1}function gi(t,n){t.standardMouseOver(),t.isBeyondDragSize()&&t.standardWaitAfter(t.sa?t.cF:t.kI,n.R)}function mi(t,n,i,e){Yh.j(n,"string",vi,"replaceStandardTool:name"),Yh.G(e,f,vi,"replaceStandardTool:list"),null!==i&&(Yh.G(i,dn,vi,"replaceStandardTool:newtool"),i.g&&i.g!==t.g&&Yh.k("Cannot share tools between Diagrams: "+i.toString()),i.name=n,i.Qc(t.g)),t.findTool(n)?t.replaceTool(n,i):null!==i&&e.add(i)}function bi(){this.lC=xi,this.jr=this.kr=this.Z=null,this.lo=this.lr=this.mr=0,this.mo=this.pc=this.So=this.Wj=!1,this.Xj=this.df=!0,this.ov=this.nv=this.gC=null,this.fC=0,this.pv=null,this.cv=new d("string"),this.Vy=600,this.OG=new x(0,0),this.UB=this.TB=this.VD=!1,this.Pm=new b(To,Fi)}function xi(t,n,i,e){return t/=e/2,1>t?i/2*t*t+n:-i/2*(--t*(t-2)-1)+n}function wi(t){if(t.df&&(t.cv.clear(),t.pc))if(t.mo){if(0===t.lo){var n=+new Date;t.lo=n,requestAnimationFrame(function(){if(!1!==t.pc&&!t.Wj&&t.lo===n){var i=t.Z;i.pj("temporaryPixelRatio")&&(i.kk=1),Vi(i),t.pc=!1,i.Aa("AnimationStarting"),Pi(t,n)}})}}else t.pc=!1}function ki(t,n,i,e,r,s){if(!(!t.pc||"position"===i&&e.L(r)||n instanceof as&&!n.gF)){var l=t.Pm;if(l.contains(n)){var l=l.ja(n),a=l.start,h=l.end;void 0===a[i]&&(a[i]=Mi(e)),l.Zw&&void 0!==h[i]?l.It[i]=Mi(r):(s||(l.It[i]=Mi(r)),h[i]=Mi(r)),s&&0===i.indexOf("position:")&&n instanceof as&&(l.It.location=Mi(n.location))}else a=new o,h=new o,a[i]=Mi(e),h[i]=Mi(r),e=h,r=a.position,r instanceof x&&!r.I()&&t.cv.contains("Expand SubGraph")&&r.assign(e.position),a=new Fi(a,h,s),s&&0===i.indexOf("position:")&&n instanceof as&&(a.It.location=Mi(n.location)),l.add(n,a);t.mo=!0}}function Mi(t){return t instanceof x?t.copy():t instanceof M?t.copy():t}function Pi(t,n){function i(){if(!1!==s.Wj&&s.lo===n){var t=+new Date,e=t>y?u:t-p;Ti(s),Ci(s,r,d,l,e,u),s.nv&&s.nv(),se(r),Si(s),t>y?Ni(s):requestAnimationFrame(i)}}var e;void 0===e&&(e=new o);var r=t.Z;if(null!==r){t.Wj=!0;var s=t,l=e.TK||t.lC,a=e.uL||null,h=e.vL||null,u=e.duration||t.Vy,f=t.OG;for(e=t.Pm.i;e.next();){var c=e.value.start.position;c instanceof x&&(c.I()||c.assign(f))}t.gC=l,t.nv=a,t.ov=h,t.fC=u,t.pv=t.Pm;var d=t.pv;for(e=d.i;e.next();)a=e.value.end,a["position:placeholder"]&&(h=a["position:placeholder"],f=h.Xa(eu),f.x+=h.padding.left,f.y+=h.padding.top,a["position:placeholder"]=f);Ti(t),Ci(t,r,d,l,0,u),se(t.Z),Si(t);var p=+new Date,y=p+u;s.lo===n&&requestAnimationFrame(function(){i()})}}function Ti(t){if(!t.So){var n=t.Z;t.VD=n.wb,t.TB=n.Ne,t.UB=n.Lu,n.wb=!0,n.Ne=!0,n.Lu=!0,t.So=!0}}function Si(t){var n=t.Z;n.wb=t.VD,n.Ne=t.TB,n.Lu=t.UB,t.So=!1}function Ci(t,n,i,e,o,r){for(i=i.i;i.next();){var s,l=i.key,a=i.value,h=a.start,a=a.end;for(s in a)"position"===s&&(a["position:placeholder"]||a["position:node"])||void 0===_f[s]||_f[s](l,h[s],a[s],e,o,r)}e=n.yA,n.yA=!0,s=t.lC,0!==t.mr&&0!==t.lr&&(i=t.mr,n.tb=s(o,i,t.lr-i,r)),null!==t.kr&&null!==t.jr&&(i=t.kr,t=t.jr,n.ib=new x(s(o,i.x,t.x-i.x,r),s(o,i.y,t.y-i.y,r))),n.yA=e}function Ni(t){t.Wj=!1,t.mo=!1,Ti(t);for(var n=t.Z,i=t.gC,e=t.fC,o=t.pv.i;o.next();){var r,s=o.key,l=o.value,a=l.start,h=l.end,u=l.It;for(r in h)if(void 0!==_f[r]){var f=r;!l.Zw||"position:node"!==f&&"position:placeholder"!==f||(f="position"),_f[f](s,a[r],void 0!==u[r]?u[r]:l.Zw?a[r]:h[r],i,e,e)}l.Zw&&void 0!==u.location&&s instanceof as&&(s.location=u.location),l.Xx&&s instanceof as&&s.vd(!1)}for(i=t.Z.links;i.next();)e=i.value,null!==e.lp&&(e.points=e.lp,e.lp=null);n.Kx.clear(),n.kk=null,n.rc(),n.na(),n.$f(),oe(n),Si(t),t.ov&&t.ov(),t.lo=0,t.pv=null,t.ov=null,t.nv=null,t.kr=null,t.jr=null,t.mr=0,t.lr=0,t.Pm=new b(To,Fi),n.Aa("AnimationFinished"),n.Le()}function ji(t,n,i){var e=n.W,o=i.W,r=null;if(i instanceof Ll&&(r=i.placeholder),null!==r?(e=r.Xa(eu),e.x+=r.padding.left,e.y+=r.padding.top,ki(t,n,"position",e,n.position,!1)):ki(t,n,"position",new x(o.x+o.width/2-e.width/2,o.y+o.height/2-e.height/2),n.position,!1),ki(t,n,"scale",.01,n.scale,!1),n instanceof Ll)for(n=n.Nc;n.next();)(r=n.value)instanceof As&&ji(t,r,i)}function Li(t,n,i){if(n.isVisible()){var e=null;if(i instanceof Ll&&(e=i.placeholder),null!==e?ki(t,n,"position:placeholder",n.position,e,!0):ki(t,n,"position:node",n.position,i,!0),ki(t,n,"scale",n.scale,.01,!0),t.pc&&(e=t.Pm,e.contains(n)&&(e.ja(n).Xx=!0)),n instanceof Ll)for(n=n.Nc;n.next();)(e=n.value)instanceof As&&Li(t,e,i)}}function Di(t,n,i){t.pc&&(null===t.kr&&n.I()&&null===t.jr&&(t.kr=n.copy()),t.jr=i.copy(),t.mo=!0)}function Ai(t,n,i){t.pc&&t.Z.Gn&&(0===t.mr&&0===t.lr&&(t.mr=n),t.lr=i,t.mo=!0)}function Fi(t,n,i){this.start=t,this.end=n,this.It=new o,this.Zw=i,this.Xx=!1}function Oi(){0<arguments.length&&Yh.hd(Oi),Yh.mc(this),this.Z=null,this.zb=new f(as),this.Rb="",this.wc=1,this.kz=!1,this.tl=this.Mz=this.Vk=this.Uk=this.Tk=this.Sk=this.Qk=this.Rk=this.Pk=this.Xk=this.Ok=this.Wk=this.Nk=this.Mk=!0,this.hz=!1,this.kw=[]}function Bi(t,n,i,e){if(t.visible&&0!==t.wc){1!==t.wc&&(n.globalAlpha=t.wc);var o=t.kw;o.length=0;var r=i.scale;t=t.zb.n;for(var s=t.length,l=e.length,a=0;a<s;a++){var h=t[a];if(Ts(h)){if(h instanceof Js){var u=h;if(u.Zb&&o.push(u),!1===u.$g)continue}var f,u=ps(h,h.W);t:{f=u;for(var c=e,d=l,p=2/r,y=4/r,v=0;v<d;v++){var g=c[v];if(0!==g.width&&0!==g.height&&f.eF(g.x-p,g.y-p,g.width+y,g.height+y)){f=!0;break t}}f=!1}f&&(1<u.width*r||1<u.height*r?h.se(n,i):xs(h,n))}}n.globalAlpha=1}}function qi(t,n,i){if(n=zi(t,n,i),i instanceof Ll&&null!==i&&isNaN(i.fo)){if(0!==i.Nc.count){for(var e=-1,o=t.zb.n,r=o.length,s=0;s<r;s++){var l=o[s];if(l===i&&(n=s,0<=e))break;if(0>e&&l.Pa===i&&(e=s,0<=n))break}!(0>e)&&e<n&&(o=t.zb,o.Yc(n),o.Md(e,i))}i=i.Pa,null!==i&&qi(t,-1,i)}}function zi(t,n,i){var e=i.fo;if(isNaN(e))return n;t=t.zb;var o=t.count;if(1>=o)return n;if(0>n&&(n=t.indexOf(i)),0>n)return-1;for(var r=n-1,s=NaN;0<=r&&(s=t.ea(r).fo,isNaN(s));)r--;for(var l=n+1,a=NaN;l<o&&(a=t.ea(l).fo,isNaN(a));)l++;if(!isNaN(s)&&s>e)for(;;){if(-1===r||s<=e){if(++r===n)break;return t.Yc(n),t.Md(r,i),r}for(s=NaN;0<=--r&&(s=t.ea(r).fo,isNaN(s)););}else if(!isNaN(a)&&a<e)for(;;){if(l===o||a>=e){if(--l===n)break;return t.Yc(n),t.Md(l,i),l}for(a=NaN;++l<o&&(a=t.ea(l).fo,isNaN(a)););}return n}function Ei(t){function i(){n.document.removeEventListener("DOMContentLoaded",i,!1),Ri(e)}1<arguments.length&&Yh.k("Diagram constructor can only take one optional argument, the DIV HTML element or its id."),Yh.mc(this),Sd=[],this.Sc=!0,this.OB=new bi,this.OB.Qc(this),this.Dd=17,this.Kr=!1,this.xz="default";var e=this;null!==n.document.body?Ri(this):n.document.addEventListener("DOMContentLoaded",i,!1),this.bc=new f(Oi),this.Lb=this.Ib=0,this.hk=this.Mb=this.rf=this.Fb=null,this.UF(),this.Po=null,this.TF(),this.ib=new x(NaN,NaN).freeze(),this.tb=1,this.Jv=new x(NaN,NaN).freeze(),this.Kv=NaN,this.bw=1e-4,this.$v=100,this.dd=new A,this.Mw=new x(NaN,NaN).freeze(),this.Bv=new P(NaN,NaN,NaN,NaN).freeze(),this.uw=new D(0,0,0,0).freeze(),this.vw=hc,this.rw=this.pw=null,this.rm=tc,this.so=iu,this.gl=tc,this.Mo=iu,this.Lv=this.Iv=eu,this.Be=!0,this.Gr=!1,this.tg=new d(as),this.al=new b(Js,P),this.Do=!0,this.Mq=250,this.no=-1,this.fv=new D(16,16,16,16).freeze(),this.tv=this.Of=!1,this.Ho=!0,this.Ii=new Lt,this.Uc=new Lt,this.Qb=new Lt,this.hh=this.wi=null,this.gt=!1,this.Qy=this.Ry=null,Qe(this),this.fp=new d(As),this.yl=new d(Ll),this.Zo=new d(Js),this.zb=new d(as),this.Rv=!0,this.Hw=fc,this.KC=!1,this.Jw=ec,this.Ly=this.Oy=this.Iz=null,this.mv="",this.ir="auto",this.Ai=this.dj=this.Si=this.ew=this.Ti=this.Ui=this.Vi=this.zi=this.Fi=this.xi=null,this.rz=!1,this.sD={},this.ow=0,this.Zi=[null,null],this.Iy=null,this.Eq=this.Py=this.Dz=this.yD=this.cj=!1,this.VC=!0,this.jz=this.Xd=!1,this.ke=null;var o=this;this.cD=function(t){if(t.ba===o.ba&&o.Ua){o.Ua=!1;try{var n=t.yc;""===t.of&&n===gf&&Se(o,t.object,t.propertyName)}finally{o.Ua=!0}}},this.dD=function(t){Te(o,t)},this.YD=!0,this.eh=-2,this.Bi=new b(Object,as),this.Kj=new b(Object,Js),this.Em=new b(Object,Array),this.hp=new b("string",Array),this.vz=new f(Kr),this.Ki=!1,this.Nk=this.Mk=this.Vu=this.df=!0,this.Xu=this.Wu=!1,this.bv=this.$u=this.Vk=this.Uk=this.Tk=this.Sk=this.Qk=this.Rk=this.Pk=this.Zu=this.Xk=this.Ok=this.Wk=!0,this.Cm=this.SC=!1,this.av=this.Yu=this.Gv=this.Fv=!0,this.xw=this.tw=16,this.zz=this.sw=!1,this.Qs=this.ww=null,this.Az=this.Bz=0,this.ff=new D(5).freeze(),this.zw=new d(as).freeze(),this.aw=999999999,this.Hv=new d(as).freeze(),this.hl=this.Am=this.Vj=!0,this.el=this.Uj=!1,this.ie=null,this.dv=!0,this.fh=!1,this.KG=new d(Js),this.IC=new d(yl),this.Cd=null,this.jD=1,this.BD=0,this.oh={scale:1,position:new x,bounds:new P,isScroll:!1},this.XD=new P(NaN,NaN,NaN,NaN).freeze(),this.uv=new P(NaN,NaN,NaN,NaN).freeze(),this.Sv=!1,this.wv=null,this.lw=new d(fo),Hi(this),this.Wv=this.Dv=this.fw=this.oC=this.nC=this.pC=this.ak=this.cl=this.Wi=null,Ii(this),this.pd=null,this.Cv=!1,this.vo=null,this.bb=new vi,this.bb.initializeStandardTools(),this.$a=this.Et=this.bb,this.ob=new hn,this.ba=new Zt,this.cj=!0,this.Sb=new ql,this.cj=!1,this.AC=this.Uy=null,this.Ad=1,this.kk=null;var r=Yh.vfo.split(".");!0!==Yh.gx.licenseKey&&"1"===r[0]&&7>parseInt(r[1],10)&&(Yh.trace("Warning: You have entered a license key for GoJS version 1.7 or later, but this library is version "+Yh.vfo+". This license key will do nothing until you upgrade to GoJS 1.7 or later."),Yh.gx.licenseKey=!0),this.ll=1,this.Gm=0,this.XC=new x,this.TD=500,this.ev=new x,this.Zs=null,this.il=!1,this.preventDefault=this.Wx=this.JF=this.KF=this.IF=this.Pn=this.Pg=this.Qn=this.Nn=this.On=this.BB=this.sB=this.tB=this.uB=this.vl=this.Ms=this.ul=this.Ls=null,this.gD=1,this.Ov=!1,this.fl=new lo,void 0!==t&&ho(this,t),this.Sc=!1}function Ii(t){t.Wi=new b("string",as);var n=new As,i=new qr;i.bind(new on("text","",Mf)),n.add(i),t.pC=n,t.Wi.add("",n),n=new As,i=new qr,i.stroke="brown",i.bind(new on("text","",Mf)),n.add(i),t.Wi.add("Comment",n),n=new As,n.dm=!1,n.Tz=!1,i=new Cr,i.Cb="Ellipse",i.fill="black",i.stroke=null,i.Ba=new M(3,3).Ga(),n.add(i),t.Wi.add("LinkLabel",n),t.cl=new b("string",Ll),n=new Ll,n.cB="GROUPPANEL",n.type=$c,i=new qr,i.font="bold 12pt sans-serif",i.bind(new on("text","",Mf)),n.add(i),i=new tr(Zc),i.name="GROUPPANEL";var e=new Cr;e.Cb="Rectangle",e.fill="rgba(128,128,128,0.2)",e.stroke="black",i.add(e),e=new Bl,e.padding=new D(5,5,5,5).Ga(),i.add(e),n.add(i),t.nC=n,t.cl.add("",n),t.ak=new b("string",Js),n=new Js,i=new Cr,i.Wf=!0,n.add(i),i=new Cr,i.yq="Standard",i.fill="black",i.stroke=null,i.kb=0,n.add(i),t.oC=n,t.ak.add("",n),n=new Js,i=new Cr,i.Wf=!0,i.stroke="brown",n.add(i),t.ak.add("Comment",n),n=new Ds,n.type=Zc,i=new Cr,i.fill=null,i.stroke="dodgerblue",i.kb=3,n.add(i),i=new Bl,i.margin=new D(1.5,1.5,1.5,1.5).Ga(),n.add(i),t.fw=n,t.Dv=n,n=new Ds,n.type=id,i=new Cr,i.Wf=!0,i.fill=null,i.stroke="dodgerblue",i.kb=3,n.add(i),t.Wv=n}function Ri(t){var i=Yh.createElement("p");i.style.width="100%",i.style.height="200px",i.style.boxSizing="content-box";var e=Yh.createElement("div");e.style.position="absolute",e.style.visibility="hidden",e.style.width="200px",e.style.height="150px",e.style.overflow="hidden",e.style.boxSizing="content-box",e.appendChild(i),n.document.body.appendChild(e);var o=i.offsetWidth;e.style.overflow="scroll",i=i.offsetWidth,o===i&&(i=e.clientWidth),n.document.body.removeChild(e),e=o-i,0!==e||Yh.mF||(e=11),t.Dd=e,e=Yh.createElement("div"),e.dir="rtl",e.style.cssText="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll;",e.textContent="A",n.document.body.appendChild(e),o="reverse",0<e.scrollLeft?o="default":(e.scrollLeft=1,0===e.scrollLeft&&(o="negative")),n.document.body.removeChild(e),t.xz=o}function Gi(t){var i=t.Fb;i.addEventListener("touchstart",t.uB,!1),i.addEventListener("touchmove",t.tB,!1),i.addEventListener("touchend",t.sB,!1),i.addEventListener("mousemove",t.On,!1),i.addEventListener("mousedown",t.Nn,!1),i.addEventListener("mouseup",t.Qn,!1),i.addEventListener("mousewheel",t.Pg,!1),i.addEventListener("DOMMouseScroll",t.Pg,!1),i.addEventListener("mouseout",t.Pn,!1),i.addEventListener("keydown",t.CI,!1),i.addEventListener("keyup",t.DI,!1),i.addEventListener("selectstart",function(t){return t.preventDefault(),!1},!1),i.addEventListener("contextmenu",function(t){return t.preventDefault(),!1},!1),i.addEventListener("gesturechange",function(n){t.bb.Vp===Qf&&n.preventDefault()},!1),i.addEventListener("pointerdown",t.IF,!1),i.addEventListener("pointermove",t.KF,!1),i.addEventListener("pointerleave",t.JF,!1),n.addEventListener("resize",t.BB,!1)}function Vi(t){if(null!==t.Fb){var n=t.Mb;if(0!==n.clientWidth&&0!==n.clientHeight){var i=t.el?t.Dd:0,e=t.Uj?t.Dd:0,o=t.Ad;t.Ad=t.computePixelRatio(),t.Ad!==o&&(t.Gr=!0,t.Le()),n.clientWidth===t.Ib+i&&n.clientHeight===t.Lb+e||(t.Am=!0,t.Be=!0,n=t.Sb,null!==n&&n.Dx&&t.Gl===tc&&n.J(),t.Xd||t.Le())}}}function Hi(t){var n=new Oi;n.name="Background",t.tt(n),n=new Oi,n.name="",t.tt(n),n=new Oi,n.name="Foreground",t.tt(n),n=new Oi,n.name="Adornment",n.Kc=!0,t.tt(n),n=new Oi,n.name="Tool",n.Kc=!0,n.hF=!0,t.tt(n),n=new Oi,n.name="Grid",n.vf=!1,n.Ug=!1,n.Kc=!0,t.cH(n,t.Kt("Background"))}function Ki(t){t.pd=new tr(ed),t.pd.name="GRID";var n=new Cr;n.Cb="LineH",n.stroke="lightgray",n.kb=.5,n.interval=1,t.pd.add(n),n=new Cr,n.Cb="LineH",n.stroke="gray",n.kb=.5,n.interval=5,t.pd.add(n),n=new Cr,n.Cb="LineH",n.stroke="gray",n.kb=1,n.interval=10,t.pd.add(n),n=new Cr,n.Cb="LineV",n.stroke="lightgray",n.kb=.5,n.interval=1,t.pd.add(n),n=new Cr,n.Cb="LineV",n.stroke="gray",n.kb=.5,n.interval=5,t.pd.add(n),n=new Cr,n.Cb="LineV",n.stroke="gray",n.kb=1,n.interval=10,t.pd.add(n),n=new as,n.add(t.pd),n.Yf="Grid",n.fo=0,n.AA=!1,n.gF=!1,n.Ug=!1,n.EA="GRID",t.add(n),t.zb.remove(n),t.pd.visible=!1}function Ui(){this.Z.isEnabled?this.Z.LH(this):me(this.Z)}function Ji(t){this.Z.isEnabled?(this.Z.zz=!0,this.Z.Bz=t.target.scrollTop,this.Z.Az=t.target.scrollLeft):me(this.Z)}function Yi(t){if(t.OE.I()){var n=t.OE.copy();return n.Nw(t.padding),n}for(var i=!0,e=t.bc.n,o=e.length,r=0;r<o;r++){var s=e[r];if(s.visible&&(!s.Kc||s.hF))for(var s=s.zb.n,l=s.length,a=0;a<l;a++){var h=s[a];h.AA&&h.isVisible()&&(h=h.W,h.I()&&(i?(i=!1,n=h.copy()):n.Hh(h)))}}return i&&(n=new P(0,0,0,0)),n.Nw(t.padding),n}function Wi(t,n){if((n||t.fh)&&!t.Sc&&null!==t.Fb&&!t.Oa.lf&&t.qe.I()){t.Sc=!0;var i=t.rm;n&&t.gl!==tc&&(i=t.gl);var e=i!==tc?Xi(t,i):t.scale,i=t.pb.copy(),o=t.Ib/e,r=t.Lb/e,s=null,l=t.Oa;l.pc&&(s=t.ib.copy()),t.position.Ra();var a=t.so;n&&!a.fd()&&t.Mo.fd()&&(a=t.Mo),$i(t,t.ib,t.qe,o,r,a,n),t.position.freeze(),null!==s&&Di(l,s,t.ib),o=t.scale,t.scale=e,t.Sc=!1,e=t.pb,e.Ic(i)||t.wu(i,e,o,t.scale,!1)}}function Xi(t,n){var i=t.ob.bx;if(null===t.Fb)return i;t.Vj&&Je(t,t.th());var e=t.qe;if(!e.I())return i;var o=e.width,e=e.height,r=t.Ib,s=t.Lb,l=r/o,a=s/e;return n===nc?(o=Math.min(a,l),o>i&&(o=i),o<t.zh&&(o=t.zh),o>t.yh&&(o=t.yh),o):n===ic?(o=a>l?(s-t.Dd)/e:(r-t.Dd)/o,o>i&&(o=i),o<t.zh&&(o=t.zh),o>t.yh&&(o=t.yh),o):t.scale}function $i(t,n,i,e,o,r,s){var l=n.x,a=n.y;(s||t.$A===hc)&&(r.fd()&&(e>i.width&&(l=i.x+(r.x*i.width+r.offsetX)-(r.x*e-r.offsetX)),o>i.height&&(a=i.y+(r.y*i.height+r.offsetY)-(r.y*o-r.offsetY))),r=t.aG,s=e-i.width,e<i.width+r.left+r.right?(l=Math.min(l+e/2,i.right+Math.max(s,r.right)-e/2),l=Math.max(l,i.left-Math.max(s,r.left)+e/2),l-=e/2):l>i.left?l=i.left:l<i.right-e&&(l=i.right-e),e=o-i.height,o<i.height+r.top+r.bottom?(a=Math.min(a+o/2,i.bottom+Math.max(e,r.bottom)-o/2),a=Math.max(a,i.top-Math.max(e,r.top)+o/2),a-=o/2):a>i.top?a=i.top:a<i.bottom-o&&(a=i.bottom-o)),n.x=isFinite(l)?l:-t.padding.left,n.y=isFinite(a)?a:-t.padding.top,null!==t.MF&&(t=t.MF(t,n),n.x=t.x,n.y=t.y)}function Qi(t,n,i,e){for(void 0===i&&(i=null),void 0===e&&(e=null),ae(t),t=t.bc.Hn;t.next();){var o=t.value;if(o.visible&&!o.Kc&&null!==(o=o.Je(n,i,e)))return o}return null}function Zi(t,n,i,e,o){e.g=n,e.event=i,o?ie(t,i,e):(e.cf=n.Qb.cf,e.da=n.Qb.da),t=0,i.ctrlKey&&(t+=1),i.altKey&&(t+=2),i.shiftKey&&(t+=4),i.metaKey&&(t+=8),e.wd=t,e.button=i.button,void 0===i.buttons||Yh.uI||(e.buttons=i.buttons),Yh.Fk&&0===i.button&&i.ctrlKey&&(e.button=2),e.Ol=!1,e.up=!1,e.Fe=1,e.Nl=0,e.Ac=!1,e.bubbles=!1,e.timestamp=Date.now(),e.fu=!1,e.Wg=i.target.Z?i.target.Z:null,e.Pe=null}function _i(t,n,i,e,o){e.g=t,ie(t,i,e),e.wd=0,e.button=0,e.buttons=1,e.Ol=!0,e.up=!1,e.Fe=1,e.Nl=0,e.Ac=!1,e.bubbles=!0,e.event=n,e.timestamp=Date.now(),e.fu=o,e.Wg=n.target.Z?n.target.Z:null,e.Pe=null,t.Ii=e.copy(),Cf=null}function te(t,i,e,o,r){var s=null;o.g=t,null!==e?((s=n.document.elementFromPoint(e.clientX,e.clientY))&&s.Z?s=s.Z:(e=i.changedTouches[0],s=t),o.Wg=s,ie(t,e,o)):null!==t.Uc?(o.da=t.Uc.da,o.cf=t.Uc.cf,o.Wg=t.Uc.Wg):null!==t.Ii&&(o.da=t.Ii.da,o.cf=t.Ii.cf,o.Wg=t.Ii.Wg),o.wd=0,o.button=0,o.buttons=1,o.Ol=!1,o.up=!1,o.Fe=1,o.Nl=0,o.Ac=!1,o.bubbles=!1,o.event=i,o.timestamp=Date.now(),o.fu=r,o.Pe=null}function ne(t,n){return!!t.bubbles||(void 0!==n.stopPropagation&&n.stopPropagation(),(void 0===n.touches||2>n.touches.length)&&n.preventDefault(),n.cancelBubble=!0,!1)}function ie(t,n,i){var e=t.Fb,o=t.Ib,r=t.Lb,s=0,l=0;null!==e&&(e=e.getBoundingClientRect(),s=n.clientX-o/e.width*e.left,l=n.clientY-r/e.height*e.top),i.cf.m(s,l),null!==t.dd?(n=Yh.xb(s,l),t.dd.mi(n),i.da.assign(n),Yh.v(n)):i.da.m(s,l)}function ee(t,n,i,e){var o=null;if(void 0!==n.targetTouches){if(2>n.targetTouches.length)return;o=n.targetTouches[i]}else{if(null===t.Zi[0])return;o=t.Zi[i]}i=t.Fb,n=t.Ib,t=t.Lb;var r=0,s=0;null!==i&&null!==o&&(i=i.getBoundingClientRect(),r=o.clientX-n/i.width*i.left,s=o.clientY-t/i.height*i.top),e.m(r,s)}function oe(t){t.Xd||ae(t),t.Vj&&Je(t,t.th())}function re(t,n){t.Oa.lf||t.Sc||!t.Am||me(t)||(n&&ae(t),Wi(t,!1))}function se(t){if(!t.Xd&&(t.Of=!1,null!==t.Mb)){t.Xd=!0;var n=t.Oa,i=t.vz;if(!n.So&&0!==i.length){for(var e=i.n,o=e.length,r=0;r<o;r++){var s=e[r];Yo(s,!1),s.H()}i.clear()}i=t.IC,0<i.count&&(i.each(function(t){t.yB()}),i.clear()),e=i=!1,n.lf&&(e=!0,i=t.wb,t.wb=!0),n.pc||Vi(t),re(t,!1),null!==t.pd&&(t.pd.visible&&!t.Cv&&(ke(t),t.Cv=!0),!t.pd.visible&&t.Cv&&(t.Cv=!1)),ae(t),o=!1,t.fh&&!t.dv||(t.fh?Xe(t,!t.tv):(t.Ub("Initial Layout"),!1===n.isEnabled&&n.qi(),Xe(t,!1)),o=!0),t.tv=!1,ae(t),t.Dz||n.lf||oe(t),re(t,!0),o&&(t.fh||le(t),t.Aa("LayoutCompleted")),ae(t),o&&!t.fh&&(t.fh=!0,t.Gd("Initial Layout"),t.wb||t.oa.clear(),Yh.setTimeout(function(){t.oi=!1},1)),de(t),wi(n),t.se(t.rf),e&&(t.wb=i),t.Xd=!1}}function le(t){var n=t.bc.n;if(t.Df(n,n.length,t),t.gl!==tc?t.scale=Xi(t,t.gl):t.rm!==tc?t.scale=Xi(t,t.rm):(n=t.oI,isFinite(n)&&0<n&&(t.scale=n)),n=t.nI,n.I())t.position=n;else{n=Yh.K(),n.Wn(t.qe,t.mI);var i=t.pb,i=Yh.ig(0,0,i.width,i.height),e=Yh.K();e.Wn(i,t.pI),e.m(n.x-e.x,n.y-e.y),t.position=e,Yh.Db(i),Yh.v(e),Yh.v(n),pe(t),re(t,!0),Wi(t,!0)}t.Aa("InitialLayoutCompleted"),ke(t)}function ae(t){if((t.Xd||!t.Oa.lf)&&0!==t.tg.count){for(var n=0;23>n;n++){var i=t.tg.i;if(null===i||0===t.tg.count)break;t.tg=new d(as),t.yB(i,t.tg)}t.fg.each(function(t){t instanceof Ll&&0!=(65536&t.ya)!=!1&&(t.ya^=65536)})}}function he(t,n){for(var i=Yh.lb(),e=Yh.lb(),o=n.Nc;o.next();){var r=o.value;r.isVisible()&&(r instanceof Ll?(Jo(r)||Wo(r)||ks(r))&&he(t,r):r instanceof Js?r.Y===n||r.$===n?e.push(r):i.push(r):(Do(r,1/0,1/0),r.ic()))}for(var o=i.length,s=0;s<o;s++)r=i[s],Do(r,1/0,1/0),r.ic();for(Yh.wa(i),Do(n,1/0,1/0),n.ic(),o=e.length,s=0;s<o;s++)r=e[s],Do(r,1/0,1/0),r.ic();Yh.wa(e)}function ue(t,n,i,e,o){null===t.Mb&&Yh.k("No div specified");var r=t.Fb;if(null===r&&Yh.k("No canvas specified"),!t.Oa.pc){var s=t.rf;if(t.Be){ve(t);var l=t.Ad;Yh.En?(r.width=r.width,s.Ee(!0)):(s.setTransform(1,0,0,1,0,0),s.clearRect(0,0,t.Ib*l,t.Lb*l)),s.iy(!1),s.drawImage(t.Uy.Hd,0<e?0:Math.round(-e),0<o?0:Math.round(-o)),o=t.ib;var r=t.tb,a=Math.round(o.x*r)/r,h=Math.round(o.y*r)/r;for(e=t.dd,e.reset(),1!==r&&e.scale(r),0===o.x&&0===o.y||e.translate(-a,-h),s.save(),s.beginPath(),o=i.length,r=0;r<o;r++)a=i[r],0!==a.width&&0!==a.height&&s.rect(Math.floor(a.x),Math.floor(a.y),Math.ceil(a.width),Math.ceil(a.height));for(s.clip(),s.setTransform(1,0,0,1,0,0),s.scale(l,l),s.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),i=t.bc.n,o=i.length,t.Df(i,o,t),ce(t,s),r=0;r<o;r++)Bi(i[r],s,t,n);s.restore(),s.Ee(!0),t.fl?t.fl.lm(t)&&t.wv():t.yr=function(){return new x(0,0)},t.hl=!1,t.Be=!1,t.Wx()}}}function fe(t,n,i,e,o,r,s,l,a,h){null===t.Mb&&Yh.k("No div specified"),null===t.Fb&&Yh.k("No canvas specified"),void 0===s&&(s=null),void 0===l&&(l=null),void 0===a&&(a=!1),void 0===h&&(h=!1),ve(t),t.rf.Ee(!0),ye(t),t.jz=!0;var u=t.tb;t.tb=o;var f=t.bc.n,c=f.length;try{var p=new P(r.x,r.y,e.width/o,e.height/o),y=p.copy();y.Nw(i),ke(t,y),ae(t),t.Df(f,c,t,p);var v=t.Ad;n.setTransform(1,0,0,1,0,0),n.scale(v,v),n.clearRect(0,0,e.width,e.height),null!==l&&""!==l&&(n.fillStyle=l,n.fillRect(0,0,e.width,e.height));var g=Yh.Gf();g.reset(),g.translate(i.left,i.top),g.scale(o),0===r.x&&0===r.y||g.translate(-r.x,-r.y),n.setTransform(g.m11,g.m12,g.m21,g.m22,g.dx,g.dy),Yh.ue(g),ce(t,n);var m;if(null!==s){var b=new d(as),w=s.i;for(w.reset();w.next();){var k=w.value;!1===h&&"Grid"===k.layer.name||null===k||b.add(k)}m=function(i){var e=a;if(i.visible&&0!==i.wc&&(void 0===e&&(e=!0),e||!i.Kc)){var e=i.zb.n,o=e.length;if(0!==o){1!==i.wc&&(n.globalAlpha=i.wc),i=i.kw,i.length=0;for(var r=t.scale,s=0;s<o;s++){var l=e[s];if(Ts(l)&&b.contains(l)){if(l instanceof Js){var h=l;if(h.Zb&&i.push(h),!1===h.$g)continue}h=l.W,1<h.width*r||1<h.height*r?l.se(n,t):xs(l,n)}}n.globalAlpha=1}}}}else if(!a&&h){var M=t.Cn.U,T=M.layer;m=function(i){i===T?M.se(n,t):i.se(n,t,a)}}else m=function(i){i.se(n,t,a)};for(i=0;i<c;i++)m(f[i]);t.jz=!1,t.fl?t.fl.lm(t)&&t.wv():t.yr=function(){return new x(0,0)}}finally{t.tb=u,t.rf.Ee(!0),ye(t),t.Df(f,c,t),ke(t)}}function ce(t,n){var i=t.hk;null!==i&&(void 0!==i.imageSmoothingEnabled&&n.iy(!!i.imageSmoothingEnabled),void 0!==(i=i.defaultFont)&&null!==i&&(n.font=i))}function de(t){if(0===t.oa.Gh&&0!==t.al.count){for(;0<t.al.count;){var n=t.al;for(t.al=new b(Js,P),n=n.i;n.next();){var i=n.key;fl(i,n.value),i.Ke()}}t.na()}}function pe(t){!1===t.Am&&(t.Am=!0)}function ye(t){!1===t.hl&&(t.hl=!0)}function ve(t){!1!==t.Gr&&(t.Gr=!1,ge(t,t.Ib,t.Lb))}function ge(t,n,i){var e=t.Fb,o=t.Ad,r=n*o,o=i*o;e.width===r&&e.height===o||(e.width=r,e.height=o,e.style.width=n+"px",e.style.height=i+"px",t.Be=!0,t.rf.Ee(!0))}function me(t){var n=t.Fb;if(null===n)return!0;var i=t.Mb,e=t.Ib,o=t.Lb,r=t.XD.copy();if(!r.I())return!0;var s=!1,l=t.el?t.Dd:0,a=t.Uj?t.Dd:0,h=i.clientWidth||e+l,u=i.clientHeight||o+a;h===e+l&&u===o+a||(t.el=!1,t.Uj=!1,a=l=0,t.Ib=h,t.Lb=u,s=t.Gr=!0),t.Am=!1;var f=t.pb,i=t.qe,h=i.width,u=i.height,c=f.width,d=f.height,p=i.x,y=f.x,v=i.right,g=f.right+l,m=i.y,b=f.y,x=i.bottom,f=f.bottom+a,w="1px",k="1px",i=t.scale;if(t.$A===hc&&h<c+l&&u<d+a||(t.sA&&t.me&&(w=1,p+1<y&&(w=Math.max((y-p)*i+t.Ib,w)),v>g+1&&(w=Math.max((v-g)*i+t.Ib,w)),c+l+1<h&&(w=Math.max((h-c+l)*i+t.Ib,w)),w=w.toString()+"px"),t.tA&&t.ne&&(l=1,m+1<b&&(l=Math.max((b-m)*i+t.Lb,l)),x>f+1&&(l=Math.max((x-f)*i+t.Lb,l)),d+a+1<u&&(l=Math.max((u-d+a)*i+t.Lb,l)),k=l.toString()+"px")),a="1px"!==w,l="1px"!==k,!(a&&l||!a&&!l)){l&&(g-=t.Dd),a&&(f-=t.Dd),t.sA&&t.me&&(w=1,p+1<y&&(w=Math.max((y-p)*i+t.Ib,w)),v>g+1&&(w=Math.max((v-g)*i+t.Ib,w)),c+1<h&&(w=Math.max((h-c)*i+t.Ib,w)),w=w.toString()+"px");var a="1px"!==w,M=a!==t.Uj?t.Lb-t.Dd:t.Lb;t.tA&&t.ne&&(l=1,m+1<b&&(l=Math.max((b-m)*i+M,l)),x>f+1&&(l=Math.max((x-f)*i+M,l)),d+1<u&&(l=Math.max((u-d)*i+M,l)),k=l.toString()+"px"),l="1px"!==k}if(t.sw&&a===t.Uj&&l===t.el)return e===t.Ib&&o===t.Lb||t.$f(),!1;if(a!==t.Uj&&(t.Lb="1px"===w?t.Lb+t.Dd:Math.max(t.Lb-t.Dd,1),s=!0),t.Uj=a,t.Qs.style.width=w,l!==t.el&&(t.Ib="1px"===k?t.Ib+t.Dd:Math.max(t.Ib-t.Dd,1),s=!0,t.Kr&&(a=Yh.K(),l?(n.style.left=t.Dd+"px",t.position=a.m(t.ib.x+t.Dd/t.scale,t.ib.y)):(n.style.left="0px",t.position=a.m(t.ib.x-t.Dd/t.scale,t.ib.y)),Yh.v(a))),t.el=l,t.Qs.style.height=k,n=t.ww,a=n.scrollLeft,t.sA&&t.me&&(c+1<h?a=(t.position.x-p)*i:p+1<y?a=n.scrollWidth-n.clientWidth:v>g+1&&(a=t.position.x*i)),t.Kr)switch(t.xz){case"negative":a=-(n.scrollWidth-a-n.clientWidth);break;case"reverse":a=n.scrollWidth-a-n.clientWidth}return n.scrollLeft=a,t.tA&&t.ne&&(d+1<u?n.scrollTop=(t.position.y-m)*i:m+1<b?n.scrollTop=n.scrollHeight-n.clientHeight:x>f+1&&(n.scrollTop=t.position.y*i)),s&&(t.Gr=!0),h=t.Ib,u=t.Lb,n.style.width=h+(t.el?t.Dd:0)+"px",n.style.height=u+(t.Uj?t.Dd:0)+"px",t.zz=!1,e===h&&o===u&&!t.Oa.pc||(f=t.pb,t.wu(r,f,i,t.scale,s),!1)}function be(t,n,i){var e=n.layer;null!==e&&e.g===t&&(n.gb=!1,n.Ng=!1,n.J(Dd),i&&n.vn(),i=e.kf(-1,n,!1),0<=i&&t.Xc(bf,"parts",e,n,null,i,null),null!==(t=n.Gx)&&t(n,e,null))}function xe(t,n,i){if(Yh.G(n,Oi,Ei,"addLayer:layer"),null!==n.g&&n.g!==t&&Yh.k("Cannot share a Layer with another Diagram: "+n+" of "+n.g),null===i?null!==n.g&&Yh.k("Cannot add an existing Layer to this Diagram again: "+n):(Yh.G(i,Oi,Ei,"addLayer:existingLayer"),i.g!==t&&Yh.k("Existing Layer must be in this Diagram: "+i+" not in "+i.g),n===i&&Yh.k("Cannot move a Layer before or after itself: "+n)),n.g!==t){n=n.name,t=t.bc,i=t.count;for(var e=0;e<i;e++)t.ea(e).name===n&&Yh.k("Cannot add Layer with the name '"+n+"'; a Layer with the same name is already present in this Diagram.")}}function we(t,n,i){if(t.Sc||t.Xd)t.tb=i,i=t.Oa,i.pc&&Ai(i,n,t.tb);else if(t.Sc=!0,null===t.Fb)t.tb=i;else{var e=t.pb.copy(),o=t.Ib,r=t.Lb;e.width=t.Ib/n,e.height=t.Lb/n;var s=t.mm.x,l=t.mm.y,a=t.tE;isNaN(s)&&(a.tj()?a.rj(wu)?s=0:a.rj(ku)&&(s=o-1):s=a.fd()?a.x*(o-1):o/2),isNaN(l)&&(a.tj()?a.rj(xu)?l=0:a.rj(Mu)&&(l=r-1):l=a.fd()?a.y*(r-1):r/2),null!==t.$F&&(i=t.$F(t,i)),i<t.zh&&(i=t.zh),i>t.yh&&(i=t.yh),o=Yh.xb(t.ib.x+s/n-s/i,t.ib.y+l/n-l/i),t.position=o,Yh.v(o),t.tb=i,t.wu(e,t.pb,n,i,!1),t.Sc=!1,Wi(t,!1),i=t.Oa,i.pc&&Ai(i,n,t.tb),t.na(),pe(t)}}function ke(t,n){void 0===n&&(n=null);var i=t.pd;if(null!==i&&i.visible){for(var e=Yh.jm(),o=1,r=1,s=i.xa.n,l=s.length,a=0;a<l;a++){var h=s[a],u=h.interval;2>u||(sr(h.Cb)?r=r*u/vt(r,u):o=o*u/vt(o,u))}if(s=i.tx,e.m(r*s.width,o*s.height),s=r=a=l=0,null!==n)l=n.width,a=n.height,r=n.x,s=n.y;else{for(o=Yh.Ff(),r=t.pb,o.m(r.x,r.y,r.width,r.height),s=t.lw.i;s.next();)r=s.value.pb,r.I()&&L(o,r.x,r.y,r.width,r.height);if(!o.I())return void Yh.Db(o);l=o.width,a=o.height,r=o.x,s=o.y,Yh.Db(o)}i.width=l+2*e.width,i.height=a+2*e.height,o=Yh.K(),yt(r,s,0,0,e.width,e.height,o),o.offset(-e.width,-e.height),Yh.Ak(e),i.U.location=o,Yh.v(o)}}function Me(t){if(t=t.selection,0<t.count){for(var n=t.fc(),i=n.length,e=0;e<i;e++)n[e].gb=!1;t.Ra(),t.clear(),t.freeze()}}function Pe(t){var n=t.oi;t.YD!==n&&(t.YD=n,t.Aa("Modified"))}function Te(t,n){if(n.ba===t.ba){var i=n.yc,e=n.propertyName;if(i===vf&&"S"===e[0])if("StartingFirstTransaction"===e)i=t.bb,i.bf.each(function(n){n.Qc(t)}),i.ag.each(function(n){n.Qc(t)}),i.bg.each(function(n){n.Qc(t)}),t.Xd||t.fh||(t.tv=!0,t.Ho&&(t.Of=!0));else if("StartingUndo"===e||"StartingRedo"===e){var o=t.Oa;o.lf&&!t.wb&&o.qi(),t.Aa("ChangingSelection")}else"StartedTransaction"===e&&(o=t.Oa,o.lf&&!t.wb&&o.qi());else if(t.Ua){t.Ua=!1;try{var r=n.of;if(""!==r)if(i===gf){if("linkFromKey"===r){var s=n.object,l=t.Sf(s);if(null!==l){var a=n.newValue,h=t.Ie(a);l.Y=h}}else if("linkToKey"===r)s=n.object,null!==(l=t.Sf(s))&&(a=n.newValue,h=t.Ie(a),l.$=h);else if("linkFromPortId"===r){if(s=n.object,null!==(l=t.Sf(s))){var u=n.newValue;"string"==typeof u&&(l.Mg=u)}}else if("linkToPortId"===r)s=n.object,null!==(l=t.Sf(s))&&"string"==typeof(u=n.newValue)&&(l.Fh=u);else if("nodeGroupKey"===r){var s=n.object,f=t.wh(s);if(null!==f){var c=n.newValue;if(void 0!==c){var d=t.Ie(c);f.Pa=d instanceof Ll?d:null}else f.Pa=null}}else if("linkLabelKeys"===r){if(s=n.object,null!==(l=t.Sf(s))){var p=n.oldValue,y=n.newValue;if(Yh.isArray(p))for(var v=Yh.Za(p),g=0;g<v;g++){var m=Yh.Da(p,g),h=t.Ie(m);null!==h&&(h.Mc=null)}if(Yh.isArray(y))for(v=Yh.Za(y),g=0;g<v;g++)m=Yh.Da(y,g),null!==(h=t.Ie(m))&&(h.Mc=l)}}else if("nodeParentKey"===r){var b=n.object,x=t.Ie(n.newValue),w=t.nx(b);if(null!==w){var k=w.xn();null!==k?null===x?t.remove(k):t.Pd?k.Y=x:k.$=x:Ee(t,x,w)}}else if("parentLinkCategory"===r){var b=n.object,w=t.nx(b),M=n.newValue;null!==w&&"string"==typeof M&&null!==(k=w.xn())&&(k.td=M)}else if("nodeCategory"===r){var s=n.object,P=t.wh(s),M=n.newValue;null!==P&&"string"==typeof M&&(P.td=M)}else if("linkCategory"===r){var s=n.object,T=t.Sf(s),M=n.newValue;null!==T&&"string"==typeof M&&(T.td=M)}else if("nodeDataArray"===r){var S=n.oldValue;Ve(t,S);var C=n.newValue;Oe(t,C)}else"linkDataArray"===r&&(S=n.oldValue,Ve(t,S),C=n.newValue,Ie(t,C));t.oi=!0}else i===mf?(C=n.newValue,"nodeDataArray"===r&&Yh.Qa(C)?Be(t,C):"linkDataArray"===r&&Yh.Qa(C)?Re(t,C):"linkLabelKeys"===r&&Ut(C)&&(l=t.Sf(n.object),h=t.Ie(C),null!==l&&null!==h&&(h.Mc=l)),t.oi=!0):i===bf?(S=n.oldValue,"nodeDataArray"===r&&Yh.Qa(S)?He(t,S):"linkDataArray"===r&&Yh.Qa(S)?He(t,S):"linkLabelKeys"===r&&Ut(S)&&null!==(h=t.Ie(S))&&(h.Mc=null),t.oi=!0):i===vf&&("SourceChanged"===r?null!==n.object?Se(t,n.object,n.propertyName):(t.UJ(),t.yG()):"ModelDisplaced"===r&&t.cm());else if(i===gf){var N=n.propertyName,s=n.object;s===t.ba?"nodeKeyProperty"!==N&&"nodeCategoryProperty"!==N&&"linkFromKeyProperty"!==N&&"linkToKeyProperty"!==N&&"linkFromPortIdProperty"!==N&&"linkToPortIdProperty"!==N&&"linkLabelKeysProperty"!==N&&"nodeIsGroupProperty"!==N&&"nodeGroupKeyProperty"!==N&&"nodeParentKeyProperty"!==N&&"linkCategoryProperty"!==N||t.oa.hb||t.cm():Se(t,s,N),t.oi=!0}else if(i===mf||i===bf)Ce(t,n),t.oi=!0;else if(i===vf){"FinishedUndo"!==e&&"FinishedRedo"!==e||(t.oa.Li=!0,t.Aa("ChangedSelection"),ae(t),t.oa.Li=!1),o=t.Oa,"RolledBackTransaction"===e&&o.qi(),t.tv=!0,t.$f(),0===t.oa.Gh&&wi(o),"CommittedTransaction"===e&&t.oa.lz&&(t.eh=Math.min(t.eh,t.oa.qj-1));var j=n.sF;j&&(Pe(t),t.Kx.clear()),!t.rz&&j&&(t.rz=!0,Yh.setTimeout(function(){t.$a.standardMouseOver(),t.rz=!1},10))}}finally{t.Ua=!0}}}}function Se(t,n,i){if("string"==typeof i){var e=t.wh(n);if(null!==e)e.Hb(i),t.ba instanceof en&&null!==(e=t.Sf(n))&&e.Hb(i);else{for(var e=null,o=t.Em.i;o.next();){for(var r=o.value,s=0;s<r.length;s++){var l=r[s].RH(n);null!==l&&(null===e&&(e=Yh.lb()),e.push(l))}if(null!==e)break}if(null!==e){for(o=0;o<e.length;o++)e[o].Hb(i);Yh.wa(e)}}n===t.ba.Gk&&t.yG(i)}}function Ce(t,n){var i=n.yc===mf,e=i?n.zj:n.Aj,o=i?n.newValue:n.oldValue,r=t.Em.ja(n.object);if(Array.isArray(r))for(var s=0;s<r.length;s++){var l=r[s];if(i)wr(l,o,e);else{var a=e;if(!(0>a)){var h=a;xr(l)&&h++,l.kf(h),kr(l,h,a)}}}}function Ne(t,n){var i=n.$j;if(Yh.isArray(i)){var e=t.Em.ja(i);if(null===e)e=[],e.push(n),t.Em.add(i,e);else{for(i=0;i<e.length;i++)if(e[i]===n)return;e.push(n)}}}function je(t,n){var i=n.$j;if(Yh.isArray(i)){var e=t.Em.ja(i);if(null!==e)for(var o=0;o<e.length;o++)if(e[o]===n){e.splice(o,1),0===e.length&&t.Em.remove(i);break}}}function Le(t,n){for(var i=n.xa.n,e=i.length,o=0;o<e;o++){var r=i[o];r instanceof Kr&&De(t,r)}}function De(t,n){var i=n.element;if(null!==i&&i instanceof HTMLImageElement){var e=n.Se;if(null!==e&&(e.Jo instanceof Event&&null!==n.Te&&n.Te(n,e.Jo),!0===e.Nv&&(null!==n.hi&&n.hi(n,e.yz),null!==n.g&&n.g.vz.add(n))),i=i.src,null===(e=t.hp.ja(i)))e=[],e.push(n),t.hp.add(i,e);else{for(i=0;i<e.length;i++)if(e[i]===n)return;e.push(n)}}}function Ae(t,n){for(var i=n.xa.n,e=i.length,o=0;o<e;o++){var r=i[o];r instanceof Kr&&Fe(t,r)}}function Fe(t,n){var i=n.element;if(null!==i&&i instanceof HTMLImageElement){var i=i.src,e=t.hp.ja(i);if(null!==e)for(var o=0;o<e.length;o++)if(e[o]===n){e.splice(o,1),0===e.length&&t.hp.remove(i);break}}}function Oe(t,n){if(null!==n){for(var i=t.ba,e=i instanceof Zt,o=Yh.Za(n),r=0;r<o;r++){var s=Yh.Da(n,r);i.Ge(s)?Be(t,s,!1):e&&Re(t,s)}if(e||i instanceof en){for(r=0;r<o;r++)s=Yh.Da(n,r),i.Ge(s)&&ze(t,s);if(e)for(i=t.links;i.next();)Ys(i.value)}Ye(t,!1)}}function Be(t,n,i){if(void 0!==n&&null!==n&&!t.oa.hb&&!t.Bi.contains(n)){void 0===i&&(i=!0);var e=t.nA(n),o=qe(t,n,e);if(null!==o&&(br(o),null!==(o=o.copy()))){var r=t.Ne;t.Ne=!0,o.vi=e,o.Vd=n,t.add(o),o.Vd=null,o.data=n,i&&ze(t,n),t.Ne=r}}}function qe(t,n,i){var e=!1,o=t.ba;return o instanceof Zt&&(e=o.zA(n)),e?null===(n=t.rA.ja(i))&&null===(n=t.rA.ja(""))&&(yc||(yc=!0,Yh.trace('No Group template found for category "'+i+'"'),Yh.trace("  Using default group template")),n=t.nC):null===(n=t.QA.ja(i))&&null===(n=t.QA.ja(""))&&(pc||(pc=!0,Yh.trace('No Node template found for category "'+i+'"'),Yh.trace("  Using default node template")),n=t.pC),n}function ze(t,n){var i=t.ba;if(i instanceof Zt||i instanceof en){var e=i.ub(n);if(void 0!==e){var o=$t(i,e),r=t.wh(n);if(null!==o&&null!==r){for(o=o.i;o.next();){var s=o.value;if(i instanceof Zt){var l=i;if(l.Ge(s)){if(r instanceof Ll&&l.zn(s)===e){var a=r,s=t.wh(s);null!==s&&(s.Pa=a)}}else{var h=t.Sf(s);if(null!==h&&r instanceof As&&(a=r,l.Ul(s)===e&&(h.Y=a),l.Vl(s)===e&&(h.$=a),s=l.Bk(s),Yh.isArray(s)))for(l=0;l<Yh.Za(s);l++)if(Yh.Da(s,l)===e){a.Mc=h;break}}}else i instanceof en&&(h=i,h.Ge(s)&&r instanceof As&&(a=r,h.Bn(s)===e&&(s=t.nx(s),Ee(t,a,s))))}Xt(i,e)}i instanceof Zt?void 0!==(i=i.zn(n))&&(i=t.Ie(i))instanceof Ll&&(r.Pa=i):i instanceof en&&void 0!==(i=i.Bn(n))&&r instanceof As&&(a=r,r=t.Ie(i),Ee(t,r,a))}}}function Ee(t,n,i){if(null!==n&&null!==i){var e=t.bb.xF,o=n,r=i;if(t.Pd){for(n=r.fe;n.next();)if(n.value.$===r)return}else for(o=i,r=n,n=o.fe;n.next();)if(n.value.Y===o)return;if((null===e||!Vn(e,o,r,null,!0))&&(e=t.qx(i.data),null!==(n=Ge(t,e))&&(br(n),null!==(n=n.copy())))){var s=t.Ne;t.Ne=!0,n.vi=e,n.Vd=i.data,n.Y=o,n.$=r,t.add(n),n.Vd=null,n.data=i.data,t.Ne=s}}}function Ie(t,n){if(null!==n){for(var i=Yh.Za(n),e=0;e<i;e++){Re(t,Yh.Da(n,e))}Ye(t,!1)}}function Re(t,n){if(void 0!==n&&null!==n&&!t.oa.hb&&!t.Kj.contains(n)){var i=t.qx(n),e=Ge(t,i);if(null!==e&&(br(e),null!==(e=e.copy()))){var o=t.Ne;t.Ne=!0,e.vi=i,e.Vd=n;var i=t.ba,r=i.YH(n);if(""!==r&&(e.Mg=r),r=i.Ul(n),void 0!==r&&(r=t.Ie(r))instanceof As&&(e.Y=r),r=i.bI(n),""!==r&&(e.Fh=r),r=i.Vl(n),void 0!==r&&(r=t.Ie(r))instanceof As&&(e.$=r),i=i.Bk(n),Yh.isArray(i))for(var r=Yh.Za(i),s=0;s<r;s++){var l=Yh.Da(i,s),l=t.Ie(l);null!==l&&(l.Mc=e)}t.add(e),e.Vd=null,e.data=n,t.Ne=o}}}function Ge(t,n){var i=t.DA.ja(n);return null===i&&null===(i=t.DA.ja(""))&&(vc||(vc=!0,Yh.trace('No Link template found for category "'+n+'"'),Yh.trace("  Using default link template")),i=t.oC),i}function Ve(t,n){for(var i=Yh.Za(n),e=0;e<i;e++){He(t,Yh.Da(n,e))}}function He(t,n){if(void 0!==n&&null!==n){var i=t.wh(n);if(null!==i){be(t,i,!1);var e=t.ba;if(e instanceof Zt&&i instanceof As){var o=e.ub(i.data);if(void 0!==o){for(var r=i.fe;r.next();)Wt(e,o,r.value.data);if(i.mf&&null!==(r=i.Mc)&&Wt(e,o,r.data),i instanceof Ll)for(i=i.Nc;i.next();)r=i.value.data,e.Ge(r)&&Wt(e,o,r)}}else if(e instanceof en&&i instanceof As){if(null!==(r=t.Sf(i.data))){r.gb=!1,r.Ng=!1;var s=r.layer;if(null!==s){var l=s.kf(-1,r,!1);0<=l&&t.Xc(bf,"parts",s,r,null,l,null),l=r.Gx,null!==l&&l(r,s,null)}}for(r=t.Pd,i=i.fe;i.next();)s=i.value,s=(r?s.$:s.Y).data,e.Ge(s)&&Wt(e,o,s)}}}}function Ke(t,n,i){for(var e in i){var o=n[e],r=i[e];if(Yh.isArray(r)){if(!Yh.isArray(o)||o.length<r.length)return!1;for(var s=0;s<o.length;s++){var l=o[s],a=r[s];if(void 0!==a&&!Ue(t,l,a))return!1}}else if(!Ue(t,o,r))return!1}return!0}function Ue(t,n,i){if("function"==typeof i){if(!i(n))return!1}else if(i instanceof RegExp){if(!n||!i.test(n.toString()))return!1}else if(Yh.Qa(n)&&Yh.Qa(i)){if(!Ke(t,n,i))return!1}else if(n!==i)return!1;return!0}function Je(t,n){t.Vj=!1;var i=t.uv;i.L(n)||(n=n.S(),t.uv=n,Wi(t,!1),t.Aa("DocumentBoundsChanged",null,i.copy()),pe(t))}function Ye(t,n){for(var i=t.yl.i;i.next();)We(t,i.value,n);null!==t.Sb&&(n?t.Sb.Af=!1:t.Sb.J())}function We(t,n,i){if(null!==n){for(var e=n.cp.i;e.next();)We(t,e.value,i);null!==n.Sb&&(i?n.Sb.Af=!1:n.Sb.J())}}function Xe(t,n){if(!t.Py){var i=t.Sb,e=t.Ua;t.Ua=!0;try{var o=t.oa.Gh;0===o&&t.Ub("Layout");var r=t.Oa;1!==t.oa.Gh||r.lf||r.pc||n||r.Tn("Layout");for(var s=t.yl.i;s.next();)$e(t,s.value,n);i.Af||n&&!i.rF&&0!==o||(i.doLayout(t),ae(t),i.Af=!0)}finally{0===o&&t.Gd("Layout"),t.dv=!i.Af,t.Ua=e}}}function $e(t,n,i){if(null!==n){for(var e=n.cp.i;e.next();)$e(t,e.value,i);e=n.Sb,null===e||e.Af||i&&!e.rF||(n.Rn=!n.location.I(),e.doLayout(n),n.J(Ad),e.Af=!0,he(t,n))}}function Qe(t){function n(t){var n=t.toLowerCase(),o=new f("function");i.add(t,o),i.add(n,o),e.add(t,t),e.add(n,t)}var i=new b("string",f),e=new b("string","string");n("AnimationStarting"),n("AnimationFinished"),n("BackgroundSingleClicked"),n("BackgroundDoubleClicked"),n("BackgroundContextClicked"),n("ClipboardChanged"),n("ClipboardPasted"),n("DocumentBoundsChanged"),n("ExternalObjectsDropped"),n("InitialLayoutCompleted"),n("LayoutCompleted"),n("LinkDrawn"),n("LinkRelinked"),n("LinkReshaped"),n("Modified"),n("ObjectSingleClicked"),n("ObjectDoubleClicked"),n("ObjectContextClicked"),n("PartCreated"),n("PartResized"),n("PartRotated"),n("SelectionMoved"),n("SelectionCopied"),n("SelectionDeleting"),n("SelectionDeleted"),n("SelectionGrouped"),n("SelectionUngrouped"),n("ChangingSelection"),n("ChangedSelection"),n("SubGraphCollapsed"),n("SubGraphExpanded"),n("TextEdited"),n("TreeCollapsed"),n("TreeExpanded"),n("ViewportBoundsChanged"),t.Ry=i,t.Qy=e}function Ze(t,n){var i=t.Qy.ja(n);return null!==i?i:t.Qy.ja(n.toLowerCase())}function _e(t,n){var i=t.Ry.ja(n);return null!==i?i:null!==(i=t.Ry.ja(n.toLowerCase()))?i:(Yh.k("Unknown DiagramEvent name: "+n),null)}function to(t,n){var i=!1;if(t.pb.wk(n)&&(i=!0),i=t.jA(n,function(t){return t.U},function(t){return t instanceof Js},!0,function(t){return t instanceof Js},i),0!==i.count)for(i=i.i;i.next();){var e=i.value;e.Xl&&e.Yb()}}function no(t,n,i,e){if(null===t.Cd&&(t.Cd=new vl),t.Cd.$t||t.Cd.group!==i||t.Cd.mB!==e){if(null===i){n=t.computeOccupiedArea(),n.yf(100,100),t.Cd.initialize(n),n=Yh.Ff();for(var o=t.fg;o.next();){var r=o.value,s=r.layer;null!==s&&s.visible&&!s.Kc&&io(t,r,e,n)}}else for(i.W.I()||i.$e(),n=i.W.copy(),n.yf(20,20),t.Cd.initialize(n),n=Yh.Ff(),o=i.Nc;o.next();)(r=o.value)instanceof As&&io(t,r,e,n);Yh.Db(n),t.Cd.group=i,t.Cd.mB=e,t.Cd.$t=!1}else n&&xl(t.Cd);return t.Cd}function io(t,n,i,e){if(n!==i)if(n.isVisible()&&n.Tz&&!n.mf){i=n.getAvoidableRect(e),e=t.Cd.mn,n=t.Cd.ln;for(var o=i.x+i.width,r=i.y+i.height,s=i.x;s<o;s+=e){for(var l=i.y;l<r;l+=n)bl(t.Cd,s,l);bl(t.Cd,s,r)}for(l=i.y;l<r;l+=n)bl(t.Cd,o,l);bl(t.Cd,o,r)}else if(n instanceof Ll)for(n=n.Nc;n.next();)(o=n.value)instanceof As&&io(t,o,i,e)}function eo(t){-1===t.no&&(t.no=Yh.setTimeout(function(){if(-1!==t.no){oo(t);var n=t.R.event;if(null!==n){var i=ro(t,t.ev);i.Ic(t.position)||(t.position=i,t.R.da=t.vB(t.ev),t.simulatedMouseMove(n,null,n.target.Z)||t.doMouseMove(),t.Vj=!0,Je(t,t.th()),t.Be=!0,t.$f(),eo(t))}}},t.Mq))}function oo(t){-1!==t.no&&(Yh.clearTimeout(t.no),t.no=-1)}function ro(t,n){var i=t.position,e=t.nE;if(0>=e.top&&0>=e.left&&0>=e.right&&0>=e.bottom)return i;var o=t.pb,r=t.scale,o=Yh.ig(0,0,o.width*r,o.height*r),s=Yh.xb(0,0);if(n.x>=o.x&&n.x<o.x+e.left){var l=Math.max(t.Eu,1),l=0|l;s.x-=l,n.x<o.x+e.left/2&&(s.x-=l),n.x<o.x+e.left/4&&(s.x-=4*l)}else n.x<=o.x+o.width&&n.x>o.x+o.width-e.right&&(l=Math.max(t.Eu,1),l|=0,s.x+=l,n.x>o.x+o.width-e.right/2&&(s.x+=l),n.x>o.x+o.width-e.right/4&&(s.x+=4*l));return n.y>=o.y&&n.y<o.y+e.top?(l=Math.max(t.Fu,1),l|=0,s.y-=l,n.y<o.y+e.top/2&&(s.y-=l),n.y<o.y+e.top/4&&(s.y-=4*l)):n.y<=o.y+o.height&&n.y>o.y+o.height-e.bottom&&(l=Math.max(t.Fu,1),l|=0,s.y+=l,n.y>o.y+o.height-e.bottom/2&&(s.y+=l),n.y>o.y+o.height-e.bottom/4&&(s.y+=4*l)),s.Ic(qu)||(i=new x(i.x+s.x/r,i.y+s.y/r)),Yh.Db(o),Yh.v(s),i}function so(t,n){if(t.Oa.qi(),t.$f(),null===t.Fb)return null;"object"!=typeof n&&Yh.k("properties argument must be an Object.");var i=!1,e=n.size||null,o=n.scale||null;void 0!==n.scale&&isNaN(n.scale)&&(o="NaN");var r=n.maxSize;void 0===n.maxSize&&(i=!0,r="svg"===n.context?new M(1/0,1/0):new M(2e3,2e3));var s=n.position||null,l=n.parts||null,a=void 0===n.padding?1:n.padding,h=n.background||null,u=n.omitTemporary;void 0===u&&(u=!0);var f=n.document||document,c=n.elementFinished||null,d=n.showTemporary;void 0===d&&(d=!u),u=n.showGrid,void 0===u&&(u=d),null!==e&&isNaN(e.width)&&isNaN(e.height)&&(e=null),"number"==typeof a?a=new D(a):a instanceof D||(a=new D(0)),a.left=Math.max(a.left,0),a.right=Math.max(a.right,0),a.top=Math.max(a.top,0),a.bottom=Math.max(a.bottom,0),t.Do=!1,t.rf.Ee(!0);var p=new U(null,f),y=p.xk;if(!(e||o||l||s))return p.width=t.Ib+Math.ceil(a.left+a.right),p.height=t.Lb+Math.ceil(a.top+a.bottom),"svg"===n.context?(y=new z(p.Hd,f,c),fe(t,y,a,new M(p.width,p.height),t.tb,t.ib,l,h,d,u),t.Do=!0,y):(fe(t,y,a,new M(p.width,p.height),t.tb,t.ib,l,h,d,u),t.Do=!0,p);var v=t.ob.bx,g=new x(0,0),m=t.qe.copy();if(m.JJ(t.padding),d)for(var b=!0,b=t.bc.n,w=b.length,k=0;k<w;k++){var T=b[k];if(T.visible&&T.Kc)for(var T=T.zb.n,S=T.length,C=0;C<S;C++){var N=T[C];N.AA&&N.isVisible()&&(N=N.W,N.I()&&m.Hh(N))}}if(g.x=m.x,g.y=m.y,null!==l){var j,b=!0,w=l.i;for(w.reset();w.next();)(N=w.value)instanceof as&&(null!==(T=N.layer)&&!T.visible||null!==T&&!d&&T.Kc||!N.isVisible()||(N=N.W,N.I()&&(b?(b=!1,j=N.copy()):j.Hh(N))));b&&(j=new P(0,0,0,0)),m.width=j.width,m.height=j.height,g.x=j.x,g.y=j.y}return null!==s&&s.I()&&(g=s,o||(o=v)),b=N=0,null!==a&&(N=a.left+a.right,b=a.top+a.bottom),k=w=0,null!==e&&(w=e.width,k=e.height,isFinite(w)&&(w=Math.max(0,w-N)),isFinite(k)&&(k=Math.max(0,k-b))),j=s=0,null!==e&&null!==o?("NaN"===o&&(o=v),e.I()?(s=w,j=k):isNaN(k)?(s=w,j=m.height*o):(s=m.width*o,j=k)):null!==e?e.I()?(o=Math.min(w/m.width,k/m.height),s=w,j=k):isNaN(k)?(o=w/m.width,s=w,j=m.height*o):(o=k/m.height,s=m.width*o,j=k):null!==o?"NaN"===o&&r.I()?(o=Math.min((r.width-N)/m.width,(r.height-b)/m.height),o>v?(o=v,s=m.width,j=m.height):(s=r.width,j=r.height)):(s=m.width*o,j=m.height*o):(o=v,s=m.width,j=m.height),null!==a?(s+=N,j+=b):a=new D(0),null!==r&&(e=r.width,r=r.height,"svg"!==n.context&&i&&!gc&&(s>e||j>r)&&(Yh.trace("Diagram.makeImage(data): Diagram width or height is larger than the default max size. ("+Math.ceil(s)+"x"+Math.ceil(j)+" vs 2000x2000) Consider increasing the max size."),gc=!0),isNaN(e)&&(e=2e3),isNaN(r)&&(r=2e3),isFinite(e)&&(s=Math.min(s,e)),isFinite(r)&&(j=Math.min(j,r))),p.width=Math.ceil(s),p.height=Math.ceil(j),"svg"===n.context?(y=new z(p.Hd,f,c),fe(t,y,a,new M(Math.ceil(s),Math.ceil(j)),o,g,l,h,d,u),t.Do=!0,y):(fe(t,y,a,new M(Math.ceil(s),Math.ceil(j)),o,g,l,h,d,u),t.Do=!0,p)}function lo(){this.FD=null,this.VG="63ad05bbe23a1786468a4c741b6d2",this.Gi=this.VG===this._tk||null}function ao(t){var i="f",e=n[Yh.Jg("76a715b2f73f148a")][Yh.Jg("72ba13b5")],o=Yh.Jg;if(n[o("7da7")]&&n[o("7da7")][o("76a115b6ed251eaf4692")]){t.Gi=!0;var r=n[o("7da7")][o("76a115b6ed251eaf4692")],r=o(r).split(o("39e9"));if(6>r.length)return;var s=o(r[1]).split(".");if("7da71ca0"!==r[4])return;var l=o(Yh[o("6cae19")]).split(".");if(!(s[0]>l[0]||s[0]===l[0]&&s[1]>=l[1]))return;for(s=e[o("76ad18b4f73e")],l=e[o("73a612b6fb191d")](o("35e7"))+2;l<s;l++)i+=e[l];if(s=i[o("73a612b6fb191d")](o(r[2])),0>s&&o(r[2])!==o("7da71ca0ad381e90")&&(s=i[o("73a612b6fb191d")](o("76a715b2ef3e149757"))),0>s&&(s=i[o("73a612b6fb191d")](o("76a715b2ef3e149757"))),t.Gi=!(0<=s&&s<i[o("73a612b6fb191d")](o("35"))),!t.Gi)return}for(s=e[o("76ad18b4f73e")],l=e[o("73a612b6fb191d")](o("35e7"))+2;l<s;l++)i+=e[l];s=i[o("73a612b6fb191d")](o(Yh.adym)),0>s&&o(Yh.adym)!==o("7da71ca0ad381e90")&&(s=i[o("73a612b6fb191d")](o("76a715b2ef3e149757"))),t.Gi=!(0<=s&&s<i[o("73a612b6fb191d")](o("35"))),t.Gi&&(i=n.document[o("79ba13b2f7333e8846865a7d00")]("div"),e=o("02cncncn"),"."===e[0]&&(e=e[o("69bd14a0f724128a44")](1)),i[o("79a417a0f0181a8946")]=e,n.document[o("78a712aa")]?(n.document[o("78a712aa")][o("7bb806b6ed32388c4a875b")](i),e=n[o("7dad0290ec3b0b91578e5b40007031bf")](i)[o("7dad0283f1390b81519f4645156528bf")](o("78a704b7e62456904c9b12701b6532a8")),n.document[o("78a712aa")][o("68ad1bbcf533388c4a875b")](i),e&&-1!==e.indexOf(o(Yh.rH))&&-1!==e.indexOf(o(Yh.sH))&&(t.Gi=!1)):(t.Gi=null,t.Gi=!1))}function ho(t,i){void 0!==i&&null!==i||Yh.k("Diagram setup requires an argument DIV."),null!==t.Mb&&Yh.k("Diagram has already completed setup."),"string"==typeof i?t.Mb=n.document.getElementById(i):i instanceof HTMLDivElement?t.Mb=i:Yh.k("No DIV or DIV id supplied: "+i),null===t.Mb&&Yh.k("Invalid DIV id; could not get element with id: "+i),void 0!==t.Mb.Z&&Yh.k("Invalid div id; div already has a Diagram associated with it."),"static"===n.getComputedStyle(t.Mb,null).position&&(t.Mb.style.position="relative"),t.Mb.style["-webkit-tap-highlight-color"]="rgba(255, 255, 255, 0)",t.Mb.style["-ms-touch-action"]="none",t.Mb.innerHTML="",t.Mb.Z=t;var e=new U(t);e.Hd.innerHTML="This text is displayed if your browser does not support the Canvas HTML element.",void 0!==e.style&&(e.style.position="absolute",e.style.top="0px",e.style.left="0px","rtl"===n.getComputedStyle(t.Mb,null).getPropertyValue("direction")&&(t.Kr=!0),e.style.zIndex="2",e.style.VL="none",e.style.webkitUserSelect="none",e.style.MozUserSelect="none"),t.Ib=t.Mb.clientWidth||1,t.Lb=t.Mb.clientHeight||1,t.Fb=e,t.rf=e.xk;var o=t.rf;t.gD=(n.devicePixelRatio||1)/(o.ta.webkitBackingStorePixelRatio||o.ta.mozBackingStorePixelRatio||o.ta.msBackingStorePixelRatio||o.ta.oBackingStorePixelRatio||o.ta.backingStorePixelRatio||1),t.Ad=t.computePixelRatio(),ge(t,t.Ib,t.Lb),t.wv=o[Yh.Jg("7eba17a4ca3b1a8346")][Yh.Jg("78a118b7")](o,Yh.lm,4,4),t.Mb.insertBefore(e.Hd,t.Mb.firstChild),e=new U(null),e.width=1,e.height=1,t.Uy=e,t.AC=e.xk;var e=Yh.createElement("div"),r=Yh.createElement("div");e.style.position="absolute",e.style.overflow="auto",e.style.width=t.Ib+"px",e.style.height=t.Lb+"px",e.style.zIndex="1",r.style.position="absolute",r.style.width="1px",r.style.height="1px",t.Mb.appendChild(e),e.appendChild(r),e.onscroll=Ui,e.onmousedown=Ji,e.ontouchstart=Ji,e.Z=t,e.RG=!0,e.SG=!0,t.ww=e,t.Qs=r,t.Wx=Yh.wE(function(){t.kk=null,t.na()},300,!1),t.BB=Yh.wE(function(){Vi(t)},250,!1),t.preventDefault=function(t){return t.preventDefault(),!1},t.On=function(n){if(t.isEnabled){t.Cm=!0;var i=t.Uc;Yh.En&&i.uj?(n.preventDefault(),n.simulated=!0,t.Zs=n):(t.Uc=t.Qb,t.Qb=i,Zi(t,t,n,i,!0),t.simulatedMouseMove(n,null,n.target.Z)||(t.doMouseMove(),t.$a.isBeyondDragSize()&&(t.ll=0),ne(i,n)))}},t.Nn=function(n){if(t.isEnabled){t.Cm=!0;var i=t.Uc;Yh.En&&null!==t.Zs?(t.Zs=n,n.preventDefault()):Yh.En&&400>n.timeStamp-t.Gm?n.preventDefault():t.il?n.preventDefault():(t.Uc=t.Qb,t.Qb=i,Zi(t,t,n,i,!0),i.Ol=!0,i.Fe=n.detail,(Yh.kF||Yh.lF)&&(n.timeStamp-t.Gm<t.TD&&!t.$a.isBeyondDragSize()?t.ll++:t.ll=1,t.Gm=n.timeStamp,i.Fe=t.ll),t.Ii=i,!0===i.tr.simulated?(n.preventDefault(),n.simulated=!0):(Cf=null,t.doMouseDown(),t.Ii=t.Ii.copy(),1===n.button?n.preventDefault():ne(i,n)))}},t.Qn=function(n){if(t.isEnabled)if(t.il&&2===n.button)n.preventDefault();else if(t.il&&0===n.button&&(t.il=!1),t.gt)n.preventDefault();else{t.Cm=!0;var i=t.Uc;if(Yh.En){if(400>n.timeStamp-t.Gm)return void n.preventDefault();t.Gm=n.timeStamp}Yh.En&&null!==t.Zs?(t.Zs=null,n.preventDefault()):(t.Uc=t.Qb,t.Qb=i,Zi(t,t,n,i,!0),i.up=!0,i.Fe=n.detail,(Yh.kF||Yh.lF)&&(i.Fe=t.ll),i.bubbles=n.bubbles,n.target.Z&&(i.Wg=n.target.Z),t.simulatedMouseUp(n,null,new x,i.Wg)||(t.doMouseUp(),oo(t),ne(i,n)))}},t.Pg=function(n){if(t.isEnabled){var i=t.Uc;t.Uc=t.Qb,t.Qb=i,Zi(t,t,n,i,!0),i.bubbles=!0,i.Nl=void 0!==n.wheelDelta?n.wheelDelta:-40*n.detail,t.doMouseWheel(),ne(i,n)}},t.Pn=function(){if(t.isEnabled){t.Cm=!1;var n=t.$a;n.cancelWaitAfter(),n instanceof vi&&n.hideToolTip()}},t.uB=function(n){if(t.isEnabled){t.gt=!1,t.il=!0;var i=t.Uc;t.Uc=t.Qb,t.Qb=i,_i(t,n,n.targetTouches[0],i,1<n.touches.length),t.doMouseDown(),ne(i,n)}},t.tB=function(n){if(t.isEnabled){var i=t.Uc;t.Uc=t.Qb,t.Qb=i;var e=null;0<n.changedTouches.length?e=n.changedTouches[0]:0<n.targetTouches.length&&(e=n.targetTouches[0]),te(t,n,e,i,1<n.touches.length),t.simulatedMouseMove(e||n,null,i.Wg)||t.doMouseMove(),ne(i,n)}},t.sB=function(i){if(t.isEnabled)if(t.gt)i.preventDefault();else{var e=t.Uc;if(t.Uc=t.Qb,t.Qb=e,!(1<i.touches.length)){var o=null,r=null;if(0<i.changedTouches.length?r=i.changedTouches[0]:0<i.targetTouches.length&&(r=i.targetTouches[0]),e.g=t,e.Fe=1,null!==r){o=n.document.elementFromPoint(r.clientX,r.clientY),null!==o&&o.Z instanceof Ei&&o.Z!==t&&ie(o.Z,r,e),ie(t,i.changedTouches[0],e);var s=r.screenX,l=r.screenY,a=t.XC;i.timeStamp-t.Gm<t.TD&&!(25<Math.abs(a.x-s)||25<Math.abs(a.y-l))?t.ll++:t.ll=1,e.Fe=t.ll,t.Gm=i.timeStamp,t.XC.m(s,l)}e.wd=0,e.button=0,e.buttons=1,e.Ol=!1,e.up=!0,e.Nl=0,e.Ac=!1,e.bubbles=!1,e.event=i,e.timestamp=Date.now(),e.Wg=null===o?i.target.Z:o.Z?o.Z:null,e.Pe=null,t.simulatedMouseUp(r||i,null,new x,e.Wg)||t.doMouseUp(),ne(e,i),t.il=!1}}},t.IF=function(n){if("touch"===n.pointerType){var i=t.sD;void 0===i[n.pointerId]&&(t.ow++,i[n.pointerId]=n),t.Zi[0]=null,t.Zi[1]=null;for(var e in i)if(null===t.Zi[0])t.Zi[0]=i[e];else if(null===t.Zi[1]){t.Zi[1]=i[e];break}t.isEnabled&&(t.gt=!1,t.il=!0,i=t.Uc,t.Uc=t.Qb,t.Qb=i,_i(t,n,n,i,1<t.ow),t.doMouseDown(),ne(i,n))}},t.KF=function(n){if("touch"===n.pointerType&&!(2>t.ow)){var i=t.Zi;i[0].pointerId===n.pointerId&&(i[0]=n),i[1].pointerId===n.pointerId&&(i[1]=n),t.isEnabled&&(i=t.Uc,t.Uc=t.Qb,t.Qb=i,te(t,n,n,i,!0),t.simulatedMouseMove(n,null,i.Wg)||(t.doMouseMove(),ne(i,n)))}},t.JF=function(n){if("touch"===n.pointerType){var i=t.sD;void 0!==i[n.pointerId]&&(t.ow--,delete i[n.pointerId],i=t.Zi,null!==i[0]&&i[0].pointerId===n.pointerId&&(i[0]=null),null!==i[1]&&i[1].pointerId===n.pointerId&&(i[1]=null))}},o.Ee(!0),Gi(t)}function uo(t){1<arguments.length&&Yh.k("Palette constructor can only take one optional argument, the DIV HTML element or its id."),Ei.call(this,t),this.yt=!0,this.El=!1,this.fb=!0,this.tE=ou,this.Sb=new Jl}function fo(t){1<arguments.length&&Yh.k("Overview constructor can only take one optional argument, the DIV HTML element or its id."),Ei.call(this,t),this.Oa.isEnabled=!1,this.Sc=!0,this.gk=null,this.xv=!0,this.CJ("drawShadows",!1);var n=new as,i=new Cr;i.stroke="magenta",i.kb=2,i.fill="transparent",i.name="BOXSHAPE",n.dm=!0,n.cB="BOXSHAPE",n.EA="BOXSHAPE",n.XF="BOXSHAPE",n.cursor="move",n.add(i),this.sm=n,i=new Ds,i.type=Qc,i.Bf=lu;var e=new Bl;e.Wf=!0,i.add(e),e=new Cr,e.ph=lu,e.Cb="Rectangle",e.Ba=new M(64,64),e.cursor="se-resize",e.alignment=fu,i.add(e),n.VF=i,this.gn=this.tk=!1,this.vf=this.At=!0,this.nE=new D(0,0,0,0),this.Fz=new U(null),this.UG=this.Fz.xk,this.bb.re=new yo,this.bb.YF=new vo;var o=this;this.click=function(){var t=o.gk;if(null!==t){var n=t.pb,i=o.R.da;t.position=new x(i.x-n.width/2,i.y-n.height/2)}},this.FF=function(){po(o)},this.EF=function(){null!==o.gk&&(o.rc(),o.na())},this.Gl=nc,this.Sc=!1}function co(t){t.Sc||t.Xd||!1!==t.Of||(t.Of=!0,requestAnimationFrame(function(){if(t.Of&&!t.Xd&&(t.Of=!1,null!==t.Mb)){if(t.Xd=!0,ae(t),t.qe.I()||Je(t,t.th()),null===t.Mb&&Yh.k("No div specified"),null===t.Fb&&Yh.k("No canvas specified"),t.Be){var n=t.gk;if(null!==n&&!n.Oa.lf&&!n.Oa.pc){var n=t.rf,i=t.Fz;n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t.Fb.width,t.Fb.height),n.drawImage(i.Hd,0,0),i=t.dd,i.reset(),1!==t.scale&&i.scale(t.scale),0===t.position.x&&0===t.position.y||i.translate(-t.position.x,-t.position.y),n.scale(t.Ad,t.Ad),n.transform(i.m11,i.m12,i.m21,i.m22,i.dx,i.dy);for(var i=t.bc.n,e=i.length,o=0;o<e;o++)i[o].se(n,t);t.hl=!1,t.Be=!1}}t.Xd=!1}}))}function po(t){var n=t.sh;if(null!==n){var i=t.gk;if(null!==i){t.Be=!0;var i=i.pb,e=n.Gu,o=Yh.jm();o.m(i.width,i.height),e.Ba=o,Yh.Ak(o),t=2/t.scale,e instanceof Cr&&(e.kb=t),n.location=new x(i.x-t/2,i.y-t/2)}}}function yo(){yn.call(this),this.rl=null}function vo(){$n.call(this)}function go(){this.dg=this.Wc=this.xd=this.Bc=0}function mo(t){1<arguments.length&&Yh.k("Brush constructor can take at most one optional argument, the Brush type."),Yh.mc(this),this.Q=!1,void 0===t?(this.ma=mc,this.qo="black"):"string"==typeof t?(this.ma=mc,this.qo=t):(this.ma=t,this.qo="black");var n=this.ma;n===bc?(this.qp=ou,this.Fo=uu):this.Fo=this.qp=n===xc?lu:nu,this.Cw=0,this.yv=NaN,this.dh=this.nw=this.bh=null,this.Jy=this.ro=0}function bo(t,n){switch(n){case kc:var i=100*wo(Sc.Bc),e=100*wo(Sc.xd),o=100*wo(Sc.Wc);return Nc.Bc=.4124564*i+.3575761*e+.1804375*o,Nc.xd=.2126729*i+.7151522*e+.072175*o,Nc.Wc=.0193339*i+.119192*e+.9503041*o,Nc.dg=Sc.dg,i=Mo(Nc.Bc/Oc[0]),e=Mo(Nc.xd/Oc[1]),o=Mo(Nc.Wc/Oc[2]),jc.Bc=116*e-16,jc.xd=500*(i-e),jc.Wc=200*(e-o),jc.dg=Nc.dg,jc.Bc=Math.min(100,Math.max(0,jc.Bc+100*t)),i=(jc.Bc+16)/116,e=i-jc.Wc/200,Nc.Bc=Oc[0]*Po(jc.xd/500+i),Nc.xd=Oc[1]*(jc.Bc>Fc*Ac?Math.pow(i,3):jc.Bc/Fc),Nc.Wc=Oc[2]*Po(e),Nc.dg=jc.dg,i=-.969266*Nc.Bc+1.8760108*Nc.xd+.041556*Nc.Wc,e=.0556434*Nc.Bc+-.2040259*Nc.xd+1.0572252*Nc.Wc,Sc.Bc=255*ko((3.2404542*Nc.Bc+-1.5371385*Nc.xd+-.4985314*Nc.Wc)/100),Sc.xd=255*ko(i/100),Sc.Wc=255*ko(e/100),Sc.dg=Nc.dg,Sc.Bc=Math.round(Sc.Bc),255<Sc.Bc?Sc.Bc=255:0>Sc.Bc&&(Sc.Bc=0),Sc.xd=Math.round(Sc.xd),255<Sc.xd?Sc.xd=255:0>Sc.xd&&(Sc.xd=0),Sc.Wc=Math.round(Sc.Wc),255<Sc.Wc?Sc.Wc=255:0>Sc.Wc&&(Sc.Wc=0),"rgba("+Sc.Bc+", "+Sc.xd+", "+Sc.Wc+", "+Sc.dg+")";case Mc:var o=Sc.Bc/255,r=Sc.xd/255,s=Sc.Wc/255,l=Math.max(o,r,s),e=Math.min(o,r,s),a=l-e,e=(l+e)/2;if(0===a)i=o=0;else{switch(l){case o:i=(r-s)/a%6;break;case r:i=(s-o)/a+2;break;case s:i=(o-r)/a+4}i*=60,0>i&&(i+=360),o=a/(1-Math.abs(2*e-1))}return Cc.Bc=Math.round(i),Cc.xd=Math.round(100*o),Cc.Wc=Math.round(100*e),Cc.dg=Sc.dg,Cc.Wc=Math.min(100,Math.max(0,Cc.Wc+100*t)),"hsla("+Cc.Bc+", "+Cc.xd+"%, "+Cc.Wc+"%, "+Cc.dg+")";default:return Yh.k("Unknown color space: "+n),"rgba(0, 0, 0, 1)"}}function xo(t){Tc.clearRect(0,0,1,1),Tc.fillStyle="#000000";var n=Tc.fillStyle;Tc.fillStyle=t,Tc.fillStyle!==n?(Tc.fillRect(0,0,1,1),t=Tc.getImageData(0,0,1,1).data,Sc.Bc=t[0],Sc.xd=t[1],Sc.Wc=t[2],Sc.dg=t[3]/255):(Tc.fillStyle="#FFFFFF",Tc.fillStyle=t,Sc.Bc=0,Sc.xd=0,Sc.Wc=0,Sc.dg=1)}function wo(t){return t/=255,.04045>=t?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ko(t){return.0031308>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055}function Mo(t){return t>Ac?Math.pow(t,1/3):(Fc*t+16)/116}function Po(t){var n=t*t*t;return n>Ac?n:(116*t-16)/Fc}function To(){Yh.mc(this),this.P=4225027,this.wc=1,this.mh=null,this.Rb="",this.ac=this.Eb=null,this.ib=new x(NaN,NaN).freeze(),this.Re=$u,this.Wh=Hu,this.Vh=Wu,this.dd=new A,this.pm=new A,this.Qi=new A,this.tb=this.Co=1,this.jg=0,this.Dg=qc,this.Lm=Eu,this.qd=new P(NaN,NaN,NaN,NaN).freeze(),this.nc=new P(NaN,NaN,NaN,NaN).freeze(),this.Tc=new P(0,0,NaN,NaN).freeze(),this.V=this.As=this.Bs=null,this.om=this.ge=iu,this.Ns=0,this.aj=1,this.Tq=0,this.yi=1,this.ct=null,this.Rs=-1/0,this.Wm=0,this.Xm=qu,this.Ym=Vd,this.br="",this.tc=this.ia=null,this.oo=-1,this.bn=this.mg=this.$k=this.pp=null,this.wz=Af,this.Sm=null}function So(t){null===t.ia&&(t.ia=new _o)}function Co(t,n,i,e,o,r,s){var l=.001,a=r.length;t.moveTo(n,i),e-=n,l=o-i,0===e&&(e=.001),o=l/e;for(var h=Math.sqrt(e*e+l*l),u=0,f=!0,c=0!==s;.1<=h;){if(c){for(l=r[u++%a],l-=s;0>l;)l+=r[u++%a],f=!f;c=!1}else l=r[u++%a];l>h&&(l=h);var d=Math.sqrt(l*l/(1+o*o));0>e&&(d=-d),n+=d,i+=o*d,f?t.lineTo(n,i):t.moveTo(n,i),h-=l,f=!f}}function No(t,n,i){var e=t.Ql();if(null!==e)for(var o=t.tc.i;o.next();){var r=o.value,s=null;if(null!==r.xq){if(null===(s=rn(r,e,t)))continue;r.ny(t,s,i,null)}else if(r.Cx){var l=n.g;null===l||l.Ne||r.ny(t,l.ba.Gk,i,e)}else{var a=e.data;if(null===a)continue;l=n.g,null===l||l.Ne||r.ny(t,a,i,e)}s===t&&null!==(l=e.lx(r.im))&&r.zG(l,s,i)}}function jo(t,n,i,e,o){var r=t.qd,s=t.Qi;s.reset(),qo(t,s,n,i,e,o),t.Qi=s,r.x=n,r.y=i,r.width=e,r.height=o,s.eu()||s.wG(r)}function Lo(t,n,i,e){return!1!==t.Ug&&(e.multiply(t.transform),i?t.Uf(n,e):t.qn(n,e))}function Do(t,n,i,e,o){if(!1!==Jo(t)){var r=t.margin,s=r.right+r.left,r=r.top+r.bottom;n=Math.max(n-s,0),i=Math.max(i-r,0),o=o||0,e=Math.max((e||0)-s,0),o=Math.max(o-r,0);var s=t.angle,r=0,r=t.Ba,l=0;t instanceof Cr&&(l=t.kb),90===s||270===s?(n=isFinite(r.height)?r.height+l:n,i=isFinite(r.width)?r.width+l:i):(n=isFinite(r.width)?r.width+l:n,i=isFinite(r.height)?r.height+l:i);var r=e||0,l=o||0,a=t instanceof tr;switch(Eo(t,!0)){case Bc:l=r=0,a&&(i=n=1/0);break;case Ic:isFinite(n)&&n>e&&(r=n),isFinite(i)&&i>o&&(l=i);break;case Ec:isFinite(n)&&n>e&&(r=n),l=0,a&&(i=1/0);break;case zc:isFinite(i)&&i>o&&(l=i),r=0,a&&(n=1/0)}var a=t.Cf,h=t.Ah;r>a.width&&h.width<a.width&&(r=a.width),l>a.height&&h.height<a.height&&(l=a.height),e=Math.max(r/t.scale,h.width),o=Math.max(l/t.scale,h.height),a.width<e&&(e=Math.min(h.width,e)),a.height<o&&(o=Math.min(h.height,o)),n=Math.min(a.width,n),i=Math.min(a.height,i),n=Math.max(e,n),i=Math.max(o,i),90!==s&&270!==s||(r=n,n=i,i=r,r=e,e=o,o=r),t.qd.Ra(),t.Mn(n,i,e,o),t.qd.freeze(),t.qd.I()||Yh.k("Non-real measuredBounds has been set. Object "+t+", measuredBounds: "+t.qd.toString()),Yo(t,!1)}}function Ao(t,n,i,e,o){var r=t.W;if(r.x=n,r.y=i,r.width=e,r.height=o,!t.Ba.I()){r=t.qd,i=t.margin,n=i.right+i.left;var s=i.top+i.bottom;switch(i=r.width+n,r=r.height+s,e+=n,o+=s,n=Eo(t,!0),i===e&&r===o&&(n=Bc),n){case Bc:(i>e||r>o)&&(Yo(t,!0),Do(t,i>e?e:i,r>o?o:r));break;case Ic:Yo(t,!0),Do(t,e,o,0,0);break;case Ec:Yo(t,!0),Do(t,e,r,0,0);break;case zc:Yo(t,!0),Do(t,i,o,0,0)}}}function Fo(t,n,i){var e=t.nc;0===e.width||0===e.height||isNaN(e.x)||isNaN(e.y)||(null!==t.ac&&(Oo(t,n,t.ac,!0,!0),t.ac instanceof mo&&t.ac.type===xc?(n.beginPath(),n.rect(e.x,e.y,e.width,e.height),n.Kg(t.ac)):n.fillRect(e.x,e.y,e.width,e.height)),null!==t.Eb&&(Oo(t,n,t.Eb,!0,!1),t.Eb instanceof mo&&t.Eb.type===xc?(n.beginPath(),n.rect(e.x,e.y,e.width,e.height),n.Kg(t.Eb)):n.fillRect(e.x,e.y,e.width,e.height)),t.yk(n,i))}function Oo(t,n,i,e,o){if(null!==i){var r=1,s=1;if("string"==typeof i)e?n.fillStyle=i:n.strokeStyle=i;else if(i.type===mc)e?n.fillStyle=i.color:n.strokeStyle=i.color;else{var l,s=t.Ia,r=s.width,s=s.height;if(o)var a=t.W,r=a.width,s=a.height;var h=n instanceof J;if(h&&i.dh&&(i.type===wc||i.ro===r&&i.Jy===s))l=i.dh;else{var u=a=0,f=0,c=0,d=0,p=0,p=d=0;if(o&&(a=t.W,r=a.width,s=a.height,d=a.x,p=a.y),a=i.start.x*r+i.start.offsetX,u=i.start.y*s+i.start.offsetY,f=i.end.x*r+i.end.offsetX,c=i.end.y*s+i.end.offsetY,a+=d,f+=d,u+=p,c+=p,i.type===bc)l=n.createLinearGradient(a,u,f,c);else if(i.type===xc)p=isNaN(i.Ht)?Math.max(r,s)/2:i.Ht,isNaN(i.Mu)?(d=0,p=Math.max(r,s)/2):d=i.Mu,l=n.createRadialGradient(a,u,d,f,c,p);else if(i.type===wc)try{l=n.createPattern(i.pattern,"repeat")}catch(t){l=null}else Yh.yd(i.type,"Brush type");if(i.type!==wc&&null!==(o=i.uk))for(o=o.i;o.next();)l.addColorStop(o.key,o.value);if(h&&(i.dh=l,null!==l&&(i.ro=r,i.Jy=s),null===l&&i.type===wc&&-1!==i.ro)){i.ro=-1;var y=t.g;null!==y&&-1===i.ro&&Yh.setTimeout(function(){y.Vx()},600)}}e?n.fillStyle=l:n.strokeStyle=l}}}function Bo(t){if(0!=(2048&t.P)==!0){var n=t.dd;if(n.reset(),!t.nc.I()||!t.qd.I())return void Ko(t,!1);n.translate(t.nc.x,t.nc.y),n.translate(-t.za.x,-t.za.y);var i=t.Ia;qo(t,n,i.x,i.y,i.width,i.height),Ko(t,!1),Uo(t,!0)}0!=(4096&t.P)==!0&&(n=t.O,null===n?(t.pm.set(t.dd),t.Co=t.scale,Uo(t,!1)):null!==n.qh&&(i=t.pm,i.reset(),n.Zg()?i.multiply(n.pm):null!==n.O&&i.multiply(n.O.pm),i.multiply(t.dd),t.Co=t.scale*n.Co,Uo(t,!1)))}function qo(t,n,i,e,o,r){if(1!==t.scale&&n.scale(t.scale),0!==t.angle){var s=lu;t.sj()&&t.Bf.fd()&&(s=t.Bf);var l=Yh.K();if(t instanceof as&&t.Zf!==t)for(i=t.Zf,e=i.Ia,l.Ju(e.x,e.y,e.width,e.height,s),i.Qi.nb(l),l.offset(-i.za.x,-i.za.y),s=i.O;null!==s&&s!==t;)s.Qi.nb(l),l.offset(-s.za.x,-s.za.y),s=s.O;else l.Ju(i,e,o,r,s);n.rotate(t.angle,l.x,l.y),Yh.v(l)}}function zo(t){if(!1===Wo(t)){var n=t.O;null!==n?n.H():t.sj()&&null!==(n=t.g)&&(n.tg.add(t),t instanceof As&&t.Vf(),n.Le()),Xo(t,!0)}}function Eo(t,n){var i=t.stretch,e=t.O;return null!==e&&e.ma===_c?Io(t,e.be(t.$b),e.ae(t.column),n):null!==e&&e.ma===Zc&&e.Jd()===t?Ro(t,Ic,n):i===qc?null!==e?e.ma===Qc&&e.Jd()===t?Ro(t,Ic,n):(i=e.Zd,i===qc?Ro(t,Bc,n):Ro(t,i,n)):Ro(t,Bc,n):Ro(t,i,n)}function Io(t,n,i,e){var o=t.stretch;if(o!==qc)return Ro(t,o,e);var r=o=null;switch(n.stretch){case zc:r=!0;break;case Ic:r=!0}switch(i.stretch){case Ec:o=!0;break;case Ic:o=!0}return n=t.O.Zd,null===o&&(o=n===Ec||n===Ic),null===r&&(r=n===zc||n===Ic),!0===o&&!0===r?Ro(t,Ic,e):!0===o?Ro(t,Ec,e):!0===r?Ro(t,zc,e):Ro(t,Bc,e)}function Ro(t,n,i){if(i)return n;if(n===Bc)return Bc;if(i=t.Ba,i.I())return Bc;if(t=t.angle,!isNaN(i.width))if(90!==t&&270!==t){if(n===Ec)return Bc;if(n===Ic)return zc}else{if(n===zc)return Bc;if(n===Ic)return Ec}if(!isNaN(i.height))if(90!==t&&270!==t){if(n===zc)return Bc;if(n===Ic)return Ec}else{if(n===Ec)return Bc;if(n===Ic)return zc}return n}function Go(t,n){t.P=n?512|t.P:-513&t.P}function Vo(t){return 0!=(1024&t.P)}function Ho(t,n){t.P=n?1024|t.P:-1025&t.P}function Ko(t,n){t.P=n?2048|t.P:-2049&t.P}function Uo(t,n){t.P=n?4096|t.P:-4097&t.P}function Jo(t){return 0!=(8192&t.P)}function Yo(t,n){t.P=n?8192|t.P:-8193&t.P}function Wo(t){return 0!=(16384&t.P)}function Xo(t,n){t.P=n?16384|t.P:-16385&t.P}function $o(t){var n=t.U;if(n instanceof As&&(null!==t.Qd||t===n.port)){var i=n.g;null===i||i.oa.hb||Bs(n,t)}}function Qo(t){var n=t.g;null===n||n.oa.hb||(t instanceof tr?t instanceof As?t.Vf():ar(t,t,function(t){$o(t)}):$o(t))}function Zo(t,n){if("string"==typeof n)if(t instanceof qr)t.text=n;else if(t instanceof Cr)t.Cb=n;else if(t instanceof Kr)t.source=n;else if(t instanceof tr){var e=Wh(tr,n);null!==e?t.type=e:Yh.k("Unknown Panel type as an argument to GraphObject.make: "+n)}else t instanceof mo?(e=Wh(mo,n),null!==e?t.type=e:Yh.k("Unknown Brush type as an argument to GraphObject.make: "+n)):t instanceof mt?(e=Wh(mt,n),null!==e?t.type=e:Yh.k("Unknown Geometry type as an argument to GraphObject.make: "+n)):t instanceof Ct?(e=Wh(Ct,n),null!==e?t.type=e:Yh.k("Unknown PathSegment type as an argument to GraphObject.make: "+n)):Yh.k("Unable to use a string as an argument to GraphObject.make: "+n);else if(n instanceof To)e=n,t instanceof tr||Yh.k("A GraphObject can only be added to a Panel, not to: "+t),t.add(e);else if(n instanceof Tr){var r,s=n,e=t;s.ve&&e.getRowDefinition?r=e.getRowDefinition(s.index):!s.ve&&e.getColumnDefinition?r=e.getColumnDefinition(s.index):Yh.k("A RowColumnDefinition can only be added to a Panel, not to: "+t),r.Kp(s)}else if(n instanceof i)"function"==typeof t.hc?t.hc(n):Yh.Ej(t,n);else if(n instanceof on)t instanceof To?t.bind(n):t instanceof Tr?t.bind(n):Yh.k("A Binding can only be applied to a GraphObject or RowColumnDefinition, not to: "+t);else if(n instanceof St)t instanceof mt?t.ec.add(n):Yh.k("A PathFigure can only be added to a Geometry, not to: "+t);else if(n instanceof Ct)t instanceof St?t.vb.add(n):Yh.k("A PathSegment can only be added to a PathFigure, not to: "+t);else if(n instanceof ql)t instanceof Ei?t.Sb=n:t instanceof Ll?t.Sb=n:Yh.k("A Layout can only be assigned to a Diagram or a Group, not to: "+t);else if(Array.isArray(n))for(e=0;e<n.length;e++)Zo(t,n[e]);else if("object"==typeof n&&null!==n)if(t instanceof mo){r=new o;for(e in n)s=parseFloat(e),isNaN(s)?r[e]=n[e]:t.addColorStop(s,n[e]);Yh.Hu(t,r)}else if(t instanceof Tr){void 0!==n.row?(r=n.row,(void 0===r||null===r||1/0===r||isNaN(r)||0>r)&&Yh.k("Must specify non-negative integer row for RowColumnDefinition "+n+", not: "+r),t.ve=!0,t.index=r):void 0!==n.column&&(r=n.column,(void 0===r||null===r||1/0===r||isNaN(r)||0>r)&&Yh.k("Must specify non-negative integer column for RowColumnDefinition "+n+", not: "+r),t.ve=!1,t.index=r),r=new o;for(e in n)"row"!==e&&"column"!==e&&(r[e]=n[e]);Yh.Hu(t,r)}else Yh.Hu(t,n);else Yh.k('Unknown initializer "'+n+'" for object being constructed by GraphObject.make: '+t)}function _o(){this.rr=this.Ai=this.dj=this.Aq=this.Dq=this.Cq=this.Bq=this.Si=this.js=this.hs=this.Ti=this.Ui=this.Vi=this.ls=this.ks=this.zi=this.Fi=this.xi=null}function tr(t){To.call(this),void 0===t?this.ma=Xc:(Yh.mb(t,tr,tr,"type"),this.ma=t),this.xa=new f(To),this.ff=Eu,this.ma===ed&&(this.Fn=!0),this.fr=iu,this.Di=qc,this.ma===_c&&nr(this),this.Cp=Rc,this.Dr=Yu,this.Er=qu,this.Ar=0,this.zr=100,this.Cr=10,this.Br=0,this.Yk=this.Vd=this.Tj=this.xm=this.zm=null,this.Qr=NaN,this.vg=this.$j=null,this.Uo="category",this.ug=null,this.fj=new P(NaN,NaN,NaN,NaN),this.lk=this.Os=this.dn=null,this.Hj=""}function nr(t){t.Lj=Eu,t.Nh=1,t.Ci=null,t.vm=null,t.Mh=1,t.Lh=null,t.um=null,t.Yd=[],t.Td=[],t.Vm=hd,t.tm=hd,t.ej=0,t.Oi=0}function ir(t,n){n.P=6144|t.P,n.wc=t.wc,n.Eb=t.Eb,n.ac=t.ac,n.Re=t.Re.S(),n.Wh=t.Wh.S(),n.Vh=t.Vh.S(),n.Qi=t.Qi.copy(),n.tb=t.tb,n.jg=t.jg,n.Dg=t.Dg,n.Lm=t.Lm.S(),n.ge=t.ge.S(),n.om=t.om.S(),n.Wm=t.Wm,n.Xm=t.Xm.S(),n.Ym=t.Ym,null!==t.mg&&(n.mg=t.mg.copy()),n.bn=t.bn,t instanceof qr&&(n.Ed=t.Ed,n.qc=t.qc,n.og=t.og,n.wl=t.wl,n.ng=t.ng,n.Al=t.Al,n.Dm=t.Dm,n.Zj=t.Zj,n.Yj=t.Yj,n.Xi=t.Xi,n.rk=t.rk,n.tf.Oj=null,n.ci=t.ci,n.di=t.di,n.gh=t.gh,n.Xo=t.Xo,n.sg=t.sg,n.rg=t.rg,n.qg=t.qg,n.ym=t.ym)}function er(t,n,i,e){for(var o=e.length,r=t.W,s=i?t.be(0):t.ae(0),l=0;l<o;l++){var a=e[l];if(void 0!==a&&a!==s&&0!==a.Ja){if(i){if(a.position>r.height)continue}else if(a.position>r.width)continue;var h=a.sq;isNaN(h)&&(h=i?t.Nh:t.Mh);var u=a.rq;null===u&&(u=i?t.Ci:t.Lh),0!==h&&null!==u&&(Oo(t,n,u,!1,!1),n.beginPath(),u=a.position+h,i?u>r.height&&(h-=u-r.height):u>r.width&&(h-=u-r.width),a=a.position+h/2,n.lineWidth=h,u=t.padding,i?(a+=u.top,h=u.left,u=r.width-u.right,n.moveTo(h,a),n.lineTo(u,a)):(a+=u.left,h=u.top,u=r.height-u.bottom,n.moveTo(a,h),n.lineTo(a,u)),n.stroke())}}}function or(t,n,i,e,o){for(var r=e.length,s=t.W,l=0;l<r;l++){var a=e[l];if(void 0!==a&&null!==a.background&&a.cA!==o&&0!==a.Ja){var h=i?s.height:s.width;if(!(a.position>h)){var u=a.Ye(),f=a.sq;isNaN(f)&&(f=i?t.Nh:t.Mh);var c=a.rq;null===c&&(c=i?t.Ci:t.Lh),null===c&&(f=0),u-=f,f=a.position+f,u+=a.Ja,f+u>h&&(u=h-f),0>=u||(h=t.padding,Oo(t,n,a.background,!0,!1),i?n.fillRect(h.left,f+h.top,s.width-(h.left+h.right),u):n.fillRect(f+h.left,h.top,u,s.height-(h.top+h.bottom)))}}}}function rr(t,n,i){if(0!=t%n)return!1;n=i.length;for(var e=0;e<n;e++)if(0==t%i[e])return!1;return!0}function sr(t){return"LineV"===t||"BarV"===t}function lr(t){return null!==t.U?t.U.Zf:null}function ar(t,n,i){if(i(t,n),n instanceof tr){n=n.xa.n;for(var e=n.length,o=0;o<e;o++)ar(t,n[o],i)}}function hr(t,n){ur(t,t,n)}function ur(t,n,i){i(n),n=n.xa.n;for(var e=n.length,o=0;o<e;o++){var r=n[o];r instanceof tr&&ur(t,r,i)}}function fr(t,n,i){if(i(n),n instanceof tr){n=n.xa.n;for(var e=n.length,o=0;o<e;o++)fr(t,n[o],i)}}function cr(t,n,i){if(i(n))return n;if(n instanceof tr){n=n.xa.n;for(var e=n.length,o=0;o<e;o++){var r=cr(t,n[o],i);if(null!==r)return r}}return null}function dr(t){t=t.xa.n;for(var n=t.length,i=0,e=0;e<n;e++){var o=t[e];if(o instanceof tr)i=Math.max(i,dr(o));else if(o instanceof Cr){t:{if(null!==!o.Nf)switch(o.Go){case"None":case"Square":case"Ellipse":case"Circle":case"LineH":case"LineV":case"FramedRectangle":case"RoundedRectangle":case"Line1":case"Line2":case"Border":case"Cube1":case"Cube2":case"Junction":case"Cylinder1":case"Cylinder2":case"Cylinder3":case"Cylinder4":case"PlusLine":case"XLine":case"ThinCross":case"ThickCross":o=0;break t}o=o.gi/2*o.cn*o.oj()}i=Math.max(i,o)}}return i}function pr(t,n,i,e){for(var o=t.xa.n,r=o.length;r--;){var s=o[r];if(s.visible){var l=s.W,a=t.Ia;l.x>a.width||l.y>a.height||0>l.x+l.width||0>l.y+l.height||(s instanceof tr&&pr(s,n,i,e),null!==n&&(s=n(s)),null===s||null!==i&&!i(s)||e.add(s))}}}function yr(t){var n=null;return t instanceof Cr&&(n=t.A,n===iu&&(n=null),null!==(t=t.hf)&&null===n&&(n=t.A)),null===n&&(n=eu),n}function vr(t){var n=null;return t instanceof Cr&&(n=t.B,n===iu&&(n=null),null!==(t=t.hf)&&null===n&&(n=t.B)),null===n&&(n=fu),n}function gr(t,n){t.P=n?16777216|t.P:-16777217&t.P}function mr(t){return null!==(t=t.Yk)&&t.Q}function br(t){var n=t.Yk;if(null===n)null!==t.data&&Yh.k("Template cannot have .data be non-null: "+t),t.Yk=n=new f(on);else if(n.Q)return;var i=new f(To);gr(t,!1),ar(t,t,function(t,e){var o=e.tc;if(null!==o)for(Ho(e,!1),o=o.i;o.next();){var r=o.value;r.mode===kf&&Ho(e,!0);var s=r.xq;null!==s&&("/"===s&&gr(t,!0),null!==(s=rn(r,t,e))&&(i.add(s),null===s.pp&&(s.pp=new f(on)),s.pp.add(r))),n.add(r)}if(e instanceof tr&&e.type===_c){if(0<e.Yd.length)for(o=e.Yd,r=o.length,s=0;s<r;s++){var l=o[s];if(void 0!==l&&null!==l.tc)for(var a=l.tc.i;a.next();){var h=a.value;h.Eg=l,h.ht=2,h.xp=l.index,n.add(h)}}if(0<e.Td.length)for(o=e.Td,r=o.length,s=0;s<r;s++)if(void 0!==(l=o[s])&&null!==l.tc)for(a=l.tc.i;a.next();)h=a.value,h.Eg=l,h.ht=1,h.xp=l.index,n.add(h)}});for(var e=i.i;e.next();){var o=e.value;if(null!==o.pp){Ho(o,!0);for(var r=o.pp.i;r.next();){var s=r.value;null===o.tc&&(o.tc=new f(on)),o.tc.add(s)}}o.pp=null}for(e=n.i;e.next();)if(o=e.value,null!==(r=o.Eg)){o.Eg=null;var l=o.my,a=l.indexOf(".");0<a&&r instanceof tr&&(s=l.substring(0,a),l=l.substr(a+1),a=r.ud(s),null!==a?(r=a,o.my=l):Yh.trace('Warning: unable to find GraphObject named "'+s+'" for Binding: '+o.toString())),r instanceof Tr?(o.im=Yh.Kd(r.O),r.O.oo=o.im):(o.im=Yh.Kd(r),r.oo=o.im)}n.freeze(),t instanceof as&&t.de()&&t.$e()}function xr(t){return!!(t.type===Qc||t.type===Zc||t.type===id||t.type===_c&&0<t.xa.length&&(t=t.xa.ea(0),t.Wf&&t instanceof tr&&(t.type===td||t.type===nd)))}function wr(t,n,i){if(!(void 0===n||null===n||0>i)){var e;e=Mr(t,n);var o=t.BI,r=null;null!==o&&(r=o.ja(e)),null===r&&(rd||(rd=!0,Yh.trace('No item template Panel found for category "'+e+'" on '+t),Yh.trace("  Using default item template."),e=new tr,o=new qr,o.bind(new on("text","",Mf)),e.add(o),sd=e),r=sd),e=r,null!==e&&(br(e),e=e.copy(),0!=(16777216&e.P)&&null!==(o=t.Ql())&&gr(o,!0),"object"==typeof n&&(null===t.ug&&(t.ug=new b(Object,tr)),t.ug.add(n,e)),o=i,xr(t)&&o++,t.Md(o,e),e.Vd=n,kr(t,o,i),e.Vd=null,e.data=n)}}function kr(t,n,i){for(t=t.xa;n<t.length;){var e=t.ea(n);if(e instanceof tr){var o=n,r=i;e.type===td?e.$b=o:e.type===nd&&(e.column=o),e.hu=r}n++,i++}}function Mr(t,n){if(null===n)return"";var i=t.Uo,e="";if("function"==typeof i)e=i(n);else{if("string"!=typeof i||"object"!=typeof n)return"";if(""===i)return"";e=Yh.sb(n,i)}return void 0===e?"":"string"==typeof e?e:(Yh.k("Panel.getCategoryForItemData found a non-string category for "+n+": "+e),"")}function Pr(t,n,i){var e=n.FE;if(null!==e&&e(n,i),n instanceof tr){n=n.xa.n;for(var e=n.length,o=0;o<e;o++){var r=n[o];i&&r instanceof tr&&!r.isEnabled||Pr(t,r,i)}}}function Tr(){Yh.mc(this),this.mh=null,this.Qv=!0,this.uc=0,this.gf=NaN,this.ek=0,this.dk=1/0,this.ge=iu,this.ib=this.Sa=0,this.tc=null,this.$s=ld,this.Dg=qc,this.Vs=this.ik=null,this.Ws=NaN,this.Eb=this.Yh=null,this.ar=!1}function Sr(t){if(t.Ku===ld){var n=t.mh;return t.ve?n.wJ:n.tH}return t.Ku}function Cr(){To.call(this),this.Nf=this.Va=null,this.Go="None",this.xr=qc,this.qc=this.zd="black",this.gi=1,this.sp="butt",this.vp="miter",this.cn=10,this.tp=null,this.uf=0,this.fi=this.ei=iu,this.xs=this.ws=NaN,this.Hr=!1,this.zs=null,this.Io=this.zp="None",this.sg=1,this.rg=0,this.qg=1}function Nr(t,n,i,e){var o=i.length;if(!(4>o)){for(var r=e.za,s=Math.max(1,r.width),r=r.height,l=i[0],a=i[1],h=0,u=0,f=0,c=0,d=0,p=0,y=c=0,v=Yh.lb(),g=2;g<o;g+=2)h=i[g],u=i[g+1],f=h-l,c=u-a,0===f&&(f=.001),d=c/f,p=Math.atan2(c,f),c=Math.sqrt(f*f+c*c),v.push([f,p,d,c]),y+=c,l=h,a=u;l=i[0],a=i[1],f=e.za.width,e instanceof Cr&&(f-=e.kb),1>f&&(f=1);for(var o=i=f,h=s/2,u=0!==h,g=0,c=v[g],f=c[0],p=c[1],d=c[2],c=c[3],m=0;.1<=y;){if(0===m&&(u?(o=i,o-=h,y-=h,u=!1):o=i,0===o&&(o=1)),o>y)return void Yh.wa(v);o>c?(m=o-c,o=c):m=0;var b=Math.sqrt(o*o/(1+d*d));if(0>f&&(b=-b),l+=b,a+=d*b,t.translate(l,a),t.rotate(p),t.translate(-s/2,-r/2),0===m&&e.yk(t,n),t.translate(s/2,r/2),t.rotate(-p),t.translate(-l,-a),y-=o,c-=o,0!==m){if(++g===v.length)return void Yh.wa(v);c=v[g],f=c[0],p=c[1],d=c[2],c=c[3],o=m}}Yh.wa(v)}}function jr(t,n,i,e){var o=n.length;if(!(4>o)){var r=.001,s=i.length,l=n[0],a=n[1];if(4===o)Co(t,l,a,n[2],n[3],i,e);else{t.moveTo(l,a);for(var h=r=0,u=0,f=0,c=0,d=f=0,p=Yh.lb(),y=2;y<o;y+=2)r=n[y],h=n[y+1],u=r-l,f=h-a,0===u&&(u=.001),c=f/u,f=Math.sqrt(u*u+f*f),p.push([u,c,f]),d+=f,l=r,a=h;l=n[0],a=n[1],n=0;for(var o=!0,r=i[n%s],h=0!==e,y=0,f=p[y],u=f[0],c=f[1],f=f[2],v=0;.1<=d;){0===v&&(r=i[n%s],n++,h&&(e%=r,r-=e,h=!1)),r>d&&(r=d),r>f?(v=r-f,r=f):v=0;var g=Math.sqrt(r*r/(1+c*c));if(0>u&&(g=-g),l+=g,a+=c*g,o?t.lineTo(l,a):t.moveTo(l,a),d-=r,f-=r,0!==v){if(++y===p.length)return void Yh.wa(p);f=p[y],u=f[0],c=f[1],f=f[2],r=v}else o=!o}Yh.wa(p)}}}function Lr(t,n,i,e){if(!1!==Jo(t)){t.qd.Ra();var o=t.gi;0===o&&e instanceof Ds&&e.type===id&&e.rb instanceof Cr&&(o=e.rb.kb),o*=t.tb,e instanceof Js&&null!==e.Va?(n=e.Va.eb,jo(t,n.x-o/2,n.y-o/2,n.width+o,n.height+o)):jo(t,-o/2,-o/2,n+o,i+o),t.qd.freeze(),t.qd.I()||Yh.k("Non-real measuredBounds has been set. Object "+t+", measuredBounds: "+t.qd.toString()),Yo(t,!1)}}function Dr(t){var n=t.mA;return null!==t.Nf?n===qc?Ic:n:n===qc?tf[t.Cb].Zd:n}function Ar(t,n,i,e,o){return t=i.x-t,n=i.y-n,n=t*t+n*n,n<e?(o.x=i.x,o.y=i.y,n):e}function Fr(t,n,i,e,o,r,s,l,a){var h=!1,u=(o-s)*(n-e)-(r-l)*(t-i);return 0!==u&&(a.x=((o*l-r*s)*(t-i)-(o-s)*(t*e-n*i))/u,a.y=((o*l-r*s)*(n-e)-(r-l)*(t*e-n*i))/u,(t>i?t-i:i-t)<(n>e?n-e:e-n)?(o=n<e?n:e,t=n<e?e:n,(a.y>o||X(a.y,o))&&(a.y<t||X(a.y,t))&&(h=!0)):(o=t<i?t:i,t=t<i?i:t,(a.x>o||X(a.x,o))&&(a.x<t||X(a.x,t))&&(h=!0)),h)}function Or(t,n,i,e){if(!t.TE(n,i,e))return!1;t=n.x,n=n.y;var o=i.x;i=i.y;var r=e.x;if(e=e.y,t===o){var s=0;return t=0,n<i?(s=n,t=i):(s=i,t=n),e>=s&&e<=t}return t<o?(s=t,t=o):s=o,r>=s&&r<=t}function Br(t){var n=t.g;null!==n&&n.oa.hb||(t.qq=Xd,"None"!==t.zp?(t.Me=-1,t.ph=pu):"None"!==t.Io&&(t.Me=0,t.ph=new F(1-pu.x,pu.y)))}function qr(){To.call(this),this.Ed="",this.qc="black",this.og="13px sans-serif",this.wl="start",this.ng=Bc,this.Al=vu,this.Dm=!0,this.Yj=this.Zj=!1,this.Xi=wd,this.rk=xd,this.Zv=this.je=0,this.nz=this.oz=null,this.tf=new Hr,this.qr=!1,this.Te=this.Rq=this.it=this.xl=this.jt=null,this.di=this.ci=0,this.gh=1/0,this.Xo=0,this.sg=1,this.rg=0,this.qg=1,this.ym=null}function zr(t,n,i,e){n=n.replace(/^\s+|\s+$/g,"");var o=0,r=0,s=0,l=t.og,r=t.ci+t.di,a=Math.max(0,Rr(t)+r),s=t.Xi===kd?Gr(l):0;if(t.je>=t.gh)return new M(0,a);if(t.rk===md){if(i.gj=1,r=Ir(n,l),0===s||r<=e)return i.Ue=Math.max(i.Ue,r),i.qf.push(i.Ue),i.Qe.push(n),new M(r,a);var h=Er(n);n=n.substr(h.length);for(var u=Er(n),r=Ir(h+u,l);0<u.length&&r<=e;)h+=u,n=n.substr(u.length),u=Er(n),r=Ir((h+u).replace(/^\s+|\s+$/g,""),l);for(h+=u.replace(/^\s+|\s+$/g,""),e=Math.max(1,e-s);Ir(h,l)>e&&1<h.length;)h=h.substr(0,h.length-1);return h+=yd,s=Ir(h,l),i.qf.push(s),i.Ue=s,i.Qe.push(h),new M(s,a)}var f=0;for(0===n.length&&(f=1,i.qf.push(0),i.Qe.push(n));0<n.length;){for(h=Er(n),n=n.substr(h.length);Ir(h,l)>e;){for(u=1,r=Ir(h.substr(0,u),l),s=0;r<=e;)u++,s=r,r=Ir(h.substr(0,u),l);if(1===u?(i.qf[t.je+f]=r,o=Math.max(o,r)):(i.qf[t.je+f]=s,o=Math.max(o,s)),u--,1>u&&(u=1),i.Qe[t.je+f]=h.substr(0,u),f++,h=h.substr(u),t.je+f>t.gh)break}for(u=Er(n),r=Ir(h+u,l);0<u.length&&r<=e;)h+=u,n=n.substr(u.length),u=Er(n),r=Ir((h+u).replace(/^\s+|\s+$/g,""),l);if(""!==(h=h.replace(/^\s+|\s+$/g,""))&&("­"===h[h.length-1]&&(h=h.substring(0,h.length-1)+"‐"),0===u.length?(i.qf.push(r),o=Math.max(o,r)):(s=Ir(h,l),i.qf.push(s),o=Math.max(o,s)),i.Qe.push(h),f++,t.je+f>t.gh))break}return i.gj=Math.min(t.gh,f),i.Ue=Math.max(i.Ue,o),new M(i.Ue,a*i.gj)}function Er(t){for(var n=t.length,i=0;i<n&&!ud.test(t.charAt(i));)i++;for(;i<n&&ud.test(t.charAt(i));)i++;return i>=n?t:t.substr(0,i)}function Ir(t,n){return vd!==n&&(vd=gd.font=n),gd.measureText(t).width}function Rr(t){if(null!==t.tf.Oj)return t.tf.Oj;var n=t.og;vd!==n&&(vd=gd.font=n);var i=0;return void 0!==fd[n]&&5e3>cd?i=fd[n]:(i=1.3*gd.measureText("M").width,fd[n]=i,cd++),t.tf.Oj=i}function Gr(t){vd!==t&&(vd=gd.font=t);var n=0;return void 0!==dd[t]&&5e3>pd?n=dd[t]:(n=gd.measureText(yd).width,dd[t]=n,pd++),n}function Vr(t,n,i){var e=t.Ed.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),o=t.ci+t.di,o=Math.max(0,Rr(t)+o);if(0===e.length)return i.Ue=0,t.je=1,o;if(!t.Bx){var r=e.indexOf("\n",0);0<=r&&(e=e.substr(0,r))}for(var r=0,s=t.je=0,l=-1,a=!1;!a;)l=e.indexOf("\n",s),-1===l&&(l=e.length,a=!0),s<=l&&(s=e.substr(s,l-s),t.rk!==md?(i.gj=0,s=zr(t,s,i,n),r+=s.height,t.je+=i.gj):(zr(t,s,i,n),r+=o,t.je++),t.je===t.gh&&(a=!0)),s=l+1;return t.Zv=r}function Hr(){this.Ue=this.gj=0,this.qf=[],this.Qe=[],this.Oj=null}function Kr(){To.call(this),this.Se=null,this.bt="",this.jk=Qu,this.Lo=Ic,this.hi=this.Te=null,this.Ko=lu,this.ng=Bc,this.wp=null,this.iz=!1,this.Av=!0,this.Xv=!1,this.np=null}function Ur(){var t=Sd;if(0===t.length)for(var i=n.document.getElementsByTagName("canvas"),e=i.length,o=0;o<e;o++){var r=i[o];r.parentElement&&r.parentElement.Z&&t.push(r.parentElement.Z)}return t}function Jr(t,n){t.Nv=!0,t.Jo=!1;for(var i=null,e=Ur(),o=e.length,r=0;r<o;r++){var s=e[r],l=s.hp.ja(t.src);if(null!==l)for(o=l.length,r=0;r<o;r++)i=l[r],s.vz.add(i),s.Le(),null===t.yz&&(t.yz=n,null!==i.hi&&i.hi(i,n))}}function Yr(t,n){t.Jo=n;for(var i=null,e=Ur(),o=e.length,r=0;r<o;r++)if(null!==(i=e[r].hp.ja(t.src))){for(var o=i.length,s=Yh.lb(),r=0;r<o;r++)s.push(i[r]);for(r=0;r<o;r++)i=s[r],null!==i.Te&&i.Te(i,n);Yh.wa(s)}}function Wr(t){this.Fp=[new $r(t,1)]}function Xr(t,n,i,e){var o=new U(null),r=o.xk,s=1/n;o.width=i/n,o.height=e/n,n=new $r(o.Hd,n),i=t.Fp[t.Fp.length-1],r.setTransform(s*i.jq,0,0,s*i.jq,0,0),r.drawImage(i.source,0,0),t.Fp.push(n)}function $r(t,n){this.source=t,this.jq=n}function Qr(){this.o=new mt,this.Vb=null}function Zr(t,n,i,e,o,r){null===t.o&&Yh.k("StreamGeometryContext has been closed"),void 0!==o&&!0===o?(null===t.Vb&&Yh.k("Need to call beginFigure first"),e=new Ct(uf),e.C=n,e.D=i,t.Vb.vb.add(e)):(t.Vb=new St,t.Vb.ha=n,t.Vb.fa=i,t.Vb.du=e,t.o.ec.add(t.Vb)),void 0!==r&&(t.Vb.Ro=r)}function _r(t){null===t.o&&Yh.k("StreamGeometryContext has been closed"),null===t.Vb&&Yh.k("Need to call beginFigure first");var n=t.Vb.vb.length;0<n&&t.Vb.vb.ea(n-1).close()}function ts(t){null===t.o&&Yh.k("StreamGeometryContext has been closed"),null===t.Vb&&Yh.k("Need to call beginFigure first"),0<t.Vb.vb.length&&(t.Vb.du=!0)}function ns(t,n,i,e,o,r,s,l){void 0===l&&(l=!1),null===t.o&&Yh.k("StreamGeometryContext has been closed"),null===t.Vb&&Yh.k("Need to call beginFigure first");var a=new Ct(cf);a.sc=n,a.Pc=i,a.Bh=e,a.Ch=o,a.C=r,a.D=s,l&&a.close(),t.Vb.vb.add(a)}function is(t,n,i,e,o){var r;void 0===r&&(r=!1),null===t.o&&Yh.k("StreamGeometryContext has been closed"),null===t.Vb&&Yh.k("Need to call beginFigure first");var s=new Ct(df);s.sc=n,s.Pc=i,s.C=e,s.D=o,r&&s.close(),t.Vb.vb.add(s)}function es(t,n,i,e,o,r,s,l){var a;void 0===a&&(a=!1),null===t.o&&Yh.k("StreamGeometryContext has been closed"),null===t.Vb&&Yh.k("Need to call beginFigure first"),n=new Ct(yf,s,l,n,i,e,o,r),a&&n.close(),t.Vb.vb.add(n)}function os(t){t=rs(t);var n=Yh.lb();n[0]=t[0];for(var i=1,e=1;e<t.length;)n[i]=t[e],n[i+1]=t[e],n[i+2]=t[e+1],e+=2,i+=3;return Yh.wa(t),n}function rs(t){var n=ss(t),i=Yh.lb(),e=Math.floor(n.length/2),o=n.length-1;t=0==t%2?2:1;for(var r=0;r<o;r++){var s=n[r],l=n[r+1],a=n[(e+r-1)%o],h=n[(e+r+t)%o];i[2*r]=s,i[2*r+1]=ht(s.x,s.y,a.x,a.y,l.x,l.y,h.x,h.y,new x)}return i[i.length]=i[0],Yh.wa(n),i}function ss(t){for(var n=Yh.lb(),i=1.5*Math.PI,e=0,o=0;o<t;o++)e=2*Math.PI/t*o+i,n[o]=new x(.5+.5*Math.cos(e),.5+.5*Math.sin(e));return n.push(n[0]),n}function ls(t){var n=nf[t];if(void 0===n){var i=t.toLowerCase();if("none"===i)return"None";if(void 0===(n=nf[i])){var e,o=null;for(e in jd)if(e.toLowerCase()===i){o=e;break}if(null!==o)return t=hf(jd[o],!1),nf[o]=t,i!==o&&(nf[i]=o),o}}return"string"==typeof n?n:n instanceof mt?t:null}function as(t){tr.call(this,t),this.N=2408959,this.ml=this.vi="",this.Js=this.Gs=this.Ss=this.Sr=null,this.Us="",this.ti=this.Fr=this.Ts=this.Zm=null,this.Is="",this.jp=null,this.Hs=$u,this.Ks="",this.kp=null,this.Ed="",this.Uv=this.Uq=this.Zk=null,this.Ri=new x(NaN,NaN).freeze(),this.Xr="",this.pl=null,this.Yr=eu,this.fs=Gu,this.Zr=Vu,this.nr=null,this.Tr=Fd,this.an=Ru,this.$m="gray",this.Cg=4,this.YC=-1,this.st=NaN,this.HG=new P,this.Nm=null,this.ck=NaN}function hs(t,n){n.bb.bf.each(function(n){n.isEnabled&&n.updateAdornments(t)}),n.bb.updateAdornments(t)}function us(t){0!=(16384&t.N)!=!1&&(t.updateAdornments(),t.N&=-16385)}function fs(t){if(!1===ks(t)){var n=t.g;null!==n&&(n.tg.add(t),n.Le()),Ms(t,!0),t.Ji()}}function cs(t){if(t.N|=2097152,!1!==ks(t)){var n=t.position,i=t.location;i.I()&&n.I()||vs(t,n,i);var i=t.nc,e=i.copy();i.Ra(),i.x=n.x,i.y=n.y,i.freeze(),t.Ox(e,i),Ms(t,!1)}}function ds(t,n,i,e){void 0===e&&(e=new x),i=i.Od()?lu:i;var o=n.Ia;if(e.m(o.width*i.x+i.offsetX,o.height*i.y+i.offsetY),null===n||n===t)return e;for(n.transform.nb(e),n=n.O;null!==n&&n!==t;)n.transform.nb(e),n=n.O;return t.Qi.nb(e),e.offset(-t.qd.x,-t.qd.y),e}function ps(t,n){var i,e=t.HG;isNaN(t.ck)&&(t.ck=dr(t)),i=t.ck;var o=2*i;if(!t.am)return e.m(n.x-1-i,n.y-1-i,n.width+2+o,n.height+2+o),e;i=n.x;var o=n.y,r=n.width,s=n.height,l=t.shadowBlur,a=t.DJ,r=r+l,s=s+l;return i-=l/2,o-=l/2,0<a.x?r+=a.x:(i+=a.x,r-=a.x),0<a.y?s+=a.y:(o+=a.y,s-=a.y),e.m(i-1,o-1,r+2,s+2),e}function ys(t,n,i,e){null===n||t instanceof Ds||(n=n.Oa,n.pc&&ki(n,t,"position",e.copy(),i.copy(),!1))}function vs(t,n,i){var e=Yh.K(),o=t.Bf,r=t.Zf;o.Od()&&Yh.k("determineOffset: Part's locationSpot must be real: "+o.toString());var s=r.Ia,l=r instanceof Cr?r.kb:0;if(e.Ju(0,0,s.width+l,s.height+l,o),r!==t)for(e.offset(-l/2,-l/2),r.transform.nb(e),o=r.O;null!==o&&o!==t;)o.transform.nb(e),o=o.O;t.Qi.nb(e),e.offset(-t.qd.x,-t.qd.y),o=t.g,r=i.I(),s=n.I(),r&&s?0!=(2097152&t.N)?gs(t,n,i,o,e):ms(t,n,i,o,e):r?gs(t,n,i,o,e):s&&ms(t,n,i,o,e),t.N|=2097152,Yh.v(e),t.Ji()}function gs(t,n,i,e,o){var r=n.x,s=n.y;n.m(i.x-o.x,i.y-o.y),null!==e&&(i=e.Oa,(o=i.Wj)||!i.pc||t instanceof Ds||ki(i,t,"position",new x(r,s),n,!1),o||n.x===r&&n.y===s||(i=e.wb,e.wb=!0,t.h("position",new x(r,s),n),e.wb=i))}function ms(t,n,i,e,o){var r=i.copy();i.m(n.x+o.x,n.y+o.y),i.L(r)||null===e||(n=e.wb,e.wb=!0,t.h("location",r,i),e.wb=n)}function bs(t,n,i){Ps(t,!1),t instanceof As&&i.xA(t),t.layer.Kc||n||i.rc(),n=t.nc;var e=i.pb;e.I()?(Ts(t)?j(n,e)||t.Df(!1):n.Uf(e)&&t.Df(!0),t.updateAdornments()):i.hl=!0}function xs(t,n){var i=t.nc;if(0!==i.width&&0!==i.height&&!isNaN(i.x)&&!isNaN(i.y)&&t.isVisible()){var e=t.transform;null!==t.ac&&(Oo(t,n,t.ac,!0,!0),n.fillRect(i.x,i.y,i.width,i.height)),null===t.ac&&null===t.Eb&&(Oo(t,n,"rgba(0,0,0,0.4)",!0,!1),n.fillRect(i.x,i.y,i.width,i.height)),null!==t.Eb&&(e.eu()||n.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),i=t.Ia,Oo(t,n,t.Eb,!0,!1),n.fillRect(0,0,i.width,i.height),e.eu()||(i=1/(e.m11*e.m22-e.m12*e.m21),n.transform(e.m22*i,-e.m12*i,-e.m21*i,e.m11*i,i*(e.m21*e.dy-e.m22*e.dx),i*(e.m12*e.dx-e.m11*e.dy))))}}function ws(t,n,i,e){n.constructor===t.constructor||Od||(Od=!0,Yh.trace('Should not change the class of the Part when changing category from "'+i+'" to "'+e+'"'),Yh.trace("  Old class: "+Yh.jf(t)+", new class: "+Yh.jf(n)+", part: "+t.toString())),t.Bt();var o=t.data;i=t.Yf;var r=t.gb,s=t.Ng,l=!0,a=!0,h=!1;if(t instanceof As)var u=t,l=u.vj,a=u.gd,h=u.Qu;n.li(t),n.cloneProtected(t),t.vi=e,t.H(),t.na(),n=t.g,e=!0,null!==n&&(e=n.wb,n.wb=!0),t.Vd=o,null!==o&&t.Hb(),null!==n&&(n.wb=e),o=t.Yf,o!==i&&(t.ml=i,t.Yf=o),t instanceof As&&(u=t,u.vj=l,u.gd=a,u.Qu=h,u.de()&&u.J(64)),t.gb=r,t.Ng=s}function ks(t){return 0!=(32768&t.N)}function Ms(t,n){t.N=n?32768|t.N:-32769&t.N}function Ps(t,n){t.N=n?65536|t.N:-65537&t.N}function Ts(t){return 0!=(131072&t.N)}function Ss(t,n){t.N=n?1048576|t.N:-1048577&t.N}function Cs(t,n){var i=n.Pa;return null!==i?1+Cs(t,i):n instanceof As&&null!==(i=n.Mc)?Cs(t,i):0}function Ns(t,n){var i=n.Pa;return null!==i?Ns(t,i):n instanceof As&&null!==(i=n.Mc)?Ns(t,i):n}function js(t,n,i){if(n===i||null===i)return!1;var e=n.Pa;return!(null===e||e!==i&&!js(t,e,i))||n instanceof As&&null!==(n=n.Mc)&&js(t,n,i)}function Ls(t){return!!t.isVisible()&&(null===(t=t.layer)||!t.Kc)}function Ds(t){0===arguments.length?as.call(this,Xc):as.call(this,t),this.N&=-257,this.ml="Adornment",this.Dc=null,this.iD=0,this.ZD=!1,this.Kb=this.ah=null}function As(t){as.call(this,t),this.ya=13,this.oc=new f(Js),this.nt=this.Vo=this.ol=this.Vr=this.Ur=null,this.Nq=Iu,this.le=this.Ih=null,this.Cs=Ed,this.qk=!1}function Fs(t,n){null!==n&&(null===t.Ih&&(t.Ih=new d(yl)),t.Ih.add(n))}function Os(t,n,i,e){if(null===n||null===t.Ih)return null;for(var o=t.Ih.i;o.next();){var r=o.value;if(r.hq===t&&r.su===n&&r.Rx===i&&r.Sx===e||r.hq===n&&r.su===t&&r.Rx===e&&r.Sx===i)return r}return null}function Bs(t,n){for(var i=t.fe;i.next();){var e=i.value;e.Jc!==n&&e.jd!==n||(qs(t,e.Jc),qs(t,e.jd),e.Yb())}}function qs(t,n){if(null!==n){var i=n.Bs;null!==i&&i.Zp(),i=t.Pa,null===i||i.we||qs(i,i.Pl(""))}}function zs(t,n,i){if(qs(t,i),!t.oc.contains(n)){t.oc.add(n);var e=t.HI;if(null!==e){var o=!0,r=t.g;null!==r&&(o=r.Ua,r.Ua=!0),e(t,n,i),null!==r&&(r.Ua=o)}n.Lc&&(i=n.Y,n=n.$,null!==i&&null!==n&&i!==n&&(e=!0,r=t.g,null!==r&&(e=r.Pd),t=e?n:i,o=e?i:n,t.qk||(t.qk=o),!o.vj||null!==r&&r.oa.hb||(e?i===o&&(o.vj=!1):n===o&&(o.vj=!1))))}}function Es(t,n,i){if(qs(t,i),t.oc.remove(n)){var e=t.II,o=t.g;if(null!==e){var r=!0;null!==o&&(r=o.Ua,o.Ua=!0),e(t,n,i),null!==o&&(o.Ua=r)}n.Lc&&(i=!0,null!==o&&(i=o.Pd),t=i?n.$:n.Y,n=i?n.Y:n.$,null!==t&&(t.qk=!1),null===n||n.vj||(0===n.oc.count?(n.qk=null,null!==o&&o.oa.hb||(n.vj=!0)):Is(n)))}}function Is(t){if(t.qk=!1,0!==t.oc.count){var n=!0,i=t.g;if(null===i||!i.oa.hb){for(null!==i&&(n=i.Pd),i=t.oc.i;i.next();){var e=i.value;if(e.Lc)if(n){if(e.Y===t)return void(t.vj=!1)}else if(e.$===t)return void(t.vj=!1)}t.vj=!0}}}function Rs(t){null===t.le?t.le=new b("string",To):t.le.clear(),ar(t,t,function(t,n){var i=n.Qd;null!==i&&t.le.add(i,n)}),0===t.le.count&&t.le.add("",t)}function Gs(t,n,i){var e=n.Qd;if(null!==e&&(null!==t.le&&t.le.remove(e),null!==(n=t.g)&&i)){for(i=null,e=t.IE(e);e.next();)t=e.value,null===i&&(i=Yh.lb()),i.push(t);if(null!==i){for(e=0;e<i.length;e++)t=i[e],n.remove(t);Yh.wa(i)}}}function Vs(t,n){var i=n.Rl();return null===i?0:1+Vs(t,i)}function Hs(t,n,i,e,o,r,s){if(1<e)for(var l=i?t.mx():t.Lg();l.next();){var a=l.value;a.Lc&&(null===(a=a.oA(t))||a===t||n.contains(a)||(n.add(a),Hs(a,n,i,e-1,o,r,s)))}else Ks(t,n,i,o,r,s)}function Ks(t,n,i,e,o,r){for(var s=o===t||t.gd,l=i?t.mx():t.Lg();l.next();){var a=l.value;a.Lc&&(null===(a=a.oA(t))||a===t||n.contains(a)||(n.add(a),s&&(r&&Li(e,a,o),a.Ek(),a.vd(!1)),a.gd&&(a.Qu=a.gd,Ks(a,n,i,e,o,r))))}t.gd=!1}function Us(t,n,i,e,o,r,s){for(var l=r!==t&&t.gd,a=i?t.mx():t.Lg();a.next();){var h=a.value;h.Lc&&(l||h.$g||h.Yb(),null!==(h=h.oA(t))&&h!==t&&!n.contains(h)&&(n.add(h),l||(h.vd(!0),h.Ek(),s&&ji(o,h,r)),2<e||h.Qu))&&(h.Qu=!1,Us(h,n,i,e-1,o,r,s))}t.gd=!0}function Js(){as.call(this,id),this.Wb=8,this.pg=null,this.Oh="",this.Fg=this.wr=null,this.ii="",this.mt=null,this.Fq=Vd,this.$q=0,this.cr=Vd,this.dr=NaN,this.Um=Rd,this.at=.5,this.sf=null,this.bd=new f(x).freeze(),this.ah=this.sC=this.mC=this.ui=this.Hi=this.Va=this.qw=this.lp=this.Ve=null,this.Gz=new x,this.V=this.KD=this.JD=null}function Ys(t){var n=t.Y,i=t.$;null!==n&&null!==i?Ws(t,n.QH(i)):Ws(t,null)}function Ws(t,n){var i=t.Zk;if(i!==n){null!==i&&Al(i,t),t.Zk=n,null!==n&&Dl(n,t);var e=t.sE;if(null!==e){var o=!0,r=t.g;null!==r&&(o=r.Ua,r.Ua=!0),e(t,i,n),null!==r&&(r.Ua=o)}!t.$g||t.JD!==i&&t.KD!==i||t.Yb()}}function Xs(t,n){null===t.sf&&(t.sf=new d(As)),t.sf.add(n),t.H()}function $s(t){0===t.bd.count?t.$g=!1:(t.$g=!0,t.Mp=t.l(0),t.Np=t.l(t.qa-1),ul(t,!1))}function Qs(t,n){return Math.abs(n.x-t.x)>Math.abs(n.y-t.y)?(n.x=n.x>=t.x?t.x+9e9:t.x-9e9,n.y=t.y):(n.y=n.y>=t.y?t.y+9e9:t.y-9e9,n.x=t.x),n}function Zs(t,n){var i=n.Bs;return null===i&&(i=new Tl,i.port=n,i.Oc=n.U,n.Bs=i),Cl(i,t)}function _s(t,n){if(null===n)return lu;var i=t.Ab;return i.Vc()&&null!==n&&(i=n.Ab),i===iu?nu:i}function tl(t,n){if(null===n)return lu;var i=t.Bb;return i.Vc()&&null!==n&&(i=n.Bb),i===iu?nu:i}function nl(t){if(null===t.g||!t.Xl)return!1;var n=t.points.n,i=n.length;if(4>i)return!1;t=no(t.g,!0,t.Pa,null);for(var e=1;e<i-2;e++){var o=n[e],r=n[e+1];if(!t.cq(Math.min(o.x,r.x),Math.min(o.y,r.y),Math.abs(o.x-r.x),Math.abs(o.y-r.y)))return!0}return!1}function il(t,n,i,e,o,r){var s=n.mn,l=n.ln,a=ml(n,i,e),h=i,u=e;for(0===o?h+=s:90===o?u+=l:180===o?h-=s:u-=l;1<a&&ml(n,h,u)===a-1;)i=h,e=u,0===o?h+=s:90===o?u+=l:180===o?h-=s:u-=l,a-=1;r?1<a&&(180===o||0===o?i=Math.floor(i/s)*s+s/2:90!==o&&270!==o||(e=Math.floor(e/l)*l+l/2)):(i=Math.floor(i/s)*s+s/2,e=Math.floor(e/l)*l+l/2),1<a&&(r=o,h=i,u=e,0===o?(r=90,u+=l):90===o?(r=180,h-=s):180===o?(r=270,u-=l):270===o&&(r=0,h+=s),ml(n,h,u)===a-1?il(t,n,h,u,r,!1):(h=i,u=e,0===o?(r=270,u-=l):90===o?(r=0,h+=s):180===o?(r=90,u+=l):270===o&&(r=180,h-=s),ml(n,h,u)===a-1&&il(t,n,h,u,r,!1))),t.hj(i,e)}function el(t,n,i,e){return t=i-t,isNaN(t)||1/0===t||-1/0===t?NaN:(0>t&&(t=-t),n=e-n,isNaN(n)||1/0===n||-1/0===n?NaN:(0>n&&(n=-n),X(t,0)?n:X(n,0)?t:Math.sqrt(t*t+n*n)))}function ol(t,n,i,e){var o=t.qa;if(2>o)return n;if(i){var r=t.l(1);if(i=r.x-e.x,e=r.y-e.y,0===(r=el(n.x,n.y,i,e)))return n;o=2===o?.5*r:r,t=t.computeShortLength(!0),t>o&&(t=o),i=t*(i-n.x)/r,t=t*(e-n.y)/r,n.x+=i,n.y+=t}else{if(r=t.l(o-2),i=r.x-e.x,e=r.y-e.y,0===(r=el(n.x,n.y,i,e)))return n;o=2===o?.5*r:r,t=t.computeShortLength(!1),t>o&&(t=o),i=t*(n.x-i)/r,t=t*(n.y-e)/r,n.x-=i,n.y-=t}return n}function rl(t,n,i,e){for(var o=t.qa,r=n;X(n.x,r.x)&&X(n.y,r.y);){if(i>=o)return o-1;r=t.l(i++)}if(!X(n.x,r.x)&&!X(n.y,r.y))return i-1;for(var s=r;X(n.x,r.x)&&X(r.x,s.x)&&(!e||(n.y>=r.y?r.y>=s.y:r.y<=s.y))||X(n.y,r.y)&&X(r.y,s.y)&&(!e||(n.x>=r.x?r.x>=s.x:r.x<=s.x));){if(i>=o)return o-1;s=t.l(i++)}return i-2}function sl(t,n,i,e,o,r,s){if(!s&&hl(t)){s=[];var l=0;t.isVisible()&&(l=ll(t,o,r,s));var a=o.x,a=o.y;if(0<l)if(W(o.y,r.y))if(o.x<r.x)for(var h=0;h<l;){var u=Math.max(o.x,Math.min(s[h++]-5,r.x-10));n.lineTo(u+i,r.y+e);for(var a=u+i,f=Math.min(u+10,r.x);h<l;){var c=s[h];if(!(c<f+10))break;h++,f=Math.min(c+5,r.x)}c=(u+f)/2+i,c=r.y-10+e,u=f+i,f=r.y+e,t.Ze===Kd?Zr(n,u,f,!1,!1):ns(n,a,c,u,c,u,f)}else for(h=l-1;0<=h;){for(u=Math.min(o.x,Math.max(s[h--]+5,r.x+10)),n.lineTo(u+i,r.y+e),a=u+i,f=Math.max(u-10,r.x);0<=h&&(c=s[h])>f-10;)h--,f=Math.max(c-5,r.x);c=r.y-10+e,u=f+i,f=r.y+e,t.Ze===Kd?Zr(n,u,f,!1,!1):ns(n,a,c,u,c,u,f)}else if(W(o.x,r.x))if(o.y<r.y)for(h=0;h<l;){for(u=Math.max(o.y,Math.min(s[h++]-5,r.y-10)),n.lineTo(r.x+i,u+e),a=u+e,f=Math.min(u+10,r.y);h<l&&(c=s[h])<f+10;)h++,f=Math.min(c+5,r.y);c=r.x-10+i,u=r.x+i,f+=e,t.Ze===Kd?Zr(n,u,f,!1,!1):ns(n,c,a,c,f,u,f)}else for(h=l-1;0<=h;){for(u=Math.min(o.y,Math.max(s[h--]+5,r.y+10)),n.lineTo(r.x+i,u+e),a=u+e,f=Math.max(u-10,r.y);0<=h&&(c=s[h])>f-10;)h--,f=Math.max(c-5,r.y);c=r.x-10+i,u=r.x+i,f+=e,t.Ze===Kd?Zr(n,u,f,!1,!1):ns(n,c,a,c,f,u,f)}}n.lineTo(r.x+i,r.y+e)}function ll(t,n,i,e){var o=t.g;if(null===o||n.L(i))return 0;for(o=o.Hx;o.next();){var r=o.value;if(null!==r&&r.visible)for(var r=r.zb.n,s=r.length,l=0;l<s;l++){var a=r[l];if(a instanceof Js){if(a===t)return 0<e.length&&e.sort(function(t,n){return t-n}),e.length;if(a.isVisible()&&hl(a)){var h=a.Vn;h.I()&&t.Vn.Uf(h)&&!t.usesSamePort(a)&&null!==(h=a.path)&&h.wj()&&al(n,i,e,a)}}}}return 0<e.length&&e.sort(function(t,n){return t-n}),e.length}function al(t,n,i,e){for(var o=W(t.y,n.y),r=e.qa,s=e.l(0),l=Yh.K(),a=1;a<r;a++){var h=e.l(a);if(a<r-1){var u=e.l(a+1);s.y===h.y&&h.y===u.y?(h.x>s.x&&u.x>h.x||h.x<s.x&&u.x<h.x)&&(h=u,a++):s.x===h.x&&h.x===u.x&&(h.y>s.y&&u.y>h.y||h.y<s.y&&u.y<h.y)&&(h=u,a++)}t:{var u=l,f=t.x,c=t.y,d=n.x,p=n.y,y=s.x,s=s.y,v=h.x,g=h.y;if(W(f,d)){if(!W(c,p)&&W(s,g)&&Math.min(c,p)<s&&Math.max(c,p)>s&&Math.min(y,v)<f&&Math.max(y,v)>f&&!W(y,v)){u.x=f,u.y=s,u=!0;break t}}else if(W(c,p)&&W(y,v)&&Math.min(f,d)<y&&Math.max(f,d)>y&&Math.min(s,g)<c&&Math.max(s,g)>c&&!W(s,g)){u.x=y,u.y=c,u=!0;break t}u.x=0,u.y=0,u=!1}u&&(o?i.push(l.x):i.push(l.y)),s=h}Yh.v(l)}function hl(t){return(t=t.Ze)===Ud||t===Kd}function ul(t,n){if(n||hl(t)){var i=t.g;null===i||i.al.contains(t)||null===t.qw||i.al.add(t,t.qw)}}function fl(t,n){var i=t.layer;if(null!==i&&i.visible&&!i.Kc){var e=i.g;if(null!==e)for(var o=!1,e=e.Hx;e.next();){var r=e.value;if(r.visible)if(r===i)for(var o=!0,s=!1,r=r.zb.n,l=r.length,a=0;a<l;a++){var h=r[a];h instanceof Js&&(h===t?s=!0:s&&cl(t,h,n))}else if(o)for(r=r.zb.n,l=r.length,a=0;a<l;a++)(h=r[a])instanceof Js&&cl(t,h,n)}}}function cl(t,n,i){if(null!==n&&null!==n.Va&&hl(n)){var e=n.Vn;e.I()&&(t.Vn.Uf(e)||i.Uf(e))&&(t.usesSamePort(n)||n.Ke())}}function dl(t){var n=t.pg;if(null!==n){var i=t.Fg;if(null!==i){var e=t.Oh;t=t.ii;for(var o=null,r=null,s=n.oc.n,l=s.length,a=0;a<l;a++){var h=s[a];(h.pg===n&&h.Oh===e&&h.Fg===i&&h.ii===t||h.pg===i&&h.Oh===t&&h.Fg===n&&h.ii===e)&&(null===r?r=h:(null===o&&(o=[],o.push(r)),o.push(h)))}if(null!==o){for(r=Os(n,i,e,t),null===r&&(r=new yl,r.hq=n,r.Rx=e,r.su=i,r.Sx=t,Fs(n,r),Fs(i,r)),r.links=o,a=0;a<o.length;a++)h=o[a],h.ui=r;r.Zp()}}}}function pl(t){var n=t.ui;null!==n&&(t.ui=null,0<=(t=n.links.indexOf(t))&&(Yh.Ig(n.links,t),n.Zp()))}function yl(){Yh.mc(this),this.Mv=!1,this.Sx=this.su=this.Rx=this.hq=null,this.links=[]}function vl(){Yh.mc(this),this.mB=this.group=null,this.$t=!0,this.abort=!1,this.zg=this.yg=1,this.as=this.$r=-1,this.Ae=this.ze=8,this.md=null,this.AG=!1,this.jG=22,this.vF=111}function gl(t,n,i){return t.yg<=n&&n<=t.$r&&t.zg<=i&&i<=t.as}function ml(t,n,i){return gl(t,n,i)?(n-=t.yg,n/=t.ze,i-=t.zg,i/=t.Ae,t.md[0|n][0|i]):1e6}function bl(t,n,i){gl(t,n,i)&&(n-=t.yg,n/=t.ze,i-=t.zg,i/=t.Ae,t.md[0|n][0|i]=0)}function xl(t){if(null!==t.md)for(var n=0;n<=t.Ap;n++)for(var i=0;i<=t.Bp;i++)1<=t.md[n][i]&&(t.md[n][i]=1e6)}function wl(t,n,i,e,o,r,s,l,a){if(!(n<r||n>s||i<l||i>a)){var h,u;h=0|n,u=0|i;var f=t.md[h][u];if(1<=f&&999999>f)for(o?u+=e:h+=e,f+=1;r<=h&&h<=s&&l<=u&&u<=a&&!(f>=t.md[h][u]);)t.md[h][u]=f,f+=1,o?u+=e:h+=e;if(h=o?u:h,o)if(0<e)for(i+=e;i<h;i+=e)wl(t,n,i,1,!o,r,s,l,a),wl(t,n,i,-1,!o,r,s,l,a);else for(i+=e;i>h;i+=e)wl(t,n,i,1,!o,r,s,l,a),wl(t,n,i,-1,!o,r,s,l,a);else if(0<e)for(n+=e;n<h;n+=e)wl(t,n,i,1,!o,r,s,l,a),wl(t,n,i,-1,!o,r,s,l,a);else for(n+=e;n>h;n+=e)wl(t,n,i,1,!o,r,s,l,a),wl(t,n,i,-1,!o,r,s,l,a)}}function kl(t,n,i,e,o,r,s,l,a){n|=0,i|=0;var h=0,u=1;for(t.md[n][i]=u;0===h&&n>r&&n<s&&i>l&&i<a;)u+=1,t.md[n][i]=u,o?i+=e:n+=e,h=t.md[n][i]}function Ml(t,n,i,e,o,r,s,l,a){n|=0,i|=0;var h=0;for(t.md[n][i]=999999;0===h&&n>r&&n<s&&i>l&&i<a;)t.md[n][i]=999999,o?i+=e:n+=e,h=t.md[n][i]}function Pl(t,n,i,e,o,r){if(null!==t.md){t.abort=!1;var s=n.x,l=n.y;if(gl(t,s,l)&&(s-=t.yg,s/=t.ze,l-=t.zg,l/=t.Ae,n=e.x,e=e.y,gl(t,n,e)))if(n-=t.yg,n/=t.ze,e-=t.zg,e/=t.Ae,1>=Math.abs(s-n)&&1>=Math.abs(l-e))t.abort=!0;else{var a=r.x,h=r.y,u=r.x+r.width,f=r.y+r.height,a=a-t.yg,a=a/t.ze,h=h-t.zg,h=h/t.Ae,u=u-t.yg,u=u/t.ze,f=f-t.zg,f=f/t.Ae;r=Math.max(0,Math.min(t.Ap,0|a)),u=Math.min(t.Ap,Math.max(0,0|u)),h=Math.max(0,Math.min(t.Bp,0|h)),f=Math.min(t.Bp,Math.max(0,0|f)),s|=0,l|=0,n|=0,e|=0,a=0===i||90===i?1:-1,i=90===i||270===i,0===t.md[s][l]?(kl(t,s,l,a,i,r,u,h,f),kl(t,s,l,1,!i,r,u,h,f),kl(t,s,l,-1,!i,r,u,h,f)):kl(t,s,l,a,i,s,l,s,l),0===t.md[n][e]?(Ml(t,n,e,0===o||90===o?1:-1,90===o||270===o,r,u,h,f),Ml(t,n,e,1,!(90===o||270===o),r,u,h,f),Ml(t,n,e,-1,!(90===o||270===o),r,u,h,f)):Ml(t,n,e,a,i,n,e,n,e),t.abort||(wl(t,s,l,1,!1,r,u,h,f),wl(t,s,l,-1,!1,r,u,h,f),wl(t,s,l,1,!0,r,u,h,f),wl(t,s,l,-1,!0,r,u,h,f))}}}function Tl(){Yh.mc(this),this.port=this.Oc=null,this.cg=[],this.gq=!1}function Sl(t,n,i,e){switch(n=n.offsetY){case Yh.Zc:return 90;case Yh.Rc:return 180;case Yh.kd:return 270;case Yh.$c:return 0}switch(n){case Yh.Zc|Yh.kd:return 180<i?270:90;case Yh.Rc|Yh.$c:return 90<i&&270>=i?180:0}switch(t=180*Math.atan2(t.height,t.width)/Math.PI,n){case Yh.Rc|Yh.kd:return i>t&&i<=180+t?180:270;case Yh.kd|Yh.$c:return i>180-t&&i<=360-t?270:0;case Yh.$c|Yh.Zc:return i>t&&i<=180+t?90:0;case Yh.Zc|Yh.Rc:return i>180-t&&i<=360-t?180:90;case Yh.Rc|Yh.kd|Yh.$c:return 90<i&&i<=180+t?180:i>180+t&&i<=360-t?270:0;case Yh.kd|Yh.$c|Yh.Zc:return 180<i&&i<=360-t?270:i>t&&180>=i?90:0;case Yh.$c|Yh.Zc|Yh.Rc:return i>t&&i<=180-t?90:i>180-t&&270>=i?180:0;case Yh.Zc|Yh.Rc|Yh.kd:return i>180-t&&i<=180+t?180:i>180+t?270:90}return e&&n!==(Yh.Rc|Yh.kd|Yh.$c|Yh.Zc)&&0>(i-=15)&&(i+=360),i>t&&i<180-t?90:i>=180-t&&i<=180+t?180:i>180+t&&i<360-t?270:0}function Cl(t,n){var i=t.cg;if(0===i.length){t:if(!t.gq){i=t.gq,t.gq=!0;var e,o=null,r=t.Oc,r=r instanceof Ll?r:null;if(null===r||r.we)e=t.Oc.IE(t.port.Qd);else{if(!r.W.I()){t.gq=i;break t}o=r,e=o.HE()}var s=t.cg.length=0,l=t.port.Xa(eu,Yh.K()),a=t.port.Xa(fu,Yh.K()),r=Yh.ig(l.x,l.y,0,0);for(r.si(a),Yh.v(l),Yh.v(a),l=Yh.xb(r.x+r.width/2,r.y+r.height/2),a=t.port.Tl(),e=e.i;e.next();){var h=e.value;if(h.isVisible()){var u=h.Jc===t.port||h.Y.ni(o),f=h.computeSpot(u);if(f.tj()&&null!==(u=u?h.jd:h.Jc)){var c=u.U;if(null!==c){u=h.computeOtherPoint(c,u),c=l.Ob(u),c-=a,0>c&&(c+=360);var f=Sl(r,f,c,h.Zb),d=0;0===f?(d=Yh.$c,180<c&&(c-=360)):d=90===f?Yh.Zc:180===f?Yh.Rc:Yh.kd,f=t.cg[s],void 0===f?(f=new Nl(h,c,d),t.cg[s]=f):(f.link=h,f.angle=c,f.xe=d),f.Px.set(u),s++}}}}for(Yh.v(l),t.cg.sort(Tl.prototype.bJ),o=t.cg.length,l=-1,s=a=0;s<o;s++)void 0!==(f=t.cg[s])&&(f.xe!==l&&(l=f.xe,a=0),f.Xp=a,a++);for(l=-1,a=0,s=o-1;0<=s;s--)void 0!==(f=t.cg[s])&&(f.xe!==l&&(l=f.xe,a=f.Xp+1),f.tn=a);if(s=t.cg,f=t.port,o=t.Oc.gJ,l=Yh.K(),a=Yh.K(),e=Yh.K(),h=Yh.K(),f.Xa(eu,l),f.Xa(ru,a),f.Xa(fu,e),f.Xa(hu,h),d=c=u=f=0,o===Id)for(var p=0;p<s.length;p++){var y=s[p];if(null!==y){var v=y.link.computeThickness();switch(y.xe){case Yh.Zc:c+=v;break;case Yh.Rc:d+=v;break;case Yh.kd:f+=v;break;default:case Yh.$c:u+=v}}}for(var g=0,m=0,b=1,p=0;p<s.length;p++)if(null!==(y=s[p])){var x,w;if(g!==y.xe){switch(g=y.xe){case Yh.Zc:x=e,w=h;break;case Yh.Rc:x=h,w=l;break;case Yh.kd:x=l,w=a;break;default:case Yh.$c:x=a,w=e}var k=w.x-x.x;switch(w=w.y-x.y,g){case Yh.Zc:c>Math.abs(k)?(b=Math.abs(k)/c,c=Math.abs(k)):b=1;break;case Yh.Rc:d>Math.abs(w)?(b=Math.abs(w)/d,d=Math.abs(w)):b=1;break;case Yh.kd:f>Math.abs(k)?(b=Math.abs(k)/f,f=Math.abs(k)):b=1;break;default:case Yh.$c:u>Math.abs(w)?(b=Math.abs(w)/u,u=Math.abs(w)):b=1}m=0}var M=y.eq;if(o===Id){switch(v=y.link.computeThickness(),v*=b,M.set(x),g){case Yh.Zc:M.x=x.x+k/2+c/2-m-v/2;break;case Yh.Rc:M.y=x.y+w/2+d/2-m-v/2;break;case Yh.kd:M.x=x.x+k/2-f/2+m+v/2;break;default:case Yh.$c:M.y=x.y+w/2-u/2+m+v/2}m+=v}else v=.5,o===Ed&&(v=(y.Xp+1)/(y.tn+1)),M.x=x.x+k*v,M.y=x.y+w*v}for(Yh.v(l),Yh.v(a),Yh.v(e),Yh.v(h),x=t.cg,k=0;k<x.length;k++)null!==(w=x[k])&&(w.ix=t.computeEndSegmentLength(w));t.gq=i,Yh.Db(r)}i=t.cg}for(r=0;r<i.length;r++)if(null!==(x=i[r])&&x.link===n)return x;return null}function Nl(t,n,i){this.link=t,this.angle=n,this.xe=i,this.Px=new x,this.tn=this.Xp=0,this.eq=new x,this.ix=0}function jl(){this.pk=this.Sj=iu,this.nk=this.Qj=NaN,this.mk=this.Pj=Bd,this.ok=this.Rj=NaN,this.kt=this.ur=null,this.lt=this.vr=1/0}function Ll(t){As.call(this,t),this.ya|=4608,this.cs=new d(as),this.cp=new d(Ll),this.Kb=this.et=this.ql=this.ds=this.bs=null,this.ie=new ql,this.ie.group=this}function Dl(t,n){if(t.cs.add(n)){n instanceof Ll&&t.cp.add(n);var i=t.TI;if(null!==i){var e=!0,o=t.g;null!==o&&(e=o.Ua,o.Ua=!0),i(t,n),null!==o&&(o.Ua=e)}t.isVisible()&&t.we||n.vd(!1)}n instanceof Js&&!t.Xw||(i=t.Kb,null===i&&(i=t),i.H())}function Al(t,n){if(t.cs.remove(n)){n instanceof Ll&&t.cp.remove(n);var i=t.UI;if(null!==i){var e=!0,o=t.g;null!==o&&(e=o.Ua,o.Ua=!0),i(t,n),null!==o&&(o.Ua=e)}t.isVisible()&&t.we||n.vd(!0)}n instanceof Js&&!t.Xw||(i=t.Kb,null===i&&(i=t),i.H())}function Fl(t,n,i,e){for(var o=t.Nc;o.next();){var r=o.value;if(r.vd(!1),r instanceof Ll){var s=r;s.we&&(s.AB=s.we,Fl(s,n,i,e))}if(r instanceof As)r.Vf(n),Li(i,r,e);else if(r instanceof Js)for(r=r.Xf;r.next();)r.value.Vf(n)}t.we=!1}function Ol(t,n,i,e){for(var o=t.Nc;o.next();){var r=o.value;if(r.vd(!0),r instanceof Ll){var s=r;s.AB&&(s.AB=!1,Ol(s,n,i,e))}if(r instanceof As)r.Vf(n),ji(i,r,e);else if(r instanceof Js)for(r=r.Xf;r.next();)r.value.Vf(n)}t.we=!0}function Bl(){To.call(this),this.ff=Eu,this.Ps=new P(NaN,NaN,NaN,NaN)}function ql(){0<arguments.length&&Yh.hd(ql),Yh.mc(this),this.fz=this.Z=null,this.Xj=this.Jr=!0,this.Pr=!1,this.Jq=new x(0,0).freeze(),this.Lr=this.Mr=!0,this.vC="",this.To=!1,this.sz=null}function zl(t,n,i,e,o,r,s,l){for(i=i.i;i.next();){var a=i.value;e&&!a.aq||null!==o&&!o(a)||!a.canLayout()||(r&&a instanceof As?a.mf||(a instanceof Ll&&null===a.Sb?zl(t,n,a.Nc,!1,o,r,s,l):(El(a),n.add(a))):s&&a instanceof Js?n.add(a):!l||!a.de()||a instanceof As||(El(a),n.add(a)))}}function El(t){var n=t.W;(0===n.width||0===n.height||isNaN(n.width)||isNaN(n.height))&&t.$e()}function Il(){if(Yh.mc(this),this.ie=null,this.vertexes)for(var t=this.vertexes.i;t.next();){var n=t.value;n.clear(),n.network=null}if(this.edges)for(t=this.edges.i;t.next();)n=t.value,n.clear(),n.network=null;this.vertexes=new d(Kl),this.edges=new d(Ul),this.Mx=new b(As,Kl),this.Ix=new b(Js,Ul)}function Rl(t,n){if(null===n)return!1;var i=t.vertexes.remove(n);return i&&(t.Mx.remove(n.Oc),n.network=null),i}function Gl(t,n){null!==n&&t.edges.remove(n)&&(t.Ix.remove(n.link),n.network=null)}function Vl(t){for(var n=Yh.lb(),i=t.edges.i;i.next();){var e=i.value;null!==e.fromVertex&&null!==e.toVertex||n.push(e)}for(i=n.length,e=0;e<i;e++)t.Op(n[e]);Yh.wa(n)}function Hl(t,n,i){if(null!==i&&i.network!==n){Rl(t,i),n.Dl(i);for(var e=i.lc;e.next();){var o=e.value;o.network!==n&&(Gl(t,o),n.Dp(o),Hl(t,n,o.fromVertex))}for(e=i.jc;e.next();)i=e.value,i.network!==n&&(Gl(t,i),n.Dp(i),Hl(t,n,i.toVertex))}}function Kl(){Yh.mc(this),this.network=null,this.M=new P(0,0,10,10).freeze(),this.T=new x(5,5).freeze(),this.rd=this.Vd=null,this.Oe=new f(Ul),this.He=new f(Ul)}function Ul(){Yh.mc(this),this.toVertex=this.fromVertex=this.link=this.data=this.network=null}function Jl(){0<arguments.length&&Yh.hd(Jl),ql.call(this),this.Dx=!0,this.qt=this.rt=NaN,this.Jj=new M(NaN,NaN).freeze(),this.bi=new M(10,10).freeze(),this.ge=sp,this.ld=lp,this.ai=fp,this.Kh=op}function Yl(){0<arguments.length&&Yh.hd(Yl),ql.call(this),this.Xy=this.Eo=this.Wd=0,this.pr=360,this.Wy=dp,this.bl=0,this.BC=dp,this.kv=this.Hg=this.SD=0,this.Kw=new ra,this.lv=this.Qm=0,this.QG=600,this.Ds=NaN,this.Lq=1,this.dt=0,this.ft=360,this.ld=dp,this.aa=gp,this.ai=Tp,this.Kh=ep,this.bi=6,this.rs=Sp}function Wl(t,n,i,e,o){var r=t.pr,s=t.Wd;t=t.Hg,e=e*Math.PI/180,i=i*Math.PI/180;for(var l=n.length,a=0;a<l;a++){var h=e+(o===gp?a*i/(360<=r?l:l-1):-a*i/l),u=n.ea(a),f=s*Math.tan(h)/t,f=Math.sqrt((s*s+t*t*f*f)/(1+f*f));u.ka=f*Math.cos(h),u.ra=f*Math.sin(h),u.actualAngle=180*h/Math.PI}}function Xl(t,n,i,e){var o=t.Wd,r=t.Hg,s=t.bl;i=i*Math.PI/180;for(var l=n.length,a=0;a<l;a++){var h=n.ea(a),u=n.ea(a===l-1?0:a+1),f=r*Math.sin(i);h.ka=o*Math.cos(i),h.ra=f,h.actualAngle=180*i/Math.PI,isNaN(h.diameter)&&aa(h,0),isNaN(u.diameter)&&aa(u,0),h=oa(t,o,r,e===gp?i:-i,(h.diameter+u.diameter)/2+s),i+=e===gp?h:-h}}function $l(t,n,i,e){var o=t.Wd,r=t.Hg,s=t.kv;i=i*Math.PI/180;for(var l=n.length,a=0;a<l;a++){var h=n.ea(a);h.ka=o*Math.cos(i),h.ra=r*Math.sin(i),h.actualAngle=180*i/Math.PI,h=oa(t,o,r,e===gp?i:-i,s),i+=e===gp?h:-h}}function Ql(t,n,i,e,o){var r=t.lv,r=t.pr;if(t.Qm=0,t.Kw=new ra,360>i){for(r=e+(o===gp?r:-r);0>r;)r+=360;r%=360,180<r&&(r-=360),r*=Math.PI/180,t.lv=r,_l(t,n,i,e,o)}else Zl(t,n,i,e,o);t.Kw.commit(n)}function Zl(t,n,i,e,o){var r=t.Wd,s=t.bl,l=t.Eo,a=r*Math.cos(e*Math.PI/180),h=t.Hg*Math.sin(e*Math.PI/180),u=n.fc();if(3===u.length)u[0].ka=r,u[0].ra=0,u[1].ka=u[0].ka-u[0].width/2-u[1].width/2-s,u[1].y=u[0].y,u[2].ka=(u[0].ka+u[1].ka)/2,u[2].y=u[0].y-u[2].height-s;else if(4===u.length)u[0].ka=r,u[0].ra=0,u[2].ka=-u[0].ka,u[2].ra=u[0].ra,u[1].ka=0,u[1].y=Math.min(u[0].y,u[2].y)-u[1].height-s,u[3].ka=0,u[3].y=Math.max(u[0].y+u[0].height+s,u[2].y+u[2].height+s);else{for(var r=Yh.K(),f=0;f<u.length&&(u[f].ka=a,u[f].ra=h,!(f>=u.length-1));f++)ta(t,a,h,u,f,o,r)||na(t,a,h,u,f,o,r),a=r.x,h=r.y;if(Yh.v(r),!(23<++t.Qm)){var a=u[0].ka,h=u[0].ra,r=u[u.length-1].ka,f=u[u.length-1].ra,c=Math.abs(a-r)-((u[0].width+u[u.length-1].width)/2+s),d=Math.abs(h-f)-((u[0].height+u[u.length-1].height)/2+s),s=0;1>Math.abs(d)?Math.abs(a-r)<(u[0].width+u[u.length-1].width)/2&&(s=0):s=0<d?d:1>Math.abs(c)?0:c,c=!1,c=Math.abs(r)>Math.abs(f)?0<r!=h>f:0<f!=a<r,(c=o===gp?c:!c)&&(s=-Math.abs(s),s=Math.min(s,-u[u.length-1].width),s=Math.min(s,-u[u.length-1].height)),t.Kw.compare(s,u),1<Math.abs(s)&&(t.Wd=8>t.Qm?t.Wd-s/(2*Math.PI):5>u.length&&10<s?t.Wd/2:t.Wd-(0<s?1.7:-2.3),t.Hg=t.Wd*l,Zl(t,n,i,e,o))}}}function _l(t,n,i,e,o){for(var r=t.Wd,s=t.Hg,l=t.Eo,a=r*Math.cos(e*Math.PI/180),h=s*Math.sin(e*Math.PI/180),u=Yh.K(),f=n.fc(),c=0;c<f.length&&(f[c].ka=a,f[c].ra=h,!(c>=f.length-1));c++)ta(t,a,h,f,c,o,u)||na(t,a,h,f,c,o,u),a=u.x,h=u.y;if(Yh.v(u),!(23<++t.Qm)){if(a=Math.atan2(h,a),a=o===gp?t.lv-a:a-t.lv,a=Math.abs(a)<Math.abs(a-2*Math.PI)?a:a-2*Math.PI,r=a*(r+s)/2,s=t.Kw,Math.abs(r)<Math.abs(s.Up))for(s.Up=r,s.eo=[],s.zq=[],a=0;a<f.length;a++)s.eo[a]=f[a].eb.x,s.zq[a]=f[a].eb.y;1<Math.abs(r)&&(t.Wd=8>t.Qm?t.Wd-r/(2*Math.PI):t.Wd-(0<r?1.7:-2.3),t.Hg=t.Wd*l,_l(t,n,i,e,o))}}function ta(t,n,i,e,o,r,s){var l=t.Wd,a=t.Hg,h=0,u=0;t=(e[o].width+e[o+1].width)/2+t.bl;var f=!1;if(0<=i!=(r===gp)){if((h=n+t)>l){if((h=n-t)<-l)return s.x=h,s.y=u,!1;f=!0}}else if((h=n-t)<-l){if((h=n+t)>l)return s.x=h,s.y=u,!1;f=!0}return u=Math.sqrt(1-Math.min(1,h*h/(l*l)))*a,0>i!==f&&(u=-u),Math.abs(i-u)>(e[o].height+e[o+1].height)/2?(s.x=h,s.y=u,!1):(s.x=h,s.y=u,!0)}function na(t,n,i,e,o,r,s){var l=t.Wd,a=t.Hg,h=0,u=0;if(t=(e[o].height+e[o+1].height)/2+t.bl,e=!1,0<=n!=(r===gp)){if((u=i-t)<-a){if((u=i+t)>a)return s.x=h,void(s.y=u);e=!0}}else if((u=i+t)>a){if((u=i-t)<-a)return s.x=h,void(s.y=u);e=!0}h=Math.sqrt(1-Math.min(1,u*u/(a*a)))*l,0>n!==e&&(h=-h),s.x=h,s.y=u}function ia(t,n,i,e,o){var r=t.QG;if(.001>Math.abs(t.Eo-1))return void 0!==e&&void 0!==o?o*n:2*Math.PI*n;t=n>i?Math.sqrt(n*n-i*i)/n:Math.sqrt(i*i-n*n)/i;for(var s=0,l=0,l=void 0!==e&&void 0!==o?o/(r+1):Math.PI/(2*(r+1)),a=0,h=0;h<=r;h++)a=void 0!==e&&void 0!==o?e+h*o/r:h*Math.PI/(2*r),a=Math.sin(a),s+=Math.sqrt(1-t*t*a*a)*l;return void 0!==e&&void 0!==o?(n>i?n:i)*s:4*(n>i?n:i)*s}function ea(t,n,i,e,o){return n/(void 0!==e&&void 0!==o?ia(t,1,i,e,o):ia(t,1,i))}function oa(t,n,i,e,o){if(.001>Math.abs(t.Eo-1))return o/n;var r=n>i?Math.sqrt(n*n-i*i)/n:Math.sqrt(i*i-n*n)/i,s=0;t=2*Math.PI/(700*t.network.vertexes.count),n>i&&(e+=Math.PI/2);for(var l=0;;l++){var a=Math.sin(e+l*t),s=s+(n>i?n:i)*Math.sqrt(1-r*r*a*a)*t;if(s>=o)return l*t}}function ra(){this.Up=-1/0,this.zq=this.eo=null}function sa(){Il.call(this)}function la(){Kl.call(this),this.actualAngle=this.diameter=NaN}function aa(t,n){var i=t.network;if(null===i)return NaN;if(null===(i=i.Sb))return NaN;if(i.Qf===vp)if(i.Lx===Cp)t.diameter=Math.max(t.width,t.height);else{var i=Math.abs(Math.sin(n)),e=Math.abs(Math.cos(n));if(0===i)return t.width;if(0===e)return t.height;t.diameter=Math.min(t.height/i,t.width/e)}else t.diameter=i.Lx===Cp?Math.max(t.width,t.height):Math.sqrt(t.width*t.width+t.height*t.height);return t.diameter}function ha(){Ul.call(this)}function ua(){0<arguments.length&&Yh.hd(ua),ql.call(this),this.Gg=null,this.Rr=0,this.kg=new M(100,100).freeze(),this.Kq=!1,this.$h=!0,this.Jh=!1,this.bp=100,this.sr=1,this.Ph=1e3,this.Es=Math,this.Ao=.05,this.zo=50,this.xo=150,this.yo=0,this.hr=10,this.gr=5}function fa(t,n,i){if(ca(t,n)){var e=t.Ph;t.Ph*=1+1/(n+1);var o=da(t,n),r=Math.max(0,Math.max(Math.min(t.network.vertexes.count,i*(n+1)/11),10));for(t.IA+=r,fa(t,n+1,i),ma(t,r),pa(t,o),n=t.Gg,null===n?n=new f(ka):n.clear(),n.Hc(o.vertexes),n.sort(function(t,n){return null===t||null===n||t===n?0:n.gg-t.gg}),o=n.i;o.next();)ya(t,o.value);t.Ph=e}}function ca(t,n){if(10<n||3>t.network.vertexes.count)return!1;null===t.Gg?t.Gg=new f(ka):t.Gg.clear(),t.Gg.Hc(t.network.vertexes);var i=t.Gg;i.sort(function(t,n){return null===t||null===n||t===n?0:n.gg-t.gg});for(var e=i.count-1;0<=e&&1>=i.ea(e).gg;)e--;return 1<i.count-e}function da(t,n){for(var i=t.network,e=new wa,o=t.Gg.i;o.next();){var r=o.value;if(!(1<r.gg))break;e.Dl(r);var s=new xa;s.uy=r.gg,s.vy=r.width,s.ty=r.height,s.FB=r.T.x,s.GB=r.T.y,null===r.Eh&&(r.Eh=new f(xa)),r.Eh.add(s),r.ZA=r.Eh.count-1}for(var l=i.edges.i;l.next();)if(s=l.value,o=s.fromVertex,r=s.toVertex,o.network===e&&r.network===e)e.Dp(s);else if(o.network===e){var a=o.pn;null===a&&(a=new f(ka),o.pn=a),a.add(r),o.gg--,o.Ik+=r.Ik}else r.network===e&&(a=r.pn,null===a&&(a=new f(ka),r.pn=a),a.add(o),r.gg--,r.Ik+=o.Ik);for(o=e.edges.i;o.next();)r=o.value,r.length*=Math.max(1,Y((r.fromVertex.Ik+r.toVertex.Ik)/(4*n+1)));for(o=e.vertexes.i;o.next();)if(r=o.value,null!==(a=r.pn)&&0<a.count&&(s=r.Eh.ea(r.Eh.count-1),!(0>=(s=s.uy-r.gg)))){for(var h=0,u=0,c=a.count-s;c<a.count;c++){for(var d=a.ea(c),p=null,l=d.edges.i;l.next();){var y=l.value;if(y.ZH(d)===r){p=y;break}}null!==p&&(u+=p.length,h+=d.width*d.height)}l=r.ka,a=r.ra,c=r.width,d=r.height,p=r.T,y=c*d,1>y&&(y=1),h=Y((h+y+u*u*4/(s*s))/y),s=(h-1)*c/2,h=(h-1)*d/2,r.eb=new P(l-p.x-s,a-p.y-h,c+2*s,d+2*h),r.focus=new x(p.x+s,p.y+h)}return t.network=e,i}function pa(t,n){for(var i=t.network.vertexes.i;i.next();){var e=i.value;if(e.network=n,null!==e.Eh){var o=e.Eh.ea(e.ZA);e.gg=o.uy;var r=o.FB,s=o.GB;e.eb=new P(e.ka-r,e.ra-s,o.vy,o.ty),e.focus=new x(r,s),e.ZA--}}for(i=t.network.edges.i;i.next();)i.value.network=n;t.network=n}function ya(t,n){var i=n.pn;if(null!==i&&0!==i.count){var e=n.ka,o=n.ra,r=n.width,s=n.height;null!==n.Eh&&0<n.Eh.count&&(s=n.Eh.ea(0),r=s.vy,s=s.ty);for(var r=Y(r*r+s*s)/2,l=!1,a=s=0,h=0,u=n.vertexes.i;u.next();){var f=u.value;1>=f.gg?a++:(l=!0,h++,s+=Math.atan2(n.ra-f.ra,n.ka-f.ka))}if(0!==a)for(0<h&&(s/=h),u=h=0,h=l?2*Math.PI/(a+1):2*Math.PI/a,0==a%2&&(u=h/2),1<i.count&&i.sort(function(t,n){return null===t||null===n||t===n?0:n.width*n.height-t.width*t.height}),l=0==a%2?0:1,i=i.i;i.next();)if(a=i.value,!(1<a.gg||t.isFixed(a))){for(var f=null,c=a.edges.i;c.next();){f=c.value;break}var c=a.width,d=a.height,c=Y(c*c+d*d)/2,f=r+f.length+c,c=s+(h*(l/2>>1)+u)*(0==l%2?1:-1);a.ka=e+f*Math.cos(c),a.ra=o+f*Math.sin(c),l++}}}function va(t,n,i,e,o,r,s){var l=9e19,a=-1,h=0;t:for(;h<n;h++){var u=t[h],f=u.x-i,c=u.y-e,f=f*f+c*c;if(f<l){for(c=h-1;0<=c;c--)if(t[c].y>u.y&&t[c].x-u.x<o+s.width)continue t;for(c=h+1;c<n;c++)if(t[c].x>u.x&&t[c].y-u.y<r+s.height)continue t;a=h,l=f}}return a}function ga(t,n){var i=t.M,e=i.x,o=i.y,r=i.width,i=i.height,s=n.M,l=s.x,a=s.y,h=s.width,s=s.height;return e+r<l?o>a+s?(e=e+r-l,o=o-a-s,Y(e*e+o*o)):o+i<a?(e=e+r-l,o=o+i-a,Y(e*e+o*o)):l-(e+r):e>l+h?o>a+s?(e=e-l-h,o=o-a-s,Y(e*e+o*o)):o+i<a?(e=e-l-h,o=o+i-a,Y(e*e+o*o)):e-(l+h):o>a+s?o-(a+s):o+i<a?a-(o+i):.1}function ma(t,n){t.Gg=null;for(var i=t.Rr+n;t.Rr<i&&(t.Rr++,ba(t)););t.Gg=null}function ba(t){null===t.Gg&&(t.Gg=new f(ka),t.Gg.Hc(t.network.vertexes));var n=t.Gg.n;if(0>=n.length)return!1;var i=n[0];i.forceX=0,i.forceY=0;for(var e=i.ka,o=e,s=i.ra,l=s,i=1;i<n.length;i++){var a=n[i];a.forceX=0,a.forceY=0;var h=a.ka,a=a.ra,e=Math.min(e,h),o=Math.max(o,h),s=Math.min(s,a),l=Math.max(l,a)}(s=o-e>l-s)?n.sort(function(t,n){return null===t||null===n||t===n?0:t.ka-n.ka}):n.sort(function(t,n){return null===t||null===n||t===n?0:t.ra-n.ra});for(var l=t.Ph,u=0,c=0,d=0,i=0;i<n.length;i++){var a=n[i],h=a.M,p=a.T,e=h.x+p.x,h=h.y+p.y,c=a.charge*t.electricalFieldX(e,h),d=a.charge*t.electricalFieldY(e,h),c=c+a.mass*t.gravitationalFieldX(e,h),d=d+a.mass*t.gravitationalFieldY(e,h);for(a.forceX+=c,a.forceY+=d,p=i+1;p<n.length;p++)if((o=n[p])!==a){var y=o.M,c=o.T,d=y.x+c.x,y=y.y+c.y;if(e-d>l||d-e>l){if(s)break}else if(h-y>l||y-h>l){if(!s)break}else{var v=ga(a,o);1>v?(c=t.Ux,null===c&&(t.Ux=c=new r(0)),u=c.random(),v=c.random(),e>d?(c=Math.abs(o.M.right-a.M.x),c=(1+c)*u):e<d?(c=Math.abs(o.M.x-a.M.right),c=-(1+c)*u):(c=Math.max(o.width,a.width),c=(1+c)*u-c/2),h>y?(d=Math.abs(o.M.bottom-a.M.y),d=(1+d)*v):e<d?(d=Math.abs(o.M.y-a.M.bottom),d=-(1+d)*v):(d=Math.max(o.height,a.height),d=(1+d)*v-d/2)):(u=-a.charge*o.charge/(v*v),c=(d-e)/v*u,d=(y-h)/v*u),a.forceX+=c,a.forceY+=d,o.forceX-=c,o.forceY-=d}}}for(i=t.network.edges.i;i.next();)s=i.value,a=s.fromVertex,o=s.toVertex,h=a.M,p=a.T,e=h.x+p.x,h=h.y+p.y,y=o.M,c=o.T,d=y.x+c.x,y=y.y+c.y,v=ga(a,o),1>v?(c=t.Ux,null===c&&(t.Ux=c=new r(0)),u=c.random(),v=c.random(),c=(e>d?1:-1)*(1+(o.width>a.width?o.width:a.width))*u,d=(h>y?1:-1)*(1+(o.height>a.height?o.height:a.height))*v):(u=s.stiffness*(v-s.length),c=(d-e)/v*u,d=(y-h)/v*u),a.forceX+=c,a.forceY+=d,o.forceX-=c,o.forceY-=d;for(i=0,e=Math.max(t.Ph/20,50),o=0;o<n.length;o++)a=n[o],t.isFixed(a)?t.moveFixedVertex(a):(s=a.forceX,l=a.forceY,s<-e?s=-e:s>e&&(s=e),l<-e?l=-e:l>e&&(l=e),a.ka+=s,a.ra+=l,i=Math.max(i,s*s+l*l));return i>t.GE*t.GE}function xa(){this.GB=this.FB=this.ty=this.vy=this.uy=0}function wa(){Il.call(this)}function ka(){Kl.call(this),this.isFixed=!1,this.mass=this.charge=NaN,this.Ik=this.gg=this.forceY=this.forceX=0,this.Eh=this.pn=null,this.ZA=0}function Ma(){Ul.call(this),this.length=this.stiffness=NaN}function Pa(){0<arguments.length&&Yh.hd(Pa),ql.call(this),this.Ud=this.Hm=25,this.aa=0,this.wo=Np,this.Yo=Lp,this.No=Fp,this.Fm=4,this.jo=zp,this.Yi=Vp,this.$h=!0,this.Wr=4,this.Jb=this.Yv=this.qb=-1,this.Mf=this.es=0,this.Nb=this.Kf=this.Lf=this.wg=this.he=null,this.ns=0,this.ms=this.Mm=null,this.Ag=0,this.os=null,this.SB=new x,this.ih=[],this.ih.length=100}function Ta(t){var n=t.fromVertex.rd;return t=t.toVertex.rd,null===n&&null===t?8:null===n||null===t?4:1}function Sa(t){null===t.Mm&&(t.Mm=[]);for(var n=0,i=t.network.vertexes.i;i.next();){var e=i.value;t.Mm[n]=e.layer,n++,t.Mm[n]=e.column,n++,t.Mm[n]=e.index,n++}return t.Mm}function Ca(t,n){for(var i=0,e=t.network.vertexes.i;e.next();){var o=e.value;o.layer=n[i],i++,o.column=n[i],i++,o.index=n[i],i++}}function Na(t,n,i){var e=ih(t,n),o=t.he[n];(null===t.ms||t.ms.length<o*o)&&(t.ms=[]);for(var r=t.ms,s=0;s<o;s++){var l=0,a=e[s],h=a.near,u=0;if(null!==h&&h.layer===a.layer)if((u=h.index)>s)for(var f=s+1;f<u;f++)a=e[f],a.near===h&&a.kn===h.kn||l++;else for(f=s-1;f>u;f--)a=e[f],a.near===h&&a.kn===h.kn||l++;var c,d,h=0,p=c=f=a=0,y=0,v=0;d=0;var g;if(0<=i)for(u=e[s].Oe,h=0;h<u.count;h++)if(c=u.n[h],c.valid&&c.fromVertex.layer!==n)for(a=c.fromVertex.index,f=c.portToPos,c=c.portFromPos,p=h+1;p<u.count;p++)d=u.n[p],d.valid&&d.fromVertex.layer!==n&&(y=d.fromVertex.index,v=d.portToPos,d=d.portFromPos,f<v&&(a>y||a===y&&c>d)&&l++,v<f&&(y>a||y===a&&d>c)&&l++);if(0>=i)for(u=e[s].He,h=0;h<u.count;h++)if(c=u.n[h],c.valid&&c.toVertex.layer!==n)for(a=c.toVertex.index,f=c.portToPos,c=c.portFromPos,p=h+1;p<u.count;p++)d=u.n[p],d.valid&&d.toVertex.layer!==n&&(y=d.toVertex.index,v=d.portToPos,d=d.portFromPos,c<d&&(a>y||a===y&&f>v)&&l++,d<c&&(y>a||y===a&&v>f)&&l++);for(r[s*o+s]=l,u=s+1;u<o;u++){var m=0,b=0;if(0<=i)for(l=e[s].Oe,g=e[u].Oe,h=0;h<l.count;h++)if(c=l.n[h],c.valid&&c.fromVertex.layer!==n)for(a=c.fromVertex.index,c=c.portFromPos,p=0;p<g.count;p++)d=g.n[p],d.valid&&d.fromVertex.layer!==n&&(y=d.fromVertex.index,d=d.portFromPos,(a<y||a===y&&c<d)&&b++,(y<a||y===a&&d<c)&&m++);if(0>=i)for(l=e[s].He,g=e[u].He,h=0;h<l.count;h++)if(c=l.n[h],c.valid&&c.toVertex.layer!==n)for(a=c.toVertex.index,f=c.portToPos,p=0;p<g.count;p++)d=g.n[p],d.valid&&d.toVertex.layer!==n&&(y=d.toVertex.index,v=d.portToPos,(a<y||a===y&&f<v)&&b++,(y<a||y===a&&v<f)&&m++);r[s*o+u]=m,r[u*o+s]=b}}return eh(t,n,e),r}function ja(t){for(var n=0,i=0;i<=t.qb;i++){for(var e=t,o=i,r=ih(e,o),s=e.he[o],l=0,a=0;a<s;a++){var h,u=null,u=r[a].He,f=0,c=0;if(null!==u)for(var d=0;d<u.count;d++)h=u.n[d],h.valid&&h.toVertex.layer!==o&&(f=h.fromVertex.column+h.portFromColOffset,c=h.toVertex.column+h.portToColOffset,l+=(Math.abs(f-c)+1)*Ta(h))}eh(e,o,r),n+=l}return n}function La(t,n,i){for(var e=ih(t,n),o=t.he[n],r=[],s=0;s<o;s++){var l=e[s],a=null;0>=i&&(a=l.Oe);var h=null;0<=i&&(h=l.He);var u=0,f=0,c=l.near;if(null!==c&&c.layer===l.layer&&(u+=c.column-1,f++),null!==a)for(c=0;c<a.count;c++){var l=a.n[c],d=l.fromVertex;l.valid&&!l.rev&&d.layer!==n&&(u+=d.column,f++)}if(null!==h)for(a=0;a<h.count;a++)l=h.n[a],c=l.toVertex,l.valid&&!l.rev&&c.layer!==n&&(u+=c.column,f++);r[s]=0===f?-1:u/f}return eh(t,n,e),r}function Da(t,n,i){for(var e=ih(t,n),o=t.he[n],r=[],s=0;s<o;s++){var l=e[s],a=null;0>=i&&(a=l.Oe);var h=null;0<=i&&(h=l.He);var u=0,f=[],c=l.near;if(null!==c&&c.layer===l.layer&&(f[u]=c.column-1,u++),null!==a)for(c=0;c<a.count;c++){var l=a.n[c],d=l.fromVertex;l.valid&&!l.rev&&d.layer!==n&&(f[u]=d.column+l.portFromColOffset,u++)}if(null!==h)for(a=0;a<h.count;a++)l=h.n[a],c=l.toVertex,l.valid&&!l.rev&&c.layer!==n&&(f[u]=c.column+l.portToColOffset,u++);0===u?r[s]=-1:(f.sort(function(t,n){return t-n}),h=u>>1,r[s]=0!=(1&u)?f[h]:f[h-1]+f[h]>>1)}return eh(t,n,e),r}function Aa(t,n,i,e,o,r){if(n.component===e){n.component=i;var s=0,l=0;if(o)for(var a=n.jc;a.next();){var l=a.value,h=l.toVertex,s=n.layer-h.layer,l=t.linkMinLength(l);s===l&&Aa(t,h,i,e,o,r)}if(r)for(a=n.lc;a.next();)l=a.value,h=l.fromVertex,s=h.layer-n.layer,l=t.linkMinLength(l),s===l&&Aa(t,h,i,e,o,r)}}function Fa(t,n,i,e,o,r){if(n.component===e){if(n.component=i,o)for(var s=n.jc;s.next();)Fa(t,s.value.toVertex,i,e,o,r);if(r)for(n=n.lc;n.next();)Fa(t,n.value.fromVertex,i,e,o,r)}}function Oa(t){for(t=t.vertexes.i;t.next();){var n=t.value;if(n.valid)return n}return null}function Ba(t){for(t=t.vertexes.i;t.next();){var n=t.value;if(n.valid){for(var i=!0,e=n.jc;e.next();)if(e.value.toVertex.valid){i=!1;break}if(i)return n}}return null}function qa(t){for(t=t.vertexes.i;t.next();){var n=t.value;if(n.valid){for(var i=!0,e=n.lc;e.next();)if(e.value.fromVertex.valid){i=!1;break}if(i)return n}}return null}function za(t,n){n.Pp=t.ns,t.ns++;for(var i=n.jc;i.next();){var e=i.value,o=e.toVertex;-1===o.Pp&&(e.forest=!0,za(t,o))}n.finish=t.ns,t.ns++}function Ea(t){for(var n=t.network.vertexes.i;n.next();){var i=Ia(t,n.value);t.qb=Math.max(i,t.qb)}}function Ia(t,n){var i=0;if(-1===n.layer){for(var e=n.jc;e.next();)var o=e.value,r=o.toVertex,o=t.linkMinLength(o),i=Math.max(i,Ia(t,r)+o);n.layer=i}else i=n.layer;return i}function Ra(t,n){var i=0;if(-1===n.layer){for(var e=n.lc;e.next();)var o=e.value,r=o.fromVertex,o=t.linkMinLength(o),i=Math.max(i,Ra(t,r)+o);n.layer=i}else i=n.layer;return i}function Ga(t,n){if(!n.valid){n.valid=!0;for(var i=n.jc;i.next();)Ga(t,i.value.toVertex);for(i=t.network.vertexes.i;i.next();)i.value.component=-1;for(var e=n.Oe.n,o=e.length,r=0;r<o;r++){var s=e[r],l=s.fromVertex,a=s.toVertex,s=t.linkMinLength(s);l.layer-a.layer>s&&Aa(t,l,0,-1,!0,!1)}for(Aa(t,n,1,-1,!0,!0);0!==n.component;){for(var l=0,e=1/0,a=0,h=null,u=t.network.vertexes.i;u.next();){var f=u.value;if(1===f.component){for(var c=0,d=!1,p=f.Oe.n,o=p.length,r=0;r<o;r++){var s=p[r],y=s.fromVertex,c=c+1;1!==y.component&&(l+=1,y=y.layer-f.layer,s=t.linkMinLength(s),e=Math.min(e,y-s))}for(s=f.He.n,o=s.length,r=0;r<o;r++)p=s[r].toVertex,c-=1,1!==p.component?l-=1:d=!0;(null===h||c<a)&&!d&&(h=f,a=c)}}if(0<l){for(i.reset();i.next();)o=i.value,1===o.component&&(o.layer+=e);n.component=0}else h.component=0}for(i=t.network.vertexes.i;i.next();)i.value.component=-1;for(Aa(t,n,1,-1,!0,!1);0!==n.component;){for(r=0,o=1/0,e=0,s=null,l=t.network.vertexes.i;l.next();)if(a=l.value,1===a.component){for(h=0,u=!1,d=a.Oe.n,f=d.length,c=0;c<f;c++)p=d[c].fromVertex,h+=1,1!==p.component?r+=1:u=!0;for(d=a.He.n,f=d.length,c=0;c<f;c++)p=d[c],y=p.toVertex,h-=1,1!==y.component&&(r-=1,y=a.layer-y.layer,p=t.linkMinLength(p),o=Math.min(o,y-p));(null===s||h>e)&&!u&&(s=a,e=h)}if(0>r){for(i.reset();i.next();)r=i.value,1===r.component&&(r.layer-=o);n.component=0}else s.component=0}}}function Va(t,n,i){return 90===t.aa?i&&!n.rev||!i&&n.rev?270:90:180===t.aa?i&&!n.rev||!i&&n.rev?0:180:270===t.aa?i&&!n.rev||!i&&n.rev?90:270:i&&!n.rev||!i&&n.rev?180:0}function Ha(t,n){var i=n.layer;n.index=t.he[i],t.he[i]++;for(var i=n.He.fc(),e=!0;e;)for(var e=!1,o=0;o<i.length-1;o++){var r=i[o],s=i[o+1];r.portFromColOffset>s.portFromColOffset&&(e=!0,i[o]=s,i[o+1]=r)}for(o=0;o<i.length;o++)e=i[o],e.valid&&(e=e.toVertex,-1===e.index&&Ha(t,e))}function Ka(t,n){var i=n.layer;n.index=t.he[i],t.he[i]++;for(var i=n.Oe.fc(),e=!0,o=0;e;)for(e=!1,o=0;o<i.length-1;o++){var r=i[o],s=i[o+1];r.portToColOffset>s.portToColOffset&&(e=!0,i[o]=s,i[o+1]=r)}for(o=0;o<i.length;o++)e=i[o],e.valid&&(e=e.fromVertex,-1===e.index&&Ka(t,e))}function Ua(t,n,i){var e=0,o=ih(t,n),r=t.he[n],s=Da(t,n,i);for(i=La(t,n,i),e=0;e<r;e++)-1===i[e]&&(i[e]=o[e].column),-1===s[e]&&(s[e]=o[e].column);for(var l,a=!0;a;)for(a=!1,e=0;e<r-1;e++)(s[e+1]<s[e]||s[e+1]===s[e]&&i[e+1]<i[e])&&(a=!0,l=s[e],s[e]=s[e+1],s[e+1]=l,l=i[e],i[e]=i[e+1],i[e+1]=l,l=o[e],o[e]=o[e+1],o[e+1]=l);for(e=s=0;e<r;e++)l=o[e],l.index=e,s+=t.nodeMinColumnSpace(l,!0),l.column=s,s+=1,s+=t.nodeMinColumnSpace(l,!1);eh(t,n,o)}function Ja(t,n,i){var e=ih(t,n),o=t.he[n];i=Na(t,n,i);var r,s=0;for(r=[],s=0;s<o;s++)r[s]=-1;var l;for(l=[],s=0;s<o;s++)l[s]=-1;for(var a=!1,h=!0;h;)for(h=!1,s=0;s<o-1;s++){var u=i[e[s].index*o+e[s+1].index],f=i[e[s+1].index*o+e[s].index],c=0,d=0,p=e[s].column,y=e[s+1].column,v=t.nodeMinColumnSpace(e[s],!0),g=t.nodeMinColumnSpace(e[s],!1),m=t.nodeMinColumnSpace(e[s+1],!0),b=t.nodeMinColumnSpace(e[s+1],!1),v=p-v+m,g=y-g+b,m=m=0,x=e[s].lc.i;for(x.reset();x.next();)if(m=x.value,b=m.fromVertex,m.valid&&b.layer===n){for(m=0;e[m]!==b;)m++;m<s&&(c+=2*(s-m),d+=2*(s+1-m)),m===s+1&&(c+=1),m>s+1&&(c+=4*(m-s),d+=4*(m-(s+1)))}for(x=e[s].jc.i,x.reset();x.next();)if(m=x.value,b=m.toVertex,m.valid&&b.layer===n){for(m=0;e[m]!==b;)m++;m===s+1&&(d+=1)}for(x=e[s+1].lc.i,x.reset();x.next();)if(m=x.value,b=m.fromVertex,m.valid&&b.layer===n){for(m=0;e[m]!==b;)m++;m<s&&(c+=2*(s+1-m),d+=2*(s-m)),m===s&&(d+=1),m>s+1&&(c+=4*(m-(s+1)),d+=4*(m-s))}for(x=e[s+1].jc.i,x.reset();x.next();)if(m=x.value,b=m.toVertex,m.valid&&b.layer===n){for(m=0;e[m]!==b;)m++;m===s&&(c+=1)}var m=b=0,x=r[e[s].index],w=l[e[s].index],k=r[e[s+1].index],M=l[e[s+1].index];-1!==x&&(b+=Math.abs(x-p),m+=Math.abs(x-g)),-1!==w&&(b+=Math.abs(w-p),m+=Math.abs(w-g)),-1!==k&&(b+=Math.abs(k-y),m+=Math.abs(k-v)),-1!==M&&(b+=Math.abs(M-y),m+=Math.abs(M-v)),(d<c-.5||d===c&&f<u-.5||d===c&&f===u&&m<b-.5)&&(h=a=!0,e[s].column=g,e[s+1].column=v,u=e[s],e[s]=e[s+1],e[s+1]=u)}for(s=0;s<o;s++)e[s].index=s;return eh(t,n,e),a}function Ya(t,n,i){for(var e=!1;Wa(t,n,i);)e=!0;return e}function Wa(t,n,i){var e=0,o=ih(t,n),r=t.he[n],s=La(t,n,-1);if(0<i)for(e=0;e<r;e++)s[e]=-1;var l=La(t,n,1);if(0>i)for(e=0;e<r;e++)l[e]=-1;for(var a=!1,h=!0;h;)for(h=!1,e=0;e<r;e++){var u=o[e].column,f=t.nodeMinColumnSpace(o[e],!0),c=t.nodeMinColumnSpace(o[e],!1),d=0,d=0>e-1||u-o[e-1].column-1>f+t.nodeMinColumnSpace(o[e-1],!1)?u-1:u,f=0,f=e+1>=r||o[e+1].column-u-1>c+t.nodeMinColumnSpace(o[e+1],!0)?u+1:u,p=c=0,y=0,v=0,g=0,m=0;if(0>=i)for(var b=o[e].lc.i;b.next();){var m=b.value,x=m.fromVertex;m.valid&&x.layer!==n&&(v=Ta(m),g=m.portFromColOffset,m=m.portToColOffset,x=x.column,c+=(Math.abs(u+m-(x+g))+1)*v,p+=(Math.abs(d+m-(x+g))+1)*v,y+=(Math.abs(f+m-(x+g))+1)*v)}if(0<=i)for(b=o[e].jc.i;b.next();)m=b.value,x=m.toVertex,m.valid&&x.layer!==n&&(v=Ta(m),g=m.portFromColOffset,m=m.portToColOffset,x=x.column,c+=(Math.abs(u+g-(x+m))+1)*v,p+=(Math.abs(d+g-(x+m))+1)*v,y+=(Math.abs(f+g-(x+m))+1)*v);m=g=v=0,b=s[o[e].index],x=l[o[e].index],-1!==b&&(v+=Math.abs(b-u),g+=Math.abs(b-d),m+=Math.abs(b-f)),-1!==x&&(v+=Math.abs(x-u),g+=Math.abs(x-d),m+=Math.abs(x-f)),p<c||p===c&&g<v?(h=a=!0,o[e].column=d):(y<c||y===c&&m<v)&&(h=a=!0,o[e].column=f)}return eh(t,n,o),t.normalize(),a}function Xa(t,n,i){var e=0,o=ih(t,n),r=t.he[n],s=Da(t,n,i);for(i=[],e=0;e<r;e++)i[e]=s[e];for(s=!0;s;)for(s=!1,e=0;e<r;e++){var l=o[e].column,a=t.nodeMinColumnSpace(o[e],!0),h=t.nodeMinColumnSpace(o[e],!1),u=0,f=0,c=0,c=f=0;-1===i[e]?0===e&&e===r-1?u=l:0===e?(f=o[e+1].column,u=f-l===h+t.nodeMinColumnSpace(o[e+1],!0)?l-1:l):e===r-1?(c=o[e-1].column,u=l-c===a+t.nodeMinColumnSpace(o[e-1],!1)?l+1:l):(c=o[e-1].column,c=c+t.nodeMinColumnSpace(o[e-1],!1)+a+1,f=o[e+1].column,f=f-t.nodeMinColumnSpace(o[e+1],!0)-h-1,u=(c+f)/2|0):0===e&&e===r-1?u=i[e]:0===e?(f=o[e+1].column,f=f-t.nodeMinColumnSpace(o[e+1],!0)-h-1,u=Math.min(i[e],f)):e===r-1?(c=o[e-1].column,c=c+t.nodeMinColumnSpace(o[e-1],!1)+a+1,u=Math.max(i[e],c)):(c=o[e-1].column,c=c+t.nodeMinColumnSpace(o[e-1],!1)+a+1,f=o[e+1].column,f=f-t.nodeMinColumnSpace(o[e+1],!0)-h-1,c<i[e]&&i[e]<f?u=i[e]:c>=i[e]?u=c:f<=i[e]&&(u=f)),u!==l&&(s=!0,o[e].column=u)}eh(t,n,o),t.normalize()}function $a(t,n){for(var i=!0,e=t.network.vertexes.i;e.next();){var o=e.value,r=t.nodeMinColumnSpace(o,!0),s=t.nodeMinColumnSpace(o,!1);if(o.column-r<=n&&o.column+s>=n){i=!1;break}}if(o=!1,i)for(e.reset();e.next();)i=e.value,i.column>n&&(i.column-=1,o=!0);return o}function Qa(t,n){for(var i=n,i=n+1,e=0,o=[],r=[],e=0;e<=t.qb;e++)o[e]=!1,r[e]=!1;for(var s=t.network.vertexes.i;s.next();){var e=s.value,l=e.column-t.nodeMinColumnSpace(e,!0),a=e.column+t.nodeMinColumnSpace(e,!1);l<=n&&a>=n&&(o[e.layer]=!0),l<=i&&a>=i&&(r[e.layer]=!0)}for(l=!0,i=!1,e=0;e<=t.qb;e++)l=l&&!(o[e]&&r[e]);if(l)for(s.reset();s.next();)o=s.value,o.column>n&&(o.column-=1,i=!0);return i}function Za(t,n){for(var i=0;i<=t.Jb;i++)for(;$a(t,i););for(t.normalize(),i=0;i<t.Jb;i++)for(;Qa(t,i););t.normalize();var e,i=0,o=0,r=0,s=0;if(0<n)for(i=0;i<=t.Jb;i++)for(e=Sa(t),o=ja(t),r=o+1;o<r;)r=o,_a(t,i,1),s=ja(t),s>o?Ca(t,e):s<o&&(o=s,e=Sa(t));if(0>n)for(i=t.Jb;0<=i;i--)for(e=Sa(t),o=ja(t),r=o+1;o<r;)r=o,_a(t,i,-1),s=ja(t),s>o?Ca(t,e):s<o&&(o=s,e=Sa(t));t.normalize()}function _a(t,n,i){t.Ag=0;for(var e=t.network.vertexes.i;e.next();)e.value.component=-1;if(0<i)for(e.reset();e.next();){var o=e.value;o.column-t.nodeMinColumnSpace(o,!0)<=n&&(o.component=t.Ag)}if(0>i)for(e.reset();e.next();)o=e.value,o.column+t.nodeMinColumnSpace(o,!1)>=n&&(o.component=t.Ag);for(t.Ag++,e.reset();e.next();)n=e.value,-1===n.component&&(Fa(t,n,t.Ag,-1,!0,!0),t.Ag++);var r=0;for(n=[],r=0;r<t.Ag*t.Ag;r++)n[r]=!1;for(o=[],r=0;r<(t.qb+1)*(t.Jb+1);r++)o[r]=-1;for(e.reset();e.next();)for(var r=e.value,s=r.layer,l=Math.max(0,r.column-t.nodeMinColumnSpace(r,!0)),a=Math.min(t.Jb,r.column+t.nodeMinColumnSpace(r,!1));l<=a;l++)o[s*(t.Jb+1)+l]=r.component;for(r=0;r<=t.qb;r++){if(0<i)for(l=0;l<t.Jb;l++)-1!==o[r*(t.Jb+1)+l]&&-1!==o[r*(t.Jb+1)+l+1]&&o[r*(t.Jb+1)+l]!==o[r*(t.Jb+1)+l+1]&&(n[o[r*(t.Jb+1)+l]*t.Ag+o[r*(t.Jb+1)+l+1]]=!0);if(0>i)for(l=t.Jb;0<l;l--)-1!==o[r*(t.Jb+1)+l]&&-1!==o[r*(t.Jb+1)+l-1]&&o[r*(t.Jb+1)+l]!==o[r*(t.Jb+1)+l-1]&&(n[o[r*(t.Jb+1)+l]*t.Ag+o[r*(t.Jb+1)+l-1]]=!0)}for(o=[],r=0;r<t.Ag;r++)o[r]=!0;for(s=new f("number"),s.add(0),a=0;0!==s.count;)if(a=s.n[s.count-1],s.Yc(s.count-1),o[a])for(o[a]=!1,r=0;r<t.Ag;r++)n[a*t.Ag+r]&&s.Md(0,r);if(0<i)for(e.reset();e.next();)t=e.value,o[t.component]&&(t.column-=1);if(0>i)for(e.reset();e.next();)i=e.value,o[i.component]&&(i.column+=1)}function th(t,n){return 270===t.aa?n?cu:yu:90===t.aa?n?yu:cu:180===t.aa?n?du:pu:n?pu:du}function nh(t,n){var i=t-n;return-1<i&&1>i}function ih(t,n){var i,e=t.he[n];if(e>=t.ih.length){i=[];for(var o=0;o<t.ih.length;o++)i[o]=t.ih[o];t.ih=i}for(void 0===t.ih[e]||null===t.ih[e]?i=[]:(i=t.ih[e],t.ih[e]=null),e=t.os[n],o=0;o<e.length;o++){var r=e[o];i[r.index]=r}return i}function eh(t,n,i){t.ih[t.he[n]]=i}function oh(){this.index=this.pe=this.Xe=this.ee=this.first=this.layer=0,this.link=null,this.ri=0}function rh(){Il.call(this)}function sh(){Kl.call(this),this.index=this.column=this.layer=-1,this.component=NaN,this.near=null,this.valid=!1,this.finish=this.Pp=NaN,this.kn=0,this.OA=this.PA=null}function lh(){Ul.call(this),this.forest=this.rev=this.valid=!1,this.portToPos=this.portFromPos=NaN,this.portToColOffset=this.portFromColOffset=0}function ah(){0<arguments.length&&Yh.hd(ah),ql.call(this),this.sd=new d(Object),this.ys=Hp,this.Jf=Kp,this.ot=sy,this.Vv=dy,this.NB=null,this.Jh=!0,this.ld=uy,this.kg=new M(10,10).freeze(),this.ua=new Vh,this.va=new Vh,this.Ez=[]}function hh(t){var n=new d(Vh);for(t=t.i;t.next();){var i=t.value;i.initialized||n.add(i)}return n}function uh(t,n){for(var i=999999,e=null,o=n.i;o.next();){var r=o.value;switch(t.Jf){case Kp:r.lc.count<i&&(i=r.lc.count,e=r);break;case Up:r.jc.count<i&&(i=r.jc.count,e=r);break;default:Yh.k("Unhandled path value "+t.Jf.toString())}}return e}function fh(t,n){if(null!==n){switch(t.Jf){case Kp:if(0<n.jc.count){for(var i=new f(Vh),e=n.KH;e.next();){var o=e.value;ch(t,n,o)&&i.add(o)}0<i.count&&(n.children=i.fc())}break;case Up:if(0<n.lc.count){for(i=new f(Vh),e=n.GJ;e.next();)o=e.value,ch(t,n,o)&&i.add(o);0<i.count&&(n.children=i.fc())}break;default:Yh.k("Unhandled path value"+t.Jf.toString())}for(i=n.children,e=i.length,o=0;o<e;o++){var r=i[o];r.initialized=!0,r.level=n.level+1,r.parent=n,t.sd.remove(r)}for(o=0;o<e;o++)r=i[o],fh(t,r)}}function ch(t,n,i){if(i.initialized){var e;if(null===n)e=!1;else{for(e=n.parent;null!==e&&e!==i;)e=e.parent;e=e===i}if(e||i.level>n.level)return!1;t.removeChild(i.parent,i)}return!0}function dh(t,n){if(null!==n){t.initializeTreeVertexValues(n),n.alignment===ny&&t.sortTreeVertexChildren(n);for(var i=0,e=n.on,o=0,r=n.children,s=r.length,l=0;l<s;l++){var a=r[l];dh(t,a),i+=a.descendantCount+1,e=Math.max(e,a.maxChildrenCount),o=Math.max(o,a.maxGenerationCount)}n.descendantCount=i,n.maxChildrenCount=e,n.maxGenerationCount=0<e?o+1:0}}function ph(t,n){switch(t.ot){default:case sy:return null!==n.parent?n.parent:t.ua;case hy:return null===n.parent?t.ua:null===n.parent.parent?t.va:n.parent;case ay:return null!==n.parent?null!==n.parent.parent?n.parent.parent:t.va:t.ua;case ly:var i=!0;if(0===n.on)i=!1;else for(var e=n.children,o=e.length,r=0;r<o;r++)if(0<e[r].on){i=!1;break}return i&&null!==n.parent?t.va:null!==n.parent?n.parent:t.ua}}function yh(t,n){if(null!==n){t.assignTreeVertexValues(n);for(var i=n.children,e=i.length,o=0;o<e;o++)yh(t,i[o])}}function vh(t,n){if(null!==n){n.alignment!==ny&&t.sortTreeVertexChildren(n);for(var i=n.children,e=i.length,o=0;o<e;o++)vh(t,i[o])}}function gh(t){return t===ty||t===ny||t===iy||t===ey}function mh(t){return t===ty||t===ny}function bh(t){var n=t.parent;if(null!==n){var i=n.alignment;if(gh(i)){if(mh(i)){for(n=n.children,i=0;i<n.length&&t!==n[i];)i++;return 0==i%2}if(i===iy)return!0}}return!1}function xh(t,n){if(0===n.on){var i=!1,e=0,o=Qp;null!==n.parent&&(e=n.parent.angle,o=n.parent.alignment,i=gh(o)),o=bh(n),n.pa.m(0,0),n.jb.m(n.width,n.height),null===n.parent||null===n.comments||(180!==e&&270!==e||i)&&!o?n.Na.m(0,0):180===e&&!i||(90===e||270===e)&&o?n.Na.m(n.width-2*n.T.x,0):n.Na.m(0,n.height-2*n.T.y)}else{for(var i=Eh(n),e=90===i||270===i,r=0,o=n.children,s=o.length,l=0;l<s;l++)var a=o[l],r=Math.max(r,e?a.jb.width:a.jb.height);var h=n.alignment,u=h===Zp,f=h===_p,c=gh(h),d=Math.max(0,n.breadthLimit),p=Ih(n),y=n.nodeSpacing,v=Rh(n),g=u||f?0:v/2,m=n.rowSpacing,b=0;(u||f||n.nq||n.oq&&1===n.maxGenerationCount)&&(b=Math.max(0,n.rowIndent));var u=n.width,x=n.height,w=0,k=0,M=0,P=0,T=0,S=0,C=0,N=0,j=0,L=0;if(c&&!mh(h)&&135<i&&o.reverse(),mh(h))if(1<s)for(l=0;l<s;l++){var a=o[l],D=a.jb;0==l%2&&l!==s-1?j=Math.max(j,(e?D.width:D.height)+Mh(a)-y):0!=l%2&&(L=Math.max(L,(e?D.width:D.height)+Mh(a)-y))}else 1===s&&(j=e?o[0].jb.width:o[0].jb.height);if(c)switch(h){case ty:case ny:k=135>i?wh(n,o,j,w,k):kh(n,o,j,w,k),j=k.x,w=k.width,k=k.height;break;case iy:for(l=0;l<s;l++)a=o[l],D=a.jb,d=0===C?0:m,e?(a.pa.m(r-D.width,T+d),w=Math.max(w,D.width),k=Math.max(k,T+d+D.height),T+=d+D.height):(a.pa.m(P+d,r-D.height),w=Math.max(w,P+d+D.width),k=Math.max(k,D.height),P+=d+D.width),C++;break;case ey:for(r=0;r<s;r++)a=o[r],D=a.jb,d=0===C?0:m,e?(a.pa.m(y/2+n.T.x,T+d),w=Math.max(w,D.width),k=Math.max(k,T+d+D.height),T+=d+D.height):(a.pa.m(P+d,y/2+n.T.y),w=Math.max(w,P+d+D.width),k=Math.max(k,D.height),P+=d+D.width),C++}else for(l=0;l<s;l++)a=o[l],D=a.jb,e?(0<d&&0<C&&P+y+D.width>d&&(P<r&&jh(n,h,r-P,0,N,l-1),S++,C=0,N=l,M=k,P=0,T=135<i?-k-m:k+m),L=0===C?g:y,Dh(t,a,0,T),a.pa.m(P+L,T),w=Math.max(w,P+L+D.width),k=Math.max(k,M+(0===S?0:m)+D.height),P+=L+D.width):(0<d&&0<C&&T+y+D.height>d&&(T<r&&jh(n,h,0,r-T,N,l-1),S++,C=0,N=l,M=w,T=0,P=135<i?-w-m:w+m),L=0===C?g:y,Dh(t,a,P,0),a.pa.m(P,T+L),k=Math.max(k,T+L+D.height),w=Math.max(w,M+(0===S?0:m)+D.width),T+=L+D.height),C++;switch(0<S&&(e?(k+=Math.max(0,p),P<w&&jh(n,h,w-P,0,N,s-1),0<b&&(f||Lh(n,b,0,0,s-1),w+=b)):(w+=Math.max(0,p),T<k&&jh(n,h,0,k-T,N,s-1),0<b&&(f||Lh(n,0,b,0,s-1),k+=b))),b=f=0,h){case $p:e?f+=w/2-n.T.x-v/2:b+=k/2-n.T.y-v/2;break;case Qp:0<S?e?f+=w/2-n.T.x-v/2:b+=k/2-n.T.y-v/2:e?(h=o[0].pa.x+o[0].Na.x,y=o[s-1].pa.x+o[s-1].Na.x+2*o[s-1].T.x,f+=h+(y-h)/2-n.T.x-v/2):(h=o[0].pa.y+o[0].Na.y,y=o[s-1].pa.y+o[s-1].Na.y+2*o[s-1].T.y,b+=h+(y-h)/2-n.T.y-v/2);break;case Zp:e?(f-=v,w+=v):(b-=v,k+=v);break;case _p:e?(f+=w-n.width+v,w+=v):(b+=k-n.height+v,k+=v);break;case ty:case ny:e?f=1<s?f+(j+y/2-n.T.x):f+(o[0].T.x-n.T.x+o[0].Na.x):b=1<s?b+(j+y/2-n.T.y):b+(o[0].T.y-n.T.y+o[0].Na.y);break;case iy:e?f+=w+y/2-n.T.x:b+=k+y/2-n.T.y;break;case ey:break;default:Yh.k("Unhandled alignment value "+h.toString())}for(l=0;l<s;l++)a=o[l],e?a.pa.m(a.pa.x+a.Na.x-f,a.pa.y+(135<i?(c?-k:-a.jb.height)+a.Na.y-p:x+p+a.Na.y)):a.pa.m(a.pa.x+(135<i?(c?-w:-a.jb.width)+a.Na.x-p:u+p+a.Na.x),a.pa.y+a.Na.y-b);e?(w=Sh(n,w,f),0>f&&(f=0),135<i&&(b+=k+p),k+=x+p):(135<i&&(f+=w+p),w+=u+p,k=Ch(n,k,b),0>b&&(b=0)),n.Na.m(f,b),n.jb.m(w,k)}}function wh(t,n,i,e,o){var r=n.length;if(0===r)return new P(i,0,e,o);if(1===r){var s=n[0];return e=s.jb.width,o=s.jb.height,new P(i,0,e,o)}for(var l=t.nodeSpacing,a=t.rowSpacing,h=90===Eh(t),u=0,f=0,c=0,d=0;d<r;d++)if(!(0!=d%2||1<r&&d===r-1)){var s=n[d],p=s.jb,y=0===u?0:a;if(h){var v=Mh(s)-l;s.pa.m(i-(p.width+v),c+y),e=Math.max(e,p.width+v),o=Math.max(o,c+y+p.height),c+=y+p.height}else v=Mh(s)-l,s.pa.m(f+y,i-(p.height+v)),o=Math.max(o,p.height+v),e=Math.max(e,f+y+p.width),f+=y+p.width;u++}var u=0,g=f,m=c;for(h?(f=i+l,c=0):(f=0,c=i+l),d=0;d<r;d++)0!=d%2&&(s=n[d],p=s.jb,y=0===u?0:a,h?(v=Mh(s)-l,s.pa.m(f+v,c+y),e=Math.max(e,f+p.width+v),o=Math.max(o,c+y+p.height),c+=y+p.height):(v=Mh(s)-l,s.pa.m(f+y,c+v),e=Math.max(e,f+y+p.width),o=Math.max(o,c+p.height+v),f+=y+p.width),u++);return 1<r&&1==r%2&&(s=n[r-1],p=s.jb,n=Ph(s,h?Math.max(Math.abs(m),Math.abs(c)):Math.max(Math.abs(g),Math.abs(f))),h?(s.pa.m(i+l/2-s.T.x-s.Na.x,o+n),h=i+l/2-s.T.x-s.Na.x,e=Math.max(e,h+p.width),0>h&&(e-=h),o=Math.max(o,Math.max(m,c)+n+p.height),0>s.pa.x&&(i=Th(t,s.pa.x,!1,i,l))):(s.pa.m(e+n,i+l/2-s.T.y-s.Na.y),e=Math.max(e,Math.max(g,f)+n+p.width),h=i+l/2-s.T.y-s.Na.y,o=Math.max(o,h+p.height),0>h&&(o-=h),0>s.pa.y&&(i=Th(t,s.pa.y,!0,i,l)))),new P(i,0,e,o)}function kh(t,n,i,e,o){var r=n.length;if(0===r)return new P(i,0,e,o);if(1===r){var s=n[0];return e=s.jb.width,o=s.jb.height,new P(i,0,e,o)}for(var l=t.nodeSpacing,a=t.rowSpacing,h=270===Eh(t),u=0,f=0,c=0,d=0;d<r;d++)if(!(0!=d%2||1<r&&d===r-1)){var s=n[d],p=s.jb,y=0===u?0:a;if(h){var v=Mh(s)-l,c=c-(y+p.height);s.pa.m(i-(p.width+v),c),e=Math.max(e,p.width+v),o=Math.max(o,Math.abs(c))}else v=Mh(s)-l,f-=y+p.width,s.pa.m(f,i-(p.height+v)),o=Math.max(o,p.height+v),e=Math.max(e,Math.abs(f));u++}var u=0,g=f,m=c;for(h?(f=i+l,c=0):(f=0,c=i+l),d=0;d<r;d++)0!=d%2&&(s=n[d],p=s.jb,y=0===u?0:a,h?(v=Mh(s)-l,c-=y+p.height,s.pa.m(f+v,c),e=Math.max(e,f+p.width+v),o=Math.max(o,Math.abs(c))):(v=Mh(s)-l,f-=y+p.width,s.pa.m(f,c+v),o=Math.max(o,c+p.height+v),e=Math.max(e,Math.abs(f))),u++);for(1<r&&1==r%2&&(s=n[r-1],p=s.jb,a=Ph(s,h?Math.max(Math.abs(m),Math.abs(c)):Math.max(Math.abs(g),Math.abs(f))),h?(s.pa.m(i+l/2-s.T.x-s.Na.x,-o-p.height-a),f=i+l/2-s.T.x-s.Na.x,e=Math.max(e,f+p.width),0>f&&(e-=f),o=Math.max(o,Math.abs(Math.min(m,c))+a+p.height),0>s.pa.x&&(i=Th(t,s.pa.x,!1,i,l))):(s.pa.m(-e-p.width-a,i+l/2-s.T.y-s.Na.y),e=Math.max(e,Math.abs(Math.min(g,f))+a+p.width),f=i+l/2-s.T.y-s.Na.y,o=Math.max(o,f+p.height),0>f&&(o-=f),0>s.pa.y&&(i=Th(t,s.pa.y,!0,i,l)))),d=0;d<r;d++)s=n[d],h?s.pa.m(s.pa.x,s.pa.y+o):s.pa.m(s.pa.x+e,s.pa.y);return new P(i,0,e,o)}function Mh(t){return null===t.parent?0:t.parent.nodeSpacing}function Ph(t){return null===t.parent?0:t.parent.rowSpacing}function Th(t,n,i,e,o){t=t.children;for(var r=t.length,s=0;s<r;s++)i?t[s].pa.m(t[s].pa.x,t[s].pa.y-n):t[s].pa.m(t[s].pa.x-n,t[s].pa.y);return n=t[r-1],Math.max(e,i?n.Na.y+n.T.y-o/2:n.Na.x+n.T.x-o/2)}function Sh(t,n,i){switch(t.alignment){case Qp:case $p:var e=n;return i+t.width>e&&(e=i+t.width),0>i&&(e-=i),e;case Zp:return t.width>n?t.width:n;case _p:return 2*t.T.x>n?t.width:n+t.width-2*t.T.x;case ty:case ny:return e=Math.min(0,i),i=Math.max(n,i+t.width),Math.max(t.width,i-e);case iy:return t.width-t.T.x+t.nodeSpacing/2+n;case ey:return Math.max(t.width,t.T.x+t.nodeSpacing/2+n);default:return n}}function Ch(t,n,i){switch(t.alignment){case Qp:case $p:var e=n;return i+t.height>e&&(e=i+t.height),0>i&&(e-=i),e;case Zp:return t.height>n?t.height:n;case _p:return 2*t.T.y>n?t.height:n+t.height-2*t.T.y;case ty:case ny:return e=Math.min(0,i),i=Math.max(n,i+t.height),Math.max(t.height,i-e);case iy:return t.height-t.T.y+t.nodeSpacing/2+n;case ey:return Math.max(t.height,t.T.y+t.nodeSpacing/2+n);default:return n}}function Nh(t,n,i){switch(t){case $p:case Qp:n/=2,i/=2;break;case Zp:i=n=0;break;case _p:break;default:Yh.k("Unhandled alignment value "+t.toString())}return new x(n,i)}function jh(t,n,i,e,o,r){n=Nh(n,i,e),Lh(t,n.x,n.y,o,r)}function Lh(t,n,i,e,o){if(0!==n||0!==i)for(t=t.children;e<=o;e++){var r=t[e].pa;r.x+=n,r.y+=i}}function Dh(t,n,i,e){var o=n.parent;switch(t.Jf){case Kp:for(t=n.lc;t.next();)n=t.value,n.fromVertex===o&&n.Fs.m(i,e);break;case Up:for(t=n.jc;t.next();)n=t.value,n.toVertex===o&&n.Fs.m(i,e);break;default:Yh.k("Unhandled path value "+t.Jf.toString())}}function Ah(t,n,i){for(var e=0;e<t.length;e++){var o=t[e];o.x+=n,o.y+=i}}function Fh(t,n,i,e,o,r,s,l){var a=Eh(n),h=90===a||270===a,u=n.nodeSpacing;n=e;var f=o;e=r,o=s;var c=i.iu,d=i.Du;s=i.jb;var p=h?Math.max(o,s.height):Math.max(e,s.width);if(null!==c&&a===Eh(i)||(c=Oh(t,2),d=Oh(t,2),h?(c[0].m(0,0),c[1].m(0,s.height),d[0].m(s.width,0),d[1].m(d[0].x,c[1].y)):(c[0].m(0,0),c[1].m(s.width,0),d[0].m(0,s.height),d[1].m(c[1].x,d[0].y))),h){if(i=e,e=9999999,!(null===f||2>f.length||null===c||2>c.length))for(h=a=0;a<f.length&&h<c.length;){o=f[a];var y=c[h];r=y.x;var v=y.y;r+=i;var g=o;a+1<f.length&&(g=f[a+1]);var m=y,y=m.x,m=m.y;h+1<c.length&&(m=c[h+1],y=m.x,m=m.y,y+=i);var b=e;o.y===v?b=r-o.x:o.y>v&&o.y<m?b=r+(o.y-v)/(m-v)*(y-r)-o.x:v>o.y&&v<g.y&&(b=r-(o.x+(v-o.y)/(g.y-o.y)*(g.x-o.x))),b<e&&(e=b),g.y<=o.y?a++:m<=v?h++:(g.y<=m&&a++,m<=g.y&&h++)}if(i-=e,i+=u,a=c,h=i,null===n||2>n.length||null===a||2>a.length)e=null;else{for(u=Oh(t,n.length+a.length),e=r=o=0;r<a.length&&a[r].y<n[0].y;)v=a[r++],u[e++].m(v.x+h,v.y);for(;o<n.length;)v=n[o++],u[e++].m(v.x,v.y);for(o=n[n.length-1].y;r<a.length&&a[r].y<=o;)r++;for(;r<a.length&&a[r].y>o;)v=a[r++],u[e++].m(v.x+h,v.y);for(a=Oh(t,e),o=0;o<e;o++)a[o].assign(u[o]);Bh(t,u),e=a}if(r=d,v=i,null===f||2>f.length||null===r||2>r.length)o=null;else{for(u=Oh(t,f.length+r.length),h=g=a=0;a<f.length&&f[a].y<r[0].y;)o=f[a++],u[h++].m(o.x,o.y);for(;g<r.length;)o=r[g++],u[h++].m(o.x+v,o.y);for(r=r[r.length-1].y;a<f.length&&f[a].y<=r;)a++;for(;a<f.length&&f[a].y>r;)o=f[a++],u[h++].m(o.x,o.y);for(o=Oh(t,h),a=0;a<h;a++)o[a].assign(u[a]);Bh(t,u)}r=Math.max(0,i)+s.width,s=p}else{if(i=o,e=9999999,!(null===f||2>f.length||null===c||2>c.length))for(h=a=0;a<f.length&&h<c.length;)o=f[a],y=c[h],r=y.x,v=y.y,v+=i,g=o,a+1<f.length&&(g=f[a+1]),m=y,y=m.x,m=m.y,h+1<c.length&&(m=c[h+1],y=m.x,m=m.y,m+=i),b=e,o.x===r?b=v-o.y:o.x>r&&o.x<y?b=v+(o.x-r)/(y-r)*(m-v)-o.y:r>o.x&&r<g.x&&(b=v-(o.y+(r-o.x)/(g.x-o.x)*(g.y-o.y))),b<e&&(e=b),g.x<=o.x?a++:y<=r?h++:(g.x<=y&&a++,y<=g.x&&h++);if(i-=e,i+=u,a=c,h=i,null===n||2>n.length||null===a||2>a.length)e=null;else{for(u=Oh(t,n.length+a.length),e=r=o=0;r<a.length&&a[r].x<n[0].x;)v=a[r++],u[e++].m(v.x,v.y+h);for(;o<n.length;)v=n[o++],u[e++].m(v.x,v.y);for(o=n[n.length-1].x;r<a.length&&a[r].x<=o;)r++;for(;r<a.length&&a[r].x>o;)v=a[r++],u[e++].m(v.x,v.y+h);for(a=Oh(t,e),o=0;o<e;o++)a[o].assign(u[o]);Bh(t,u),e=a}if(r=d,v=i,null===f||2>f.length||null===r||2>r.length)o=null;else{for(u=Oh(t,f.length+r.length),h=g=a=0;a<f.length&&f[a].x<r[0].x;)o=f[a++],u[h++].m(o.x,o.y);for(;g<r.length;)o=r[g++],u[h++].m(o.x,o.y+v);for(r=r[r.length-1].x;a<f.length&&f[a].x<=r;)a++;for(;a<f.length&&f[a].x>r;)o=f[a++],u[h++].m(o.x,o.y);for(o=Oh(t,h),a=0;a<h;a++)o[a].assign(u[a]);Bh(t,u)}r=p,s=Math.max(0,i)+s.height}return Bh(t,n),Bh(t,c),Bh(t,f),Bh(t,d),l[0]=e,l[1]=o,new P(i,0,r,s)}function Oh(t,n){var i=t.Ez[n];if(void 0!==i&&void 0!==(i=i.pop()))return i;for(var i=[],e=0;e<n;e++)i[e]=new x;return i}function Bh(t,n){var i=n.length,e=t.Ez[i];void 0===e&&(e=[],t.Ez[i]=e),e.push(n)}function qh(t,n,i,e){if(null!==n){n.x=i,n.y=e,n=n.children;for(var o=n.length,r=0;r<o;r++){var s=n[r];qh(t,s,i+s.pa.x,e+s.pa.y)}}}function zh(t,n){if(null!==n){t.setPortSpots(n);for(var i=n.children,e=i.length,o=0;o<e;o++)zh(t,i[o])}}function Eh(t){return t=t.angle,45>=t?0:135>=t?90:225>=t?180:315>=t?270:0}function Ih(t){var n=Eh(t),n=90===n||270===n,i=t.layerSpacing;if(0<t.layerSpacingParentOverlap)var e=Math.min(1,t.layerSpacingParentOverlap),i=i-(n?t.height*e:t.width*e);return i<(n?-t.height:-t.width)&&(i=n?-t.height:-t.width),i}function Rh(t){var n=Eh(t),n=90===n||270===n,i=t.nodeIndent;if(0<t.nodeIndentPastParent)var e=Math.min(1,t.nodeIndentPastParent),i=i+(n?t.width*e:t.height*e);return i=Math.max(0,i)}function Gh(){Il.call(this)}function Vh(){Kl.call(this),this.initialized=!1,this.parent=null,this.children=[],this.maxGenerationCount=this.maxChildrenCount=this.descendantCount=this.level=0,this.comments=null,this.pa=new x(0,0),this.jb=new M(0,0),this.Na=new x(0,0),this.oq=this.nq=this.vJ=!1,this.Du=this.iu=null,this.sorting=Jp,this.comparer=ep,this.angle=0,this.alignment=Qp,this.nodeIndentPastParent=this.nodeIndent=0,this.nodeSpacing=20,this.layerSpacing=50,this.layerSpacingParentOverlap=0,this.compaction=ry,this.breadthLimit=0,this.rowSpacing=25,this.commentSpacing=this.rowIndent=10,this.commentMargin=20,this.setsPortSpot=!0,this.portSpot=iu,this.setsChildPortSpot=!0,this.childPortSpot=iu}function Hh(){Ul.call(this),this.Fs=new x(0,0)}function Kh(){To.call(this),this.Se=null}var Uh,Jh={};if(!n.document||void 0===n.document.createElement("canvas").getContext)throw n.console&&n.console.log("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode."),Error("The HTML Canvas element is not supported in this browser,or this browser is in Compatibility mode.");if(!Object.defineProperty)throw Error("GoJS requires a newer version of JavaScript");Function.prototype.bind||(Function.prototype.bind=function(t){function n(){return r.apply(t,o.concat(e.call(arguments)))}function i(){}var e=Array.prototype.slice,o=e.call(arguments,1),r=this;return i.prototype=this.prototype,n.prototype=new i,n}),function(){for(var t=0,i=["ms","moz","webkit","o"],e=0;e<i.length&&!n.requestAnimationFrame;++e)n.requestAnimationFrame=n[i[e]+"RequestAnimationFrame"],n.cancelAnimationFrame=n[i[e]+"CancelAnimationFrame"]||n[i[e]+"CancelRequestAnimationFrame"];n.requestAnimationFrame||(n.requestAnimationFrame=function(i){var e=(new Date).getTime(),o=Math.max(8,16-(e-t)),r=n.setTimeout(function(){i(e+o)},o);return t=e+o,r}),n.cancelAnimationFrame||(n.cancelAnimationFrame=function(t){n.clearTimeout(t)})}(),Jh.Debug=null;var Yh={kd:1,Rc:2,$c:4,Zc:8,En:void 0!==n.navigator&&0<n.navigator.userAgent.indexOf("534.30")&&0<n.navigator.userAgent.indexOf("Android"),uI:void 0!==n.navigator&&0<n.navigator.userAgent.indexOf("MSIE 9.0"),kF:void 0!==n.navigator&&0<n.navigator.userAgent.indexOf("MSIE 10.0"),lF:void 0!==n.navigator&&0<n.navigator.userAgent.indexOf("Trident/7"),$K:void 0!==n.navigator&&0<n.navigator.userAgent.indexOf("Edge/"),Fk:void 0!==n.navigator&&void 0!==n.navigator.platform&&0<=n.navigator.platform.toUpperCase().indexOf("MAC"),mF:void 0!==n.navigator&&void 0!==n.navigator.platform&&null!==n.navigator.platform.match(/(iPhone|iPod|iPad)/i),wE:function(t,n,i){var e=-1;return function(){var o=this,r=arguments;-1!==e&&Yh.clearTimeout(e),e=Yh.setTimeout(function(){e=-1,i||t.apply(o,r)},n),i&&!e&&t.apply(o,r)}},setTimeout:function(t,i){return n.setTimeout(t,i)},clearTimeout:function(t){n.clearTimeout(t)},createElement:function(t){return n.document.createElement(t)},k:function(t){throw Error(t)},la:function(t,n){var i="The object is frozen, so its properties cannot be set: "+t.toString();void 0!==n&&(i+="  to value: "+n),Yh.k(i)},G:function(t,n,i,e){t instanceof n||(i=Yh.getTypeName(i),void 0!==e&&(i+="."+e),Yh.yd(t,n,i))},j:function(t,n,i,e){typeof t!==n&&(i=Yh.getTypeName(i),void 0!==e&&(i+="."+e),Yh.yd(t,n,i))},Fd:function(t,n,i){"number"==typeof t&&isFinite(t)||(n=Yh.getTypeName(n),void 0!==i&&(n+="."+i),Yh.k(n+" must be a real number type, and not NaN or Infinity: "+t))},mb:function(t,n,e,o){t instanceof i&&t.De===n||(e=Yh.getTypeName(e),void 0!==o&&(e+="."+o),Yh.yd(t,"a constant of class "+Yh.jf(n),e))},yK:function(t,n){"string"==typeof t?Pc(t)||Yh.k('Color "'+t+'" is not a valid color string for '+n):t instanceof mo||Yh.k("Value for "+n+" must be a color string or a Brush, not "+t)},yd:function(t,n,i,e){n=Yh.getTypeName(n),i=Yh.getTypeName(i),void 0!==e&&(i+="."+e),"string"==typeof t?Yh.k(i+" value is not an instance of "+n+': "'+t+'"'):Yh.k(i+" value is not an instance of "+n+": "+t)},Ea:function(t,n,i,e){i=Yh.getTypeName(i),void 0!==e&&(i+="."+e),Yh.k(i+" is not in the range "+n+": "+t)},hd:function(t){Yh.k(Yh.jf(t)+" constructor cannot take any arguments.")},Ma:function(t){Yh.k("Collection was modified during iteration: "+t.toString()+"\n  Perhaps you should iterate over a copy of the collection,\n  or you could collect items to be removed from the collection after the iteration.")},Ej:function(t,n){Yh.k("No property to set for this enum value: "+n+" on "+t.toString())},trace:function(t){n.console&&n.console.log(t)},gx:{},Ft:function(t,i){!0!==Yh.gx[t]&&(Yh.gx[t]=!0,n.console&&n.console.log(t+" is deprecated in "+i+", see the GoJS change log for more information."))},Qa:function(t){return"object"==typeof t&&null!==t},isArray:function(t){return Array.isArray(t)||t instanceof NodeList||t instanceof HTMLCollection},vI:function(t){return Array.isArray(t)},Uz:function(t,n,i){Yh.isArray(t)||Yh.yd(t,"Array or NodeList or HTMLCollection",n,i)},Za:function(t){return t.length},Il:function(t){return Array.prototype.slice.call(t)},Da:function(t,n){return Array.isArray(t),t[n]},mE:function(t,n,i){Array.isArray(t)?t[n]=i:Yh.k("Cannot replace an object in an HTMLCollection or NodeList at "+n)},Fl:function(t,n){if(Array.isArray(t))return t.indexOf(n);for(var i=t.length,e=0;e<i;e++)if(t[e]===n)return e;return-1},rh:function(t,n,i){Array.isArray(t)?n>=t.length?t.push(i):t.splice(n,0,i):Yh.k("Cannot insert an object into an HTMLCollection or NodeList: "+i+" at "+n)},Ig:function(t,n){Array.isArray(t)?n>=t.length?t.pop():t.splice(n,1):Yh.k("Cannot remove an object from an HTMLCollection or NodeList at "+n)},wy:[],K:function(){var t=Yh.wy.pop();return void 0===t?new x:t},xb:function(t,n){var i=Yh.wy.pop();return void 0===i?new x(t,n):(i.x=t,i.y=n,i)},v:function(t){Yh.wy.push(t)},JB:[],jm:function(){var t=Yh.JB.pop();return void 0===t?new M:t},Ak:function(t){Yh.JB.push(t)},xy:[],Ff:function(){var t=Yh.xy.pop();return void 0===t?new P:t},ig:function(t,n,i,e){var o=Yh.xy.pop();return void 0===o?new P(t,n,i,e):(o.x=t,o.y=n,o.width=i,o.height=e,o)},Db:function(t){Yh.xy.push(t)},KB:[],Gf:function(){var t=Yh.KB.pop();return void 0===t?new A:t},ue:function(t){Yh.KB.push(t)},yy:null,s:function(){var t=Yh.yy;return null!==t?(Yh.yy=null,t):new Qr},q:function(t){t.reset(),Yh.yy=t},IB:[],lb:function(){var t=Yh.IB.pop();return void 0===t?[]:t},wa:function(t){t.length=0,Yh.IB.push(t)},ho:Object.freeze([]),nm:1,mc:function(t){t.__gohashid=Yh.nm++},Wp:function(t){var n=t.__gohashid;return void 0===n&&(n=Yh.nm++,t.__gohashid=n),n},Kd:function(t){return t.__gohashid},ga:function(t,n){n.Hy=t,Jh[t]=n},Ka:function(t,n){function i(){}i.prototype=n.prototype,t.prototype=new i,t.prototype.constructor=t},ki:function(t){t.TG=!0},defineProperty:function(t,n,i,e,o){Yh.j(t,"function","Util.defineProperty:classfunc"),Yh.j(n,"object","Util.defineProperty:propobj"),Yh.j(i,"function","Util.defineProperty:getter"),Yh.j(e,"function","Util.defineProperty:setter");for(var r in n){if(n=n[r],i={get:i,set:e,enumerable:!0},void 0!==o)for(var s in o)i[s]=o[s];Object.defineProperty(t.prototype,r,i),o=Object.getOwnPropertyDescriptor(t.prototype,r),n&&o&&Object.defineProperty(t.prototype,n,o);break}},YJ:!1,u:function(t,n,i,e){Yh.j(t,"function","Util.defineReadOnlyProperty:classfunc"),Yh.j(n,"object","Util.defineReadOnlyProperty:propobj"),Yh.j(i,"function","Util.defineReadOnlyProperty:getter");for(var o in n){var r=n[o];if(n={get:i,set:function(t){Yh.k('The property "'+r+'" is read-only and cannot be set to '+t)},enumerable:!0},void 0!==e)for(var s in e)n[s]=e[s];Object.defineProperty(t.prototype,o,n),e=Object.getOwnPropertyDescriptor(t.prototype,o),r&&e&&Object.defineProperty(t.prototype,r,e);break}},$d:function(t,n){for(var i in n)n[i]=!0;t.prototype.PG=n},getTypeName:function(t){return void 0===t?"":"string"==typeof t?t:"function"==typeof t?Yh.jf(t):null===t?"*":""},jf:function(t){if("function"==typeof t){if(t.Hy)return t.Hy;if(t.name)return t.name;var n=t.toString(),i=n.indexOf("("),n=n.substring(9,i).trim();if(""!==n)return t.Hy=n}else if("object"==typeof t&&t.constructor)return Yh.jf(t.constructor);return typeof t},p:function(t,n,e){Yh.j(t,"function","Util.defineEnumValue:classfunc"),Yh.j(n,"string","Util.defineEnumValue:name"),Yh.j(e,"number","Util.defineEnumValue:num"),e=new i(t,n,e),Object.freeze(e),t[n]=e;var o=t.Tu;return o instanceof b||(o=new b("string",i),t.Tu=o),o.add(n,e),e},sb:function(t,n){if(!t||!n)return null;var i=void 0;try{"function"==typeof n?i=n(t):"function"==typeof t.getAttribute?null===(i=t.getAttribute(n))&&(i=void 0):i=t[n]}catch(t){}return i},La:function(t,n,i){if(t&&n)try{"function"==typeof n?n(t,i):"function"==typeof t.setAttribute?t.setAttribute(n,i):t[n]=i}catch(t){}},Hu:function(t,n){Yh.j(t,"object","Setting properties requires Objects as arguments"),Yh.j(n,"object","Setting properties requires Objects as arguments");var i,e=t instanceof tr,o=t instanceof Ei;for(i in n){""===i&&Yh.k("Setting properties requires non-empty property names");var r=t,s=i;if(e||o){var l=i.indexOf(".");if(0<l){var a=i.substring(0,l);e?r=t.ud(a):void 0!==(r=t[a])&&null!==r||(r=t.bb[a]),Yh.Qa(r)?s=i.substr(l+1):Yh.k("Unable to find object named: "+a+" in "+t.toString()+" when trying to set property: "+i)}}if("_"!==s[0]&&!Yh.bF(r,s)){if(o&&"ModelChanged"===s){t.eH(n[s]);continue}if(o&&"Changed"===s){t.fn(n[s]);continue}if(o&&Yh.bF(t.bb,s))r=t.bb;else{if(o&&Ze(t,s)){t.Pz(s,n[s]);continue}if(t instanceof Ft&&"Changed"===s){t.fn(n[s]);continue}Yh.k('Trying to set undefined property "'+s+'" on object: '+r.toString())}}r[s]=n[i],"_"===s[0]&&r instanceof To&&r.bH(s)}},bF:function(t,n){if(t.hasOwnProperty(n))return!0;for(var i=Object.getPrototypeOf(t);i&&i!==Function;){if(i.hasOwnProperty(n))return!0;var e=i.PG;if(e&&e[n])return!0;i=Object.getPrototypeOf(i)}return!1},iJ:function(t){for(var n=[],i=0;256>i;i++)n[i]=i;for(var e=0,o=0,i=0;256>i;i++)e=(e+n[i]+119)%256,o=n[i],n[i]=n[e],n[e]=o;for(var e=i=0,r="",s=0;s<t.length;s++)i=(i+1)%256,e=(e+n[i])%256,o=n[i],n[i]=n[e],n[e]=o,r+=String.fromCharCode(t.charCodeAt(s)^n[(n[i]+n[e])%256]);return r},iI:function(t){for(var n={},i=0;256>i;i++)n["0123456789abcdef".charAt(i>>4)+"0123456789abcdef".charAt(15&i)]=String.fromCharCode(i);t.length%2&&(t="0"+t);for(var e=[],o=0,i=0;i<t.length;i+=2)e[o++]=n[t.substr(i,2)];return t=e.join(""),""===t?"0":t},Jg:function(t){return Yh.iJ(Yh.iI(t))},lm:null,adym:"7da71ca0ad381e90",vfo:"2be641fdb264",rH:"@COLOR1",sH:"@COLOR2",xE:!1,Ct:null,Dt:null};Yh.lm=function(){var t=n.document.createElement("canvas"),e=t.getContext("2d");e[Yh.Jg("7ca11abfd022028846")]=Yh.Jg("398c3597c01238");for(var o=["5da73c80a36755d3038e4972187c3cae51fd22","32ab5ff3b26f42dc0ed90f22432913b54ae6247590da4bb21c324ba3a84e385776","54a702f3e53909c447824c6706603faf4cfb236cdfda5de14c134ba1a95a2d4c7cc6f93c1387","74bf19bce72555874c86"],r=1;5>r;r++)e[Yh.Jg("7ca11abfd7330390")](Yh.Jg(o[r-1]),10,15*r+0);for(e[Yh.Jg("7ca11abfd022028846")]=Yh.Jg("39f046ebb36e4b"),r=1;5>r;r++)e[Yh.Jg("7ca11abfd7330390")](Yh.Jg(o[r-1]),10,15*r+0);return 4===o.length&&"5"===o[0][0]&&"7"===o[3][0]||(Yh.p=function(t,n){var e=new i(t,n,2);Object.freeze(e),t[n]=e;var o=t.Tu;return o instanceof b||(o=new b("string",i),t.Tu=o),o.add(n,e),e}),t}(),Yh.ga("EnumValue",i),i.prototype.toString=function(){return Yh.jf(this.XB)+"."+this.Rb},Yh.u(i,{De:"classType"},function(){return this.XB}),Yh.u(i,{name:"name"},function(){return this.Rb}),Yh.u(i,{value:"value"},function(){return this.XG});var Wh;i.findName=Wh=function(t,n){if(void 0===n||null===n||""===n)return null;Yh.j(t,"function","findName:classfunc"),Yh.j(n,"string","EnumValue.findName:name");var i=t.Tu;return i instanceof b?i.ja(n):null},e.prototype.toString=function(){return this.VB.join("")},e.prototype.add=function(t){""!==t&&this.VB.push(t)},r.prototype.random=function(){var t=this.seed%this.HB*this.sy-this.seed/this.HB*this.EG;return this.seed=0<t?t:t+this.Su,this.seed*this.DG},Yh.u(s,{i:"iterator"},function(){return this}),s.prototype.reset=s.prototype.reset=function(){},s.prototype.next=s.prototype.next=function(){return!1},s.prototype.hasNext=function(){return!1},s.prototype.first=s.prototype.first=function(){return null},s.prototype.any=function(){return!1},s.prototype.all=function(){return!0},s.prototype.each=function(){return this},s.prototype.map=function(){return this},s.prototype.filter=function(){return this},s.prototype.concat=function(t){return t.i},Yh.u(s,{count:"count"},function(){return 0}),s.prototype.If=function(){},s.prototype.toString=function(){return"EmptyIterator"};var Xh=new s;Yh.$d(l,{key:!0,value:!0}),Yh.u(l,{i:"iterator"},function(){return this}),l.prototype.reset=l.prototype.reset=function(){this.key=-1},l.prototype.next=l.prototype.next=function(){return-1===this.key&&(this.key=0,!0)},l.prototype.hasNext=function(){return this.next()},l.prototype.first=l.prototype.first=function(){return this.key=0,this.value},l.prototype.any=function(t){return this.key=-1,t(this.value)},l.prototype.all=function(t){return this.key=-1,t(this.value)},l.prototype.each=function(t){return this.key=-1,t(this.value),this},l.prototype.map=function(t){return new l(t(this.value))},l.prototype.filter=function(t){return t(this.value)?new l(this.value):Xh},l.prototype.concat=function(t){return new a(this,t.i)},Yh.u(l,{count:"count"},function(){return 1}),l.prototype.If=function(){this.value=null},l.prototype.toString=function(){return"SingletonIterator("+this.value+")"},Yh.$d(a,{key:!0,value:!0}),Yh.u(a,{i:"iterator"},function(){return this}),a.prototype.reset=a.prototype.reset=function(){this.jl.reset(),this.kl.reset(),this.Uu=!1},a.prototype.next=a.prototype.next=function(){if(!this.Uu){var t=this.jl;if(t.next())return this.key=t.key,this.value=t.value,!0;this.Uu=!0}return!(!this.Uu||(t=this.kl,!t.next()))&&(this.key=t.key,this.value=t.value,!0)},a.prototype.hasNext=function(){return this.next()},a.prototype.first=a.prototype.first=function(){return this.reset(),this.next()?this.value:null},a.prototype.any=function(t){return!(!this.jl.any(t)&&!this.kl.any(t))},a.prototype.all=function(t){return!(!this.jl.all(t)||!this.kl.all(t))},a.prototype.each=function(t){return this.jl.each(t),this.kl.each(t),this},a.prototype.map=function(t){return new a(this.jl.map(t),this.kl.map(t))},a.prototype.filter=function(t){return new a(this.jl.filter(t),this.kl.filter(t))},a.prototype.concat=function(t){return new a(this,t.i)},Yh.u(a,{count:"count"},function(){return this.jl.count+this.kl.count}),a.prototype.If=function(){this.value=this.key=null},a.prototype.toString=function(){return"ConcatIterator()"},Yh.$d(h,{key:!0,value:!0}),Yh.u(h,{i:"iterator"},function(){return this}),Yh.defineProperty(h,{iq:"predicate"},function(){return this.Xh},function(t){this.Xh=t}),h.prototype.reset=h.prototype.reset=function(){var t=this.vc;t.Pb=null,this.Ta=t.F,this.uc=-1},h.prototype.next=h.prototype.next=function(){var t=this.vc;if(t.F!==this.Ta){if(0>this.key)return!1;Yh.Ma(t)}var t=t.n,n=t.length,i=++this.uc,e=this.Xh;if(null!==e)for(;i<n;){var o=t[i];if(e(o))return this.key=this.uc=i,this.value=o,!0;i++}else{if(i<n)return this.key=i,this.value=t[i],!0;this.If()}return!1},h.prototype.hasNext=function(){return this.next()},h.prototype.first=h.prototype.first=function(){var t=this.vc;this.Ta=t.F,this.uc=0;var t=t.n,n=t.length,i=this.Xh;if(null!==i){for(var e=0;e<n;){var o=t[e];if(i(o))return this.key=this.uc=e,this.value=o;e++}return null}return 0<n?(o=t[0],this.key=0,this.value=o):null},h.prototype.any=function(t){var n=this.vc;n.Pb=null;var i=n.F;this.uc=-1;for(var e=n.n,o=e.length,r=this.Xh,s=0;s<o;s++){var l=e[s];if(null===r||r(l)){if(t(l))return!0;n.F!==i&&Yh.Ma(n)}}return!1},h.prototype.all=function(t){var n=this.vc;n.Pb=null;var i=n.F;this.uc=-1;for(var e=n.n,o=e.length,r=this.Xh,s=0;s<o;s++){var l=e[s];if(null===r||r(l)){if(!t(l))return!1;n.F!==i&&Yh.Ma(n)}}return!0},h.prototype.each=function(t){var n=this.vc;n.Pb=null;var i=n.F;this.uc=-1;for(var e=n.n,o=e.length,r=this.Xh,s=0;s<o;s++){var l=e[s];(null===r||r(l))&&(t(l),n.F!==i&&Yh.Ma(n))}return this},h.prototype.map=function(t){var n=this.vc;n.Pb=null;var i=n.F;this.uc=-1;for(var e=[],o=n.n,r=o.length,s=this.Xh,l=0;l<r;l++){var a=o[l];(null===s||s(a))&&(e.push(t(a)),n.F!==i&&Yh.Ma(n))}return t=new f,t.n=e,t.Fc(),t.i},h.prototype.filter=function(t){var n=this.vc;n.Pb=null;var i=n.F;this.uc=-1;for(var e=[],o=n.n,r=o.length,s=this.Xh,l=0;l<r;l++){var a=o[l];(null===s||s(a))&&(t(a)&&e.push(a),n.F!==i&&Yh.Ma(n))}return t=new f(n.ma),t.n=e,t.Fc(),t.i},h.prototype.concat=function(t){return this.vc.Pb=null,new a(this,t.i)},Yh.u(h,{count:"count"},function(){var t=this.Xh;if(null!==t){for(var n=0,i=this.vc.n,e=i.length,o=0;o<e;o++)t(i[o])&&n++;return n}return this.vc.n.length}),h.prototype.If=function(){this.key=-1,this.value=null,this.Ta=-1,this.Xh=null,this.vc.Pb=this},h.prototype.toString=function(){return"ListIterator@"+this.uc+"/"+this.vc.count},Yh.$d(u,{key:!0,value:!0}),Yh.u(u,{i:"iterator"},function(){return this}),u.prototype.reset=u.prototype.reset=function(){var t=this.vc;t.Mi=null,this.Ta=t.F,this.uc=t.n.length},u.prototype.next=u.prototype.next=function(){var t=this.vc;if(t.F!==this.Ta){if(0>this.key)return!1;Yh.Ma(t)}var n=--this.uc;return 0<=n?(this.key=n,this.value=t.n[n],!0):(this.If(),!1)},u.prototype.hasNext=function(){return this.next()},u.prototype.first=u.prototype.first=function(){var t=this.vc;this.Ta=t.F;var n=t.n;return this.uc=t=n.length-1,0<=t?(n=n[t],this.key=t,this.value=n):null},u.prototype.any=function(t){var n=this.vc;n.Mi=null;var i=n.F,e=n.n,o=e.length;for(this.uc=o,o-=1;0<=o;o--){if(t(e[o]))return!0;n.F!==i&&Yh.Ma(n)}return!1},u.prototype.all=function(t){var n=this.vc;n.Mi=null;var i=n.F,e=n.n,o=e.length;for(this.uc=o,o-=1;0<=o;o--){if(!t(e[o]))return!1;n.F!==i&&Yh.Ma(n)}return!0},u.prototype.each=function(t){var n=this.vc;n.Mi=null;var i=n.F,e=n.n,o=e.length;for(this.uc=o,o-=1;0<=o;o--)t(e[o]),n.F!==i&&Yh.Ma(n);return this},u.prototype.map=function(t){var n=this.vc;n.Mi=null;var i=n.F,e=[],o=n.n,r=o.length;for(this.uc=r,r-=1;0<=r;r--)e.push(t(o[r])),n.F!==i&&Yh.Ma(n);return t=new f,t.n=e,t.Fc(),t.i},u.prototype.filter=function(t){var n=this.vc;n.Mi=null;var i=n.F,e=[],o=n.n,r=o.length;for(this.uc=r,r-=1;0<=r;r--){var s=o[r];t(s)&&e.push(s),n.F!==i&&Yh.Ma(n)}return t=new f(n.ma),t.n=e,t.Fc(),t.i},u.prototype.concat=function(t){return this.vc.Mi=null,new a(this,t.i)},Yh.u(u,{count:"count"},function(){return this.vc.n.length}),u.prototype.If=function(){this.key=-1,this.value=null,this.Ta=-1,this.vc.Mi=this},u.prototype.toString=function(){return"ListIteratorBackwards("+this.uc+"/"+this.vc.count+")"},Yh.ga("List",f),f.prototype.Fc=function(){var t=this.F;t++,999999999<t&&(t=0),this.F=t},f.prototype.freeze=f.prototype.freeze=function(){return this.Q=!0,this},f.prototype.thaw=f.prototype.Ra=function(){return this.Q=!1,this},f.prototype.toString=function(){return"List("+Yh.getTypeName(this.ma)+")#"+Yh.Kd(this)},f.prototype.add=f.prototype.add=function(t){null!==t&&(this.Q&&Yh.la(this,t),this.n.push(t),this.Fc())},f.prototype.push=f.prototype.push=function(t){this.add(t)},f.prototype.addAll=f.prototype.Hc=function(t){if(null===t)return this;this.Q&&Yh.la(this);var n=this.n;if(Yh.isArray(t))for(var i=Yh.Za(t),e=0;e<i;e++){var o=Yh.Da(t,e);n.push(o)}else for(t=t.i;t.next();)o=t.value,n.push(o);return this.Fc(),this},f.prototype.clear=f.prototype.clear=function(){this.Q&&Yh.la(this),this.n.length=0,this.Fc()},f.prototype.contains=f.prototype.contains=function(t){return null!==t&&-1!==this.n.indexOf(t)},f.prototype.has=f.prototype.has=function(t){return this.contains(t)},f.prototype.indexOf=f.prototype.indexOf=function(t){return null===t?-1:this.n.indexOf(t)},f.prototype.elt=f.prototype.ea=function(t){var n=this.n;return(0>t||t>=n.length)&&Yh.Ea(t,"0 <= i < length",f,"elt:i"),n[t]},f.prototype.get=f.prototype.get=function(t){return this.ea(t)},f.prototype.setElt=f.prototype.hg=function(t,n){var i=this.n;(0>t||t>=i.length)&&Yh.Ea(t,"0 <= i < length",f,"setElt:i"),this.Q&&Yh.la(this,t),i[t]=n},f.prototype.set=f.prototype.set=function(t,n){this.hg(t,n)},f.prototype.first=f.prototype.first=function(){var t=this.n;return 0===t.length?null:t[0]},f.prototype.last=f.prototype.ee=function(){var t=this.n,n=t.length;return 0<n?t[n-1]:null},f.prototype.pop=f.prototype.pop=function(){this.Q&&Yh.la(this);var t=this.n;return 0<t.length?t.pop():null},f.prototype.any=function(t){for(var n=this.n,i=this.F,e=n.length,o=0;o<e;o++){if(t(n[o]))return!0;this.F!==i&&Yh.Ma(this)}return!1},f.prototype.all=function(t){for(var n=this.n,i=this.F,e=n.length,o=0;o<e;o++){if(!t(n[o]))return!1;this.F!==i&&Yh.Ma(this)}return!0},f.prototype.each=function(t){for(var n=this.n,i=this.F,e=n.length,o=0;o<e;o++)t(n[o]),this.F!==i&&Yh.Ma(this);return this},f.prototype.map=function(t){for(var n=new f,i=[],e=this.n,o=this.F,r=e.length,s=0;s<r;s++)i.push(t(e[s])),this.F!==o&&Yh.Ma(this);return n.n=i,n.Fc(),n},f.prototype.filter=function(t){for(var n=new f(this.ma),i=[],e=this.n,o=this.F,r=e.length,s=0;s<r;s++){var l=e[s];t(l)&&i.push(l),this.F!==o&&Yh.Ma(this)}return n.n=i,n.Fc(),n},f.prototype.concat=function(t){return this.copy().Hc(t)},f.prototype.insertAt=f.prototype.Md=function(t,n){0>t&&Yh.Ea(t,">= 0",f,"insertAt:i"),this.Q&&Yh.la(this,t);var i=this.n;return t>=i.length?i.push(n):i.splice(t,0,n),this.Fc(),!0},f.prototype.remove=f.prototype.delete=f.prototype.remove=function(t){if(null===t)return!1;this.Q&&Yh.la(this,t);var n=this.n;return-1!==(t=n.indexOf(t))&&(t===n.length-1?n.pop():n.splice(t,1),this.Fc(),!0)},f.prototype.removeAt=f.prototype.Yc=function(t){var n=this.n;(0>t||t>=n.length)&&Yh.Ea(t,"0 <= i < length",f,"removeAt:i"),this.Q&&Yh.la(this,t),t===n.length-1?n.pop():n.splice(t,1),this.Fc()},f.prototype.removeRange=f.prototype.removeRange=function(t,n){var i=this.n,e=i.length;if(0>t)t=0;else if(t>=e)return this;if(0>n)return this;if(n>=e&&(n=e-1),t>n)return this;this.Q&&Yh.la(this);for(var o=t,r=n+1;r<e;)i[o++]=i[r++];return i.length=e-(n-t+1),this.Fc(),this},f.prototype.copy=function(){var t=new f(this.ma),n=this.n;return 0<n.length&&(t.n=Array.prototype.slice.call(n)),t},f.prototype.toArray=f.prototype.fc=function(){for(var t=this.n,n=this.count,i=Array(n),e=0;e<n;e++)i[e]=t[e];return i},f.prototype.toSet=f.prototype.sG=function(){for(var t=new d(this.ma),n=this.n,i=this.count,e=0;e<i;e++)t.add(n[e]);return t},f.prototype.sort=f.prototype.sort=function(t){return this.Q&&Yh.la(this),this.n.sort(t),this.Fc(),this},f.prototype.sortRange=f.prototype.wq=function(t,n,i){var e=this.n,o=e.length;void 0===n&&(n=0),void 0===i&&(i=o),this.Q&&Yh.la(this);var r=i-n;if(1>=r)return this;if((0>n||n>=o-1)&&Yh.Ea(n,"0 <= from < length",f,"sortRange:from"),2===r)return i=e[n],o=e[n+1],0<t(i,o)&&(e[n]=o,e[n+1]=i,this.Fc()),this;if(0===n)if(i>=o)e.sort(t);else for(r=e.slice(0,i),r.sort(t),t=0;t<i;t++)e[t]=r[t];else if(i>=o)for(r=e.slice(n),r.sort(t),t=n;t<o;t++)e[t]=r[t-n];else for(r=e.slice(n,i),r.sort(t),t=n;t<i;t++)e[t]=r[t-n];return this.Fc(),this},f.prototype.reverse=f.prototype.reverse=function(){return this.Q&&Yh.la(this),this.n.reverse(),this.Fc(),this},Yh.u(f,{count:"count"},function(){return this.n.length}),Yh.u(f,{size:"size"},function(){return this.n.length}),Yh.u(f,{length:"length"},function(){return this.n.length}),Yh.u(f,{i:"iterator"},function(){if(0>=this.n.length)return Xh;var t=this.Pb;return null!==t?(t.reset(),t):new h(this)}),Yh.u(f,{Hn:"iteratorBackwards"},function(){if(0>=this.n.length)return Xh;var t=this.Mi;return null!==t?(t.reset(),t):new u(this)}),Yh.$d(c,{key:!0,value:!0}),Yh.u(c,{i:"iterator"},function(){return this}),c.prototype.reset=c.prototype.reset=function(){var t=this.Zh;t.Pb=null,this.Ta=t.F,this.Wa=null},c.prototype.next=c.prototype.next=function(){var t=this.Zh;if(t.F!==this.Ta){if(null===this.key)return!1;Yh.Ma(t)}var n=this.Wa,n=null===n?t.Ca:n.Ya;return null!==n?(this.Wa=n,this.value=n.value,this.key=n.key,!0):(this.If(),!1)},c.prototype.hasNext=function(){return this.next()},c.prototype.first=c.prototype.first=function(){var t=this.Zh;if(this.Ta=t.F,null!==(t=t.Ca)){this.Wa=t;var n=t.value;return this.key=t.key,this.value=n}return null},c.prototype.any=function(t){var n=this.Zh;n.Pb=null;var i=n.F;this.Wa=null;for(var e=n.Ca;null!==e;){if(t(e.value))return!0;n.F!==i&&Yh.Ma(n),e=e.Ya}return!1},c.prototype.all=function(t){var n=this.Zh;n.Pb=null;var i=n.F;this.Wa=null;for(var e=n.Ca;null!==e;){if(!t(e.value))return!1;n.F!==i&&Yh.Ma(n),e=e.Ya}return!0},c.prototype.each=function(t){var n=this.Zh;n.Pb=null;var i=n.F;this.Wa=null;for(var e=n.Ca;null!==e;)t(e.value),n.F!==i&&Yh.Ma(n),e=e.Ya;return this},c.prototype.map=function(t){var n=this.Zh;n.Pb=null;for(var i=new f,e=n.F,o=n.Ca;null!==o;)i.add(t(o.value)),n.F!==e&&Yh.Ma(n),o=o.Ya;return i.i},c.prototype.filter=function(t){var n=this.Zh;n.Pb=null;for(var i=new f(n.ma),e=n.F,o=n.Ca;null!==o;){var r=o.value;t(r)&&i.add(r),n.F!==e&&Yh.Ma(n),o=o.Ya}return i.i},c.prototype.concat=function(t){return this.Zh.Pb=null,new a(this,t.i)},Yh.u(c,{count:"count"},function(){return this.Zh.nd}),c.prototype.If=function(){this.value=this.key=null,this.Ta=-1,this.Zh.Pb=this},c.prototype.toString=function(){return null!==this.Wa?"SetIterator@"+this.Wa.value:"SetIterator"},Yh.ga("Set",d),d.prototype.Fc=function(){var t=this.F;t++,999999999<t&&(t=0),this.F=t},d.prototype.freeze=d.prototype.freeze=function(){return this.Q=!0,this},d.prototype.thaw=d.prototype.Ra=function(){return this.Q=!1,this},d.prototype.toString=function(){return"Set("+Yh.getTypeName(this.ma)+")#"+Yh.Kd(this)},d.prototype.add=d.prototype.add=function(t){if(null===t)return!1;this.Q&&Yh.la(this,t);var n=t;return Yh.Qa(t)&&(n=Yh.Wp(t)),void 0===this.od[n]&&(this.nd++,t=new g(t,t),this.od[n]=t,n=this.Sh,null===n?this.Ca=t:(t.ip=n,n.Ya=t),this.Sh=t,this.Fc(),!0)},d.prototype.addAll=d.prototype.Hc=function(t){if(null===t)return this;if(this.Q&&Yh.la(this),Yh.isArray(t))for(var n=Yh.Za(t),i=0;i<n;i++)this.add(Yh.Da(t,i));else for(t=t.i;t.next();)this.add(t.value);return this},d.prototype.contains=d.prototype.contains=function(t){if(null===t)return!1;var n=t;return(!Yh.Qa(t)||void 0!==(n=Yh.Kd(t)))&&void 0!==this.od[n]},d.prototype.has=d.prototype.has=function(t){return this.contains(t)},d.prototype.containsAll=function(t){if(null===t)return!0;for(t=t.i;t.next();)if(!this.contains(t.value))return!1;return!0},d.prototype.containsAny=function(t){if(null===t)return!0;for(t=t.i;t.next();)if(this.contains(t.value))return!0;return!1},d.prototype.first=d.prototype.first=function(){var t=this.Ca;return null===t?null:t.value},d.prototype.any=function(t){for(var n=this.F,i=this.Ca;null!==i;){if(t(i.value))return!0;this.F!==n&&Yh.Ma(this),i=i.Ya}return!1},d.prototype.all=function(t){for(var n=this.F,i=this.Ca;null!==i;){if(!t(i.value))return!1;this.F!==n&&Yh.Ma(this),i=i.Ya}return!0},d.prototype.each=function(t){for(var n=this.F,i=this.Ca;null!==i;)t(i.value),this.F!==n&&Yh.Ma(this),i=i.Ya;return this},d.prototype.map=function(t){for(var n=new d,i=this.F,e=this.Ca;null!==e;)n.add(t(e.value)),this.F!==i&&Yh.Ma(this),e=e.Ya;return n},d.prototype.filter=function(t){for(var n=new d(this.ma),i=this.F,e=this.Ca;null!==e;){var o=e.value;t(o)&&n.add(o),this.F!==i&&Yh.Ma(this),e=e.Ya}return n},d.prototype.concat=function(t){return this.copy().Hc(t)},d.prototype.remove=d.prototype.delete=d.prototype.remove=function(t){if(null===t)return!1;this.Q&&Yh.la(this,t);var n=t;if(Yh.Qa(t)&&void 0===(n=Yh.Kd(t)))return!1;if(void 0===(t=this.od[n]))return!1;var i=t.Ya,e=t.ip;return null!==i&&(i.ip=e),null!==e&&(e.Ya=i),this.Ca===t&&(this.Ca=i),this.Sh===t&&(this.Sh=e),delete this.od[n],this.nd--,this.Fc(),!0},d.prototype.removeAll=d.prototype.Yx=function(t){if(null===t)return this;if(this.Q&&Yh.la(this),Yh.isArray(t))for(var n=Yh.Za(t),i=0;i<n;i++)this.remove(Yh.Da(t,i));else for(t=t.i;t.next();)this.remove(t.value);return this},d.prototype.retainAll=function(t){if(null===t||0===this.count)return this;this.Q&&Yh.la(this);var n=new d(this.ma);n.Hc(t),t=[];for(var i=this.i;i.next();){var e=i.value;n.contains(e)||t.push(e)}return this.Yx(t),this},d.prototype.clear=d.prototype.clear=function(){this.Q&&Yh.la(this),this.od={},this.nd=0,this.Sh=this.Ca=null,this.Fc()},d.prototype.copy=function(){var t,n=new d(this.ma),i=this.od;for(t in i)n.add(i[t].value);return n},d.prototype.toArray=d.prototype.fc=function(){var t,n=Array(this.nd),i=this.od,e=0;for(t in i)n[e]=i[t].value,e++;return n},d.prototype.toList=function(){var t,n=new f(this.ma),i=this.od;for(t in i)n.add(i[t].value);return n},Yh.u(d,{count:"count"},function(){return this.nd}),Yh.u(d,{size:"size"},function(){return this.nd}),Yh.u(d,{i:"iterator"},function(){if(0>=this.nd)return Xh;var t=this.Pb;return null!==t?(t.reset(),t):new c(this)}),Yh.$d(p,{key:!0,value:!0}),Yh.u(p,{i:"iterator"},function(){return this}),p.prototype.reset=p.prototype.reset=function(){this.Ta=this.Fa.F,this.Wa=null},p.prototype.next=p.prototype.next=function(){var t=this.Fa;if(t.F!==this.Ta){if(null===this.key)return!1;Yh.Ma(t)}var n=this.Wa,n=null===n?t.Ca:n.Ya;return null!==n?(this.Wa=n,this.value=this.key=t=n.key,!0):(this.If(),!1)},p.prototype.hasNext=function(){return this.next()},p.prototype.first=p.prototype.first=function(){var t=this.Fa;return this.Ta=t.F,t=t.Ca,null!==t?(this.Wa=t,this.value=this.key=t=t.key):null},p.prototype.any=function(t){var n=this.Fa,i=n.F;this.Wa=null;for(var e=n.Ca;null!==e;){if(t(e.key))return!0;n.F!==i&&Yh.Ma(n),e=e.Ya}return!1},p.prototype.all=function(t){var n=this.Fa,i=n.F;this.Wa=null;for(var e=n.Ca;null!==e;){if(!t(e.key))return!1;n.F!==i&&Yh.Ma(n),e=e.Ya}return!0},p.prototype.each=function(t){var n=this.Fa,i=n.F;this.Wa=null;for(var e=n.Ca;null!==e;)t(e.key),n.F!==i&&Yh.Ma(n),e=e.Ya;return this},p.prototype.map=function(t){var n=this.Fa,i=n.F;this.Wa=null;for(var e=new f,o=n.Ca;null!==o;)e.add(t(o.key)),n.F!==i&&Yh.Ma(n),o=o.Ya;return e.i},p.prototype.filter=function(t){var n=this.Fa,i=n.F;this.Wa=null;for(var e=new f(n.Rh),o=n.Ca;null!==o;){var r=o.key;t(r)&&e.add(r),n.F!==i&&Yh.Ma(n),o=o.Ya}return e.i},p.prototype.concat=function(t){return new a(this,t.i)},Yh.u(p,{count:"count"},function(){return this.Fa.nd}),p.prototype.If=function(){this.value=this.key=null,this.Ta=-1},p.prototype.toString=function(){return null!==this.Wa?"MapKeySetIterator@"+this.Wa.value:"MapKeySetIterator"},Yh.Ka(y,d),y.prototype.freeze=function(){return this},y.prototype.Ra=function(){return this},y.prototype.toString=function(){return"MapKeySet("+this.Fa.toString()+")"},y.prototype.add=y.prototype.add=function(){return Yh.k("This Set is read-only: "+this.toString()),!1},y.prototype.set=y.prototype.set=function(){return Yh.k("This Set is read-only: "+this.toString()),!1},y.prototype.contains=y.prototype.contains=function(t){return this.Fa.contains(t)},y.prototype.has=y.prototype.has=function(t){return this.contains(t)},y.prototype.remove=y.prototype.delete=y.prototype.remove=function(){return Yh.k("This Set is read-only: "+this.toString()),!1},y.prototype.clear=y.prototype.clear=function(){Yh.k("This Set is read-only: "+this.toString())},y.prototype.first=y.prototype.first=function(){var t=this.Fa.Ca;return null!==t?t.key:null},y.prototype.any=function(t){for(var n=this.Fa.Ca;null!==n;){if(t(n.key))return!0;n=n.Ya}return!1},y.prototype.all=function(t){for(var n=this.Fa.Ca;null!==n;){if(!t(n.key))return!1;n=n.Ya}return!0},y.prototype.each=function(t){for(var n=this.Fa.Ca;null!==n;)t(n.key),n=n.Ya;return this},y.prototype.map=function(t){for(var n=new d,i=this.Fa.Ca;null!==i;)n.add(t(i.key)),i=i.Ya;return n},y.prototype.filter=function(t){for(var n=new d(this.Fa.Rh),i=this.Fa.Ca;null!==i;){var e=i.key;t(e)&&n.add(e),i=i.Ya}return n},y.prototype.concat=function(t){return this.sG().Hc(t)},y.prototype.copy=function(){return new y(this.Fa)},y.prototype.toSet=y.prototype.sG=function(){var t,n=new d(this.Fa.Rh),i=this.Fa.od;for(t in i)n.add(i[t].key);return n},y.prototype.toArray=y.prototype.fc=function(){var t,n=this.Fa.od,i=Array(this.Fa.nd),e=0;for(t in n)i[e]=n[t].key,e++;return i},y.prototype.toList=function(){var t,n=new f(this.Fa.Rh),i=this.Fa.od;for(t in i)n.add(i[t].key);return n},Yh.u(y,{count:"count"},function(){return this.Fa.nd}),Yh.u(y,{size:"size"},function(){return this.Fa.nd}),Yh.u(y,{i:"iterator"},function(){return 0>=this.Fa.nd?Xh:new p(this.Fa)}),Yh.$d(v,{key:!0,value:!0}),Yh.u(v,{i:"iterator"},function(){return this}),v.prototype.reset=v.prototype.reset=function(){var t=this.Fa;t.Ni=null,this.Ta=t.F,this.Wa=null},v.prototype.next=v.prototype.next=function(){var t=this.Fa;if(t.F!==this.Ta){if(null===this.key)return!1;Yh.Ma(t)}var n=this.Wa,n=null===n?t.Ca:n.Ya;return null!==n?(this.Wa=n,this.value=n.value,this.key=n.key,!0):(this.If(),!1)},v.prototype.hasNext=function(){return this.next()},v.prototype.first=v.prototype.first=function(){var t=this.Fa;if(this.Ta=t.F,null!==(t=t.Ca)){this.Wa=t;var n=t.value;return this.key=t.key,this.value=n}return null},v.prototype.any=function(t){var n=this.Fa;n.Ni=null;var i=n.F;this.Wa=null;for(var e=n.Ca;null!==e;){if(t(e.value))return!0;n.F!==i&&Yh.Ma(n),e=e.Ya}return!1},v.prototype.all=function(t){var n=this.Fa;n.Ni=null;var i=n.F;this.Wa=null;for(var e=n.Ca;null!==e;){if(!t(e.value))return!1;n.F!==i&&Yh.Ma(n),e=e.Ya}return!0},v.prototype.each=function(t){var n=this.Fa;n.Ni=null;var i=n.F;this.Wa=null;for(var e=n.Ca;null!==e;)t(e.value),n.F!==i&&Yh.Ma(n),e=e.Ya;return this},v.prototype.map=function(t){var n=this.Fa;n.Ni=null;var i=n.F;this.Wa=null;for(var e=new f,o=n.Ca;null!==o;)e.add(t(o.value)),n.F!==i&&Yh.Ma(n),o=o.Ya;return e.i},v.prototype.filter=function(t){var n=this.Fa;n.Ni=null;var i=n.F;this.Wa=null;for(var e=new f(n.Rh),o=n.Ca;null!==o;){var r=o.value;t(r)&&e.add(r),n.F!==i&&Yh.Ma(n),o=o.Ya}return e.i},v.prototype.concat=function(t){return this.Fa.Ni=null,new a(this,t.i)},Yh.u(v,{count:"count"},function(){return this.Fa.nd}),v.prototype.If=function(){this.value=this.key=null,this.Ta=-1,this.Fa.Ni=this},v.prototype.toString=function(){return null!==this.Wa?"MapValueSetIterator@"+this.Wa.value:"MapValueSetIterator"},Yh.$d(g,{key:!0,value:!0}),g.prototype.toString=function(){return"{"+this.key+":"+this.value+"}"};Yh.$d(m,{key:!0,value:!0}),Yh.u(m,{i:"iterator"},function(){return this}),m.prototype.reset=m.prototype.reset=function(){var t=this.Fa;t.Pb=null,this.Ta=t.F,this.Wa=null},m.prototype.next=m.prototype.next=function(){var t=this.Fa;if(t.F!==this.Ta){if(null===this.key)return!1;Yh.Ma(t)}var n=this.Wa,n=null===n?t.Ca:n.Ya;return null!==n?(this.Wa=n,this.key=n.key,this.value=n.value,!0):(this.If(),!1)},m.prototype.hasNext=function(){return this.next()},m.prototype.first=m.prototype.first=function(){var t=this.Fa;return this.Ta=t.F,t=t.Ca,null!==t?(this.Wa=t,this.key=t.key,this.value=t.value,t):null},m.prototype.any=function(t){var n=this.Fa;n.Pb=null;var i=n.F;this.Wa=null;for(var e=n.Ca;null!==e;){if(t(e))return!0;n.F!==i&&Yh.Ma(n),e=e.Ya}return!1},m.prototype.all=function(t){var n=this.Fa;n.Pb=null;var i=n.F;this.Wa=null;for(var e=n.Ca;null!==e;){if(!t(e))return!1;n.F!==i&&Yh.Ma(n),e=e.Ya}return!0},m.prototype.each=function(t){var n=this.Fa;n.Pb=null;var i=n.F;this.Wa=null;for(var e=n.Ca;null!==e;)t(e),n.F!==i&&Yh.Ma(n),e=e.Ya;return this},m.prototype.map=function(t){var n=this.Fa;n.Pb=null;var i=n.F;this.Wa=null;for(var e=new f,o=n.Ca;null!==o;)e.add(t(o)),n.F!==i&&Yh.Ma(n),o=o.Ya;return e.i},m.prototype.filter=function(t){var n=this.Fa;n.Pb=null;var i=n.F;this.Wa=null;for(var e=new f,o=n.Ca;null!==o;)t(o)&&e.add(o),n.F!==i&&Yh.Ma(n),o=o.Ya;return e.i},m.prototype.concat=function(t){return this.Fa.Pb=null,new a(this,t.i)},Yh.u(m,{count:"count"},function(){return this.Fa.nd}),m.prototype.If=function(){this.value=this.key=null,this.Ta=-1,this.Fa.Pb=this},m.prototype.toString=function(){return null!==this.Wa?"MapIterator@"+this.Wa:"MapIterator"},Yh.ga("Map",b),b.prototype.Fc=function(){var t=this.F;t++,999999999<t&&(t=0),this.F=t},b.prototype.freeze=b.prototype.freeze=function(){return this.Q=!0,this},b.prototype.thaw=b.prototype.Ra=function(){return this.Q=!1,this},b.prototype.toString=function(){return"Map("+Yh.getTypeName(this.Rh)+","+Yh.getTypeName(this.pt)+")#"+Yh.Kd(this)},b.prototype.add=b.prototype.add=function(t,n){this.Q&&Yh.la(this,t);var i=t;Yh.Qa(t)&&(i=Yh.Wp(t));var e=this.od[i];return void 0===e?(this.nd++,e=new g(t,n),this.od[i]=e,i=this.Sh,null===i?this.Ca=e:(e.ip=i,i.Ya=e),this.Sh=e,this.Fc(),!0):(e.value=n,!1)},b.prototype.set=b.prototype.set=function(t,n){return this.add(t,n)},b.prototype.addAll=b.prototype.Hc=function(t){if(null===t)return this;if(Yh.isArray(t))for(var n=Yh.Za(t),i=0;i<n;i++){var e=Yh.Da(t,i);this.add(e.key,e.value)}else for(t=t.i;t.next();)this.add(t.key,t.value);return this},b.prototype.first=b.prototype.first=function(){return this.Ca},b.prototype.any=function(t){for(var n=this.F,i=this.Ca;null!==i;){if(t(i))return!0;this.F!==n&&Yh.Ma(this),i=i.Ya}return!1},b.prototype.all=function(t){for(var n=this.F,i=this.Ca;null!==i;){if(!t(i))return!1;this.F!==n&&Yh.Ma(this),i=i.Ya}return!0},b.prototype.each=function(t){for(var n=this.F,i=this.Ca;null!==i;)t(i),this.F!==n&&Yh.Ma(this),i=i.Ya;return this},b.prototype.map=function(t){for(var n=new b(this.Rh),i=this.F,e=this.Ca;null!==e;)n.add(e.key,t(e)),this.F!==i&&Yh.Ma(this),e=e.Ya;return n},b.prototype.filter=function(t){for(var n=new b(this.Rh,this.pt),i=this.F,e=this.Ca;null!==e;)t(e)&&n.add(e.key,e.value),this.F!==i&&Yh.Ma(this),e=e.Ya;return n},b.prototype.concat=function(t){return this.copy().Hc(t)},b.prototype.contains=b.prototype.contains=function(t){var n=t;return(!Yh.Qa(t)||void 0!==(n=Yh.Kd(t)))&&void 0!==this.od[n]},b.prototype.has=b.prototype.has=function(t){return this.contains(t)},b.prototype.getValue=b.prototype.ja=function(t){var n=t;return Yh.Qa(t)&&void 0===(n=Yh.Kd(t))?null:(t=this.od[n],void 0===t?null:t.value)},b.prototype.get=b.prototype.get=function(t){return this.ja(t)},b.prototype.remove=b.prototype.delete=b.prototype.remove=function(t){if(null===t)return!1;this.Q&&Yh.la(this,t);var n=t;if(Yh.Qa(t)&&void 0===(n=Yh.Kd(t)))return!1;if(void 0===(t=this.od[n]))return!1;var i=t.Ya,e=t.ip;return null!==i&&(i.ip=e),null!==e&&(e.Ya=i),this.Ca===t&&(this.Ca=i),this.Sh===t&&(this.Sh=e),delete this.od[n],this.nd--,this.Fc(),!0},b.prototype.clear=b.prototype.clear=function(){this.Q&&Yh.la(this),this.od={},this.nd=0,this.Sh=this.Ca=null,this.Fc()},b.prototype.copy=function(){var t,n=new b(this.Rh,this.pt),i=this.od;for(t in i){var e=i[t];n.add(e.key,e.value)}return n},b.prototype.toArray=b.prototype.fc=function(){var t,n=this.od,i=Array(this.nd),e=0;for(t in n){var o=n[t];i[e]=new g(o.key,o.value),e++}return i},b.prototype.toKeySet=b.prototype.Fj=function(){return new y(this)},Yh.u(b,{count:"count"},function(){return this.nd}),Yh.u(b,{size:"size"},function(){return this.nd}),Yh.u(b,{i:"iterator"},function(){if(0>=this.count)return Xh;var t=this.Pb;return null!==t?(t.reset(),t):new m(this)}),Yh.u(b,{tF:"iteratorKeys"},function(){return 0>=this.count?Xh:new p(this)}),Yh.u(b,{uF:"iteratorValues"},function(){if(0>=this.count)return Xh;var t=this.Ni;return null!==t?(t.reset(),t):new v(this)}),Yh.ga("Point",x),Yh.ki(x),Yh.$d(x,{x:!0,y:!0}),x.prototype.assign=function(t){this.x=t.x,this.y=t.y},x.prototype.setTo=x.prototype.m=function(t,n){return this.x=t,this.y=n,this},x.prototype.set=x.prototype.set=function(t){return this.x=t.x,this.y=t.y,this},x.prototype.copy=function(){var t=new x;return t.x=this.x,t.y=this.y,t},x.prototype.Ga=function(){return Object.freeze(this),this},x.prototype.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()},x.prototype.freeze=function(){return this},x.prototype.Ra=function(){return Object.isFrozen(this)&&Yh.k("cannot thaw constant: "+this),this},x.parse=function(t){if("string"==typeof t){t=t.split(" ");for(var n=0,i=0;""===t[n];)n++;var e=t[n++];e&&(i=parseFloat(e));for(var o=0;""===t[n];)n++;return(e=t[n++])&&(o=parseFloat(e)),new x(i,o)}return new x},x.stringify=function(t){return t.x.toString()+" "+t.y.toString()},x.prototype.toString=function(){return"Point("+this.x+","+this.y+")"},x.prototype.equals=x.prototype.L=function(t){return t instanceof x&&(this.x===t.x&&this.y===t.y)},x.prototype.equalTo=x.prototype.jx=function(t,n){return this.x===t&&this.y===n},x.prototype.equalsApprox=x.prototype.Ic=function(t){return W(this.x,t.x)&&W(this.y,t.y)},x.prototype.add=x.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},x.prototype.subtract=x.prototype.Zn=function(t){return this.x-=t.x,this.y-=t.y,this},x.prototype.offset=x.prototype.offset=function(t,n){return this.x+=t,this.y+=n,this},x.prototype.rotate=x.prototype.rotate=function(t){if(0===t)return this;var n=this.x,i=this.y;if(0===n&&0===i)return this;var e=0,o=0;return 360<=t?t-=360:0>t&&(t+=360),90===t?(e=0,o=1):180===t?(e=-1,o=0):270===t?(e=0,o=-1):(t=t*Math.PI/180,e=Math.cos(t),o=Math.sin(t)),this.x=e*n-o*i,this.y=o*n+e*i,this},x.prototype.scale=x.prototype.scale=function(t,n){return this.x*=t,this.y*=n,this},x.prototype.distanceSquaredPoint=x.prototype.wf=function(t){var n=t.x-this.x;return t=t.y-this.y,n*n+t*t},x.prototype.distanceSquared=x.prototype.Qp=function(t,n){var i=t-this.x,e=n-this.y;return i*i+e*e},x.prototype.normalize=x.prototype.normalize=function(){var t=this.x,n=this.y,i=Math.sqrt(t*t+n*n);return 0<i&&(this.x=t/i,this.y=n/i),this},x.prototype.directionPoint=x.prototype.Ob=function(t){return w(t.x-this.x,t.y-this.y)},x.prototype.direction=x.prototype.direction=function(t,n){return w(t-this.x,n-this.y)},x.prototype.projectOntoLineSegment=function(t,n,i,e){return st(t,n,i,e,this.x,this.y,this),this},x.prototype.projectOntoLineSegmentPoint=function(t,n){return st(t.x,t.y,n.x,n.y,this.x,this.y,this),this},x.prototype.snapToGrid=function(t,n,i,e){return yt(this.x,this.y,t,n,i,e,this),this},x.prototype.snapToGridPoint=function(t,n){return yt(this.x,this.y,t.x,t.y,n.width,n.height,this),this},x.prototype.setRectSpot=x.prototype.Wn=function(t,n){return this.x=t.x+n.x*t.width+n.offsetX,this.y=t.y+n.y*t.height+n.offsetY,this},x.prototype.setSpot=x.prototype.Ju=function(t,n,i,e,o){return this.x=t+o.x*i+o.offsetX,this.y=n+o.y*e+o.offsetY,this},x.prototype.transform=function(t){return t.nb(this),this};var $h;x.distanceLineSegmentSquared=$h=function(t,n,i,e,o,r){var s=o-i,l=r-e,a=s*s+l*l;i-=t,e-=n;var h=-i*s-e*l;return 0>=h||h>=a?(s=o-t,l=r-n,Math.min(i*i+e*e,s*s+l*l)):(t=s*e-l*i)*t/a};var Qh;x.distanceSquared=Qh=function(t,n,i,e){return t=i-t,n=e-n,t*t+n*n};var Zh;x.direction=Zh=function(t,n,i,e){return t=i-t,n=e-n,0===t?0<n?90:0>n?270:0:0===n?0<t?0:180:isNaN(t)||isNaN(n)?0:(e=180*Math.atan(Math.abs(n/t))/Math.PI,0>t?e=0>n?e+180:180-e:0>n&&(e=360-e),e)},x.prototype.isReal=x.prototype.I=function(){return isFinite(this.x)&&isFinite(this.y)},Yh.ga("Size",M),Yh.ki(M),Yh.$d(M,{width:!0,height:!0}),M.prototype.assign=function(t){this.width=t.width,this.height=t.height},M.prototype.setTo=M.prototype.m=function(t,n){return this.width=t,this.height=n,this},M.prototype.set=M.prototype.set=function(t){return this.width=t.width,this.height=t.height,this},M.prototype.copy=function(){var t=new M;return t.width=this.width,t.height=this.height,t},M.prototype.Ga=function(){return Object.freeze(this),this},M.prototype.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()},M.prototype.freeze=function(){return this},M.prototype.Ra=function(){return Object.isFrozen(this)&&Yh.k("cannot thaw constant: "+this),this},M.parse=function(t){if("string"==typeof t){t=t.split(" ");for(var n=0,i=0;""===t[n];)n++;var e=t[n++];e&&(i=parseFloat(e));for(var o=0;""===t[n];)n++;return(e=t[n++])&&(o=parseFloat(e)),new M(i,o)}return new M},M.stringify=function(t){return t.width.toString()+" "+t.height.toString()},M.prototype.toString=function(){return"Size("+this.width+","+this.height+")"},M.prototype.equals=M.prototype.L=function(t){return t instanceof M&&(this.width===t.width&&this.height===t.height)},M.prototype.equalTo=M.prototype.jx=function(t,n){return this.width===t&&this.height===n},M.prototype.equalsApprox=M.prototype.Ic=function(t){return W(this.width,t.width)&&W(this.height,t.height)},M.prototype.isReal=M.prototype.I=function(){return isFinite(this.width)&&isFinite(this.height)},Yh.ga("Rect",P),Yh.ki(P),Yh.$d(P,{x:!0,y:!0,width:!0,height:!0}),P.prototype.assign=function(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},P.prototype.setTo=P.prototype.m=function(t,n,i,e){return this.x=t,this.y=n,this.width=i,this.height=e,this},P.prototype.set=P.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},P.prototype.setPoint=P.prototype.Vg=function(t){return this.x=t.x,this.y=t.y,this},P.prototype.setSize=function(t){return this.width=t.width,this.height=t.height,this},P.prototype.copy=function(){var t=new P;return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},P.prototype.Ga=function(){return Object.freeze(this),this},P.prototype.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()},P.prototype.freeze=function(){return this},P.prototype.Ra=function(){return Object.isFrozen(this)&&Yh.k("cannot thaw constant: "+this),this},P.parse=function(t){if("string"==typeof t){t=t.split(" ");for(var n=0,i=0;""===t[n];)n++;var e=t[n++];e&&(i=parseFloat(e));for(var o=0;""===t[n];)n++;(e=t[n++])&&(o=parseFloat(e));for(var r=0;""===t[n];)n++;(e=t[n++])&&(r=parseFloat(e));for(var s=0;""===t[n];)n++;return(e=t[n++])&&(s=parseFloat(e)),new P(i,o,r,s)}return new P},P.stringify=function(t){return t.x.toString()+" "+t.y.toString()+" "+t.width.toString()+" "+t.height.toString()},P.prototype.toString=function(){return"Rect("+this.x+","+this.y+","+this.width+","+this.height+")"},P.prototype.equals=P.prototype.L=function(t){return t instanceof P&&(this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height)},P.prototype.equalTo=P.prototype.jx=function(t,n,i,e){return this.x===t&&this.y===n&&this.width===i&&this.height===e},P.prototype.equalsApprox=P.prototype.Ic=function(t){return W(this.x,t.x)&&W(this.y,t.y)&&W(this.width,t.width)&&W(this.height,t.height)},P.prototype.containsPoint=P.prototype.Ha=function(t){return this.x<=t.x&&this.x+this.width>=t.x&&this.y<=t.y&&this.y+this.height>=t.y},P.prototype.containsRect=P.prototype.wk=function(t){return this.x<=t.x&&t.x+t.width<=this.x+this.width&&this.y<=t.y&&t.y+t.height<=this.y+this.height},P.prototype.contains=P.prototype.contains=function(t,n,i,e){return void 0===i&&(i=0),void 0===e&&(e=0),this.x<=t&&t+i<=this.x+this.width&&this.y<=n&&n+e<=this.y+this.height},P.prototype.reset=function(){this.height=this.width=this.y=this.x=0},P.prototype.offset=P.prototype.offset=function(t,n){return this.x+=t,this.y+=n,this},P.prototype.inflate=P.prototype.yf=function(t,n){return C(this,n,t,n,t)},P.prototype.addMargin=P.prototype.Nw=function(t){return C(this,t.top,t.right,t.bottom,t.left)},P.prototype.subtractMargin=P.prototype.JJ=function(t){return C(this,-t.top,-t.right,-t.bottom,-t.left)},P.prototype.grow=function(t,n,i,e){return C(this,t,n,i,e)},P.prototype.intersectRect=function(t){return N(this,t.x,t.y,t.width,t.height)},P.prototype.intersect=P.prototype.dF=function(t,n,i,e){return N(this,t,n,i,e)},P.prototype.intersectsRect=P.prototype.Uf=function(t){return this.eF(t.x,t.y,t.width,t.height)},P.prototype.intersects=P.prototype.eF=function(t,n,i,e){var o=this.width,r=this.x;return!(1/0!==o&&1/0!==i&&(o+=r,i+=t,isNaN(i)||isNaN(o)||r>i||t>o))&&(t=this.height,i=this.y,!(1/0!==t&&1/0!==e&&(t+=i,e+=n,isNaN(e)||isNaN(t)||i>e||n>t)))},P.prototype.unionPoint=P.prototype.si=function(t){return L(this,t.x,t.y,0,0)},P.prototype.unionRect=P.prototype.Hh=function(t){return L(this,t.x,t.y,t.width,t.height)},P.prototype.union=P.prototype.xG=function(t,n,i,e){return void 0===i&&(i=0),void 0===e&&(e=0),L(this,t,n,i,e)},P.prototype.setSpot=P.prototype.Ju=function(t,n,i){return this.x=t-i.offsetX-i.x*this.width,this.y=n-i.offsetY-i.y*this.height,this};var _h;P.contains=_h=function(t,n,i,e,o,r,s,l){return void 0===s&&(s=0),void 0===l&&(l=0),t<=o&&o+s<=t+i&&n<=r&&r+l<=n+e},P.intersects=function(t,n,i,e,o,r,s,l){return i+=t,s+=o,!(t>s||o>i)&&(t=e+n,l+=r,!(n>l||r>t))},Yh.defineProperty(P,{left:"left"},function(){return this.x},function(t){this.x=t}),Yh.defineProperty(P,{top:"top"},function(){return this.y},function(t){this.y=t}),Yh.defineProperty(P,{right:"right"},function(){return this.x+this.width},function(t){this.x+=t-(this.x+this.width)}),Yh.defineProperty(P,{bottom:"bottom"},function(){return this.y+this.height},function(t){this.y+=t-(this.y+this.height)}),Yh.defineProperty(P,{position:"position"},function(){return new x(this.x,this.y)},function(t){this.x=t.x,this.y=t.y}),Yh.defineProperty(P,{size:"size"},function(){return new M(this.width,this.height)},function(t){this.width=t.width,this.height=t.height}),Yh.defineProperty(P,{Hl:"center"},function(){return new x(this.x+this.width/2,this.y+this.height/2)},function(t){this.x=t.x-this.width/2,this.y=t.y-this.height/2}),Yh.defineProperty(P,{ka:"centerX"},function(){return this.x+this.width/2},function(t){this.x=t-this.width/2}),Yh.defineProperty(P,{ra:"centerY"},function(){return this.y+this.height/2},function(t){this.y=t-this.height/2}),P.prototype.isReal=P.prototype.I=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},P.prototype.isEmpty=function(){return 0===this.width&&0===this.height},Yh.ga("Margin",D),Yh.ki(D),Yh.$d(D,{top:!0,right:!0,bottom:!0,left:!0}),D.prototype.assign=function(t){this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left},D.prototype.setTo=D.prototype.m=function(t,n,i,e){return this.top=t,this.right=n,this.bottom=i,this.left=e,this},D.prototype.set=D.prototype.set=function(t){return this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.left=t.left,this},D.prototype.copy=function(){var t=new D;return t.top=this.top,t.right=this.right,t.bottom=this.bottom,t.left=this.left,t},D.prototype.Ga=function(){return Object.freeze(this),this},D.prototype.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()},D.prototype.freeze=function(){return this},D.prototype.Ra=function(){return Object.isFrozen(this)&&Yh.k("cannot thaw constant: "+this),this},D.parse=function(t){if("string"==typeof t){t=t.split(" ");for(var n=0,i=NaN;""===t[n];)n++;var e=t[n++];if(e&&(i=parseFloat(e)),isNaN(i))return new D;for(var o=NaN;""===t[n];)n++;if((e=t[n++])&&(o=parseFloat(e)),isNaN(o))return new D(i);for(var r=NaN;""===t[n];)n++;if((e=t[n++])&&(r=parseFloat(e)),isNaN(r))return new D(i,o);for(var s=NaN;""===t[n];)n++;return(e=t[n++])&&(s=parseFloat(e)),isNaN(s)?new D(i,o):new D(i,o,r,s)}return new D},D.stringify=function(t){return t.top.toString()+" "+t.right.toString()+" "+t.bottom.toString()+" "+t.left.toString()},D.prototype.toString=function(){return"Margin("+this.top+","+this.right+","+this.bottom+","+this.left+")"},D.prototype.equals=D.prototype.L=function(t){return t instanceof D&&(this.top===t.top&&this.right===t.right&&this.bottom===t.bottom&&this.left===t.left)},D.prototype.equalTo=D.prototype.jx=function(t,n,i,e){return this.top===t&&this.right===n&&this.bottom===i&&this.left===e},D.prototype.equalsApprox=D.prototype.Ic=function(t){return W(this.top,t.top)&&W(this.right,t.right)&&W(this.bottom,t.bottom)&&W(this.left,t.left)},D.prototype.isReal=D.prototype.I=function(){return isFinite(this.top)&&isFinite(this.right)&&isFinite(this.bottom)&&isFinite(this.left)},Yh.ki(A),Yh.$d(A,{m11:!0,m12:!0,m21:!0,m22:!0,dx:!0,dy:!0}),A.prototype.set=A.prototype.set=function(t){return this.m11=t.m11,this.m12=t.m12,this.m21=t.m21,this.m22=t.m22,this.dx=t.dx,this.dy=t.dy,this},A.prototype.copy=function(){var t=new A;return t.m11=this.m11,t.m12=this.m12,t.m21=this.m21,t.m22=this.m22,t.dx=this.dx,t.dy=this.dy,t},A.prototype.toString=function(){return"Transform("+this.m11+","+this.m12+","+this.m21+","+this.m22+","+this.dx+","+this.dy+")"},A.prototype.equals=A.prototype.L=function(t){return t instanceof A&&(this.m11===t.m11&&this.m12===t.m12&&this.m21===t.m21&&this.m22===t.m22&&this.dx===t.dx&&this.dy===t.dy)},A.prototype.isIdentity=A.prototype.eu=function(){return 1===this.m11&&0===this.m12&&0===this.m21&&1===this.m22&&0===this.dx&&0===this.dy},A.prototype.reset=A.prototype.reset=function(){return this.m11=1,this.m21=this.m12=0,this.m22=1,this.dy=this.dx=0,this},A.prototype.multiply=A.prototype.multiply=function(t){var n=this.m12*t.m11+this.m22*t.m12,i=this.m11*t.m21+this.m21*t.m22,e=this.m12*t.m21+this.m22*t.m22,o=this.m11*t.dx+this.m21*t.dy+this.dx,r=this.m12*t.dx+this.m22*t.dy+this.dy;return this.m11=this.m11*t.m11+this.m21*t.m12,this.m12=n,this.m21=i,this.m22=e,this.dx=o,this.dy=r,this},A.prototype.multiplyInverted=A.prototype.CF=function(t){var n=1/(t.m11*t.m22-t.m12*t.m21),i=t.m22*n,e=-t.m12*n,o=-t.m21*n,r=t.m11*n,s=n*(t.m21*t.dy-t.m22*t.dx),l=n*(t.m12*t.dx-t.m11*t.dy);return t=this.m12*i+this.m22*e,n=this.m11*o+this.m21*r,o=this.m12*o+this.m22*r,r=this.m11*s+this.m21*l+this.dx,s=this.m12*s+this.m22*l+this.dy,this.m11=this.m11*i+this.m21*e,this.m12=t,this.m21=n,this.m22=o,this.dx=r,this.dy=s,this},A.prototype.invert=A.prototype.ux=function(){var t=1/(this.m11*this.m22-this.m12*this.m21),n=-this.m12*t,i=-this.m21*t,e=this.m11*t,o=t*(this.m21*this.dy-this.m22*this.dx),r=t*(this.m12*this.dx-this.m11*this.dy);return this.m11=this.m22*t,this.m12=n,this.m21=i,this.m22=e,this.dx=o,this.dy=r,this},A.prototype.rotate=A.prototype.rotate=function(t,n,i){if(360<=t?t-=360:0>t&&(t+=360),0===t)return this;this.translate(n,i);var e=0,o=0;90===t?(e=0,o=1):180===t?(e=-1,o=0):270===t?(e=0,o=-1):(o=t*Math.PI/180,e=Math.cos(o),o=Math.sin(o)),t=this.m12*e+this.m22*o;var r=this.m11*-o+this.m21*e,s=this.m12*-o+this.m22*e;return this.m11=this.m11*e+this.m21*o,this.m12=t,this.m21=r,this.m22=s,this.translate(-n,-i),this},A.prototype.translate=A.prototype.translate=function(t,n){return this.dx+=this.m11*t+this.m21*n,this.dy+=this.m12*t+this.m22*n,this},A.prototype.scale=A.prototype.scale=function(t,n){return void 0===n&&(n=t),this.m11*=t,this.m12*=t,this.m21*=n,this.m22*=n,this},A.prototype.transformPoint=A.prototype.nb=function(t){var n=t.x,i=t.y;return t.x=n*this.m11+i*this.m21+this.dx,t.y=n*this.m12+i*this.m22+this.dy,t},A.prototype.invertedTransformPoint=A.prototype.mi=function(t){var n=1/(this.m11*this.m22-this.m12*this.m21),i=-this.m12*n,e=this.m11*n,o=n*(this.m12*this.dx-this.m11*this.dy),r=t.x,s=t.y;return t.x=r*this.m22*n+s*-this.m21*n+n*(this.m21*this.dy-this.m22*this.dx),t.y=r*i+s*e+o,t},A.prototype.transformRect=A.prototype.wG=function(t){var n=t.x,i=t.y,e=n+t.width,o=i+t.height,r=this.m11,s=this.m12,l=this.m21,a=this.m22,h=this.dx,u=this.dy,f=n*r+i*l+h,c=n*s+i*a+u,d=e*r+i*l+h,i=e*s+i*a+u,p=n*r+o*l+h,n=n*s+o*a+u,r=e*r+o*l+h,e=e*s+o*a+u,o=f,s=c,f=Math.min(f,d),o=Math.max(o,d),s=Math.min(s,i),c=Math.max(c,i),f=Math.min(f,p),o=Math.max(o,p),s=Math.min(s,n),c=Math.max(c,n),f=Math.min(f,r),o=Math.max(o,r),s=Math.min(s,e),c=Math.max(c,e);return t.x=f,t.y=s,t.width=o-f,t.height=c-s,t},Yh.ga("Spot",F),Yh.ki(F),Yh.$d(F,{x:!0,y:!0,offsetX:!0,offsetY:!0}),F.prototype.assign=function(t){this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY},F.prototype.setTo=F.prototype.m=function(t,n,i,e){return this.x=t,this.y=n,this.offsetX=i,this.offsetY=e,this},F.prototype.set=F.prototype.set=function(t){return this.x=t.x,this.y=t.y,this.offsetX=t.offsetX,this.offsetY=t.offsetY,this},F.prototype.copy=function(){var t=new F;return t.x=this.x,t.y=this.y,t.offsetX=this.offsetX,t.offsetY=this.offsetY,t},F.prototype.Ga=function(){return Object.freeze(this),this},F.prototype.S=function(){return Object.isFrozen(this)?this:this.copy().freeze()},F.prototype.freeze=function(){return this},F.prototype.Ra=function(){return Object.isFrozen(this)&&Yh.k("cannot thaw constant: "+this),this};var tu;F.parse=tu=function(t){if("string"==typeof t){if("None"===(t=t.trim()))return nu;if("TopLeft"===t)return eu;if("Top"===t||"TopCenter"===t||"MiddleTop"===t)return ou;if("TopRight"===t)return ru;if("Left"===t||"LeftCenter"===t||"MiddleLeft"===t)return su;if("Center"===t)return lu;if("Right"===t||"RightCenter"===t||"MiddleRight"===t)return au;if("BottomLeft"===t)return hu;if("Bottom"===t||"BottomCenter"===t||"MiddleBottom"===t)return uu;if("BottomRight"===t)return fu;if("TopSide"===t)return xu;if("LeftSide"===t)return wu;if("RightSide"===t)return ku;if("BottomSide"===t)return Mu;if("TopBottomSides"===t)return Pu;if("LeftRightSides"===t)return Tu;if("TopLeftSides"===t)return Su;if("TopRightSides"===t)return Cu;if("BottomLeftSides"===t)return Nu;if("BottomRightSides"===t)return ju;if("NotTopSide"===t)return Lu;if("NotLeftSide"===t)return Du;if("NotRightSide"===t)return Au;if("NotBottomSide"===t)return Fu;if("AllSides"===t)return Ou;if("Default"===t)return iu;t=t.split(" ");for(var n=0,i=0;""===t[n];)n++;var e=t[n++];void 0!==e&&0<e.length&&(i=parseFloat(e));for(var o=0;""===t[n];)n++;e=t[n++],void 0!==e&&0<e.length&&(o=parseFloat(e));for(var r=0;""===t[n];)n++;e=t[n++],void 0!==e&&0<e.length&&(r=parseFloat(e));for(var s=0;""===t[n];)n++;return e=t[n++],void 0!==e&&0<e.length&&(s=parseFloat(e)),new F(i,o,r,s)}return new F},F.stringify=function(t){return t.fd()?t.x.toString()+" "+t.y.toString()+" "+t.offsetX.toString()+" "+t.offsetY.toString():t.toString()},F.prototype.toString=function(){return this.fd()?0===this.offsetX&&0===this.offsetY?"Spot("+this.x+","+this.y+")":"Spot("+this.x+","+this.y+","+this.offsetX+","+this.offsetY+")":this.L(nu)?"None":this.L(eu)?"TopLeft":this.L(ou)?"Top":this.L(ru)?"TopRight":this.L(su)?"Left":this.L(lu)?"Center":this.L(au)?"Right":this.L(hu)?"BottomLeft":this.L(uu)?"Bottom":this.L(fu)?"BottomRight":this.L(xu)?"TopSide":this.L(wu)?"LeftSide":this.L(ku)?"RightSide":this.L(Mu)?"BottomSide":this.L(Pu)?"TopBottomSides":this.L(Tu)?"LeftRightSides":this.L(Su)?"TopLeftSides":this.L(Cu)?"TopRightSides":this.L(Nu)?"BottomLeftSides":this.L(ju)?"BottomRightSides":this.L(Lu)?"NotTopSide":this.L(Du)?"NotLeftSide":this.L(Au)?"NotRightSide":this.L(Fu)?"NotBottomSide":this.L(Ou)?"AllSides":this.L(iu)?"Default":"None"},F.prototype.equals=F.prototype.L=function(t){return t instanceof F&&((this.x===t.x||isNaN(this.x)&&isNaN(t.x))&&(this.y===t.y||isNaN(this.y)&&isNaN(t.y))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY)},F.prototype.opposite=F.prototype.GF=function(){return new F(.5-(this.x-.5),.5-(this.y-.5),-this.offsetX,-this.offsetY)},F.prototype.includesSide=F.prototype.rj=function(t){if(!this.tj())return!1;if(!t.tj())if(t.L(gu))t=wu;else if(t.L(mu))t=ku;else if(t.L(vu))t=xu;else{if(!t.L(bu))return!1;t=Mu}return t=t.offsetY,(this.offsetY&t)===t},F.prototype.isSpot=F.prototype.fd=function(){return!isNaN(this.x)&&!isNaN(this.y)},F.prototype.isNoSpot=F.prototype.Od=function(){return isNaN(this.x)||isNaN(this.y)},F.prototype.isSide=F.prototype.tj=function(){return isNaN(this.x)&&isNaN(this.y)&&1===this.offsetX&&0!==this.offsetY},F.prototype.isNone=F.prototype.xI=function(){return isNaN(this.x)&&isNaN(this.y)&&0===this.offsetX&&0===this.offsetY},F.prototype.isDefault=F.prototype.Vc=function(){return isNaN(this.x)&&isNaN(this.y)&&-1===this.offsetX&&0===this.offsetY};var nu;F.None=nu=O(new F(0,0,0,0),0).Ga();var iu;F.Default=iu=O(new F(0,0,-1,0),-1).Ga();var eu;F.TopLeft=eu=new F(0,0,0,0).Ga();var ou;F.TopCenter=ou=new F(.5,0,0,0).Ga();var ru;F.TopRight=ru=new F(1,0,0,0).Ga();var su;F.LeftCenter=su=new F(0,.5,0,0).Ga();var lu;F.Center=lu=new F(.5,.5,0,0).Ga();var au;F.RightCenter=au=new F(1,.5,0,0).Ga();var hu;F.BottomLeft=hu=new F(0,1,0,0).Ga();var uu;F.BottomCenter=uu=new F(.5,1,0,0).Ga();var fu;F.BottomRight=fu=new F(1,1,0,0).Ga();var cu;F.MiddleTop=cu=ou;var du;F.MiddleLeft=du=su;var pu;F.MiddleRight=pu=au;var yu;F.MiddleBottom=yu=uu;var vu;F.Top=vu=ou;var gu;F.Left=gu=su;var mu;F.Right=mu=au;var bu;F.Bottom=bu=uu;var xu;F.TopSide=xu=O(new F(0,0,1,Yh.kd),1).Ga();var wu;F.LeftSide=wu=O(new F(0,0,1,Yh.Rc),1).Ga();var ku;F.RightSide=ku=O(new F(0,0,1,Yh.$c),1).Ga();var Mu;F.BottomSide=Mu=O(new F(0,0,1,Yh.Zc),1).Ga();var Pu;F.TopBottomSides=Pu=O(new F(0,0,1,Yh.kd|Yh.Zc),1).Ga();var Tu;F.LeftRightSides=Tu=O(new F(0,0,1,Yh.Rc|Yh.$c),1).Ga();var Su;F.TopLeftSides=Su=O(new F(0,0,1,Yh.kd|Yh.Rc),1).Ga();var Cu;F.TopRightSides=Cu=O(new F(0,0,1,Yh.kd|Yh.$c),1).Ga();var Nu;F.BottomLeftSides=Nu=O(new F(0,0,1,Yh.Zc|Yh.Rc),1).Ga();var ju;F.BottomRightSides=ju=O(new F(0,0,1,Yh.Zc|Yh.$c),1).Ga();var Lu;F.NotTopSide=Lu=O(new F(0,0,1,Yh.Rc|Yh.$c|Yh.Zc),1).Ga();var Du;F.NotLeftSide=Du=O(new F(0,0,1,Yh.kd|Yh.$c|Yh.Zc),1).Ga();var Au;F.NotRightSide=Au=O(new F(0,0,1,Yh.kd|Yh.Rc|Yh.Zc),1).Ga();var Fu;F.NotBottomSide=Fu=O(new F(0,0,1,Yh.kd|Yh.Rc|Yh.$c),1).Ga();var Ou;F.AllSides=Ou=O(new F(0,0,1,Yh.kd|Yh.Rc|Yh.$c|Yh.Zc),1).Ga(),B.prototype.copy=function(){var t=new B;return t.Tb[0]=this.Tb[0],t.Tb[1]=this.Tb[1],t.Tb[2]=this.Tb[2],t.Tb[3]=this.Tb[3],t.Tb[4]=this.Tb[4],t.Tb[5]=this.Tb[5],t},B.prototype.translate=function(t,n){this.Tb[4]+=this.Tb[0]*t+this.Tb[2]*n,this.Tb[5]+=this.Tb[1]*t+this.Tb[3]*n},B.prototype.scale=function(t,n){this.Tb[0]*=t,this.Tb[1]*=t,this.Tb[2]*=n,this.Tb[3]*=n},q.prototype.addColorStop=function(t,n){this.pE.push({offset:t,color:n})},Uh=z.prototype,Uh.arc=function(t,n,i,e,o,r){H(this,t,n,i,e,o,r)},Uh.beginPath=function(){this.path=[]},Uh.bezierCurveTo=function(t,n,i,e,o,r){this.path.push(["C",t,n,i,e,o,r])},Uh.clearRect=function(){},Uh.clip=function(){V(this,"clipPath",this.path,new B)},Uh.closePath=function(){this.path.push(["z"])},Uh.createLinearGradient=function(t,n,i,e){var o=new q("linear");return o.x1=t,o.y1=n,o.x2=i,o.y2=e,o},Uh.createPattern=function(){return null},Uh.createRadialGradient=function(t,n,i,e,o,r){var s=new q("radial");return s.x1=t,s.y1=n,s.r1=i,s.x2=e,s.y2=o,s.r2=r,s},Uh.drawImage=function(t,n,i,e,o,r,s,l,a){var h="";t instanceof HTMLCanvasElement&&(h=t.toDataURL()),t instanceof HTMLImageElement&&(h=t.src),void 0===e&&(r=n,s=i,l=e=t.naturalWidth,a=o=t.naturalHeight),e=e||0,o=o||0,r=r||0,s=s||0,l=l||0,a=a||0,h={x:0,y:0,width:t.naturalWidth,height:t.naturalHeight,href:h,preserveAspectRatio:"xMidYMid slice"},X(e,l)&&X(o,a)||(h.preserveAspectRatio="none");var u="";l/=e,a/=o,0===r&&0===s||(u+=" translate("+r+", "+s+")"),1===l&&1===a||(u+=" scale("+l+", "+a+")"),0===n&&0===i||(u+=" translate("+-n+", "+-i+")"),0===n&&0===i&&e===t.naturalWidth&&o===t.naturalHeight||(t="CLIP"+Yh.nm++,r=E(this,"clipPath",{id:t}),r.appendChild(E(this,"rect",{x:n,y:i,width:e,height:o})),this.hm.appendChild(r),h["clip-path"]="url(#"+t+")"),I(this,"image",h,this.vh,u),this.addElement("image",h)},Uh.fill=function(){V(this,"fill",this.path,this.vh)},Uh.Kg=function(){this.Ip?this.clip():this.fill()},Uh.fillRect=function(t,n,i,e){G(this,"fill",[t,n,i,e],this.vh)},Uh.fillText=function(t,n,i){t=[t,n,i],n=this.textAlign,"left"===n?n="start":"right"===n?n="end":"center"===n&&(n="middle"),n={x:t[1],y:t[2],style:"font: "+this.font,"text-anchor":n},I(this,"fill",n,this.vh),this.addElement("text",n,t[0])},Uh.lineTo=function(t,n){this.path.push(["L",t,n])},Uh.moveTo=function(t,n){this.path.push(["M",t,n])},Uh.quadraticCurveTo=function(t,n,i,e){this.path.push(["Q",t,n,i,e])},Uh.rect=function(t,n,i,e){this.path.push(["M",t,n],["L",t+i,n],["L",t+i,n+e],["L",t,n+e],["z"])},Uh.restore=function(){this.vh=this.stack.pop(),this.path=this.stack.pop();var t=this.stack.pop();this.fillStyle=t.fillStyle,this.font=t.font,this.globalAlpha=t.globalAlpha,this.lineCap=t.lineCap,this.In=t.In,this.lineJoin=t.lineJoin,this.lineWidth=t.lineWidth,this.miterLimit=t.miterLimit,this.shadowBlur=t.shadowBlur,this.shadowColor=t.shadowColor,this.shadowOffsetX=t.shadowOffsetX,this.shadowOffsetY=t.shadowOffsetY,this.strokeStyle=t.strokeStyle,this.textAlign=t.textAlign},Uh.save=function(){this.stack.push({fillStyle:this.fillStyle,font:this.font,globalAlpha:this.globalAlpha,lineCap:this.lineCap,In:this.In,lineJoin:this.lineJoin,lineWidth:this.lineWidth,miterLimit:this.miterLimit,shadowBlur:this.shadowBlur,shadowColor:this.shadowColor,shadowOffsetX:this.shadowOffsetX,shadowOffsetY:this.shadowOffsetY,strokeStyle:this.strokeStyle,textAlign:this.textAlign});for(var t=[],n=0;n<this.path.length;n++)t.push(this.path[n]);this.stack.push(t),this.stack.push(this.vh.copy())},Uh.setTransform=function(t,n,i,e,o,r){1===t&&0===n&&0===i&&1===e&&0===o&&0===r||K(this,t,n,i,e,o,r)},Uh.scale=function(t,n){this.vh.scale(t,n)},Uh.translate=function(t,n){this.vh.translate(t,n)},Uh.transform=function(){},Uh.stroke=function(){V(this,"stroke",this.path,this.vh)},Uh.Dj=function(){this.Ip||this.stroke()},Uh.strokeRect=function(t,n,i,e){G(this,"stroke",[t,n,i,e],this.vh)},Uh.addElement=function(t,n,i){return t=E(this,t,n,i),0<this.xf.length?this.xf[this.xf.length-1].appendChild(t):this.hm.appendChild(t),this.Ex=t},Uh.ab=function(){if(0!==this.shadowOffsetX||0!==this.shadowOffsetY||0!==this.shadowBlur){var t,n,i,e,o,r="SHADOW"+Yh.nm++,s=this.addElement("filter",{id:r,x:"-100%",y:"-100%",width:"300%",height:"300%"},null);t=E(this,"feGaussianBlur",{in:"SourceAlpha",result:"blur",ML:this.shadowBlur/2}),n=E(this,"feFlood",{in:"blur",result:"flood","flood-color":this.shadowColor}),i=E(this,"feComposite",{in:"flood",in2:"blur",operator:"in",result:"comp"}),e=E(this,"feOffset",{in:"comp",result:"offsetBlur",dx:this.shadowOffsetX,dy:this.shadowOffsetY}),o=E(this,"feMerge",{}),o.appendChild(E(this,"feMergeNode",{in:"offsetBlur"})),o.appendChild(E(this,"feMergeNode",{in:"SourceGraphic"})),s.appendChild(t),s.appendChild(n),s.appendChild(i),s.appendChild(e),s.appendChild(o),0<this.xf.length&&this.xf[this.xf.length-1].setAttributeNS(null,"filter","url(#"+r+")")}},Uh.lB=function(t,n,i){this.Xs=t,this.Ys=n,this.Cg=i},Uh.Xn=function(){this.shadowBlur=this.shadowOffsetY=this.shadowOffsetX=0},Uh.Yn=function(){this.shadowOffsetX=this.Xs,this.shadowOffsetY=this.Ys,this.shadowBlur=this.Cg},Uh.hA=function(){return!1},Uh.eA=function(){},Uh.Ee=function(){},Uh.iy=function(){},z.prototype.rotate=function(){},Uh=U.prototype,Uh.toDataURL=function(t,n){return this.Hd.toDataURL(t,n)},Uh.getBoundingClientRect=function(){return this.Hd.getBoundingClientRect()},Uh.focus=function(){return this.Hd.focus()},Uh.addEventListener=function(t,n,i){this.Hd.addEventListener(t,n,i)},Uh.removeEventListener=function(t,n,i){this.Hd.removeEventListener(t,n,i)},Yh.defineProperty(U,{width:"width"},function(){return this.Hd.width},function(t){this.Hd.width=t}),Yh.defineProperty(U,{height:"height"},function(){return this.Hd.height},function(t){this.Hd.height=t}),Yh.u(U,{style:"style"},function(){return this.Hd.style}),J.prototype.iy=function(t){this.ta.uA=t,this.ta.sL=t},Yh.defineProperty(J,{fillStyle:"fillStyle"},function(){return this.ta.fillStyle},function(t){this.Ey!==t&&(this.Ey=this.ta.fillStyle=t)}),Yh.defineProperty(J,{font:"font"},function(){return this.ta.font},function(t){this.Fy!==t&&(this.Fy=this.ta.font=t)}),Yh.defineProperty(J,{globalAlpha:"globalAlpha"},function(){return this.ta.globalAlpha},function(t){this.ta.globalAlpha=t}),Yh.defineProperty(J,{lineCap:"lineCap"},function(){return this.ta.lineCap},function(t){this.ta.lineCap=t}),Yh.defineProperty(J,{In:"lineDashOffset"},function(){return this.ta.In},function(t){this.ta.In=t}),Yh.defineProperty(J,{lineJoin:"lineJoin"},function(){return this.ta.lineJoin},function(t){this.ta.lineJoin=t}),Yh.defineProperty(J,{lineWidth:"lineWidth"},function(){return this.ta.lineWidth},function(t){this.ta.lineWidth=t}),Yh.defineProperty(J,{miterLimit:"miterLimit"},function(){return this.ta.miterLimit},function(t){this.ta.miterLimit=t}),Yh.defineProperty(J,{shadowBlur:"shadowBlur"},function(){return this.ta.shadowBlur},function(t){this.ta.shadowBlur=t}),Yh.defineProperty(J,{shadowColor:"shadowColor"},function(){return this.ta.shadowColor},function(t){this.ta.shadowColor=t}),Yh.defineProperty(J,{shadowOffsetX:"shadowOffsetX"},function(){return this.ta.shadowOffsetX},function(t){this.ta.shadowOffsetX=t}),Yh.defineProperty(J,{shadowOffsetY:"shadowOffsetY"},function(){return this.ta.shadowOffsetY},function(t){this.ta.shadowOffsetY=t}),Yh.defineProperty(J,{strokeStyle:"strokeStyle"},function(){return this.ta.strokeStyle},function(t){this.Gy!==t&&(this.Gy=this.ta.strokeStyle=t)}),Yh.defineProperty(J,{textAlign:"textAlign"},function(){return this.ta.textAlign},function(t){this.ta.textAlign=t}),Yh.defineProperty(J,{uA:"imageSmoothingEnabled"},function(){return this.ta.uA},function(t){this.ta.uA=t}),Uh=J.prototype,Uh.arc=function(t,n,i,e,o,r){this.ta.arc(t,n,i,e,o,r)},Uh.beginPath=function(){this.ta.beginPath()},Uh.bezierCurveTo=function(t,n,i,e,o,r){this.ta.bezierCurveTo(t,n,i,e,o,r)},Uh.clearRect=function(t,n,i,e){this.ta.clearRect(t,n,i,e)},Uh.clip=function(){this.ta.clip()},Uh.closePath=function(){this.ta.closePath()},Uh.createLinearGradient=function(t,n,i,e){return this.ta.createLinearGradient(t,n,i,e)},Uh.createPattern=function(t,n){return this.ta.createPattern(t,n)},Uh.createRadialGradient=function(t,n,i,e,o,r){return this.ta.createRadialGradient(t,n,i,e,o,r)},Uh.drawImage=function(t,n,i,e,o,r,s,l,a){void 0===e?this.ta.drawImage(t,n,i):this.ta.drawImage(t,n,i,e,o,r,s,l,a)},Uh.fill=function(){this.ta.fill()},Uh.fillRect=function(t,n,i,e){this.ta.fillRect(t,n,i,e)},Uh.fillText=function(t,n,i){this.ta.fillText(t,n,i)},Uh.getImageData=function(t,n,i,e){return this.ta.getImageData(t,n,i,e)},Uh.lineTo=function(t,n){this.ta.lineTo(t,n)},Uh.measureText=function(t){return this.ta.measureText(t)},Uh.moveTo=function(t,n){this.ta.moveTo(t,n)},Uh.quadraticCurveTo=function(t,n,i,e){this.ta.quadraticCurveTo(t,n,i,e)},Uh.rect=function(t,n,i,e){this.ta.rect(t,n,i,e)},Uh.restore=function(){this.ta.restore()},J.prototype.rotate=function(t){this.ta.rotate(t)},Uh=J.prototype,Uh.save=function(){this.ta.save()},Uh.setTransform=function(t,n,i,e,o,r){this.ta.setTransform(t,n,i,e,o,r)},Uh.scale=function(t,n){this.ta.scale(t,n)},Uh.stroke=function(){this.ta.stroke()},Uh.transform=function(t,n,i,e,o,r){1===t&&0===n&&0===i&&1===e&&0===o&&0===r||this.ta.transform(t,n,i,e,o,r)},Uh.translate=function(t,n){this.ta.translate(t,n)},Uh.Kg=function(t){if(t instanceof mo&&t.type===xc){var n=t.ro;t=t.Jy,t>n?(this.scale(n/t,1),this.translate((t-n)/2,0)):n>t&&(this.scale(1,t/n),this.translate(0,(n-t)/2)),this.Sq?this.clip():this.fill(),t>n?(this.translate(-(t-n)/2,0),this.scale(1/(n/t),1)):n>t&&(this.translate(0,-(n-t)/2),this.scale(1,1/(t/n)))}else this.Sq?this.clip():this.fill()},Uh.Dj=function(){this.Sq||this.stroke()},Yh.defineProperty(J,{Ip:"clipInsteadOfFill"},function(){return this.Sq},function(t){this.Sq=t}),Uh=J.prototype,Uh.lB=function(t,n,i){this.Xs=t,this.Ys=n,this.Cg=i},Uh.Xn=function(){this.shadowBlur=this.shadowOffsetY=this.shadowOffsetX=0},Uh.Yn=function(){this.shadowOffsetX=this.Xs,this.shadowOffsetY=this.Ys,this.shadowBlur=this.Cg},Uh.hA=function(t,n){var i=this.ta;if(void 0!==i.setLineDash)i.setLineDash(t),i.lineDashOffset=n;else if(void 0!==i.webkitLineDash)i.webkitLineDash=t,i.webkitLineDashOffset=n;else{if(void 0===i.mozDash)return!1;i.mozDash=t,i.mozDashOffset=n}return!0},Uh.eA=function(){var t=this.ta;void 0!==t.setLineDash?(t.setLineDash(Yh.ho),t.lineDashOffset=0):void 0!==t.webkitLineDash?(t.webkitLineDash=Yh.ho,t.webkitLineDashOffset=0):void 0!==t.mozDash&&(t.mozDash=null,t.mozDashOffset=0)},Uh.Ee=function(t){t&&(this.Fy=""),this.Ey=this.Gy=""};var Bu=(Math.sqrt(2)-1)/3*4,qu=new x(0,0).Ga(),zu=new P(0,0,0,0).Ga(),Eu=new D(0,0,0,0).Ga(),Iu=new D(2,2,2,2).Ga(),Ru=new x(6,6).Ga(),Gu=new x(-1/0,-1/0).Ga(),Vu=new x(1/0,1/0).Ga(),Hu=new M(0,0).Ga(),Ku=new M(1,1).Ga(),Uu=new M(6,6).Ga(),Ju=new M(8,8).Ga(),Yu=new M(10,10).Ga(),Wu=new M(1/0,1/0).Ga(),Xu=new x(NaN,NaN).Ga(),$u=new M(NaN,NaN).Ga(),Qu=new P(NaN,NaN,NaN,NaN).Ga(),Zu=new F(.156,.156).Ga(),_u=new F(.844,.844).Ga(),tf=new o,nf=new o,ef=null;Yh.ga("Geometry",mt),Yh.ki(mt),mt.prototype.copy=function(){var t=new mt;t.ma=this.ma,t.xc=this.xc,t.Gc=this.Gc,t.yb=this.yb,t.Gb=this.Gb;for(var n=this.Nj.n,i=n.length,e=t.Nj,o=0;o<i;o++){var r=n[o].copy();e.add(r)}return t.zv=this.zv,t.jv.assign(this.jv),t.cb=this.cb,t.ko=this.ko,t.Hq=this.Hq,t.Iq=this.Iq,t.ei=this.ei.S(),t.fi=this.fi.S(),t.Qo=this.Qo,t.Oo=this.Oo,t.Di=this.Di,t};var of;mt.Line=of=Yh.p(mt,"Line",0);var rf;mt.Rectangle=rf=Yh.p(mt,"Rectangle",1);var sf;mt.Ellipse=sf=Yh.p(mt,"Ellipse",2);var lf;mt.Path=lf=Yh.p(mt,"Path",3),mt.prototype.Ga=function(){return this.freeze(),Object.freeze(this),this},mt.prototype.freeze=function(){this.Q=!0;var t=this.ec;t.freeze();for(var t=t.n,n=t.length,i=0;i<n;i++)t[i].freeze();return this},mt.prototype.Ra=function(){Object.isFrozen(this)&&Yh.k("cannot thaw constant: "+this),this.Q=!1;var t=this.ec;t.Ra();for(var t=t.n,n=t.length,i=0;i<n;i++)t[i].Ra();return this},mt.prototype.equalsApprox=mt.prototype.Ic=function(t){if(!(t instanceof mt))return!1;if(this.type!==t.type)return this.type===of&&t.type===lf?bt(this,t):t.type===of&&this.type===lf&&bt(t,this);if(this.type===lf){var n=this.ec.n;t=t.ec.n;var i=n.length;if(i!==t.length)return!1;for(var e=0;e<i;e++)if(!n[e].Ic(t[e]))return!1;return!0}return W(this.ha,t.ha)&&W(this.fa,t.fa)&&W(this.C,t.C)&&W(this.D,t.D)};var af;mt.stringify=af=function(t){return t.toString()},mt.prototype.hc=function(t){t.De===mt?this.type=t:Yh.Ej(this,t)},mt.prototype.toString=function(t){switch(void 0===t&&(t=-1),this.type){case of:return 0>t?"M"+this.ha.toString()+" "+this.fa.toString()+"L"+this.C.toString()+" "+this.D.toString():"M"+this.ha.toFixed(t)+" "+this.fa.toFixed(t)+"L"+this.C.toFixed(t)+" "+this.D.toFixed(t);case rf:var n=new P(this.ha,this.fa,0,0);return n.xG(this.C,this.D,0,0),0>t?"M"+n.x.toString()+" "+n.y.toString()+"H"+n.right.toString()+"V"+n.bottom.toString()+"H"+n.left.toString()+"z":"M"+n.x.toFixed(t)+" "+n.y.toFixed(t)+"H"+n.right.toFixed(t)+"V"+n.bottom.toFixed(t)+"H"+n.left.toFixed(t)+"z";case sf:if(n=new P(this.ha,this.fa,0,0),n.xG(this.C,this.D,0,0),0>t){var i=n.left.toString()+" "+(n.y+n.height/2).toString(),e=n.right.toString()+" "+(n.y+n.height/2).toString();return"M"+i+"A"+(n.width/2).toString()+" "+(n.height/2).toString()+" 0 0 1 "+e+"A"+(n.width/2).toString()+" "+(n.height/2).toString()+" 0 0 1 "+i}return i=n.left.toFixed(t)+" "+(n.y+n.height/2).toFixed(t),e=n.right.toFixed(t)+" "+(n.y+n.height/2).toFixed(t),"M"+i+"A"+(n.width/2).toFixed(t)+" "+(n.height/2).toFixed(t)+" 0 0 1 "+e+"A"+(n.width/2).toFixed(t)+" "+(n.height/2).toFixed(t)+" 0 0 1 "+i;case lf:for(var n="",i=this.ec.n,e=i.length,o=0;o<e;o++){var r=i[o];0<o&&(n+=" x "),r.du&&(n+="F "),n+=r.toString(t)}return n;default:return this.type.toString()}},mt.fillPath=function(t){"string"!=typeof t&&Yh.yd(t,"string",mt,"fillPath:str"),t=t.split(/[Xx]/);for(var n=t.length,i="",e=0;e<n;e++)var o=t[e],i=null!==o.match(/[Ff]/)?0===e?i+o:i+"X"+(" "===o[0]?"":" ")+o:i+(0===e?"":"X ")+"F"+(" "===o[0]?"":" ")+o;return i};var hf;mt.parse=hf=function(t,n){function i(){return h>=y-1||null!==a[h+1].match(/[A-Za-z]/)}function e(){return h++,a[h]}function o(){var t=new x(parseFloat(e()),parseFloat(e()));return u===u.toLowerCase()&&(t.x=p.x+t.x,t.y=p.y+t.y),t}function r(){return p=o()}function s(){return d=o()}function l(){return"c"!==f.toLowerCase()&&"s"!==f.toLowerCase()?p:new x(2*p.x-d.x,2*p.y-d.y)}void 0===n&&(n=!1),"string"!=typeof t&&Yh.yd(t,"string",mt,"parse:str"),t=t.replace(/,/gm," "),t=t.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),t=t.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),t=t.replace(/([UuBbMmZzLlHhVvCcSsQqTtAaFf])([^\s])/gm,"$1 $2"),t=t.replace(/([^\s])([UuBbMmZzLlHhVvCcSsQqTtAaFf])/gm,"$1 $2"),t=t.replace(/([0-9])([+\-])/gm,"$1 $2"),t=t.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),t=t.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),t=t.replace(/[\s\r\t\n]+/gm," "),t=t.replace(/^\s+|\s+$/g,"");for(var a=t.split(" "),h=-1,u="",f="",c=new x(0,0),d=new x(0,0),p=new x(0,0),y=a.length,v=Yh.s(),g=!1,m=!1,b=!0,w=null;!(h>=y-1);)if(f=u,""!==(u=e()))switch(u.toUpperCase()){case"X":b=!0,m=g=!1;break;case"M":for(w=r(),null===v.Vb||!0===b?(Zr(v,w.x,w.y,g,!1,!m),b=!1):v.moveTo(w.x,w.y),c=p;!i();)w=r(),v.lineTo(w.x,w.y);break;case"L":for(;!i();)w=r(),v.lineTo(w.x,w.y);break;case"H":for(;!i();)p=w=new x((u===u.toLowerCase()?p.x:0)+parseFloat(e()),p.y),v.lineTo(p.x,p.y);break;case"V":for(;!i();)p=w=new x(p.x,(u===u.toLowerCase()?p.y:0)+parseFloat(e())),v.lineTo(p.x,p.y);break;case"C":for(;!i();){var k=o(),M=s(),w=r();ns(v,k.x,k.y,M.x,M.y,w.x,w.y)}break;case"S":for(;!i();)k=l(),M=s(),w=r(),ns(v,k.x,k.y,M.x,M.y,w.x,w.y);break;case"Q":for(;!i();)M=s(),w=r(),is(v,M.x,M.y,w.x,w.y);break;case"T":for(;!i();)d=M=l(),w=r(),is(v,M.x,M.y,w.x,w.y);break;case"B":for(;!i();){var w=parseFloat(e()),k=parseFloat(e()),M=parseFloat(e()),P=parseFloat(e()),T=parseFloat(e()),S=T,C=!1;i()||(S=parseFloat(e()),i()||(C=0!==parseFloat(e()))),u===u.toLowerCase()&&(M+=p.x,P+=p.y),v.arcTo(w,k,M,P,T,S,C)}break;case"A":for(;!i();)k=Math.abs(parseFloat(e())),M=Math.abs(parseFloat(e())),P=parseFloat(e()),T=!!parseFloat(e()),S=!!parseFloat(e()),w=r(),es(v,k,M,P,T,S,w.x,w.y);break;case"Z":w=v.o.ec.n[v.o.ec.length-1],_r(v),p=c;break;case"F":for(w="",k=1;a[h+k];)if(null!==a[h+k].match(/[Uu]/))k++;else{if(null!==a[h+k].match(/[A-Za-z]/)){w=a[h+k];break}k++}w.match(/[Mm]/)?g=!0:ts(v);break;case"U":for(w="",k=1;a[h+k];)if(null!==a[h+k].match(/[Ff]/))k++;else{if(null!==a[h+k].match(/[A-Za-z]/)){w=a[h+k];break}k++}w.match(/[Mm]/)?m=!0:v.ab(!1)}if(c=v.o,Yh.q(v),n)for(v=c.ec.i;v.next();)w=v.value,w.du=!0;return c},mt.prototype.zx=function(){if(this.cb||this.zv!==this.ec.F)return!0;for(var t=this.ec.n,n=t.length,i=0;i<n;i++)if(t[i].zx())return!0;return!1},mt.prototype.py=function(){this.cb=!1,this.Hq=this.ko=null,this.Iq=NaN,this.zv=this.ec.F;for(var t=this.ec.n,n=t.length,i=0;i<n;i++)t[i].py()},mt.prototype.th=function(){var t=this.jv;t.Ra(),isNaN(this.Qo)||isNaN(this.Oo)?t.m(0,0,0,0):t.m(0,0,this.Qo,this.Oo),wt(this,t,!1),L(t,0,0,0,0),t.freeze()},mt.prototype.computeBoundsWithoutOrigin=mt.prototype.vH=function(){var t=new P;return wt(this,t,!0),t},mt.prototype.normalize=mt.prototype.normalize=function(){this.Q&&Yh.la(this);var t=this.vH();return this.offset(-t.x,-t.y),new x(-t.x,-t.y)},mt.prototype.offset=mt.prototype.offset=function(t,n){return this.Q&&Yh.la(this),this.transform(1,0,0,1,t,n),this},mt.prototype.scale=mt.prototype.scale=function(t,n){return this.Q&&Yh.la(this),this.transform(t,0,0,n,0,0),this},mt.prototype.rotate=mt.prototype.rotate=function(t,n,i){this.Q&&Yh.la(this),void 0===n&&(n=0),void 0===i&&(i=0);var e=Yh.Gf();return e.reset(),e.rotate(t,n,i),this.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),Yh.ue(e),this},mt.prototype.transform=mt.prototype.transform=function(t,n,i,e,o,r){var s=0,l=0;switch(this.type){case of:case rf:case sf:s=this.xc,l=this.Gc,this.xc=s*t+l*i+o,this.Gc=s*n+l*e+r,s=this.yb,l=this.Gb,this.yb=s*t+l*i+o,this.Gb=s*n+l*e+r;break;case lf:for(var a=this.ec.n,h=a.length,u=0;u<h;u++){var f=a[u],s=f.ha,l=f.fa;f.ha=s*t+l*i+o,f.fa=s*n+l*e+r;for(var f=f.vb.n,c=f.length,d=0;d<c;d++){var p=f[d];switch(p.type){case ff:case uf:s=p.C,l=p.D,p.C=s*t+l*i+o,p.D=s*n+l*e+r;break;case cf:s=p.sc,l=p.Pc,p.sc=s*t+l*i+o,p.Pc=s*n+l*e+r,s=p.Bh,l=p.Ch,p.Bh=s*t+l*i+o,p.Ch=s*n+l*e+r,s=p.C,l=p.D,p.C=s*t+l*i+o,p.D=s*n+l*e+r;break;case df:s=p.sc,l=p.Pc,p.sc=s*t+l*i+o,p.Pc=s*n+l*e+r,s=p.C,l=p.D,p.C=s*t+l*i+o,p.D=s*n+l*e+r;break;case pf:s=p.ka,l=p.ra,p.ka=s*t+l*i+o,p.ra=s*n+l*e+r,0!==n&&(s=180*Math.atan2(n,t)/Math.PI,0>s&&(s+=360),p.ye+=s),0>t&&(p.ye=180-p.ye,p.pf=-p.pf),0>e&&(p.ye=-p.ye,p.pf=-p.pf),p.radiusX*=Math.sqrt(t*t+i*i),void 0!==p.radiusY&&(p.radiusY*=Math.sqrt(n*n+e*e));break;case yf:s=p.C,l=p.D,p.C=s*t+l*i+o,p.D=s*n+l*e+r,0!==n&&(s=180*Math.atan2(n,t)/Math.PI,0>s&&(s+=360),p.Gj+=s),0>t&&(p.Gj=180-p.Gj,p.Yl=!p.Yl),0>e&&(p.Gj=-p.Gj,p.Yl=!p.Yl),p.radiusX*=Math.sqrt(t*t+i*i),p.radiusY*=Math.sqrt(n*n+e*e);break;default:Yh.k("Unknown Segment type: "+p.type)}}}}return this.cb=!0,this},mt.prototype.Ha=function(t,n,i,e){var o=t.x,r=t.y,s=this.eb.x-20;t=t.y;for(var l=0,a=0,h=0,u=0,f=0,c=0,d=this.ec.n,p=d.length,y=0;y<p;y++){var v=d[y];if(v.du){if(i&&v.Ha(o,r,n))return!0;for(var g=v.vb,a=v.ha,h=v.fa,m=a,b=h,x=g.n,w=0;w<=g.length;w++){var k,M;switch(w!==g.length?(k=x[w],M=k.type,f=k.C,c=k.D):(M=ff,f=m,c=b),M){case uf:if(u=kt(o,r,s,t,a,h,m,b),isNaN(u))return!0;l+=u,m=f,b=c;break;case ff:if(u=kt(o,r,s,t,a,h,f,c),isNaN(u))return!0;l+=u;break;case cf:u=rt(a,h,k.sc,k.Pc,k.Bh,k.Ch,f,c,s,t,o,r,.5),l+=u;break;case df:u=rt(a,h,(a+2*k.sc)/3,(h+2*k.Pc)/3,(2*k.sc+f)/3,(2*k.Pc+c)/3,f,c,s,t,o,r,.5),l+=u;break;case pf:case yf:M=k.type===pf?Nt(k,v):jt(k,v,a,h);var P=M.length;if(0===P){if(u=kt(o,r,s,t,a,h,k.ka,k.ra),isNaN(u))return!0;l+=u;break}for(var T=null,S=0;S<P;S++){if(T=M[S],0===S){if(u=kt(o,r,s,t,a,h,T[0],T[1]),isNaN(u))return!0;l+=u}u=rt(T[0],T[1],T[2],T[3],T[4],T[5],T[6],T[7],s,t,o,r,.5),l+=u}null!==T&&(f=T[6],c=T[7]);break;default:Yh.k("Unknown Segment type: "+k.type)}a=f,h=c}if(0!==l)return!0;l=0}else if(v.Ha(o,r,e?n:n+2))return!0}return 0!==l},mt.prototype.getPointAlongPath=mt.prototype.aI=function(t,n){if(0>t?t=0:1<t&&(t=1),void 0===n&&(n=new x),this.type===of)return n.m(this.ha+t*(this.C-this.ha),this.fa+t*(this.D-this.fa)),n;for(var i=this.px,e=this.Ot,o=i.length,r=this.Pt*t,s=0,l=0;l<o;l++)for(var a=e[l],h=a.length,u=0;u<h;u++){var f=a[u];if(s+f>=r)return e=(r-s)/f,i=i[l],l=i[2*u],o=i[2*u+1],n.m(l+(i[2*u+2]-l)*e,o+(i[2*u+3]-o)*e),n;s+=f}return n.m(NaN,NaN),n},mt.prototype.getAngleAlongPath=mt.prototype.RE=function(t){0>t?t=0:1<t&&(t=1);var n=0;if(this.type===of)return n=180*Math.atan2(this.D-this.fa,this.C-this.ha)/Math.PI;for(var n=this.px,i=this.Ot,e=n.length,o=this.Pt*t,r=0,s=0;s<e;s++){var l=i[s],a=l.length;for(t=0;t<a;t++){var h=l[t];if(r+h>=o)return n=n[s],n=180*Math.atan2(n[2*t+3]-n[2*t+1],n[2*t+2]-n[2*t])/Math.PI;r+=h}}return NaN},mt.prototype.getFractionForPoint=mt.prototype.XH=function(t){if(this.type===of){var n=this.ha,i=this.fa,e=this.C,o=this.D;if(n!==e||i!==o){var r=t.x;t=t.y;var s=0,l=0;return n===e?(i<o?(s=i,l=o):(s=o,l=i),t<=s?s===i?0:1:t>=l?l===i?0:1:Math.abs(t-i)/(l-s)):i===o?(n<e?(s=n,l=e):(s=e,l=n),r<=s?s===n?0:1:r>=l?l===n?0:1:Math.abs(r-n)/(l-s)):((r-n)*(r-n)+(t-i)*(t-i))/((e-n)*(e-n)+(o-i)*(o-i))}}else{if(this.type!==rf){for(var o=this.px,s=this.Ot,l=this.Pt,a=Yh.K(),i=1/0,n=e=0,r=o.length,h=m=0,u=0;u<r;u++)for(var f=o[u],c=s[u],d=f.length,p=0;p<d;p+=2){var y=f[p],v=f[p+1];if(0!==p){st(m,h,y,v,t.x,t.y,a);var g=(a.x-t.x)*(a.x-t.x)+(a.y-t.y)*(a.y-t.y);g<i&&(i=g,e=n,e+=Math.sqrt((a.x-m)*(a.x-m)+(a.y-h)*(a.y-h))),n+=c[(p-2)/2]}m=y,h=v}return Yh.v(a),t=e/l,0>t?0:1<t?1:t}if(n=this.ha,i=this.fa,e=this.C,o=this.D,n!==e||i!==o){var s=e-n,l=o-i,a=2*s+2*l,r=t.x;t=t.y,r=Math.min(Math.max(r,n),e),t=Math.min(Math.max(t,i),o);var n=Math.abs(r-n),e=Math.abs(r-e),i=Math.abs(t-i),o=Math.abs(t-o),m=Math.min(n,e,i,o);if(m===i)return r/a;if(m===e)return(s+t)/a;if(m===o)return(2*s+l-r)/a;if(m===n)return(2*s+2*l-t)/a}}return 0},Yh.u(mt,{px:null},function(){return Pt(this),this.ko}),Yh.u(mt,{Ot:null},function(){return Pt(this),this.Hq}),Yh.u(mt,{Pt:null},function(){var t=this.Iq;if(isNaN(t)){if(this.type===of)var t=Math.abs(this.C-this.ha),n=Math.abs(this.D-this.fa),t=Math.sqrt(t*t+n*n);else if(this.type===rf)t=Math.abs(this.C-this.ha),n=Math.abs(this.D-this.fa),t=2*t+2*n;else for(var n=this.Ot,i=n.length,e=t=0;e<i;e++)for(var o=n[e],r=o.length,s=0;s<r;s++)t+=o[s];this.Iq=t}return t}),Yh.defineProperty(mt,{type:"type"},function(){return this.ma},function(t){this.ma!==t&&(this.Q&&Yh.la(this,t),this.ma=t,this.cb=!0)}),Yh.defineProperty(mt,{ha:"startX"},function(){return this.xc},function(t){this.xc!==t&&(this.Q&&Yh.la(this,t),this.xc=t,this.cb=!0)}),Yh.defineProperty(mt,{fa:"startY"},function(){return this.Gc},function(t){this.Gc!==t&&(this.Q&&Yh.la(this,t),this.Gc=t,this.cb=!0)}),Yh.defineProperty(mt,{C:"endX"},function(){return this.yb},function(t){this.yb!==t&&(this.Q&&Yh.la(this,t),this.yb=t,this.cb=!0)}),Yh.defineProperty(mt,{D:"endY"},function(){return this.Gb},function(t){this.Gb!==t&&(this.Q&&Yh.la(this,t),this.Gb=t,this.cb=!0)}),Yh.defineProperty(mt,{ec:"figures"},function(){return this.Nj},function(t){this.Nj!==t&&(this.Q&&Yh.la(this,t),this.Nj=t,this.cb=!0)}),mt.prototype.add=mt.prototype.add=function(t){return this.Nj.add(t),this},mt.prototype.setSpots=function(t,n,i,e,o,r,s,l){return this.Q&&Yh.la(this),this.ei=new F(t,n,o,r).freeze(),this.fi=new F(i,e,s,l).freeze(),this},Yh.defineProperty(mt,{A:"spot1"},function(){return this.ei},function(t){this.Q&&Yh.la(this,t),this.ei=t.S()}),Yh.defineProperty(mt,{B:"spot2"},function(){return this.fi},function(t){this.Q&&Yh.la(this,t),this.fi=t.S()}),Yh.defineProperty(mt,{Zd:"defaultStretch"},function(){return this.Di},function(t){this.Q&&Yh.la(this,t),this.Di=t}),Yh.u(mt,{eb:"bounds"},function(){return this.zx()&&(this.py(),this.th()),this.jv}),Yh.ga("PathFigure",St),Yh.ki(St),St.prototype.copy=function(){var t=new St;t.Bm=this.Bm,t.Ro=this.Ro,t.xc=this.xc,t.Gc=this.Gc;for(var n=this.mp.n,i=n.length,e=t.mp,o=0;o<i;o++){var r=n[o].copy();e.add(r)}return t.yw=this.yw,t.cb=this.cb,t},St.prototype.equalsApprox=St.prototype.Ic=function(t){if(!(t instanceof St&&W(this.ha,t.ha)&&W(this.fa,t.fa)))return!1;var n=this.vb.n;t=t.vb.n;var i=n.length;if(i!==t.length)return!1;for(var e=0;e<i;e++)if(!n[e].Ic(t[e]))return!1;return!0},Uh=St.prototype,Uh.toString=function(t){void 0===t&&(t=-1);for(var n=0>t?"M"+this.ha.toString()+" "+this.fa.toString():"M"+this.ha.toFixed(t)+" "+this.fa.toFixed(t),i=this.vb.n,e=i.length,o=0;o<e;o++)n+=" "+i[o].toString(t);return n},Uh.freeze=function(){this.Q=!0;var t=this.vb;t.freeze();for(var n=t.n,t=t.length,i=0;i<t;i++)n[i].freeze();return this},Uh.Ra=function(){this.Q=!1;var t=this.vb;t.Ra();for(var t=t.n,n=t.length,i=0;i<n;i++)t[i].Ra();return this},Uh.zx=function(){if(this.cb)return!0;var t=this.vb;if(this.yw!==t.F)return!0;for(var t=t.n,n=t.length,i=0;i<n;i++)if(t[i].cb)return!0;return!1},Uh.py=function(){this.cb=!1;var t=this.vb;this.yw=t.F;for(var t=t.n,n=t.length,i=0;i<n;i++){var e=t[i];e.cb=!1,e.lg=null}},Yh.defineProperty(St,{du:"isFilled"},function(){return this.Bm},function(t){this.Q&&Yh.la(this,t),this.Bm=t}),Yh.defineProperty(St,{am:"isShadowed"},function(){return this.Ro},function(t){this.Q&&Yh.la(this,t),this.Ro=t}),Yh.defineProperty(St,{ha:"startX"},function(){return this.xc},function(t){this.Q&&Yh.la(this,t),this.xc=t,this.cb=!0}),Yh.defineProperty(St,{fa:"startY"},function(){return this.Gc},function(t){this.Q&&Yh.la(this,t),this.Gc=t,this.cb=!0}),Yh.defineProperty(St,{vb:"segments"},function(){return this.mp},function(t){this.Q&&Yh.la(this,t),this.mp=t,this.cb=!0}),St.prototype.add=St.prototype.add=function(t){return this.mp.add(t),this},St.prototype.Ha=function(t,n,i){for(var e=this.ha,o=this.fa,r=e,s=o,l=this.vb.n,a=l.length,h=0;h<a;h++){var u=l[h];switch(u.type){case uf:r=u.C,s=u.D,e=u.C,o=u.D;break;case ff:if($(e,o,u.C,u.D,i,t,n))return!0;e=u.C,o=u.D;break;case cf:if(Q(e,o,u.sc,u.Pc,u.Bh,u.Ch,u.C,u.D,.5,t,n,i))return!0;e=u.C,o=u.D;break;case df:if(nt(e,o,u.sc,u.Pc,u.C,u.D,.5,t,n,i))return!0;e=u.C,o=u.D;break;case pf:case yf:var f=u.type===pf?Nt(u,this):jt(u,this,e,o),c=f.length;if(0===c){if($(e,o,u.ka,u.ra,i,t,n))return!0;e=u.ka,o=u.ra;break}for(var d=null,p=0;p<c;p++)if(d=f[p],0===p&&$(e,o,d[0],d[1],i,t,n)||Q(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],.5,t,n,i))return!0;null!==d&&(e=d[6],o=d[7]);break;default:Yh.k("Unknown Segment type: "+u.type)}if(u.wx&&(e!==r||o!==s)&&$(e,o,r,s,i,t,n))return!0}return!1},Yh.ga("PathSegment",Ct),Yh.ki(Ct),Ct.prototype.copy=function(){var t=new Ct;return t.ma=this.ma,t.yb=this.yb,t.Gb=this.Gb,t.Bd=this.Bd,t.We=this.We,t.nh=this.nh,t.Bg=this.Bg,t.Wo=this.Wo,t.po=this.po,t.Qh=this.Qh,t.cb=this.cb,t},Ct.prototype.equalsApprox=Ct.prototype.Ic=function(t){if(!(t instanceof Ct)||this.type!==t.type||this.wx!==t.wx)return!1;switch(this.type){case uf:case ff:return W(this.C,t.C)&&W(this.D,t.D);case cf:return W(this.C,t.C)&&W(this.D,t.D)&&W(this.sc,t.sc)&&W(this.Pc,t.Pc)&&W(this.Bh,t.Bh)&&W(this.Ch,t.Ch);case df:return W(this.C,t.C)&&W(this.D,t.D)&&W(this.sc,t.sc)&&W(this.Pc,t.Pc);case pf:return W(this.ye,t.ye)&&W(this.pf,t.pf)&&W(this.ka,t.ka)&&W(this.ra,t.ra)&&W(this.radiusX,t.radiusX)&&W(this.radiusY,t.radiusY);case yf:return this.Yl===t.Yl&&this.Ax===t.Ax&&W(this.Gj,t.Gj)&&W(this.C,t.C)&&W(this.D,t.D)&&W(this.radiusX,t.radiusX)&&W(this.radiusY,t.radiusY);default:return!1}},Ct.prototype.hc=function(t){t.De===Ct?this.type=t:Yh.Ej(this,t)},Ct.prototype.toString=function(t){void 0===t&&(t=-1);var n="";switch(this.type){case uf:n=0>t?"M"+this.C.toString()+" "+this.D.toString():"M"+this.C.toFixed(t)+" "+this.D.toFixed(t);break;case ff:n=0>t?"L"+this.C.toString()+" "+this.D.toString():"L"+this.C.toFixed(t)+" "+this.D.toFixed(t);break;case cf:n=0>t?"C"+this.sc.toString()+" "+this.Pc.toString()+" "+this.Bh.toString()+" "+this.Ch.toString()+" "+this.C.toString()+" "+this.D.toString():"C"+this.sc.toFixed(t)+" "+this.Pc.toFixed(t)+" "+this.Bh.toFixed(t)+" "+this.Ch.toFixed(t)+" "+this.C.toFixed(t)+" "+this.D.toFixed(t);break;case df:n=0>t?"Q"+this.sc.toString()+" "+this.Pc.toString()+" "+this.C.toString()+" "+this.D.toString():"Q"+this.sc.toFixed(t)+" "+this.Pc.toFixed(t)+" "+this.C.toFixed(t)+" "+this.D.toFixed(t);break;case pf:n=0>t?"B"+this.ye.toString()+" "+this.pf.toString()+" "+this.ka.toString()+" "+this.ra.toString()+" "+this.radiusX:"B"+this.ye.toFixed(t)+" "+this.pf.toFixed(t)+" "+this.ka.toFixed(t)+" "+this.ra.toFixed(t)+" "+this.radiusX;break;case yf:n=0>t?"A"+this.radiusX.toString()+" "+this.radiusY.toString()+" "+this.Gj.toString()+" "+(this.Ax?1:0)+" "+(this.Yl?1:0)+" "+this.C.toString()+" "+this.D.toString():"A"+this.radiusX.toFixed(t)+" "+this.radiusY.toFixed(t)+" "+this.Gj.toFixed(t)+" "+(this.Ax?1:0)+" "+(this.Yl?1:0)+" "+this.C.toFixed(t)+" "+this.D.toFixed(t);break;default:n=this.type.toString()}return n+(this.Qh?"z":"")};var uf;Ct.Move=uf=Yh.p(Ct,"Move",0);var ff;Ct.Line=ff=Yh.p(Ct,"Line",1);var cf;Ct.Bezier=cf=Yh.p(Ct,"Bezier",2);var df;Ct.QuadraticBezier=df=Yh.p(Ct,"QuadraticBezier",3);var pf;Ct.Arc=pf=Yh.p(Ct,"Arc",4);var yf;Ct.SvgArc=yf=Yh.p(Ct,"SvgArc",4),Ct.prototype.freeze=function(){return this.Q=!0,this},Ct.prototype.Ra=function(){return this.Q=!1,this},Ct.prototype.close=Ct.prototype.close=function(){return this.Qh=!0,this},Yh.defineProperty(Ct,{wx:"isClosed"},function(){return this.Qh},function(t){this.Qh!==t&&(this.Qh=t,this.cb=!0)}),Yh.defineProperty(Ct,{type:"type"},function(){return this.ma},function(t){this.Q&&Yh.la(this,t),this.ma=t,this.cb=!0}),Yh.defineProperty(Ct,{C:"endX"},function(){return this.yb},function(t){this.Q&&Yh.la(this,t),this.yb=t,this.cb=!0}),Yh.defineProperty(Ct,{D:"endY"},function(){return this.Gb},function(t){this.Q&&Yh.la(this,t),this.Gb=t,this.cb=!0}),Yh.defineProperty(Ct,{sc:"point1X"},function(){return this.Bd},function(t){this.Q&&Yh.la(this,t),this.Bd=t,this.cb=!0}),Yh.defineProperty(Ct,{Pc:"point1Y"},function(){return this.We},function(t){this.Q&&Yh.la(this,t),this.We=t,this.cb=!0}),Yh.defineProperty(Ct,{Bh:"point2X"},function(){return this.nh},function(t){this.Q&&Yh.la(this,t),this.nh=t,this.cb=!0}),Yh.defineProperty(Ct,{Ch:"point2Y"},function(){return this.Bg},function(t){this.Q&&Yh.la(this,t),this.Bg=t,this.cb=!0}),Yh.defineProperty(Ct,{ka:"centerX"},function(){return this.Bd},function(t){this.Q&&Yh.la(this,t),this.Bd=t,this.cb=!0}),Yh.defineProperty(Ct,{ra:"centerY"},function(){return this.We},function(t){this.Q&&Yh.la(this,t),this.We=t,this.cb=!0}),Yh.defineProperty(Ct,{radiusX:"radiusX"},function(){return this.nh},function(t){0>t&&Yh.Ea(t,">= zero",Ct,"radiusX"),this.Q&&Yh.la(this,t),this.nh=t,this.cb=!0}),Yh.defineProperty(Ct,{radiusY:"radiusY"},function(){return this.Bg},function(t){0>t&&Yh.Ea(t,">= zero",Ct,"radiusY"),this.Q&&Yh.la(this,t),this.Bg=t,this.cb=!0}),Yh.defineProperty(Ct,{ye:"startAngle"},function(){return this.yb},function(t){this.yb!==t&&(this.Q&&Yh.la(this,t),t%=360,0>t&&(t+=360),this.yb=t,this.cb=!0)}),Yh.defineProperty(Ct,{pf:"sweepAngle"},function(){return this.Gb},function(t){this.Q&&Yh.la(this,t),360<t&&(t=360),-360>t&&(t=-360),this.Gb=t,this.cb=!0}),Yh.defineProperty(Ct,{Yl:"isClockwiseArc"},function(){return this.po},function(t){this.Q&&Yh.la(this,t),this.po=t,this.cb=!0}),Yh.defineProperty(Ct,{Ax:"isLargeArc"},function(){return this.Wo},function(t){this.Q&&Yh.la(this,t),this.Wo=t,this.cb=!0}),Yh.defineProperty(Ct,{Gj:"xAxisRotation"},function(){return this.Bd},function(t){t%=360,0>t&&(t+=360),this.Q&&Yh.la(this,t),this.Bd=t,this.cb=!0}),Yh.ga("InputEvent",Lt),Lt.prototype.copy=function(){var t=new Lt;return t.Z=this.Z,t.Lz.assign(this.cf),t.Sy.assign(this.da),t.dw=this.dw,t.gv=this.gv,t.hv=this.hv,t.Tv=this.Tv,t.vv=this.vv,t.Iw=this.Iw,t.iv=this.iv,t.sv=this.sv,t.Pv=this.Pv,t.Ev=this.Ev,t.Ij=this.Ij,t.tr=this.tr,t.Gw=this.Gw,t.Fw=this.Fw,t.Eg=this.Eg,t},Lt.prototype.toString=function(){var t="^";return 0!==this.wd&&(t+="M:"+this.wd),0!==this.button&&(t+="B:"+this.button),""!==this.key&&(t+="K:"+this.key),0!==this.Fe&&(t+="C:"+this.Fe),0!==this.Nl&&(t+="D:"+this.Nl),this.Ac&&(t+="h"),this.bubbles&&(t+="b"),null!==this.da&&(t+="@"+this.da.toString()),t},Yh.defineProperty(Lt,{g:"diagram"},function(){return this.Z},function(t){this.Z=t}),Yh.defineProperty(Lt,{cf:"viewPoint"},function(){return this.Lz},function(t){Yh.G(t,x,Lt,"viewPoint"),this.Lz.assign(t)}),Yh.defineProperty(Lt,{da:"documentPoint"},function(){return this.Sy},function(t){Yh.G(t,x,Lt,"documentPoint"),this.Sy.assign(t)}),Lt.prototype.getMultiTouchViewPoint=Lt.prototype.sx=function(t,n){var i=this.g;return null===i?n:(ee(i,this.event,t,n),n)},Lt.prototype.getMultiTouchDocumentPoint=function(t,n){var i=this.g;return null===i?n:(ee(i,this.event,t,n),n.assign(i.vB(n)),n)},Yh.defineProperty(Lt,{wd:"modifiers"},function(){return this.dw},function(t){this.dw=t}),Yh.defineProperty(Lt,{button:"button"},function(){return this.gv},function(t){if(this.gv=t,null===this.event)switch(t){case 0:this.buttons=1;break;case 1:this.buttons=4;break;case 2:this.buttons=2}}),Yh.defineProperty(Lt,{buttons:"buttons"},function(){return this.hv},function(t){this.hv=t}),Yh.defineProperty(Lt,{key:"key"},function(){return this.Tv},function(t){this.Tv=t}),Yh.defineProperty(Lt,{Ol:"down"},function(){return this.vv},function(t){this.vv=t}),Yh.defineProperty(Lt,{up:"up"},function(){return this.Iw},function(t){this.Iw=t}),Yh.defineProperty(Lt,{Fe:"clickCount"},function(){return this.iv},function(t){this.iv=t}),Yh.defineProperty(Lt,{Nl:"delta"},function(){return this.sv},function(t){this.sv=t}),Yh.defineProperty(Lt,{fu:"isMultiTouch"},function(){return this.Pv},function(t){this.Pv=t}),Yh.defineProperty(Lt,{Ac:"handled"},function(){return this.Ev},function(t){this.Ev=t}),Yh.defineProperty(Lt,{bubbles:"bubbles"},function(){return this.Ij},function(t){this.Ij=t}),Yh.defineProperty(Lt,{event:"event"},function(){return this.tr},function(t){this.tr=t}),Yh.u(Lt,{uj:"isTouchEvent"},function(){var t=n.TouchEvent;return!!(t&&this.event instanceof t)||(t=n.PointerEvent)&&this.event instanceof t&&"touch"===this.event.pointerType}),Yh.u(Lt,{Fk:"isMac"},function(){return Yh.Fk}),Yh.defineProperty(Lt,{timestamp:"timestamp"},function(){return this.Gw},function(t){this.Gw=t}),Yh.defineProperty(Lt,{Wg:"targetDiagram"},function(){return this.Fw},function(t){this.Fw=t}),Yh.defineProperty(Lt,{Pe:"targetObject"},function(){return this.Eg},function(t){this.Eg=t}),Yh.defineProperty(Lt,{control:"control"},function(){return 0!=(1&this.wd)},function(t){this.wd=t?1|this.wd:-2&this.wd}),Yh.defineProperty(Lt,{shift:"shift"},function(){return 0!=(4&this.wd)},function(t){this.wd=t?4|this.wd:-5&this.wd}),Yh.defineProperty(Lt,{alt:"alt"},function(){return 0!=(2&this.wd)},function(t){this.wd=t?2|this.wd:-3&this.wd}),Yh.defineProperty(Lt,{ou:"meta"},function(){return 0!=(8&this.wd)},function(t){this.wd=t?8|this.wd:-9&this.wd}),Yh.defineProperty(Lt,{left:"left"},function(){var t=this.event;return null!==t&&t instanceof MouseEvent&&("mousedown"===t.type||"mouseup"===t.type)?0===this.button:0!=(1&this.buttons)},function(t){this.buttons=t?1|this.buttons:-2&this.buttons}),Yh.defineProperty(Lt,{right:"right"},function(){var t=this.event;return null!==t&&t instanceof MouseEvent&&("mousedown"===t.type||"mouseup"===t.type)?2===this.button:0!=(2&this.buttons)},function(t){this.buttons=t?2|this.buttons:-3&this.buttons}),Yh.defineProperty(Lt,{pL:"middle"},function(){var t=this.event;return null!==t&&t instanceof MouseEvent&&("mousedown"===t.type||"mouseup"===t.type)?1===this.button:0!=(4&this.buttons)},function(t){this.buttons=t?4|this.buttons:-5&this.buttons}),Yh.ga("DiagramEvent",Dt),Dt.prototype.copy=function(){var t=new Dt;return t.Z=this.Z,t.Rb=this.Rb,t.Dw=this.Dw,t.mw=this.mw,t.Pq=this.Pq,t},Dt.prototype.toString=function(){var t="*"+this.name;return null!==this.nB&&(t+=":"+this.nB.toString()),null!==this.SA&&(t+="("+this.SA.toString()+")"),t},Yh.defineProperty(Dt,{g:"diagram"},function(){return this.Z},function(t){this.Z=t}),Yh.defineProperty(Dt,{name:"name"},function(){return this.Rb},function(t){this.Rb=t}),Yh.defineProperty(Dt,{nB:"subject"},function(){return this.Dw},function(t){this.Dw=t}),Yh.defineProperty(Dt,{SA:"parameter"},function(){return this.mw},function(t){this.mw=t}),Yh.defineProperty(Dt,{cancel:"cancel"},function(){return this.Pq},function(t){this.Pq!==t&&Yh.Ft("DiagramEvent.cancel","2.0"),this.Pq=t}),Yh.ga("ChangedEvent",At);var vf;At.Transaction=vf=Yh.p(At,"Transaction",-1);var gf;At.Property=gf=Yh.p(At,"Property",0);var mf;At.Insert=mf=Yh.p(At,"Insert",1);var bf;At.Remove=bf=Yh.p(At,"Remove",2),At.prototype.clear=At.prototype.clear=function(){this.ps=this.qs=this.us=this.vs=this.ts=this.Z=this.ke=null},At.prototype.copy=function(){var t=new At;t.Qq=this.Qq,t.cw=this.cw,t.Tm=this.Tm,t.ke=this.ke,t.Z=this.Z,t.ts=this.ts;var n=this.vs;return t.vs=Yh.Qa(n)&&"function"==typeof n.S?n.S():n,n=this.us,t.us=Yh.Qa(n)&&"function"==typeof n.S?n.S():n,n=this.qs,t.qs=Yh.Qa(n)&&"function"==typeof n.S?n.S():n,n=this.ps,t.ps=Yh.Qa(n)&&"function"==typeof n.S?n.S():n,t},At.prototype.hc=function(t){t.De===At?this.yc=t:Yh.Ej(this,t)},At.prototype.toString=function(){var t="",t=this.yc===vf?t+"* ":this.yc===gf?t+(null!==this.ba?"!m":"!d"):t+(null!==this.ba?"!m":"!d")+this.yc;return this.propertyName&&"string"==typeof this.propertyName&&(t+=" "+this.propertyName),this.of&&this.of!==this.propertyName&&(t+=" "+this.of),t+=": ",this.yc===vf?null!==this.oldValue&&(t+=" "+this.oldValue):(null!==this.object&&(t+=Mf(this.object)),null!==this.oldValue&&(t+="  old: "+Mf(this.oldValue)),null!==this.Aj&&(t+=" "+this.Aj),null!==this.newValue&&(t+="  new: "+Mf(this.newValue)),null!==this.zj&&(t+=" "+this.zj)),t},At.prototype.getValue=At.prototype.ja=function(t){return t?this.oldValue:this.newValue},At.prototype.getParam=function(t){return t?this.Aj:this.zj},At.prototype.canUndo=At.prototype.canUndo=function(){return null!==this.ba||null!==this.g},At.prototype.undo=At.prototype.undo=function(){this.canUndo()&&(null!==this.ba?this.ba.nn(this,!0):null!==this.g&&this.g.nn(this,!0))},At.prototype.canRedo=At.prototype.canRedo=function(){return null!==this.ba||null!==this.g},At.prototype.redo=At.prototype.redo=function(){this.canRedo()&&(null!==this.ba?this.ba.nn(this,!1):null!==this.g&&this.g.nn(this,!1))},Yh.defineProperty(At,{ba:"model"},function(){return this.ke},function(t){this.ke=t}),Yh.defineProperty(At,{g:"diagram"},function(){return this.Z},function(t){this.Z=t}),Yh.defineProperty(At,{yc:"change"},function(){return this.Qq},function(t){this.Qq=t}),Yh.defineProperty(At,{of:"modelChange"},function(){return this.cw},function(t){this.cw=t}),Yh.defineProperty(At,{propertyName:"propertyName"},function(){return this.Tm},function(t){this.Tm=t}),Yh.u(At,{sF:"isTransactionFinished"},function(){return this.Qq===vf&&("CommittedTransaction"===this.Tm||"FinishedUndo"===this.Tm||"FinishedRedo"===this.Tm)}),Yh.defineProperty(At,{object:"object"},function(){return this.ts},function(t){this.ts=t}),Yh.defineProperty(At,{oldValue:"oldValue"},function(){return this.vs},function(t){this.vs=t}),Yh.defineProperty(At,{Aj:"oldParam"},function(){return this.us},function(t){this.us=t}),Yh.defineProperty(At,{newValue:"newValue"},function(){return this.qs},function(t){this.qs=t}),Yh.defineProperty(At,{zj:"newParam"},function(){return this.ps},function(t){this.ps=t}),Yh.ga("Model",Ft),Ft.prototype.cloneProtected=function(t){t.Rb=this.Rb,t.er=this.er,t.Ki=this.Ki,t.fk=this.fk,t.$o=this.$o,t.uo=this.uo,t.Xq=this.Xq,t.Wq=this.Wq,t.Gq=this.Gq,t.Om=this.Om},Ft.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},Ft.prototype.clear=Ft.prototype.clear=function(){this.Ce=[],this.Ec.clear(),this.Ei.clear(),this.oa.clear()},Uh=Ft.prototype,Uh.toString=function(t){if(void 0===t&&(t=0),1<t)return this.qB();var n=(""!==this.name?this.name:"")+" Model";if(0<t){n+="\n node data:",t=this.eg;for(var i=Yh.Za(t),e=0;e<i;e++)var o=Yh.Da(t,e),n=n+" "+this.ub(o)+":"+Mf(o)}return n},Uh.co=function(){var t="";return""!==this.name&&(t+=',\n  "name": '+this.quote(this.name)),""!==this.Ll&&(t+=',\n  "dataFormat": '+this.quote(this.Ll)),this.fb&&(t+=',\n  "isReadOnly": '+this.fb),"key"!==this.bm&&"string"==typeof this.bm&&(t+=',\n  "nodeKeyProperty": '+this.quote(this.bm)),this.aA&&(t+=',\n  "copiesArrays": true'),this.$z&&(t+=',\n  "copiesArrayObjects": true'),"category"!==this.Sn&&"string"==typeof this.Sn&&(t+=',\n  "nodeCategoryProperty": '+this.quote(this.Sn)),t},Uh.yu=function(t){t.name&&(this.name=t.name),t.dataFormat&&(this.Ll=t.dataFormat),t.isReadOnly&&(this.fb=t.isReadOnly),t.nodeKeyProperty&&(this.bm=t.nodeKeyProperty),t.copiesArrays&&(this.aA=t.copiesArrays),t.copiesArrayObjects&&(this.$z=t.copiesArrayObjects),t.nodeCategoryProperty&&(this.Sn=t.nodeCategoryProperty)},Uh.DB=function(){var t,n=this.Gk,i=!1;for(t in n)if(!It(t,n[t])){i=!0;break}return n="",i&&(n=Ot(this)),n+',\n  "nodeDataArray": '+Et(this,this.eg,!0)},Uh.VA=function(t){Bt(this,t),t=t.nodeDataArray,Yh.isArray(t)&&(this.Bu(t),this.eg=t)},Uh.EB=function(t){zt(this,t,"nodeKeyProperty"),this instanceof en&&zt(this,t,"nodeParentKeyProperty");for(var n=new d,i=new d,e=(new d).Hc(this.Ec.tF),o=new b,r=t.eg,s=0;s<r.length;s++){var l=r[s],a=t.ub(l);if(void 0!==a){e.remove(a);var h=this.te(a);null===h?(n.add(a),i.add(l)):qt(this,h,l,o)||i.add(l)}else this.HA(l),a=this.ub(l),n.add(a),i.add(l)}return r="",qt(this,this.Gk,t.Gk,o)||(r+=Ot(this)),0<n.count&&(r+=this.Ay+Et(this,n.fc(),!0)),0<i.count&&(r+=this.MB+Et(this,i.fc(),!0)),0<e.count&&(r+=this.Cy+Et(this,e.fc(),!0)),r},Ft.prototype.computeJsonDifference=Ft.prototype.computeJSONDifference=function(t,n){return Yh.G(t,Ft,Ft,"computeJsonDifference:newmodel"),void 0===n&&(n=this.constructor===Ft?"go.Model":this.constructor===Zt?"go.GraphLinksModel":this.constructor===en?"go.TreeModel":Yh.jf(this)),'{ "class": '+this.quote(n)+', "incremental": 1'+this.co()+this.EB(t)+"}"},Uh=Ft.prototype,Uh.Ay=',\n  "insertedNodeKeys": ',Uh.MB=',\n  "modifiedNodeData": ',Uh.Cy=',\n  "removedNodeKeys": ',Uh.CB=function(t,n){var i=this,e=!1,o=new d,r=new d,s=new d;t.Rf.each(function(t){t.ba===i&&("nodeDataArray"===t.of?t.yc===mf?o.add(t.newValue):t.yc===bf&&s.add(t.oldValue):i.Ge(t.object)?r.add(t.object):i.Gk===t.object&&t.yc===gf&&(e=!0))});var l=new d;o.each(function(t){l.add(i.ub(t)),n||r.add(t)});var a=new d;s.each(function(t){a.add(i.ub(t)),n&&r.add(t)});var h="";return e&&(h+=Ot(this)),0<l.count&&(h+=(n?this.Cy:this.Ay)+Et(this,l.fc(),!0)),0<r.count&&(h+=this.MB+Et(this,r.fc(),!0)),0<a.count&&(h+=(n?this.Ay:this.Cy)+Et(this,a.fc(),!0)),h},Uh.UA=function(t){Bt(this,t);var n=t.insertedNodeKeys;if(Yh.isArray(n))for(var i=Yh.Za(n),e=0;e<i;e++){var o=Yh.Da(n,e),r=this.te(o);null===r&&(r=this.copyNodeData({}),this.jy(r,o),this.Cl(r))}if(o=t.modifiedNodeData,Yh.isArray(o))for(i=Yh.Za(o),e=0;e<i;e++)if(n=Yh.Da(o,e),r=this.ub(n),null!==(r=this.te(r)))for(var s in n)"__gohashid"!==s&&s!==this.bm&&this.setDataProperty(r,s,n[s]);if(t=t.removedNodeKeys,Yh.isArray(t))for(i=Yh.Za(t),e=0;e<i;e++)o=Yh.Da(t,e),null!==(r=this.te(o))&&this.$x(r)},Ft.prototype.toIncrementalJson=Ft.prototype.toIncrementalJSON=function(t,n){Yh.G(t,At,Ft,"toIncrementalJson:e"),t.yc!==vf&&Yh.k("Model.toIncrementalJson argument is not a Transaction ChangedEvent:"+t.toString());var i=t.object;return t.sF&&i instanceof sn?(void 0===n&&(n=this.constructor===Ft?"go.Model":this.constructor===Zt?"go.GraphLinksModel":this.constructor===en?"go.TreeModel":Yh.jf(this)),'{ "class": '+this.quote(n)+', "incremental": 1'+this.co()+this.CB(i,"FinishedUndo"===t.propertyName)+"}"):'{ "incremental": 0 }'},Ft.prototype.toJson=Ft.prototype.toJSON=Ft.prototype.qB=function(t){return void 0===t&&(t=this.constructor===Ft?"go.Model":this.constructor===Zt?"go.GraphLinksModel":this.constructor===en?"go.TreeModel":Yh.jf(this)),'{ "class": '+this.quote(t)+this.co()+this.DB()+"}"},Ft.prototype.applyIncrementalJson=Ft.prototype.applyIncrementalJSON=function(t){var i=null;if("string"==typeof t)if(n.JSON&&n.JSON.parse)try{i=n.JSON.parse(t)}catch(t){}else Yh.trace("WARNING: no JSON.parse available");else"object"==typeof t?i=t:Yh.k("Unable to modify a Model from: "+t);var e=i.incremental;"number"!=typeof e&&Yh.k("Unable to apply non-incremental changes to Model: "+t),0!==e&&(this.Ub("applyIncrementalJson"),this.UA(i),this.Gd("applyIncrementalJson"))},Ft.fromJson=Ft.fromJSON=function(t,i){void 0===i&&(i=null),null!==i&&Yh.G(i,Ft,Ft,"fromJson:model");var e=null;if("string"==typeof t)if(n.JSON&&n.JSON.parse)try{e=n.JSON.parse(t)}catch(t){}else Yh.trace("WARNING: no JSON.parse available");else"object"==typeof t?e=t:Yh.k("Unable to construct a Model from: "+t);if(null===i){var o;o=null;var r=e.class;if("string"==typeof r)try{var s=null;0===r.indexOf("go.")?(r=r.substr(3),s=Jh[r]):void 0===(s=Jh[r])&&(s=n[r]),"function"==typeof s&&(o=new s)}catch(t){}null===o||o instanceof Ft?i=o:Yh.k("Unable to construct a Model of declared class: "+e.class)}return null===i&&(i=new Zt),i.yu(e),i.VA(e),i},Ft.prototype.replaceJsonObjects=Ft.prototype.Bu=function(t){if(Yh.isArray(t))for(var n=Yh.Za(t),i=0;i<n;i++){var e=Yh.Da(t,i);Yh.Qa(e)&&Yh.mE(t,i,this.Bu(e))}else if(Yh.Qa(t)){for(i in t)e=t[i],Yh.Qa(e)&&(e=this.Bu(e),t[i]=e);if("object"==typeof t){if(e=t,"NaN"===(i=t.class))e=NaN;else if("Date"===i)e=new Date(t.value);else if("go.Point"===i)e=new x(Vt(t.x),Vt(t.y));else if("go.Size"===i)e=new M(Vt(t.width),Vt(t.height));else if("go.Rect"===i)e=new P(Vt(t.x),Vt(t.y),Vt(t.width),Vt(t.height));else if("go.Margin"===i)e=new D(Vt(t.top),Vt(t.right),Vt(t.bottom),Vt(t.left));else if("go.Spot"===i)e="string"==typeof t.enum?tu(t.enum):new F(Vt(t.x),Vt(t.y),Vt(t.offsetX),Vt(t.offsetY));else if("go.Brush"===i){if(e=new mo,e.type=Wh(mo,t.type),"string"==typeof t.color&&(e.color=t.color),t.start instanceof F&&(e.start=t.start),t.end instanceof F&&(e.end=t.end),"number"==typeof t.startRadius&&(e.Mu=Vt(t.startRadius)),"number"==typeof t.endRadius&&(e.Ht=Vt(t.endRadius)),t=t.colorStops,Yh.Qa(t))for(n in t)e.addColorStop(parseFloat(n),t[n])}else"go.Geometry"===i?(n=null,n="string"==typeof t.path?hf(t.path):new mt,n.type=Wh(mt,t.type),"number"==typeof t.startX&&(n.ha=Vt(t.startX)),"number"==typeof t.startY&&(n.fa=Vt(t.startY)),"number"==typeof t.endX&&(n.C=Vt(t.endX)),"number"==typeof t.endY&&(n.D=Vt(t.endY)),t.spot1 instanceof F&&(n.A=t.spot1),t.spot2 instanceof F&&(n.B=t.spot2),e=n):"go.EnumValue"===i&&(n=t.classType,0===n.indexOf("go.")&&(n=n.substr(3)),e=Wh(Jh[n],t.name));t=e}}return t},Ft.prototype.quote=function(t){for(var n="",i=t.length,e=0;e<i;e++){var o=t[e];if('"'===o||"\\"===o)n+="\\"+o;else if("\b"===o)n+="\\b";else if("\f"===o)n+="\\f";else if("\n"===o)n+="\\n";else if("\r"===o)n+="\\r";else if("\t"===o)n+="\\t";else var r=t.charCodeAt(e),n=16>r?n+"\\u000"+t.charCodeAt(e).toString(16):32>r?n+"\\u00"+t.charCodeAt(e).toString(16):8232===r?n+"\\u2028":8233===r?n+"\\u2029":n+o}return'"'+n+'"'},Ft.prototype.writeJsonValue=Ft.prototype.Ru=function(t){return void 0===t?"undefined":null===t?"null":!0===t?"true":!1===t?"false":"string"==typeof t?this.quote(t):"number"==typeof t?1/0===t?"9e9999":-1/0===t?"-9e9999":isNaN(t)?'{"class":"NaN"}':t.toString():t instanceof Date?'{"class":"Date", "value":"'+t.toJSON()+'"}':t instanceof Number?this.Ru(t.valueOf()):Yh.isArray(t)?Et(this,t):Yh.Qa(t)?Gt(this,t):"function"==typeof t?"null":t.toString()},Yh.defineProperty(Ft,{name:"name"},function(){return this.Rb},function(t){var n=this.Rb;n!==t&&(Yh.j(t,"string",Ft,"name"),this.Rb=t,this.h("name",n,t))}),Yh.defineProperty(Ft,{Ll:"dataFormat"},function(){return this.er},function(t){var n=this.er;n!==t&&(Yh.j(t,"string",Ft,"dataFormat"),this.er=t,this.h("dataFormat",n,t))}),Yh.defineProperty(Ft,{fb:"isReadOnly"},function(){return this.Ki},function(t){var n=this.Ki;n!==t&&(Yh.j(t,"boolean",Ft,"isReadOnly"),this.Ki=t,this.h("isReadOnly",n,t))}),Yh.defineProperty(Ft,{Gk:"modelData"},function(){return this.pz},function(t){var n=this.pz;n!==t&&(Yh.j(t,"object",Ft,"modelData"),this.pz=t,this.h("modelData",n,t),this.Hb(t))}),Ft.prototype.addChangedListener=Ft.prototype.fn=function(t){Yh.j(t,"function",Ft,"addChangedListener:listener"),null===this.bk&&(this.bk=new f("function")),this.bk.add(t)},Ft.prototype.removeChangedListener=Ft.prototype.zu=function(t){Yh.j(t,"function",Ft,"removeChangedListener:listener"),null!==this.bk&&(this.bk.remove(t),0===this.bk.count&&(this.bk=null))},Ft.prototype.Vw=function(t){if(this.wb||this.oa.aF(t),null!==this.bk){var n=this.bk,i=n.length;if(1===i)(n=n.ea(0))(t);else if(0!==i)for(var e=n.fc(),o=0;o<i;o++)(n=e[o])(t)}},Ft.prototype.raiseChangedEvent=Ft.prototype.Xc=function(t,n,i,e,o,r,s){Ht(this,"",t,n,i,e,o,r,s)},Ft.prototype.raiseChanged=Ft.prototype.h=function(t,n,i,e,o){Ht(this,"",gf,t,this,n,i,e,o)},Ft.prototype.raiseDataChanged=Ft.prototype.TA=function(t,n,i,e,o,r){Ht(this,"",gf,n,t,i,e,o,r)},Yh.defineProperty(Ft,{oa:"undoManager"},function(){return this.Kz},function(t){var n=this.Kz;n!==t&&(Yh.G(t,ln,Ft,"undoManager"),null!==n&&n.mJ(this),this.Kz=t,null!==t&&t.dH(this))}),Yh.defineProperty(Ft,{wb:"skipsUndoManager"},function(){return this.cj},function(t){Yh.j(t,"boolean",Ft,"skipsUndoManager"),this.cj=t}),Ft.prototype.nn=function(t,n){if(null!==t&&t.ba===this)if(t.yc===gf){var i=t.object,e=t.propertyName,o=t.ja(n);Yh.La(i,e,o)}else t.yc===mf?(i=t.zj,"nodeDataArray"===t.of?(e=t.newValue,Yh.Qa(e)&&"number"==typeof i&&(o=this.ub(e),n?(Yh.Da(this.Ce,i)===e&&Yh.Ig(this.Ce,i),void 0!==o&&this.Ec.remove(o)):(Yh.Da(this.Ce,i)!==e&&Yh.rh(this.Ce,i,e),void 0!==o&&this.Ec.add(o,e)))):""===t.of?(e=t.object,!Yh.isArray(e)&&t.propertyName&&(e=Yh.sb(t.object,t.propertyName)),Yh.isArray(e)&&"number"==typeof i&&(o=t.newValue,n?Yh.Ig(e,i):Yh.rh(e,i,o))):Yh.k("unknown ChangedEvent.Insert modelChange: "+t.toString())):t.yc===bf?(i=t.Aj,"nodeDataArray"===t.of?(e=t.oldValue,Yh.Qa(e)&&"number"==typeof i&&(o=this.ub(e),n?(Yh.Da(this.Ce,i)!==e&&Yh.rh(this.Ce,i,e),void 0!==o&&this.Ec.add(o,e)):(Yh.Da(this.Ce,i)===e&&Yh.Ig(this.Ce,i),void 0!==o&&this.Ec.remove(o)))):""===t.of?(e=t.object,!Yh.isArray(e)&&t.propertyName&&(e=Yh.sb(t.object,t.propertyName)),Yh.isArray(e)&&"number"==typeof i&&(o=t.oldValue,n?Yh.rh(e,i,o):Yh.Ig(e,i))):Yh.k("unknown ChangedEvent.Remove modelChange: "+t.toString())):t.yc!==vf&&Yh.k("unknown ChangedEvent: "+t.toString())},Ft.prototype.startTransaction=Ft.prototype.Ub=function(t){return this.oa.Ub(t)},Ft.prototype.commitTransaction=Ft.prototype.Gd=function(t){return this.oa.Gd(t)},Ft.prototype.rollbackTransaction=Ft.prototype.mq=function(){return this.oa.mq()},Ft.prototype.updateTargetBindings=Ft.prototype.Hb=function(t,n){void 0===n&&(n=""),Ht(this,"SourceChanged",vf,n,t,null,null)},Yh.defineProperty(Ft,{bm:"nodeKeyProperty"},function(){return this.fk},function(t){var n=this.fk;n!==t&&(Kt(t,Ft,"nodeKeyProperty"),""===t&&Yh.k("Model.nodeKeyProperty may not be the empty string"),0<this.Ec.count&&Yh.k("Cannot set Model.nodeKeyProperty when there is existing node data"),this.fk=t,this.h("nodeKeyProperty",n,t))}),Ft.prototype.getKeyForNodeData=Ft.prototype.ub=function(t){if(null!==t){var n=this.fk;if(""!==n&&void 0!==(n=Yh.sb(t,n))){if(Ut(n))return n;Yh.k("Key value for node data "+t+" is not a number or a string: "+n)}}},Ft.prototype.setKeyForNodeData=Ft.prototype.jy=function(t,n){if(void 0!==n&&null!==n&&Ut(n)||Yh.yd(n,"number or string",Ft,"setKeyForNodeData:key"),null!==t){var i=this.fk;if(""!==i)if(this.Ge(t)){var e=Yh.sb(t,i);e!==n&&null===this.te(n)&&(Yh.La(t,i,n),this.Ec.remove(e),this.Ec.add(n,t),Ht(this,"nodeKey",gf,i,t,e,n),"string"==typeof i&&this.Hb(t,i),this.Au(e,n))}else Yh.La(t,i,n)}},Yh.defineProperty(Ft,{iL:"makeUniqueKeyFunction"},function(){return this.$o},function(t){var n=this.$o;n!==t&&(null!==t&&Yh.j(t,"function",Ft,"makeUniqueKeyFunction"),this.$o=t,this.h("makeUniqueKeyFunction",n,t))}),Ft.prototype.containsNodeData=Ft.prototype.Ge=function(t){var n=this.ub(t);return void 0!==n&&this.Ec.ja(n)===t},Ft.prototype.findNodeDataForKey=Ft.prototype.te=function(t){return null===t&&Yh.k("Model.findNodeDataForKey:key must not be null"),void 0!==t&&Ut(t)?this.Ec.ja(t):null},Yh.defineProperty(Ft,{eg:"nodeDataArray"},function(){return this.Ce},function(t){var n=this.Ce;if(n!==t){Yh.Uz(t,Ft,"nodeDataArray"),this.Ec.clear(),this.xB();for(var i=Yh.Za(t),e=0;e<i;e++){var o=Yh.Da(t,e);if(!Yh.Qa(o))return void Yh.k("Model.nodeDataArray must only contain Objects, not: "+o);Yh.Wp(o)}this.Ce=t;for(var r=new f(Object),e=0;e<i;e++){var o=Yh.Da(t,e),s=this.ub(o);void 0===s?r.add(o):null!==this.Ec.ja(s)?r.add(o):this.Ec.add(s,o)}for(e=r.i;e.next();)o=e.value,this.HA(o),void 0!==(r=this.ub(o))&&this.Ec.add(r,o);for(Ht(this,"nodeDataArray",gf,"nodeDataArray",this,n,t),e=0;e<i;e++)o=Yh.Da(t,e),this.lq(o),this.kq(o);this.oE(),Yh.vI(t)||(this.fb=!0)}}),Ft.prototype.makeNodeDataKeyUnique=Ft.prototype.HA=function(t){if(null!==t){var n=this.fk;if(""!==n){var i=this.ub(t);if(void 0===i||this.Ec.contains(i)){var e=this.$o;if(null!==e&&void 0!==(i=e(this,t))&&null!==i&&!this.Ec.contains(i))return void Yh.La(t,n,i);if("string"==typeof i){for(e=2;this.Ec.contains(i+e);)e++;Yh.La(t,n,i+e)}else if(void 0===i||"number"==typeof i){for(e=-this.Ec.count-1;this.Ec.contains(e);)e--;Yh.La(t,n,e)}else Yh.k("Model.getKeyForNodeData returned something other than a string or a number: "+i)}}}},Ft.prototype.addNodeData=Ft.prototype.Cl=function(t){null!==t&&(Yh.Wp(t),this.Ge(t)||Jt(this,t,!0))},Ft.prototype.addNodeDataCollection=function(t){if(Yh.isArray(t))for(var n=Yh.Za(t),i=0;i<n;i++)this.Cl(Yh.Da(t,i));else for(t=t.i;t.next();)this.Cl(t.value)},Ft.prototype.removeNodeData=Ft.prototype.$x=function(t){null!==t&&Yt(this,t,!0)},Ft.prototype.removeNodeDataCollection=function(t){if(Yh.isArray(t))for(var n=Yh.Za(t),i=0;i<n;i++)this.$x(Yh.Da(t,i));else for(t=t.i;t.next();)this.$x(t.value)},Uh=Ft.prototype,Uh.Au=function(t,n){var i=$t(this,t);i instanceof d&&this.Ei.add(n,i)},Uh.xB=function(){},Uh.lq=function(){},Uh.kq=function(){},Uh.Pu=function(){},Ft.prototype.clearUnresolvedReferences=Ft.prototype.oE=function(t){void 0===t?this.Ei.clear():this.Ei.remove(t)},Yh.defineProperty(Ft,{CK:"copyNodeDataFunction"},function(){return this.uo},function(t){var n=this.uo;n!==t&&(null!==t&&Yh.j(t,"function",Ft,"copyNodeDataFunction"),this.uo=t,this.h("copyNodeDataFunction",n,t))}),Yh.defineProperty(Ft,{aA:"copiesArrays"},function(){return this.Xq},function(t){var n=this.Xq;n!==t&&(null!==t&&Yh.j(t,"boolean",Ft,"copiesArrays"),this.Xq=t,this.h("copiesArrays",n,t))}),Yh.defineProperty(Ft,{$z:"copiesArrayObjects"},function(){return this.Wq},function(t){var n=this.Wq;n!==t&&(null!==t&&Yh.j(t,"boolean",Ft,"copiesArrayObjects"),this.Wq=t,this.h("copiesArrayObjects",n,t))}),Ft.prototype.copyNodeData=function(t){if(null===t)return null;var n=null,n=this.uo,n=null!==n?n(t,this):Qt(this,t,!0);return Yh.Qa(n)&&Yh.mc(n),n},Yh.defineProperty(Ft,{fH:"afterCopyFunction"},function(){return this.Gq},function(t){var n=this.Gq;n!==t&&(null!==t&&Yh.j(t,"function",Ft,"afterCopyFunction"),this.Gq=t,this.h("afterCopyFunction",n,t))});var xf=!1;Ft.prototype.setDataProperty=function(t,n,i){if(this.Ge(t)){if(n===this.bm)this.jy(t,i);else if(n===this.Sn)return void this.hy(t,i)}else!xf&&t instanceof To&&(xf=!0,Yh.trace('Model.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),Yh.trace("  Is that really your intent?"));var e=Yh.sb(t,n);e!==i&&(Yh.La(t,n,i),this.TA(t,n,e,i))},Ft.prototype.addArrayItem=function(t,n){this.vA(t,-1,n)},Ft.prototype.insertArrayItem=Ft.prototype.vA=function(t,n,i){t===this.Ce&&Yh.k("Model.insertArrayItem or Model.addArrayItem should not be called on the Model.nodeDataArray"),0>n&&(n=Yh.Za(t)),Yh.rh(t,n,i),Ht(this,"",mf,"",t,null,i,null,n)},Ft.prototype.removeArrayItem=Ft.prototype.OF=function(t,n){void 0===n&&(n=-1),t===this.Ce&&Yh.k("Model.removeArrayItem should not be called on the Model.nodeDataArray"),-1===n&&(n=Yh.Za(t)-1);var i=Yh.Da(t,n);Yh.Ig(t,n),Ht(this,"",bf,"",t,i,null,n,null)},Yh.defineProperty(Ft,{Sn:"nodeCategoryProperty"},function(){return this.Om},function(t){var n=this.Om;n!==t&&(Kt(t,Ft,"nodeCategoryProperty"),this.Om=t,this.h("nodeCategoryProperty",n,t))}),Ft.prototype.getCategoryForNodeData=Ft.prototype.nA=function(t){if(null===t)return"";var n=this.Om;return""===n?"":void 0===(n=Yh.sb(t,n))?"":"string"==typeof n?n:(Yh.k("getCategoryForNodeData found a non-string category for "+t+": "+n),"")},Ft.prototype.setCategoryForNodeData=Ft.prototype.hy=function(t,n){if(Yh.j(n,"string",Ft,"setCategoryForNodeData:cat"),null!==t){var i=this.Om;if(""!==i)if(this.Ge(t)){var e=Yh.sb(t,i);void 0===e&&(e=""),e!==n&&(Yh.La(t,i,n),Ht(this,"nodeCategory",gf,i,t,e,n))}else Yh.La(t,i,n)}},Yh.Ka(Zt,Ft),Yh.ga("GraphLinksModel",Zt),Zt.prototype.cloneProtected=function(t){Ft.prototype.cloneProtected.call(this,t),t.nl=this.nl,t.ap=this.ap,t.to=this.to,t.Th=this.Th,t.Uh=this.Uh,t.Jm=this.Jm,t.Km=this.Km,t.Im=this.Im,t.xg=this.xg,t.ep=this.ep,t.kh=this.kh,t.Yq=this.Yq},Zt.prototype.clear=Zt.prototype.clear=function(){Ft.prototype.clear.call(this),this.ef=[],this.ad.clear(),this.Pi.clear()},Uh=Zt.prototype,Uh.toString=function(t){if(void 0===t&&(t=0),2<=t)return this.qB();var n=(""!==this.name?this.name:"")+" GraphLinksModel";if(0<t){n+="\n node data:",t=this.eg;for(var i=Yh.Za(t),e=0,e=0;e<i;e++)var o=Yh.Da(t,e),n=n+" "+this.ub(o)+":"+Mf(o);for(n+="\n link data:",t=this.Og,i=Yh.Za(t),e=0;e<i;e++)o=Yh.Da(t,e),n+=" "+this.Ul(o)+"--\x3e"+this.Vl(o)}return n},Uh.co=function(){var t=Ft.prototype.co.call(this),n="";return"category"!==this.ju&&"string"==typeof this.ju&&(n+=',\n  "linkCategoryProperty": '+this.quote(this.ju)),""!==this.xj&&"string"==typeof this.xj&&(n+=',\n  "linkKeyProperty": '+this.quote(this.xj)),"from"!==this.Jn&&"string"==typeof this.Jn&&(n+=',\n  "linkFromKeyProperty": '+this.quote(this.Jn)),"to"!==this.Kn&&"string"==typeof this.Kn&&(n+=',\n  "linkToKeyProperty": '+this.quote(this.Kn)),""!==this.ku&&"string"==typeof this.ku&&(n+=',\n  "linkFromPortIdProperty": '+this.quote(this.ku)),""!==this.mu&&"string"==typeof this.mu&&(n+=',\n  "linkToPortIdProperty": '+this.quote(this.mu)),""!==this.lu&&"string"==typeof this.lu&&(n+=',\n  "linkLabelKeysProperty": '+this.quote(this.lu)),"isGroup"!==this.uu&&"string"==typeof this.uu&&(n+=',\n  "nodeIsGroupProperty": '+this.quote(this.uu)),"group"!==this.tu&&"string"==typeof this.tu&&(n+=',\n  "nodeGroupKeyProperty": '+this.quote(this.tu)),t+n},Uh.yu=function(t){Ft.prototype.yu.call(this,t),t.linkKeyProperty&&(this.xj=t.linkKeyProperty),t.linkFromKeyProperty&&(this.Jn=t.linkFromKeyProperty),t.linkToKeyProperty&&(this.Kn=t.linkToKeyProperty),t.linkFromPortIdProperty&&(this.ku=t.linkFromPortIdProperty),t.linkToPortIdProperty&&(this.mu=t.linkToPortIdProperty),t.linkCategoryProperty&&(this.ju=t.linkCategoryProperty),t.linkLabelKeysProperty&&(this.lu=t.linkLabelKeysProperty),t.nodeIsGroupProperty&&(this.uu=t.nodeIsGroupProperty),t.nodeGroupKeyProperty&&(this.tu=t.nodeGroupKeyProperty)},Uh.DB=function(){return Ft.prototype.DB.call(this)+',\n  "linkDataArray": '+Et(this,this.Og,!0)},Uh.VA=function(t){Ft.prototype.VA.call(this,t),t=t.linkDataArray,Yh.isArray(t)&&(this.Bu(t),this.Og=t)},Uh.EB=function(t){if(!(t instanceof Zt))return Yh.k("Model.computeJsonDifference: newmodel must be a GraphLinksModel"),"";""===this.xj&&Yh.k("GraphLinksModel.linkKeyProperty must not be an empty string for .computeJsonDifference() to succeed.");var n=Ft.prototype.EB.call(this,t);zt(this,t,"linkKeyProperty"),zt(this,t,"linkFromKeyProperty"),zt(this,t,"linkToKeyProperty"),zt(this,t,"linkLabelKeysProperty"),zt(this,t,"nodeIsGroupProperty"),zt(this,t,"nodeGroupKeyProperty");for(var i=new d,e=new d,o=(new d).Hc(this.ad.tF),r=new b,s=t.Og,l=0;l<s.length;l++){var a=s[l],h=t.Tf(a);if(void 0!==h){o.remove(h);var u=this.Sp(h);null===u?(i.add(h),e.add(a)):qt(this,u,a,r)||e.add(a)}else this.GA(a),h=this.Tf(a),i.add(h),e.add(a)}return t=n,0<i.count&&(t+=this.zy+Et(this,i.fc(),!0)),0<e.count&&(t+=this.LB+Et(this,e.fc(),!0)),0<o.count&&(t+=this.By+Et(this,o.fc(),!0)),t},Uh.zy=',\n  "insertedLinkKeys": ',Uh.LB=',\n  "modifiedLinkData": ',Uh.By=',\n  "removedLinkKeys": ',Uh.CB=function(t,n){""===this.xj&&Yh.k("GraphLinksModel.linkKeyProperty must not be an empty string for .toIncrementalJson() to succeed.");var i=Ft.prototype.CB.call(this,t,n),e=this,o=new d,r=new d,s=new d;t.Rf.each(function(t){t.ba===e&&("linkDataArray"===t.of?t.yc===mf?o.add(t.newValue):t.yc===bf&&s.add(t.oldValue):e.uh(t.object)&&r.add(t.object))});var l=new d;o.each(function(t){l.add(e.Tf(t)),n||r.add(t)});var a=new d;return s.each(function(t){a.add(e.Tf(t)),n&&r.add(t)}),0<l.count&&(i+=(n?this.By:this.zy)+Et(this,l.fc(),!0)),0<r.count&&(i+=this.LB+Et(this,r.fc(),!0)),0<a.count&&(i+=(n?this.zy:this.By)+Et(this,a.fc(),!0)),i},Uh.UA=function(t){Ft.prototype.UA.call(this,t);var n=t.insertedLinkKeys;if(Yh.isArray(n))for(var i=Yh.Za(n),e=0;e<i;e++){var o=Yh.Da(n,e),r=this.Sp(o);null===r&&(r=this.Yw({}),this.gG(r,o),this.ut(r))}if(o=t.modifiedLinkData,Yh.isArray(o))for(i=Yh.Za(o),e=0;e<i;e++)if(n=Yh.Da(o,e),r=this.Tf(n),null!==(r=this.Sp(r)))for(var s in n)"__gohashid"!==s&&s!==this.xj&&this.setDataProperty(r,s,n[s]);if(t=t.removedLinkKeys,Yh.isArray(t))for(i=Yh.Za(t),e=0;e<i;e++)o=Yh.Da(t,e),null!==(r=this.Sp(o))&&this.Zx(r)},Uh.nn=function(t,n){if(t.yc===mf){var i=t.zj;if("linkDataArray"===t.of){var e=t.newValue;if(Yh.Qa(e)&&"number"==typeof i){var o=this.Tf(e);n?(this.Pi.remove(e),Yh.Da(this.ef,i)===e&&Yh.Ig(this.ef,i),void 0!==o&&this.ad.remove(o)):(this.Pi.add(e),Yh.Da(this.ef,i)!==e&&Yh.rh(this.ef,i,e),void 0!==o&&this.ad.add(o,e))}return}if("linkLabelKeys"===t.of)return e=this.Bk(t.object),void(Yh.isArray(e)&&"number"==typeof i&&(n?0<=(i=Yh.Fl(e,t.newValue))&&Yh.Ig(e,i):0>Yh.Fl(e,t.newValue)&&Yh.rh(e,i,t.newValue)))}else if(t.yc===bf){if(i=t.Aj,"linkDataArray"===t.of)return e=t.oldValue,void(Yh.Qa(e)&&"number"==typeof i&&(o=this.Tf(e),n?(this.Pi.add(e),Yh.Da(this.ef,i)!==e&&Yh.rh(this.ef,i,e),void 0!==o&&this.ad.add(o,e)):(this.Pi.remove(e),Yh.Da(this.ef,i)===e&&Yh.Ig(this.ef,i),void 0!==o&&this.ad.remove(o))));if("linkLabelKeys"===t.of)return e=this.Bk(t.object),void(Yh.isArray(e)&&"number"==typeof i&&(n?0>Yh.Fl(e,t.newValue)&&Yh.rh(e,i,t.newValue):0<=(i=Yh.Fl(e,t.newValue))&&Yh.Ig(e,i)))}Ft.prototype.nn.call(this,t,n)},Yh.defineProperty(Zt,{Sz:"archetypeNodeData"},function(){return this.qm},function(t){var n=this.qm;n!==t&&(null!==t&&Yh.G(t,Object,Zt,"archetypeNodeData"),this.qm=t,this.h("archetypeNodeData",n,t))}),Zt.prototype.Ln=function(t){if(void 0!==t){var n=this.qm;if(null!==n){var i=this.te(t);null===i&&(i=this.copyNodeData(n),Yh.La(i,this.fk,t),this.Cl(i))}return t}},Yh.defineProperty(Zt,{Jn:"linkFromKeyProperty"},function(){return this.Th},function(t){var n=this.Th;n!==t&&(Kt(t,Zt,"linkFromKeyProperty"),this.Th=t,this.h("linkFromKeyProperty",n,t))}),Zt.prototype.getFromKeyForLinkData=Zt.prototype.Ul=function(t){if(null!==t){var n=this.Th;if(""!==n&&void 0!==(n=Yh.sb(t,n))){if(Ut(n))return n;Yh.k("FromKey value for link data "+t+" is not a number or a string: "+n)}}},Zt.prototype.setFromKeyForLinkData=Zt.prototype.dB=function(t,n){if(null===n&&(n=void 0),void 0===n||Ut(n)||Yh.yd(n,"number or string",Zt,"setFromKeyForLinkData:key"),null!==t){var i=this.Th;if(""!==i)if(n=this.Ln(n),this.uh(t)){var e=Yh.sb(t,i);e!==n&&(Xt(this,e,t),Yh.La(t,i,n),null===this.te(n)&&Wt(this,n,t),Ht(this,"linkFromKey",gf,i,t,e,n),"string"==typeof i&&this.Hb(t,i))}else Yh.La(t,i,n)}},Yh.defineProperty(Zt,{Kn:"linkToKeyProperty"},function(){return this.Uh},function(t){var n=this.Uh;n!==t&&(Kt(t,Zt,"linkToKeyProperty"),this.Uh=t,this.h("linkToKeyProperty",n,t))}),Zt.prototype.getToKeyForLinkData=Zt.prototype.Vl=function(t){if(null!==t){var n=this.Uh;if(""!==n&&void 0!==(n=Yh.sb(t,n))){if(Ut(n))return n;Yh.k("ToKey value for link data "+t+" is not a number or a string: "+n)}}},Zt.prototype.setToKeyForLinkData=Zt.prototype.jB=function(t,n){if(null===n&&(n=void 0),void 0===n||Ut(n)||Yh.yd(n,"number or string",Zt,"setToKeyForLinkData:key"),null!==t){var i=this.Uh;if(""!==i)if(n=this.Ln(n),this.uh(t)){var e=Yh.sb(t,i);e!==n&&(Xt(this,e,t),Yh.La(t,i,n),null===this.te(n)&&Wt(this,n,t),Ht(this,"linkToKey",gf,i,t,e,n),"string"==typeof i&&this.Hb(t,i))}else Yh.La(t,i,n)}},Yh.defineProperty(Zt,{ku:"linkFromPortIdProperty"},function(){return this.Jm},function(t){var n=this.Jm;n!==t&&(Kt(t,Zt,"linkFromPortIdProperty"),t!==this.Jn&&t!==this.Kn||Yh.k("linkFromPortIdProperty name must not be the same as the GraphLinksModel.linkFromKeyProperty or linkToKeyProperty: "+t),this.Jm=t,this.h("linkFromPortIdProperty",n,t))}),Zt.prototype.getFromPortIdForLinkData=Zt.prototype.YH=function(t){if(null===t)return"";var n=this.Jm;return""===n?"":(t=Yh.sb(t,n),void 0===t?"":t)},Zt.prototype.setFromPortIdForLinkData=Zt.prototype.eB=function(t,n){if(Yh.j(n,"string",Zt,"setFromPortIdForLinkData:portname"),null!==t){var i=this.Jm;if(""!==i)if(this.uh(t)){var e=Yh.sb(t,i);void 0===e&&(e=""),e!==n&&(Yh.La(t,i,n),Ht(this,"linkFromPortId",gf,i,t,e,n),"string"==typeof i&&this.Hb(t,i))}else Yh.La(t,i,n)}},Yh.defineProperty(Zt,{mu:"linkToPortIdProperty"},function(){return this.Km},function(t){var n=this.Km;n!==t&&(Kt(t,Zt,"linkToPortIdProperty"),t!==this.Jn&&t!==this.Kn||Yh.k("linkFromPortIdProperty name must not be the same as the GraphLinksModel.linkFromKeyProperty or linkToKeyProperty: "+t),this.Km=t,this.h("linkToPortIdProperty",n,t))}),Zt.prototype.getToPortIdForLinkData=Zt.prototype.bI=function(t){if(null===t)return"";var n=this.Km;return""===n?"":(t=Yh.sb(t,n),void 0===t?"":t)},Zt.prototype.setToPortIdForLinkData=Zt.prototype.kB=function(t,n){if(Yh.j(n,"string",Zt,"setToPortIdForLinkData:portname"),null!==t){var i=this.Km;if(""!==i)if(this.uh(t)){var e=Yh.sb(t,i);void 0===e&&(e=""),e!==n&&(Yh.La(t,i,n),Ht(this,"linkToPortId",gf,i,t,e,n),"string"==typeof i&&this.Hb(t,i))}else Yh.La(t,i,n)}},Yh.defineProperty(Zt,{lu:"linkLabelKeysProperty"},function(){return this.xg},function(t){var n=this.xg;n!==t&&(Kt(t,Zt,"linkLabelKeysProperty"),this.xg=t,this.h("linkLabelKeysProperty",n,t))}),Zt.prototype.getLabelKeysForLinkData=Zt.prototype.Bk=function(t){if(null===t)return Yh.ho;var n=this.xg;return""===n?Yh.ho:(t=Yh.sb(t,n),void 0===t?Yh.ho:t)},Zt.prototype.setLabelKeysForLinkData=Zt.prototype.hG=function(t,n){if(Yh.Uz(n,Zt,"setLabelKeysForLinkData:arr"),null!==t){var i=this.xg;if(""!==i)if(this.uh(t)){var e=Yh.sb(t,i);if(void 0===e&&(e=Yh.ho),e!==n){for(var o=Yh.Za(e),r=0;r<o;r++){var s=Yh.Da(e,r);Xt(this,s,t)}for(Yh.La(t,i,n),o=Yh.Za(n),r=0;r<o;r++)s=Yh.Da(n,r),null===this.te(s)&&Wt(this,s,t);Ht(this,"linkLabelKeys",gf,i,t,e,n),"string"==typeof i&&this.Hb(t,i)}}else Yh.La(t,i,n)}},Zt.prototype.addLabelKeyForLinkData=Zt.prototype.fE=function(t,n){if(null!==n&&void 0!==n&&(Ut(n)||Yh.yd(n,"number or string",Zt,"addLabelKeyForLinkData:key"),null!==t)){var i=this.xg;if(""!==i){var e=Yh.sb(t,i);if(void 0===e)i=[],i.push(n),this.hG(t,i);else if(Yh.isArray(e)){var o=Yh.Fl(e,n);0<=o||(o=Yh.Za(e),Yh.rh(e,1/0,n),this.uh(t)&&(null===this.te(n)&&Wt(this,n,t),Ht(this,"linkLabelKeys",mf,i,t,null,n,null,o)))}else Yh.k(i+" property is not an Array; cannot addLabelKeyForLinkData: "+t)}}},Zt.prototype.removeLabelKeyForLinkData=Zt.prototype.lJ=function(t,n){if(null!==n&&void 0!==n&&(Ut(n)||Yh.yd(n,"number or string",Zt,"removeLabelKeyForLinkData:key"),null!==t)){var i=this.xg;if(""!==i){var e=Yh.sb(t,i);if(Yh.isArray(e)){var o=Yh.Fl(e,n);0>o||(Yh.Ig(e,o),this.uh(t)&&(Xt(this,n,t),Ht(this,"linkLabelKeys",bf,i,t,n,null,o,null)))}else void 0!==e&&Yh.k(i+" property is not an Array; cannot removeLabelKeyforLinkData: "+t)}}},Yh.defineProperty(Zt,{Og:"linkDataArray"},function(){return this.ef},function(t){var n=this.ef;if(n!==t){Yh.Uz(t,Zt,"linkDataArray"),this.ad.clear();for(var i=Yh.Za(t),e=0;e<i;e++){var o=Yh.Da(t,e);if(!Yh.Qa(o))return void Yh.k("GraphLinksModel.linkDataArray must only contain Objects, not: "+o);Yh.Wp(o)}if(this.ef=t,""!==this.xj){for(var r=new f(Object),e=0;e<i;e++){var o=Yh.Da(t,e),s=this.Tf(o);void 0===s?r.add(o):null!==this.ad.ja(s)?r.add(o):this.ad.add(s,o)}for(e=r.i;e.next();)o=e.value,this.GA(o),void 0!==(r=this.Tf(o))&&this.ad.add(r,o)}for(r=new d(Object),e=0;e<i;e++)o=Yh.Da(t,e),r.add(o);for(this.Pi=r,Ht(this,"linkDataArray",gf,"linkDataArray",this,n,t),e=0;e<i;e++)o=Yh.Da(t,e),nn(this,o)}}),Yh.defineProperty(Zt,{xj:"linkKeyProperty"},function(){return this.nl},function(t){var n=this.nl;if(n!==t){Kt(t,Zt,"linkKeyProperty"),this.nl=t,this.ad.clear();for(var i=Yh.Za(this.Og),e=0;e<i;e++){var o=Yh.Da(this.Og,e),r=this.Tf(o);void 0!==r&&this.ad.add(r,o)}this.h("linkKeyProperty",n,t)}}),Zt.prototype.getKeyForLinkData=Zt.prototype.Tf=function(t){if(null!==t){var n=this.nl;if(""!==n&&void 0!==(n=Yh.sb(t,n))){if(Ut(n))return n;Yh.k("Key value for link data "+t+" is not a number or a string: "+n)}}},Zt.prototype.setKeyForLinkData=Zt.prototype.gG=function(t,n){if(void 0!==n&&null!==n&&Ut(n)||Yh.yd(n,"number or string",Zt,"setKeyForLinkData:key"),null!==t){var i=this.nl;if(""!==i)if(this.uh(t)){var e=Yh.sb(t,i);e!==n&&null===this.Sp(n)&&(Yh.La(t,i,n),this.ad.remove(e),this.ad.add(n,t),Ht(this,"linkKey",gf,i,t,e,n),"string"==typeof i&&this.Hb(t,i))}else Yh.La(t,i,n)}},Yh.defineProperty(Zt,{jL:"makeUniqueLinkKeyFunction"},function(){return this.ap},function(t){var n=this.ap;n!==t&&(null!==t&&Yh.j(t,"function",Zt,"makeUniqueLinkKeyFunction"),this.ap=t,this.h("makeUniqueLinkKeyFunction",n,t))}),Zt.prototype.findLinkDataForKey=Zt.prototype.Sp=function(t){return null===t&&Yh.k("GraphLinksModel.findLinkDataForKey:key must not be null"),void 0!==t&&Ut(t)?this.ad.ja(t):null},Zt.prototype.makeLinkDataKeyUnique=Zt.prototype.GA=function(t){if(null!==t){var n=this.nl;if(""!==n){var i=this.Tf(t);if(void 0===i||this.ad.contains(i)){var e=this.ap;if(null!==e&&void 0!==(i=e(this,t))&&null!==i&&!this.ad.contains(i))return void Yh.La(t,n,i);if("string"==typeof i){for(e=2;this.ad.contains(i+e);)e++;Yh.La(t,n,i+e)}else if(void 0===i||"number"==typeof i){for(e=-this.ad.count-1;this.ad.contains(e);)e--;Yh.La(t,n,e)}else Yh.k("GraphLinksModel.getKeyForLinkData returned something other than a string or a number: "+i)}}}},Zt.prototype.containsLinkData=Zt.prototype.uh=function(t){return null!==t&&this.Pi.contains(t)},Zt.prototype.addLinkData=Zt.prototype.ut=function(t){null!==t&&(Yh.Wp(t),this.uh(t)||_t(this,t,!0))},Zt.prototype.addLinkDataCollection=function(t){if(Yh.isArray(t))for(var n=Yh.Za(t),i=0;i<n;i++)this.ut(Yh.Da(t,i));else for(t=t.i;t.next();)this.ut(t.value)},Zt.prototype.removeLinkData=Zt.prototype.Zx=function(t){null!==t&&tn(this,t,!0)},Zt.prototype.removeLinkDataCollection=function(t){if(Yh.isArray(t))for(var n=Yh.Za(t),i=0;i<n;i++)this.Zx(Yh.Da(t,i));else for(t=t.i;t.next();)this.Zx(t.value)},Yh.defineProperty(Zt,{BK:"copyLinkDataFunction"},function(){return this.to},function(t){var n=this.to;n!==t&&(null!==t&&Yh.j(t,"function",Zt,"copyLinkDataFunction"),this.to=t,this.h("copyLinkDataFunction",n,t))}),Zt.prototype.copyLinkData=Zt.prototype.Yw=function(t){if(null===t)return null;var n=null,n=this.to,n=null!==n?n(t,this):Qt(this,t,!0);return Yh.Qa(n)&&(Yh.mc(n),""!==this.Th&&Yh.La(n,this.Th,void 0),""!==this.Uh&&Yh.La(n,this.Uh,void 0),""!==this.xg&&Yh.La(n,this.xg,[])),n},Yh.defineProperty(Zt,{uu:"nodeIsGroupProperty"},function(){return this.ep},function(t){var n=this.ep;n!==t&&(Kt(t,Zt,"nodeIsGroupProperty"),this.ep=t,this.h("nodeIsGroupProperty",n,t))}),Zt.prototype.isGroupForNodeData=Zt.prototype.zA=function(t){if(null===t)return!1;var n=this.ep;return""!==n&&!!Yh.sb(t,n)},Yh.defineProperty(Zt,{tu:"nodeGroupKeyProperty"},function(){return this.kh},function(t){var n=this.kh;n!==t&&(Kt(t,Zt,"nodeGroupKeyProperty"),this.kh=t,this.h("nodeGroupKeyProperty",n,t))}),Yh.defineProperty(Zt,{rn:"copiesGroupKeyOfNodeData"},function(){return this.Yq},function(t){this.Yq!==t&&(Yh.j(t,"boolean",Zt,"copiesGroupKeyOfNodeData"),this.Yq=t)}),Zt.prototype.getGroupKeyForNodeData=Zt.prototype.zn=function(t){if(null!==t){var n=this.kh;if(""!==n&&void 0!==(n=Yh.sb(t,n))){if(Ut(n))return n;Yh.k("GroupKey value for node data "+t+" is not a number or a string: "+n)}}},Zt.prototype.setGroupKeyForNodeData=Zt.prototype.fB=function(t,n){if(null===n&&(n=void 0),void 0===n||Ut(n)||Yh.yd(n,"number or string",Zt,"setGroupKeyForNodeData:key"),null!==t){var i=this.kh;if(""!==i)if(this.Ge(t)){var e=Yh.sb(t,i);e!==n&&(Xt(this,e,t),Yh.La(t,i,n),null===this.te(n)&&Wt(this,n,t),Ht(this,"nodeGroupKey",gf,i,t,e,n),"string"==typeof i&&this.Hb(t,i))}else Yh.La(t,i,n)}},Zt.prototype.copyNodeData=function(t){return null===t?null:(t=Ft.prototype.copyNodeData.call(this,t),this.rn||""===this.kh||void 0===Yh.sb(t,this.kh)||Yh.La(t,this.kh,void 0),t)},Zt.prototype.setDataProperty=function(t,n,i){if(this.Ge(t))if(n===this.bm)this.jy(t,i);else{if(n===this.Sn)return void this.hy(t,i);if(n===this.tu)return void this.fB(t,i);n===this.uu&&Yh.k("GraphLinksModel.setDataProperty: property name must not be the nodeIsGroupProperty: "+n)}else if(this.uh(t)){if(n===this.Jn)return void this.dB(t,i);if(n===this.Kn)return void this.jB(t,i);if(n===this.ku)return void this.eB(t,i);if(n===this.mu)return void this.kB(t,i);if(n===this.xj)return void this.gG(t,i);if(n===this.ju)return void this.fG(t,i);if(n===this.lu)return void this.hG(t,i)}else!xf&&t instanceof To&&(xf=!0,Yh.trace('GraphLinksModel.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),Yh.trace("  Is that really your intent?"));var e=Yh.sb(t,n);e!==i&&(Yh.La(t,n,i),this.TA(t,n,e,i))},Uh=Zt.prototype,Uh.Au=function(t,n){Ft.prototype.Au.call(this,t,n);for(var i=this.Ec.i;i.next();)this.YA(i.value,t,n);for(i=this.Pi.i;i.next();){var e=i.value,o=t,r=n;if(this.Ul(e)===o){var s=this.Th;Yh.La(e,s,r),Ht(this,"linkFromKey",gf,s,e,o,r),"string"==typeof s&&this.Hb(e,s)}if(this.Vl(e)===o&&(s=this.Uh,Yh.La(e,s,r),Ht(this,"linkToKey",gf,s,e,o,r),"string"==typeof s&&this.Hb(e,s)),s=this.Bk(e),Yh.isArray(s))for(var l=Yh.Za(s),a=this.xg,h=0;h<l;h++)Yh.Da(s,h)===o&&(Yh.mE(s,h,r),Ht(this,"linkLabelKeys",mf,a,e,o,r,h,h))}},Uh.YA=function(t,n,i){if(this.zn(t)===n){var e=this.kh;Yh.La(t,e,i),Ht(this,"nodeGroupKey",gf,e,t,n,i),"string"==typeof e&&this.Hb(t,e)}},Uh.xB=function(){Ft.prototype.xB.call(this);for(var t=this.Og,n=Yh.Za(t),i=0;i<n;i++){nn(this,Yh.Da(t,i))}},Uh.lq=function(t){Ft.prototype.lq.call(this,t),t=this.ub(t);var n=$t(this,t);if(null!==n){for(var i=new f(Object),n=n.i;n.next();){var e=n.value;if(this.Ge(e)){if(this.zn(e)===t){var o=this.kh;Ht(this,"nodeGroupKey",gf,o,e,t,t),"string"==typeof o&&this.Hb(e,o),i.add(e)}}else if(this.Ul(e)===t&&(o=this.Th,Ht(this,"linkFromKey",gf,o,e,t,t),"string"==typeof o&&this.Hb(e,o),i.add(e)),this.Vl(e)===t&&(o=this.Uh,Ht(this,"linkToKey",gf,o,e,t,t),"string"==typeof o&&this.Hb(e,o),i.add(e)),o=this.Bk(e),Yh.isArray(o))for(var r=Yh.Za(o),s=this.xg,l=0;l<r;l++)Yh.Da(o,l)===t&&(Ht(this,"linkLabelKeys",mf,s,e,t,t,l,l),i.add(e))}for(i=i.i;i.next();)Xt(this,t,i.value)}},Uh.kq=function(t){Ft.prototype.kq.call(this,t);var n=this.zn(t);null===this.te(n)&&Wt(this,n,t)},Uh.Pu=function(t){Ft.prototype.Pu.call(this,t),Xt(this,this.zn(t),t)},Yh.defineProperty(Zt,{ju:"linkCategoryProperty"},function(){return this.Im},function(t){var n=this.Im;n!==t&&(Kt(t,Zt,"linkCategoryProperty"),this.Im=t,this.h("linkCategoryProperty",n,t))}),Zt.prototype.getCategoryForLinkData=Zt.prototype.qx=function(t){if(null===t)return"";var n=this.Im;return""===n?"":void 0===(n=Yh.sb(t,n))?"":"string"==typeof n?n:(Yh.k("getCategoryForLinkData found a non-string category for "+t+": "+n),"")},Zt.prototype.setCategoryForLinkData=Zt.prototype.fG=function(t,n){if(Yh.j(n,"string",Zt,"setCategoryForLinkData:cat"),null!==t){var i=this.Im;if(""!==i)if(this.uh(t)){var e=Yh.sb(t,i);void 0===e&&(e=""),e!==n&&(Yh.La(t,i,n),Ht(this,"linkCategory",gf,i,t,e,n),"string"==typeof i&&this.Hb(t,i))}else Yh.La(t,i,n)}},Yh.Ka(en,Ft),Yh.ga("TreeModel",en),en.prototype.cloneProtected=function(t){Ft.prototype.cloneProtected.call(this,t),t.lh=this.lh,t.Zq=this.Zq,t.Rm=this.Rm},en.prototype.toString=function(t){if(void 0===t&&(t=0),2<=t)return this.qB();var n=(""!==this.name?this.name:"")+" TreeModel";if(0<t){n+="\n node data:",t=this.eg;for(var i=Yh.Za(t),e=0;e<i;e++)var o=Yh.Da(t,e),n=n+" "+this.ub(o)+":"+Mf(o)}return n},en.prototype.co=function(){var t=Ft.prototype.co.call(this),n="";return"parent"!==this.vu&&"string"==typeof this.vu&&(n+=',\n  "nodeParentKeyProperty": '+this.quote(this.vu)),t+n},en.prototype.yu=function(t){Ft.prototype.yu.call(this,t),t.nodeParentKeyProperty&&(this.vu=t.nodeParentKeyProperty)},en.prototype.Ln=function(t){return t},Yh.defineProperty(en,{vu:"nodeParentKeyProperty"},function(){return this.lh},function(t){var n=this.lh;n!==t&&(Kt(t,en,"nodeParentKeyProperty"),this.lh=t,this.h("nodeParentKeyProperty",n,t))}),Yh.defineProperty(en,{sn:"copiesParentKeyOfNodeData"},function(){return this.Zq},function(t){this.Zq!==t&&(Yh.j(t,"boolean",en,"copiesParentKeyOfNodeData"),this.Zq=t)}),en.prototype.getParentKeyForNodeData=en.prototype.Bn=function(t){if(null!==t){var n=this.lh;if(""!==n&&void 0!==(n=Yh.sb(t,n))){if(Ut(n))return n;Yh.k("ParentKey value for node data "+t+" is not a number or a string: "+n)}}},en.prototype.setParentKeyForNodeData=en.prototype.pi=function(t,n){if(null===n&&(n=void 0),void 0===n||Ut(n)||Yh.yd(n,"number or string",en,"setParentKeyForNodeData:key"),null!==t){var i=this.lh;if(""!==i)if(n=this.Ln(n),this.Ge(t)){var e=Yh.sb(t,i);e!==n&&(Xt(this,e,t),Yh.La(t,i,n),null===this.te(n)&&Wt(this,n,t),Ht(this,"nodeParentKey",gf,i,t,e,n),"string"==typeof i&&this.Hb(t,i))}else Yh.La(t,i,n)}},Yh.defineProperty(en,{BL:"parentLinkCategoryProperty"},function(){return this.Rm},function(t){var n=this.Rm;n!==t&&(Kt(t,en,"parentLinkCategoryProperty"),this.Rm=t,this.h("parentLinkCategoryProperty",n,t))}),en.prototype.getParentLinkCategoryForNodeData=en.prototype.$H=function(t){if(null===t)return"";var n=this.Rm;return""===n?"":void 0===(n=Yh.sb(t,n))?"":"string"==typeof n?n:(Yh.k("getParentLinkCategoryForNodeData found a non-string category for "+t+": "+n),"")},en.prototype.setParentLinkCategoryForNodeData=en.prototype.BJ=function(t,n){if(Yh.j(n,"string",en,"setParentLinkCategoryForNodeData:cat"),null!==t){var i=this.Rm;if(""!==i)if(this.Ge(t)){var e=Yh.sb(t,i);void 0===e&&(e=""),e!==n&&(Yh.La(t,i,n),Ht(this,"parentLinkCategory",gf,i,t,e,n),"string"==typeof i&&this.Hb(t,i))}else Yh.La(t,i,n)}},en.prototype.copyNodeData=function(t){return null===t?null:(t=Ft.prototype.copyNodeData.call(this,t),this.sn||""===this.lh||void 0===Yh.sb(t,this.lh)||Yh.La(t,this.lh,void 0),t)},en.prototype.setDataProperty=function(t,n,i){if(this.Ge(t))if(n===this.bm)this.jy(t,i);else{if(n===this.Sn)return void this.hy(t,i);if(n===this.vu)return void this.pi(t,i)}else!xf&&t instanceof To&&(xf=!0,Yh.trace('TreeModel.setDataProperty is modifying a GraphObject, "'+t.toString()+'"'),Yh.trace("  Is that really your intent?"));var e=Yh.sb(t,n);e!==i&&(Yh.La(t,n,i),this.TA(t,n,e,i))},Uh=en.prototype,Uh.Au=function(t,n){Ft.prototype.Au.call(this,t,n);for(var i=this.Ec.i;i.next();)this.YA(i.value,t,n)},Uh.YA=function(t,n,i){if(this.Bn(t)===n){var e=this.lh;Yh.La(t,e,i),Ht(this,"nodeParentKey",gf,e,t,n,i),"string"==typeof e&&this.Hb(t,e)}},Uh.lq=function(t){Ft.prototype.lq.call(this,t),t=this.ub(t);var n=$t(this,t);if(null!==n){for(var i=new f(Object),n=n.i;n.next();){var e=n.value;if(this.Ge(e)&&this.Bn(e)===t){var o=this.lh;Ht(this,"nodeParentKey",gf,o,e,t,t),"string"==typeof o&&this.Hb(e,o),i.add(e)}}for(i=i.i;i.next();)Xt(this,t,i.value)}},Uh.kq=function(t){Ft.prototype.kq.call(this,t);var n=this.Bn(t),n=this.Ln(n);null===this.te(n)&&Wt(this,n,t)},Uh.Pu=function(t){Ft.prototype.Pu.call(this,t),Xt(this,this.Bn(t),t)},Yh.ga("Binding",on),on.prototype.copy=function(){var t=new on;return t.yp=this.yp,t.ht=this.ht,t.xp=this.xp,t.Aw=this.Aw,t.Nr=this.Nr,t.op=this.op,t.Vq=this.Vq,t.gs=this.gs,t.Oq=this.Oq,t};var wf;on.OneWay=wf=Yh.p(on,"OneWay",1);var kf;on.TwoWay=kf=Yh.p(on,"TwoWay",2),on.parseEnum=function(t,n){return Yh.j(t,"function",on,"parseEnum:ctor"),Yh.mb(n,t,on,"parseEnum:defval"),function(i){return i=Wh(t,i),null===i?n:i}},on.prototype.hc=function(t){t.De===on?this.mode=t:Yh.Ej(this,t)};var Mf;on.toString=Mf=function(t){var n=t;return Yh.Qa(t)&&(t.text?n=t.text:t.name?n=t.name:void 0!==t.key?n=t.key:void 0!==t.id?n=t.id:t.constructor===Object&&(t.Text?n=t.Text:t.Name?n=t.Name:void 0!==t.Key?n=t.Key:void 0!==t.Id?n=t.Id:void 0!==t.ID&&(n=t.ID))),void 0===n?"undefined":null===n?"null":n.toString()},on.prototype.toString=function(){return"Binding("+this.my+":"+this.kG+(-1!==this.im?" "+this.im:"")+" "+this.mode.name+")"},on.prototype.freeze=function(){return this.Q=!0,this},on.prototype.Ra=function(){return this.Q=!1,this},Yh.defineProperty(on,{im:null},function(){return this.GD},function(t){this.Q&&Yh.la(this),Yh.j(t,"number",on,"targetId"),this.GD=t}),Yh.defineProperty(on,{my:"targetProperty"},function(){return this.yp},function(t){this.Q&&Yh.la(this),Yh.j(t,"string",on,"targetProperty"),this.yp=t}),Yh.defineProperty(on,{xq:"sourceName"},function(){return this.Aw},function(t){this.Q&&Yh.la(this),null!==t&&Yh.j(t,"string",on,"sourceName"),this.Aw=t,null!==t&&(this.Nr=!1)}),Yh.defineProperty(on,{Cx:"isToModel"},function(){return this.Nr},function(t){this.Q&&Yh.la(this),Yh.j(t,"boolean",on,"isToModel"),this.Nr=t}),Yh.defineProperty(on,{kG:"sourceProperty"},function(){return this.op},function(t){this.Q&&Yh.la(this),Yh.j(t,"string",on,"sourceProperty"),this.op=t}),Yh.defineProperty(on,{yH:"converter"},function(){return this.Vq},function(t){this.Q&&Yh.la(this),null!==t&&Yh.j(t,"function",on,"converter"),this.Vq=t}),Yh.defineProperty(on,{lH:"backConverter"},function(){return this.Oq},function(t){this.Q&&Yh.la(this),null!==t&&Yh.j(t,"function",on,"backConverter"),this.Oq=t}),Yh.defineProperty(on,{mode:"mode"},function(){return this.gs},function(t){this.Q&&Yh.la(this),Yh.mb(t,on,on,"mode"),this.gs=t}),on.prototype.makeTwoWay=on.prototype.MI=function(t){return void 0===t&&(t=null),null!==t&&Yh.j(t,"function",on,"makeTwoWay"),this.mode=kf,this.lH=t,this},on.prototype.ofObject=on.prototype.Nx=function(t){return void 0===t&&(t=""),this.xq=t,this.Cx=!1,this},on.prototype.ofModel=function(){return this.xq=null,this.Cx=!0,this},on.prototype.updateTarget=on.prototype.zG=function(t,n,i){var e=this.op;if(void 0===i||""===e||e===i){i=this.yp;var o=this.Vq;if(null===o&&""===i)Yh.trace("Binding error: target property is the empty string: "+this.toString());else{var r=n;if(""!==e&&(r=Yh.sb(n,e)),void 0!==r)if(null===o)""!==i&&Yh.La(t,i,r);else try{if(""!==i){var s=o(r,t);Yh.La(t,i,s)}else o(r,t)}catch(t){}}}},on.prototype.updateSource=on.prototype.ny=function(t,n,i,e){if(this.gs===kf){var o=this.yp;if(void 0===i||o===i){i=this.op;var r=this.Oq,s=t;if(""!==o&&(s=Yh.sb(t,o)),void 0!==s&&!this.az.contains(t))try{this.az.add(t);var l=null!==e?e.g:null,a=null!==l?l.ba:null;if(null===r){if(""!==i)null!==a?a.setDataProperty(n,i,s):Yh.La(n,i,s);else if(null!==a&&null!==e&&0<=e.hu&&null!==e.O&&Array.isArray(e.O.dq)){var h=e.hu,u=e.O.dq;a.OF(u,h),a.vA(u,h,s)}}else try{if(""!==i){var f=r(s,n,a);null!==a?a.setDataProperty(n,i,f):Yh.La(n,i,f)}else void 0!==(f=r(s,n,a))&&null!==a&&null!==e&&0<=e.hu&&null!==e.O&&Array.isArray(e.O.dq)&&(h=e.hu,u=e.O.dq,a.OF(u,h),a.vA(u,h,f))}catch(t){}}finally{this.az.remove(t)}}}},Yh.ga("Transaction",sn),sn.prototype.toString=function(t){var n="Transaction: "+this.name+" "+this.Rf.count.toString()+(this.bu?"":", incomplete");if(void 0!==t&&0<t){t=this.Rf.count;for(var i=0;i<t;i++){var e=this.Rf.ea(i);null!==e&&(n+="\n  "+e.toString())}}return n},sn.prototype.clear=sn.prototype.clear=function(){var t=this.Rf;t.Ra();for(var n=t.count-1;0<=n;n--){var i=t.ea(n);null!==i&&i.clear()}t.clear(),t.freeze()},sn.prototype.canUndo=sn.prototype.canUndo=function(){return this.bu},sn.prototype.undo=sn.prototype.undo=function(){if(this.canUndo())for(var t=this.Rf.count-1;0<=t;t--){var n=this.Rf.ea(t);null!==n&&n.undo()}},sn.prototype.canRedo=sn.prototype.canRedo=function(){return this.bu},sn.prototype.redo=sn.prototype.redo=function(){if(this.canRedo())for(var t=this.Rf.count,n=0;n<t;n++){var i=this.Rf.ea(n);null!==i&&i.redo()}},Yh.u(sn,{Rf:"changes"},function(){return this.FG}),Yh.defineProperty(sn,{name:"name"},function(){return this.Rb},function(t){this.Rb=t}),Yh.defineProperty(sn,{bu:"isComplete"},function(){return this.LC},function(t){this.LC=t}),Yh.ga("UndoManager",ln),ln.prototype.toString=function(t){for(var n="UndoManager "+this.qj+"<"+this.history.count+"<="+this.yF,n=n+"[",i=this.DF.count,e=0;e<i;e++)0<e&&(n+=" "),n+=this.DF.ea(e);if(n+="]",void 0!==t&&0<t)for(i=this.history.count,e=0;e<i;e++)n+="\n "+this.history.ea(e).toString(t-1);return n},ln.prototype.clear=ln.prototype.clear=function(){var t=this.history;t.Ra();for(var n=t.count-1;0<=n;n--){var i=t.ea(n);null!==i&&i.clear()}t.clear(),this.eh=-1,t.freeze(),this.Li=!1,this.rv=null,this.zl=0,this.jh.Ra(),this.jh.clear(),this.jh.freeze(),this.dp.clear()},ln.prototype.addModel=ln.prototype.dH=function(t){this.qz.add(t)},ln.prototype.removeModel=ln.prototype.mJ=function(t){this.qz.remove(t)},ln.prototype.startTransaction=ln.prototype.Ub=function(t){if(void 0===t&&(t=""),null===t&&(t=""),this.hb)return!1;!0===this.bz&&(this.bz=!1,this.zl++,this.cd("StartingFirstTransaction",t,this.lj),0<this.zl&&this.zl--),this.isEnabled&&(this.jh.Ra(),this.jh.add(t),this.jh.freeze(),null===this.lj?this.dp.add(0):this.dp.add(this.lj.Rf.count)),this.zl++;var n=1===this.Gh;return n&&this.cd("StartedTransaction",t,this.lj),n},ln.prototype.commitTransaction=ln.prototype.Gd=function(t){return void 0===t&&(t=""),an(this,!0,t)},ln.prototype.rollbackTransaction=ln.prototype.mq=function(){return an(this,!1,"")},ln.prototype.canUndo=ln.prototype.canUndo=function(){if(!this.isEnabled||0<this.Gh||this.hb)return!1;var t=this.uG;return!(null===t||!t.canUndo())},ln.prototype.undo=ln.prototype.undo=function(){if(this.canUndo()){var t=this.uG;try{this.cd("StartingUndo","Undo",t),this.Li=!0,this.eh--,t.undo()}catch(t){Yh.trace("undo error: "+t.toString())}finally{this.Li=!1,this.cd("FinishedUndo","Undo",t)}}},ln.prototype.canRedo=ln.prototype.canRedo=function(){if(!this.isEnabled||0<this.Gh||this.hb)return!1;var t=this.tG;return!(null===t||!t.canRedo())},ln.prototype.redo=ln.prototype.redo=function(){if(this.canRedo()){var t=this.tG;try{this.cd("StartingRedo","Redo",t),this.Li=!0,this.eh++,t.redo()}catch(t){Yh.trace("redo error: "+t.toString())}finally{this.Li=!1,this.cd("FinishedRedo","Redo",t)}}},ln.prototype.cd=function(t,n,i){void 0===i&&(i=null);var e=new At;for(e.yc=vf,e.propertyName=t,e.object=i,e.oldValue=n,t=this.XI;t.next();)n=t.value,e.ba=n,n.Vw(e)},ln.prototype.handleChanged=ln.prototype.aF=function(t){if(this.isEnabled&&!this.hb&&!this.skipsEvent(t)){var n=this.lj;null===n&&(this.rv=n=new sn);var i=t.copy(),n=n.Rf;n.Ra(),n.add(i),n.freeze(),this.Vz&&0>=this.Gh&&!this.bz&&(null!==(t=t.g)&&!1===t.Gn||Yh.trace("Change not within a transaction: "+i.toString()))}},ln.prototype.skipsEvent=function(t){if(null===t||0>t.yc.value)return!0;if((t=t.object)instanceof To){if(null!==(t=t.layer)&&t.Kc)return!0}else if(t instanceof Oi&&t.Kc)return!0;return!1},Yh.u(ln,{XI:"models"},function(){return this.qz.i}),Yh.defineProperty(ln,{isEnabled:"isEnabled"},function(){return this.df},function(t){this.df=t}),Yh.u(ln,{uG:"transactionToUndo"},function(){return 0<=this.qj&&this.qj<=this.history.count-1?this.history.ea(this.qj):null}),Yh.u(ln,{tG:"transactionToRedo"},function(){return this.qj<this.history.count-1?this.history.ea(this.qj+1):null}),Yh.u(ln,{hb:"isUndoingRedoing"},function(){return this.Li}),Yh.u(ln,{history:"history"},function(){return this.JG}),Yh.defineProperty(ln,{yF:"maxHistoryLength"},function(){return this.$C},function(t){this.$C=t}),Yh.u(ln,{qj:"historyIndex"},function(){return this.eh}),Yh.u(ln,{lj:"currentTransaction"},function(){return this.rv}),Yh.u(ln,{Gh:"transactionLevel"},function(){return this.zl}),Yh.u(ln,{nF:"isInTransaction"},function(){return 0<this.zl}),Yh.defineProperty(ln,{Vz:"checksTransactionLevel"},function(){return this.WB},function(t){this.WB=t}),Yh.u(ln,{DF:"nestedTransactionNames"},function(){return this.jh}),Yh.ga("CommandHandler",hn);var Pf=null,Tf="";hn.prototype.toString=function(){return"CommandHandler"},Yh.u(hn,{g:"diagram"},function(){return this.Z}),hn.prototype.Qc=function(t){this.Z=t},hn.prototype.doKeyDown=function(){var t=this.g;if(null!==t){var n=t.R,i=Yh.Fk?n.ou:n.control,e=n.shift,o=n.alt,r=n.key;!i||"C"!==r&&"Insert"!==r?i&&"X"===r||e&&"Del"===r?this.canCutSelection()&&this.cutSelection():i&&"V"===r||e&&"Insert"===r?this.canPasteSelection()&&this.pasteSelection():i&&"Y"===r||o&&e&&"Backspace"===r?this.canRedo()&&this.redo():i&&"Z"===r||o&&"Backspace"===r?this.canUndo()&&this.undo():"Del"===r||"Backspace"===r?this.canDeleteSelection()&&this.deleteSelection():i&&"A"===r?this.canSelectAll()&&this.selectAll():"Esc"===r?this.canStopCommand()&&this.stopCommand():"Up"===r?t.ne&&(i?t.scroll("pixel","up"):t.scroll("line","up")):"Down"===r?t.ne&&(i?t.scroll("pixel","down"):t.scroll("line","down")):"Left"===r?t.me&&(i?t.scroll("pixel","left"):t.scroll("line","left")):"Right"===r?t.me&&(i?t.scroll("pixel","right"):t.scroll("line","right")):"PageUp"===r?e&&t.me?t.scroll("page","left"):t.ne&&t.scroll("page","up"):"PageDown"===r?e&&t.me?t.scroll("page","right"):t.ne&&t.scroll("page","down"):"Home"===r?i&&t.ne?t.scroll("document","up"):!i&&t.me&&t.scroll("document","left"):"End"===r?i&&t.ne?t.scroll("document","down"):!i&&t.me&&t.scroll("document","right"):" "===r?this.canScrollToPart()&&this.scrollToPart():"Subtract"===r?this.canDecreaseZoom()&&this.decreaseZoom():"Add"===r?this.canIncreaseZoom()&&this.increaseZoom():i&&"0"===r?this.canResetZoom()&&this.resetZoom():e&&"Z"===r?this.canZoomToFit()&&this.zoomToFit():i&&!e&&"G"===r?this.canGroupSelection()&&this.groupSelection():i&&e&&"G"===r?this.canUngroupSelection()&&this.ungroupSelection():n.event&&113===n.event.which?this.canEditTextBlock()&&this.editTextBlock():n.event&&93===n.event.which?this.canShowContextMenu()&&this.showContextMenu():n.bubbles=!0:this.canCopySelection()&&this.copySelection()}},hn.prototype.doKeyUp=function(){var t=this.g;null!==t&&(t.R.bubbles=!0)},hn.prototype.stopCommand=function(){var t=this.g;if(null!==t){var n=t.$a;n instanceof vi&&t.vf&&t.Ww(),null!==n&&n.doCancel()}},hn.prototype.canStopCommand=function(){return!0},hn.prototype.selectAll=function(){var t=this.g;if(null!==t){t.na();try{t.dc="wait",t.Aa("ChangingSelection");for(var n=t.Jk;n.next();)n.value.gb=!0;for(var i=t.fg;i.next();)i.value.gb=!0;for(var e=t.links;e.next();)e.value.gb=!0}finally{t.Aa("ChangedSelection"),t.dc=""}}},hn.prototype.canSelectAll=function(){var t=this.g;return null!==t&&t.vf},hn.prototype.deleteSelection=function(){var t=this.g;if(null!==t&&!t.Aa("SelectionDeleting",t.selection))try{t.dc="wait",t.Ub("Delete"),t.Aa("ChangingSelection");for(var n=new d(as),i=t.selection.i;i.next();)un(n,i.value,!0,this.JH?1/0:0,this.CE,function(t){return t.canDelete()});t.XA(n,!0),t.Aa("SelectionDeleted",n)}finally{t.Aa("ChangedSelection"),t.Gd("Delete"),t.dc=""}},hn.prototype.canDeleteSelection=function(){var t=this.g;return!(null===t||t.fb||t.zf||!t.gn||0===t.selection.count)},hn.prototype.Lp=function(t,n,i){var e=new b(as,as);for(t=t.i;t.next();)fn(this,t.value,n,e,i);if(null!==n){i=n.ba,t=!1,null!==n.bb.re&&(t=n.bb.re.nj);for(var o=new d(Js),r=new b(Js,Js),s=e.i;s.next();){var l=s.value;if(l instanceof Js){var a=l;t||null!==a.Y&&null!==a.$||o.add(a)}else if(i instanceof en&&l instanceof As&&null!==l.data){var a=i,h=l,l=s.key,u=l.Rl();null!==u&&(u=e.ja(u),null!==u?(a.pi(h.data,a.ub(u.data)),a=n.Sf(h.data),null!==(l=l.xn())&&null!==a&&r.add(l,a)):a.pi(h.data,void 0))}}if(0<o.count&&n.XA(o,!1),0<r.count)for(i=r.i;i.next();)e.add(i.key,i.value)}if(null!==n&&null!==this.g&&(n=n.ba,null!==(i=n.fH))){var f=new b;e.each(function(t){null!==t.key.data&&f.add(t.key.data,t.value.data)}),i(f,n,this.g.ba)}for(n=e.i;n.next();)n.value.Hb();return e},hn.prototype.copySelection=function(){var t=this.g;if(null!==t){for(var n=new d(as),t=t.selection.i;t.next();)un(n,t.value,!0,this.CH?1/0:0,this.AH,function(t){return t.canCopy()});this.copyToClipboard(n)}},hn.prototype.canCopySelection=function(){var t=this.g;return!(null===t||!t.tk||!t.Qz||0===t.selection.count)},hn.prototype.cutSelection=function(){this.copySelection(),this.deleteSelection()},hn.prototype.canCutSelection=function(){var t=this.g;return!(null===t||t.fb||t.zf||!t.tk||!t.gn||!t.Qz||0===t.selection.count)},hn.prototype.copyToClipboard=function(t){var n=this.g;if(null!==n){var i=null;if(null===t)Pf=null,Tf="";else{var i=n.ba,e=!1,o=null;try{if(i instanceof en){var r=i;r.sn;r.sn=this.vE}i instanceof Zt&&(r=i,e=r.rn,r.rn=this.uE),o=n.Lp(t,null,!0)}finally{i instanceof en&&(i.sn=!1),i instanceof Zt&&(i.rn=e),i=new f(as),i.Hc(o),Pf=i,Tf=n.ba.Ll}}n.Aa("ClipboardChanged",i)}},hn.prototype.pasteFromClipboard=function(){var t=new d(as),n=Pf;if(null===n)return t;var i=this.g;if(null===i||Tf!==i.ba.Ll)return t;var e=i.ba,o=!1,r=!1,s=null;try{if(e instanceof en){var l=e,o=l.sn;l.sn=this.vE}e instanceof Zt&&(l=e,r=l.rn,l.rn=this.uE),s=i.Lp(n,i,!1)}finally{for(e instanceof en&&(e.sn=o),e instanceof Zt&&(e.rn=r),n=s.i;n.next();)i=n.value,e=n.key,i.location.I()||(e.location.I()?i.location=e.location:!i.position.I()&&e.position.I()&&(i.position=e.position)),t.add(i)}return t},hn.prototype.pasteSelection=function(t){void 0===t&&(t=null);var n=this.g;if(null!==n)try{n.dc="wait",n.Ub("Paste"),n.Aa("ChangingSelection");var i=this.pasteFromClipboard();0<i.count&&Me(n);for(var e=i.i;e.next();)e.value.gb=!0;if(n.Aa("ChangedSelection"),null!==t){var o=n.computePartsBounds(n.selection);if(o.I()){var r=n.bb.re;null===r&&(r=new yn,r.Qc(n));var s=r.computeEffectiveCollection(n.selection);r.moveParts(s,new x(t.x-o.ka,t.y-o.ra),!1)}}n.Aa("ClipboardPasted",i)}finally{n.Gd("Paste"),n.dc=""}},hn.prototype.canPasteSelection=function(){var t=this.g;return!(null===t||t.fb||t.zf||!t.Ep||!t.Qz||null===Pf||Tf!==t.ba.Ll)},hn.prototype.undo=function(){var t=this.g;null!==t&&t.oa.undo()},hn.prototype.canUndo=function(){var t=this.g;return null!==t&&!t.fb&&!t.zf&&(t.iE&&t.oa.canUndo())},hn.prototype.redo=function(){var t=this.g;null!==t&&t.oa.redo()},hn.prototype.canRedo=function(){var t=this.g;return null!==t&&!t.fb&&!t.zf&&(t.iE&&t.oa.canRedo())},hn.prototype.decreaseZoom=function(t){void 0===t&&(t=1/this.qy),Yh.Fd(t,hn,"decreaseZoom:factor");var n=this.g;null!==n&&n.Gl===tc&&((t*=n.scale)<n.zh||t>n.yh||(n.scale=t))},hn.prototype.canDecreaseZoom=function(t){void 0===t&&(t=1/this.qy),Yh.Fd(t,hn,"canDecreaseZoom:factor");var n=this.g;return null!==n&&n.Gl===tc&&(!((t*=n.scale)<n.zh||t>n.yh)&&n.Uw)},hn.prototype.increaseZoom=function(t){void 0===t&&(t=this.qy),Yh.Fd(t,hn,"increaseZoom:factor");var n=this.g;null!==n&&n.Gl===tc&&((t*=n.scale)<n.zh||t>n.yh||(n.scale=t))},hn.prototype.canIncreaseZoom=function(t){void 0===t&&(t=this.qy),Yh.Fd(t,hn,"canIncreaseZoom:factor");var n=this.g;return null!==n&&n.Gl===tc&&(!((t*=n.scale)<n.zh||t>n.yh)&&n.Uw)},hn.prototype.resetZoom=function(t){void 0===t&&(t=this.bx),Yh.Fd(t,hn,"resetZoom:newscale");var n=this.g;null===n||t<n.zh||t>n.yh||(n.scale=t)},hn.prototype.canResetZoom=function(t){void 0===t&&(t=this.bx),Yh.Fd(t,hn,"canResetZoom:newscale");var n=this.g;return!(null===n||t<n.zh||t>n.yh)&&n.Uw},hn.prototype.zoomToFit=function(){var t=this.g;if(null!==t){var n=t.scale,i=t.position;n===this.Oz&&!isNaN(this.mz)&&t.qe.L(this.Nz)?(t.scale=this.mz,t.position=this.WC,this.Oz=NaN,this.Nz=zu):(this.mz=n,this.WC=i.copy(),t.zoomToFit(),this.Oz=t.scale,this.Nz=t.qe.copy())}},hn.prototype.canZoomToFit=function(){var t=this.g;return null!==t&&t.Uw},hn.prototype.scrollToPart=function(t){void 0===t&&(t=null),null!==t&&Yh.G(t,as,hn,"part");var n=this.g;if(null!==n){if(null===t){try{null!==this.bj&&(this.bj.next()?t=this.bj.value:this.bj=null)}catch(t){this.bj=null}null===t&&(0<n.Wl.count?this.bj=n.Wl.i:0<n.selection.count&&(this.bj=n.selection.i),null!==this.bj&&this.bj.next()&&(t=this.bj.value))}if(null!==t){var i=n.Oa;i.Tn("Scroll To Part");var e=n.position.copy();n.mH(t.W),e.Ic(n.position)&&i.qi()}}},hn.prototype.canScrollToPart=function(t){return void 0===t&&(t=null),(null===t||t instanceof as)&&(null!==(t=this.g)&&(0!==t.selection.count||0!==t.Wl.count)&&(t.me&&t.ne))},hn.prototype.collapseTree=function(t){void 0===t&&(t=null);var n=this.g;if(null!==n)try{n.Ub("Collapse Tree"),n.Oa.Tn("Collapse Tree");var i=new f(As);if(null!==t&&t.gd)t.collapseTree(),i.add(t);else for(var e=n.selection.i;e.next();){var o=e.value;o instanceof As&&(t=o,t.gd&&(t.collapseTree(),i.add(t)))}n.Aa("TreeCollapsed",i)}finally{n.Gd("Collapse Tree")}},hn.prototype.canCollapseTree=function(t){void 0===t&&(t=null);var n=this.g;if(null===n||n.fb)return!1;if(null!==t){if(!(t instanceof As&&t.gd))return!1;if(0<t.ox().count)return!0}else for(t=n.selection.i;t.next();)if((n=t.value)instanceof As&&n.gd&&0<n.ox().count)return!0;return!1},hn.prototype.expandTree=function(t){void 0===t&&(t=null);var n=this.g;if(null!==n)try{n.Ub("Expand Tree"),n.Oa.Tn("Expand Tree");var i=new f(As);if(null===t||t.gd)for(var e=n.selection.i;e.next();){var o=e.value;o instanceof As&&(t=o,t.gd||(t.expandTree(),i.add(t)))}else t.expandTree(),i.add(t);n.Aa("TreeExpanded",i)}finally{n.Gd("Expand Tree")}},hn.prototype.canExpandTree=function(t){void 0===t&&(t=null);var n=this.g;if(null===n||n.fb)return!1;if(null!==t){if(!(t instanceof As)||t.gd)return!1;if(0<t.ox().count)return!0}else for(t=n.selection.i;t.next();)if((n=t.value)instanceof As&&!n.gd&&0<n.ox().count)return!0;return!1},hn.prototype.groupSelection=function(){var t=this.g;if(null!==t){var n=t.ba;if(n instanceof Zt){var i=this.jE;if(null!==i){var e=null;try{t.dc="wait",t.Ub("Group"),t.Aa("ChangingSelection");for(var o=new f(as),r=t.selection.i;r.next();){var s=r.value;s.de()&&s.canGroup()&&o.add(s)}for(var l=new f(as),a=o.i;a.next();){for(var h=a.value,r=!1,u=o.i;u.next();)if(h.ni(u.value)){r=!0;break}r||l.add(h)}if(0<l.count){var c=l.first().Pa;if(null!==c)for(;null!==c;){for(var o=!1,d=l.i;d.next();)if(!d.value.ni(c)){o=!0;break}if(!o)break;c=c.Pa}if(i instanceof Ll)br(i),null!==(e=i.copy())&&t.add(e);else if(n.zA(i)){var p=n.copyNodeData(i);Yh.Qa(p)&&(n.Cl(p),e=t.nx(p))}if(null!==e){null!==c&&this.isValidMember(c,e)&&(e.Pa=c);for(var y=l.i;y.next();){var v=y.value;this.isValidMember(e,v)&&(v.Pa=e)}t.select(e)}}t.Aa("ChangedSelection"),t.Aa("SelectionGrouped",e)}finally{t.Gd("Group"),t.dc=""}}}}},hn.prototype.canGroupSelection=function(){var t=this.g;if(null===t||t.fb||t.zf||!t.Ep||!t.Pw||!(t.ba instanceof Zt)||null===this.jE)return!1;for(t=t.selection.i;t.next();){var n=t.value;if(n.de()&&n.canGroup())return!0}return!1},hn.prototype.isValidMember=function(t,n){if(null===n||t===n||n instanceof Js)return!1;if(null!==t){if(t===n||t.ni(n))return!1;var i=t.JA;if(null!==i&&!i(t,n)||null===t.data&&null!==n.data||null!==t.data&&null===n.data)return!1}return null===(i=this.JA)||i(t,n)},hn.prototype.ungroupSelection=function(t){void 0===t&&(t=null);var n=this.g;if(null!==n){var i=n.ba;if(i instanceof Zt)try{n.dc="wait",n.Ub("Ungroup"),n.Aa("ChangingSelection");var e=new f(Ll);if(null!==t)e.add(t);else for(var o=n.selection.i;o.next();){var r=o.value;r instanceof Ll&&(t=r,t.canUngroup()&&e.add(t))}if(0<e.count){n.Ww();for(var s=e.i;s.next();){var l=s.value;l.expandSubGraph();var a=l.Pa,h=null!==a&&null!==a.data?i.ub(a.data):void 0,u=new f(as);u.Hc(l.Nc);for(var c=u.i;c.next();){var d=c.value;if(d.gb=!0,!(d instanceof Js)){var p=d.data;null!==p?i.fB(p,h):d.Pa=a}}n.remove(l)}}n.Aa("ChangedSelection"),n.Aa("SelectionUngrouped",e,u)}finally{n.Gd("Ungroup"),n.dc=""}}},hn.prototype.canUngroupSelection=function(t){void 0===t&&(t=null);var n=this.g;if(null===n||n.fb||n.zf||!n.gn||!n.Tw||!(n.ba instanceof Zt))return!1;if(null!==t){if(!(t instanceof Ll))return!1;if(t.canUngroup())return!0}else for(t=n.selection.i;t.next();)if((n=t.value)instanceof Ll&&n.canUngroup())return!0;return!1},hn.prototype.addTopLevelParts=function(t,n){for(var i=!0,e=cn(t).i;e.next();){var o=e.value;null!==o.Pa&&(!n||this.isValidMember(null,o)?o.Pa=null:i=!1)}return i},hn.prototype.collapseSubGraph=function(t){void 0===t&&(t=null);var n=this.g;if(null!==n)try{n.Ub("Collapse SubGraph"),n.Oa.Tn("Collapse SubGraph");var i=new f(Ll);if(null!==t&&t.we)t.collapseSubGraph(),i.add(t);else for(var e=n.selection.i;e.next();){var o=e.value;o instanceof Ll&&(t=o,t.we&&(t.collapseSubGraph(),i.add(t)))}n.Aa("SubGraphCollapsed",i)}finally{n.Gd("Collapse SubGraph")}},hn.prototype.canCollapseSubGraph=function(t){void 0===t&&(t=null);var n=this.g;if(null===n||n.fb)return!1;if(null!==t)return!!(t instanceof Ll&&t.we);for(t=n.selection.i;t.next();)if((n=t.value)instanceof Ll&&n.we)return!0;return!1},hn.prototype.expandSubGraph=function(t){void 0===t&&(t=null);var n=this.g;if(null!==n)try{n.Ub("Expand SubGraph"),n.Oa.Tn("Expand SubGraph");var i=new f(Ll);if(null===t||t.we)for(var e=n.selection.i;e.next();){var o=e.value;o instanceof Ll&&(t=o,t.we||(t.expandSubGraph(),i.add(t)))}else t.expandSubGraph(),i.add(t);n.Aa("SubGraphExpanded",i)}finally{n.Gd("Expand SubGraph")}},hn.prototype.canExpandSubGraph=function(t){void 0===t&&(t=null);var n=this.g;if(null===n||n.fb)return!1;if(null!==t)return t instanceof Ll&&!t.we;for(t=n.selection.i;t.next();)if((n=t.value)instanceof Ll&&!n.we)return!0;return!1},hn.prototype.editTextBlock=function(t){void 0===t&&(t=null),null!==t&&Yh.G(t,qr,hn,"editTextBlock");var n=this.g;if(null!==n){var i=n.bb.oB;if(null!==i){if(null===t){t=null;for(var e=n.selection.i;e.next();){var o=e.value;if(o.canEdit()){t=o;break}}if(null===t)return;t=t.Jt(function(t){return t instanceof qr&&t.gA})}null!==t&&(n.$a=null,i.Yg=t,n.$a=i)}}},hn.prototype.canEditTextBlock=function(t){void 0===t&&(t=null);var n=this.g;if(null===n||n.fb||n.zf||!n.Sw||null===n.bb.oB)return!1;if(null!==t){if(!(t instanceof qr))return!1;if(null!==(t=t.U)&&t.canEdit())return!0}else for(n=n.selection.i;n.next();)if(t=n.value,t.canEdit()&&null!==(t=t.Jt(function(t){return t instanceof qr&&t.gA})))return!0;return!1},hn.prototype.showContextMenu=function(t){var n=this.g;if(null!==n){var i=n.bb.Zz;if(null!==i&&(void 0===t&&(t=0<n.selection.count?n.selection.first():n),null!==(t=i.findObjectWithContextMenu(t)))){var e=new Lt,o=null;t instanceof To?o=t.Xa(lu):n.wI||(o=n.pb,o=new x(o.x+o.width/2,o.y+o.height/2)),null!==o&&(e.g=n,e.cf=n.vG(o),e.da=o,e.left=!1,e.right=!0,e.up=!0,n.R=e),n.$a=i,li(i,!1,t)}}},hn.prototype.canShowContextMenu=function(t){var n=this.g;if(null===n)return!1;var i=n.bb.Zz;return null!==i&&(void 0===t&&(t=0<n.selection.count?n.selection.first():n),null!==i.findObjectWithContextMenu(t))},Yh.defineProperty(hn,{zH:"copiesClipboardData"},function(){return this.ZB},function(t){Yh.j(t,"boolean",hn,"copiesClipboardData"),this.ZB=t}),Yh.defineProperty(hn,{AH:"copiesConnectedLinks"},function(){return this.$B},function(t){Yh.j(t,"boolean",hn,"copiesConnectedLinks"),this.$B=t}),Yh.defineProperty(hn,{CE:"deletesConnectedLinks"},function(){return this.tC},function(t){Yh.j(t,"boolean",hn,"deletesConnectedLinks"),this.tC=t}),Yh.defineProperty(hn,{CH:"copiesTree"},function(){return this.dC},function(t){Yh.j(t,"boolean",hn,"copiesTree"),this.dC=t}),Yh.defineProperty(hn,{JH:"deletesTree"},function(){return this.uC},function(t){Yh.j(t,"boolean",hn,"deletesTree"),this.uC=t}),Yh.defineProperty(hn,{vE:"copiesParentKey"},function(){return this.cC},function(t){Yh.j(t,"boolean",hn,"copiesParentKey"),this.cC=t}),Yh.defineProperty(hn,{uE:"copiesGroupKey"},function(){return this.bC},function(t){Yh.j(t,"boolean",hn,"copiesGroupKey"),this.bC=t}),Yh.defineProperty(hn,{jE:"archetypeGroupData"},function(){return this.PB},function(t){null!==t&&Yh.G(t,Object,hn,"archetypeGroupData");var n=this.g;null!==n&&(n=n.ba)instanceof Zt&&(t instanceof Ll||n.zA(t)||Yh.k("CommandHandler.archetypeGroupData must be either a Group or a data object for which GraphLinksModel.isGroupForNodeData is true: "+t)),this.PB=t}),Yh.defineProperty(hn,{JA:"memberValidation"},function(){return this.ql},function(t){null!==t&&Yh.j(t,"function",hn,"memberValidation"),this.ql=t}),Yh.defineProperty(hn,{bx:"defaultScale"},function(){return this.qC},function(t){Yh.Fd(t,hn,"defaultScale"),0<t||Yh.k("defaultScale must be larger than zero, not: "+t),this.qC=t}),Yh.defineProperty(hn,{qy:"zoomFactor"},function(){return this.$D},function(t){Yh.Fd(t,hn,"zoomFactor"),1<t||Yh.k("zoomFactor must be larger than 1.0, not: "+t),this.$D=t}),Yh.ga("Tool",dn),dn.prototype.Qc=function(t){this.Z=t},dn.prototype.toString=function(){return""!==this.name?this.name+" Tool":Yh.jf(Object.getPrototypeOf(this))},dn.prototype.updateAdornments=function(){},dn.prototype.canStart=function(){return this.isEnabled},dn.prototype.doStart=function(){},dn.prototype.doActivate=function(){this.sa=!0},dn.prototype.doDeactivate=function(){this.sa=!1},dn.prototype.doStop=function(){},dn.prototype.doCancel=function(){this.stopTool()},dn.prototype.stopTool=function(){var t=this.g;null!==t&&t.$a===this&&(t.$a=null,t.dc="")},dn.prototype.doMouseDown=function(){!this.sa&&this.canStart()&&this.doActivate()},dn.prototype.doMouseMove=function(){},dn.prototype.doMouseUp=function(){this.stopTool()},dn.prototype.doMouseWheel=function(){},dn.prototype.canStartMultiTouch=function(){return!0},dn.prototype.standardPinchZoomStart=function(){var t=this.g;if(null!==t){var n=t.R,i=n.sx(0,Yh.xb(NaN,NaN)),e=n.sx(1,Yh.xb(NaN,NaN));if(i.I()&&e.I()&&(this.doCancel(),t.Vt("hasGestureZoom"))){t.jD=t.scale;var o=e.x-i.x,r=e.y-i.y;t.BD=Math.sqrt(o*o+r*r),n.bubbles=!1}Yh.v(i),Yh.v(e)}},dn.prototype.standardPinchZoomMove=function(){var t=this.g;if(null!==t){var n=t.R,i=n.sx(0,Yh.xb(NaN,NaN)),e=n.sx(1,Yh.xb(NaN,NaN));if(i.I()&&e.I()&&(this.doCancel(),t.Vt("hasGestureZoom"))){var o=e.x-i.x,r=e.y-i.y,r=Math.sqrt(o*o+r*r)/t.BD,o=new x((Math.min(e.x,i.x)+Math.max(e.x,i.x))/2,(Math.min(e.y,i.y)+Math.max(e.y,i.y))/2),r=t.jD*r,s=t.ob;if(r!==t.scale&&s.canResetZoom(r)){var l=t.mm;t.mm=o,s.resetZoom(r),t.mm=l}n.bubbles=!1}Yh.v(i),Yh.v(e)}},dn.prototype.doKeyDown=function(){var t=this.g;null!==t&&"Esc"===t.R.key&&this.doCancel()},dn.prototype.doKeyUp=function(){},dn.prototype.startTransaction=dn.prototype.Ub=function(t){void 0===t&&(t=this.name),this.Hf=null;var n=this.g;return null!==n&&n.Ub(t)},dn.prototype.stopTransaction=dn.prototype.Lk=function(){var t=this.g;return null!==t&&(null===this.Hf?t.mq():t.Gd(this.Hf))},dn.prototype.standardMouseSelect=function(){var t=this.g;if(null!==t&&t.vf){var n=t.R,i=t.Mt(n.da,!1);if(null!==i){if(Yh.Fk?n.ou:n.control){for(t.Aa("ChangingSelection"),n=i;null!==n&&!n.canSelect();)n=n.Pa;null!==n&&(n.gb=!n.gb),t.Aa("ChangedSelection")}else if(n.shift){if(!i.gb){for(t.Aa("ChangingSelection"),n=i;null!==n&&!n.canSelect();)n=n.Pa;null!==n&&(n.gb=!0),t.Aa("ChangedSelection")}}else if(!i.gb){for(n=i;null!==n&&!n.canSelect();)n=n.Pa;null!==n&&t.select(n)}}else!n.left||(Yh.Fk?n.ou:n.control)||n.shift||t.Ww()}},dn.prototype.standardMouseClick=function(t,n){void 0===t&&(t=null),void 0===n&&(n=function(t){return!t.layer.Kc});var i=this.g;if(null===i)return!1;var e=i.R,o=i.Je(e.da,t,n);return e.Pe=o,pn(o,e,i),e.Ac},dn.prototype.standardMouseOver=function(){var t=this.g;if(null!==t){var n=t.R;if(null!==n.g&&!0!==t.Oa.pc){var i=t.wb;t.wb=!0;var e=t.Je(n.da,null,null);n.Pe=e;var o=!1;if(e!==t.vo){var r=t.vo,s=r;for(t.vo=e,this.doCurrentObjectChanged(r,e),n.Ac=!1;null!==r;){var l=r.qu;if(null!==l){if(e===r)break;if(null!==e&&e.Zl(r))break;if(l(n,r,e),o=!0,n.Ac)break}r=r.O}for(r=s,n.Ac=!1;null!==e;){if(null!==(l=e.pu)){if(r===e)break;if(null!==r&&r.Zl(e))break;if(l(n,e,r),o=!0,n.Ac)break}e=e.O}e=t.vo}if(null!==e){for(r=e,s="";null!==r&&""===(s=r.cursor);)r=r.O;for(t.dc=s,n.Ac=!1,r=e;null!==r&&(null===(e=r.NA)||(e(n,r),o=!0,!n.Ac));)r=r.O}else t.dc="",null!==(e=t.NA)&&(e(n),o=!0);o&&t.Le(),t.wb=i}}},dn.prototype.doCurrentObjectChanged=function(){},dn.prototype.standardMouseWheel=function(){var t=this.g;if(null!==t){var n=t.R,i=n.Nl;if(0!==i&&t.qe.I()){var e=t.ob,o=t.bb.ru;if((o===Xf&&!n.shift||o===Wf&&n.control)&&(0<i?e.canIncreaseZoom():e.canDecreaseZoom()))o=t.mm,t.mm=n.cf,0<i?e.increaseZoom():e.decreaseZoom(),t.mm=o,n.bubbles=!1;else if(o===Xf&&n.shift||o===Wf&&!n.control){var e=t.position.copy(),o=0<i?i:-i,r=n.event.deltaX,s=n.event.deltaY;void 0===r||void 0===s||0===r&&0===s||n.shift?!n.shift&&t.ne?(r=t.Fu,o=o/40*r,0<i?t.scroll("pixel","up",o):t.scroll("pixel","down",o)):n.shift&&t.me&&(r=t.Eu,o=o/40*r,0<i?t.scroll("pixel","left",o):t.scroll("pixel","right",o)):(0!==r&&t.me&&(0<r?t.scroll("pixel","left",-r):t.scroll("pixel","right",r)),0!==s&&t.ne&&(0<s?t.scroll("pixel","up",-s):t.scroll("pixel","down",s))),t.position.L(e)||(n.bubbles=!1)}}}},dn.prototype.standardWaitAfter=function(t,n){Yh.j(t,"number",dn,"standardWaitAfter:delay"),this.cancelWaitAfter();var i=this,e=n.copy();this.Lw=Yh.setTimeout(function(){i.doWaitAfter(e)},t)},dn.prototype.cancelWaitAfter=function(){-1!==this.Lw&&Yh.clearTimeout(this.Lw),this.Lw=-1},dn.prototype.doWaitAfter=function(){},dn.prototype.findToolHandleAt=function(t,n){var i=this.g;return null===i?null:(i=i.Je(t,function(t){for(;null!==t&&!(t.O instanceof Ds);)t=t.O;return t}),null===i?null:i.U.td===n?i:null)},dn.prototype.isBeyondDragSize=function(t,n){var i=this.g;if(null===i)return!1;void 0===t&&(t=i.zc.cf),void 0===n&&(n=i.R.cf);var e=i.bb.NH,o=e.width,e=e.height;return i.zc.uj&&(o+=6,e+=6),Math.abs(n.x-t.x)>o||Math.abs(n.y-t.y)>e},Yh.u(dn,{g:"diagram"},function(){return this.Z}),Yh.defineProperty(dn,{name:"name"},function(){return this.Rb},function(t){Yh.j(t,"string",dn,"name"),this.Rb=t}),Yh.defineProperty(dn,{isEnabled:"isEnabled"},function(){return this.df},function(t){Yh.j(t,"boolean",dn,"isEnabled"),this.df=t}),Yh.defineProperty(dn,{sa:"isActive"},function(){return this.JC},function(t){Yh.j(t,"boolean",dn,"isActive"),this.JC=t}),Yh.defineProperty(dn,{Hf:"transactionResult"},function(){return this.UD},function(t){null!==t&&Yh.j(t,"string",dn,"transactionResult"),this.UD=t}),Yh.Ka(yn,dn),Yh.ga("DraggingTool",yn),Yh.defineProperty(yn,{iF:"isCopyEnabled"},function(){return this.NC},function(t){Yh.j(t,"boolean",yn,"isCopyEnabled"),this.NC=t}),Yh.defineProperty(yn,{BH:"copiesEffectiveCollection"},function(){return this.aC},function(t){Yh.j(t,"boolean",yn,"copiesEffectiveCollection"),this.aC=t}),Yh.defineProperty(yn,{OH:"dragsTree"},function(){return this.zC},function(t){Yh.j(t,"boolean",yn,"dragsTree"),this.zC=t}),Yh.defineProperty(yn,{yx:"isGridSnapEnabled"},function(){return this.Ir},function(t){Yh.j(t,"boolean",yn,"isGridSnapEnabled"),this.Ir=t}),Yh.defineProperty(yn,{rI:"isComplexRoutingRealtime"},function(){return this.MC},function(t){Yh.j(t,"boolean",yn,"isComplexRoutingRealtime"),this.MC=t}),Yh.defineProperty(yn,{tI:"isGridSnapRealtime"},function(){return this.RC},function(t){Yh.j(t,"boolean",yn,"isGridSnapRealtime"),this.RC=t}),Yh.defineProperty(yn,{$E:"gridSnapCellSize"},function(){return this.cz},function(t){Yh.G(t,M,yn,"gridSnapCellSize"),this.cz.L(t)||(this.cz=t=t.S())}),Yh.defineProperty(yn,{cI:"gridSnapCellSpot"},function(){return this.dz},function(t){Yh.G(t,F,yn,"gridSnapCellSpot"),this.dz.L(t)||(this.dz=t=t.S())}),Yh.defineProperty(yn,{dI:"gridSnapOrigin"},function(){return this.ez},function(t){Yh.G(t,x,yn,"gridSnapOrigin"),this.ez.L(t)||(this.ez=t=t.S())}),Yh.defineProperty(yn,{nj:"dragsLink"},function(){return this.yC},function(t){Yh.j(t,"boolean",yn,"dragsLink"),this.yC=t}),Yh.defineProperty(yn,{un:"currentPart"},function(){return this.iC},function(t){null!==t&&Yh.G(t,as,yn,"currentPart"),this.iC=t}),Yh.defineProperty(yn,{cc:"copiedParts"},function(){return this.YB},function(t){this.YB=t}),Yh.defineProperty(yn,{Xb:"draggedParts"},function(){return this.xC},function(t){this.xC=t}),Yh.u(yn,{RK:"draggingParts"},function(){return null!==this.cc?this.cc.Fj():null!==this.Xb?this.Xb.Fj():this.IG}),Yh.defineProperty(yn,{ed:"draggedLink"},function(){return this.Ty},function(t){null!==t&&Yh.G(t,Js,yn,"draggedLink"),this.Ty!==t&&(this.Ty=t,null!==t?(this.gw=t.Jc,this.hw=t.jd):this.hw=this.gw=null)}),Yh.defineProperty(yn,{xx:"isDragOutStarted"},function(){return this.PC},function(t){this.PC=t}),Yh.defineProperty(yn,{Kk:"startPoint"},function(){return this.Bw},function(t){Yh.G(t,x,yn,"startPoint"),this.Bw.L(t)||(this.Bw=t=t.S())}),Yh.defineProperty(yn,{yE:"delay"},function(){return this.Bo},function(t){Yh.j(t,"number",yn,"delay"),this.Bo=t}),yn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||t.fb&&!t.yt||!t.El&&!t.tk&&!t.yt||!t.vf)return!1;var n=t.R;return!(!n.left||t.$a!==this&&(!this.isBeyondDragSize()||n.uj&&n.timestamp-t.zc.timestamp<this.Bo))&&null!==this.findDraggablePart()},yn.prototype.findDraggablePart=function(){var t=this.g;if(null===t)return null;if(null===(t=t.Mt(t.zc.da,!1)))return null;for(;null!==t&&!t.canSelect();)t=t.Pa;return null!==t&&(t.canMove()||t.canCopy())?t:null},yn.prototype.standardMouseSelect=function(){var t=this.g;if(null!==t&&t.vf){var n=t.Mt(t.zc.da,!1);if(null!==n){for(;null!==n&&!n.canSelect();)n=n.Pa;this.un=n,this.un.gb||(t.Aa("ChangingSelection"),n=t.R,(Yh.Fk?n.ou:n.control)||n.shift||Me(t),this.un.gb=!0,t.Aa("ChangedSelection"))}}},yn.prototype.doActivate=function(){var t=this.g;if(null!==t){null===this.un&&this.standardMouseSelect();var n=this.un;null!==n&&(n.canMove()||n.canCopy())&&(this.sa=!0,this.rp.set(t.position),vn(this,t.selection),this.Mj.length=0,this.Xb=this.computeEffectiveCollection(t.selection),t.Lu=!0,wn(this,this.Xb),this.Ub("Drag"),this.Kk=t.zc.da,t.af=!0,t.yt&&(this.xx=!0,this.or=!1,Cf=this,Nf=this.g,this.doSimulatedDragOut()))}},yn.prototype.computeEffectiveCollection=function(t){var n=null!==this.g&&this.g.$a===this,i=new b(as);if(null===t)return i;for(var e=t.i;e.next();)mn(this,i,e.value,n);if(null!==this.ed&&this.nj)return i;for(e=t.i;e.next();)(t=e.value)instanceof Js&&(n=t.Y,null===n||i.contains(n)?null===(n=t.$)||i.contains(n)||i.remove(t):i.remove(t));return i},yn.prototype.doDeactivate=function(){this.sa=!1;var t=this.g;if(null!==t&&oo(t),bn(this),kn(this,this.Xb),this.Xb=this.un=null,this.or=this.xx=!1,0<Sf.count){for(var n=Sf.length,i=0;i<n;i++){var e=Sf.ea(i);Sn(e),Tn(e),bn(e),null!==e.g&&oo(e.g)}Sf.clear()}Sn(this),this.rp.m(NaN,NaN),Cf=Nf=null,Tn(this),t.af=!1,t.dc="",t.Lu=!1,this.Lk()},yn.prototype.doCancel=function(){Tn(this),jn(this);var t=this.g;null!==t&&this.rp.I()&&(t.position=this.rp),this.stopTool()},yn.prototype.doKeyDown=function(){var t=this.g;null!==t&&null!==(t=t.R)&&this.sa&&("Esc"===t.key?this.doCancel():this.doMouseMove())},yn.prototype.doKeyUp=function(){var t=this.g;null!==t&&null!==t.R&&this.sa&&this.doMouseMove()},yn.prototype.moveParts=function(t,n,i){if(null!==t&&(Yh.G(t,b,yn,"moveParts:parts"),0!==t.count)){var e=Yh.K(),o=Yh.K();o.assign(n),isNaN(o.x)&&(o.x=0),isNaN(o.y)&&(o.y=0),(n=this.Ew)||wn(this,t);for(var r=new f(In),s=new f(g),l=t.i;l.next();){var a=l.key;if(a.de()){var h=Nn(this,a,t);if(null!==h)r.add(new In(a,l.value,h));else if(!i||a.canMove()){h=l.value.point,e.assign(h);var u=Yh.K(),c=this.computeMove(a,e.add(o),t,u);a.location=c,l.value.iG=u.Zn(h),Yh.v(u)}}else l.key instanceof Js&&s.add(l.Wa)}for(i=r.i;i.next();)r=i.value,h=r.info.point,e.assign(h),r.Oc.location=e.add(r.eI.iG);for(i=Yh.K(),h=Yh.K(),s=s.i;s.next();)l=s.value,(r=l.key)instanceof Js&&(r.gm?(a=r.Y,u=r.$,null!==this.ed&&this.nj?(l=l.value.point,t.add(r,gn(o)),a=o.x-l.x,l=o.y-l.y,r.Hk(a,l)):(null!==a&&(i.assign(a.location),null!==(c=t.ja(a))&&i.Zn(c.point)),null!==u&&(h.assign(u.location),null!==(c=t.ja(u))&&h.Zn(c.point)),null!==a&&null!==u?i.Ic(h)?(l=l.value.point,a=e,a.assign(i),a.Zn(l),t.add(r,gn(i)),r.Hk(a.x,a.y)):(r.gm=!1,r.Yb()):(l=l.value.point,u=null!==a?i:null!==u?h:o,t.add(r,gn(u)),a=u.x-l.x,l=u.y-l.y,r.Hk(a,l)))):null!==r.Y&&null!==r.$||(l=l.value.point,t.add(r,gn(o)),a=o.x-l.x,l=o.y-l.y,r.Hk(a,l)));Yh.v(e),Yh.v(o),Yh.v(i),Yh.v(h),n||(ae(this.g),kn(this,t))}},yn.prototype.computeMove=function(t,n,i,e){if(void 0===e&&(e=new x),e.assign(n),null===t)return e;void 0===i&&(i=null);var o=n;if(this.yx&&(this.tI||null===i||null!==this.g&&this.g.R.up)&&(o=Yh.K(),i=o,i.assign(n),null!==t)){var r=this.g;if(null!==r){var s=r.Cn,l=this.$E,r=l.width,l=l.height,a=this.dI,h=a.x,a=a.y,u=this.cI;if(null!==s){var f=s.tx;isNaN(r)&&(r=f.width),isNaN(l)&&(l=f.height),s=s.ZE,isNaN(h)&&(h=s.x),isNaN(a)&&(a=s.y)}s=Yh.xb(0,0),s.Ju(0,0,r,l,u),yt(n.x,n.y,h+s.x,a+s.y,r,l,i),Yh.v(s)}}return i=null!==t.DE?t.DE(t,n,o):o,l=t.WI,r=l.x,isNaN(r)&&(r=t.location.x),l=l.y,isNaN(l)&&(l=t.location.y),s=t.QI,h=s.x,isNaN(h)&&(h=t.location.x),s=s.y,isNaN(s)&&(s=t.location.y),e.m(Math.max(r,Math.min(i.x,h)),Math.max(l,Math.min(i.y,s))),o!==n&&Yh.v(o),e},yn.prototype.doDragOver=function(){},yn.prototype.doDropOnto=function(){},yn.prototype.doMouseMove=function(){if(this.sa){var t=this.g;null!==t&&null!==this.un&&null!==this.Xb&&(this.mayCopy()?(t.dc="copy",Pn(this,!1),wn(this,this.cc),Cn(this,this.cc,!1),kn(this,this.cc)):this.mayMove()?(t.dc="default",Tn(this),Cn(this,this.Xb,!0)):this.mayDragOut()?(t.dc="no-drop",Pn(this,!1),Cn(this,this.cc,!1)):Tn(this),Dn(this,t.R.da))}},yn.prototype.doMouseUp=function(){if(this.sa){var t=this.g;if(null!==t){var n=!1,i=this.mayCopy();if(i&&null!==this.cc?(Tn(this),Pn(this,!0),wn(this,this.cc),Cn(this,this.cc,!1),kn(this,this.cc),null!==this.cc&&t.dG(this.cc.Fj())):(n=!0,Tn(this),this.mayMove()&&(Cn(this,this.Xb,!0),Dn(this,t.R.da))),this.or=!0,qn(this,t.R.da),this.sa){if(this.cc=null,n&&null!==this.Xb)for(n=this.Xb.i;n.next();){var e=n.key;e instanceof As&&(null===(e=e.Pa)||null===e.placeholder||this.Xb.contains(e)||e.placeholder.H())}t.rc(),kn(this,this.Xb),this.Hf=i?"Copy":"Move",t.Aa(i?"SelectionCopied":"SelectionMoved",t.selection)}this.stopTool()}}},yn.prototype.mayCopy=function(){if(!this.iF)return!1;var t=this.g;if(null===t||t.fb||t.zf||!t.Ep||!t.tk||(Yh.Fk?!t.R.alt:!t.R.control))return!1;for(t=t.selection.i;t.next();){var n=t.value;if(n.de()&&n.canCopy())return!0}return!(null===this.ed||!this.nj||!this.ed.canCopy())},yn.prototype.mayDragOut=function(){if(!this.iF)return!1;var t=this.g;if(null===t||!t.yt||!t.tk||t.El)return!1;for(t=t.selection.i;t.next();){var n=t.value;if(n.de()&&n.canCopy())return!0}return!(null===this.ed||!this.nj||!this.ed.canCopy())},yn.prototype.mayMove=function(){var t=this.g;if(null===t||t.fb||!t.El)return!1;for(t=t.selection.i;t.next();){var n=t.value;if(n.de()&&n.canMove())return!0}return!(null===this.ed||!this.nj||!this.ed.canMove())};var Sf=new f(yn),Cf=null,Nf=null;yn.prototype.getDraggingSource=function(){return Cf},yn.prototype.mayDragIn=function(){var t=this.g;if(null===t||!t.hE||t.fb||t.zf||!t.Ep)return!1;var n=Cf;return null!==n&&null!==n.g&&n.g.ba.Ll===t.ba.Ll},yn.prototype.doSimulatedDragEnter=function(){if(this.mayDragIn()){var t=this.g;t.Oa.qi(),se(t),t=Cf,null!==t&&null!==t.g&&(t.g.dc="copy")}},yn.prototype.doSimulatedDragLeave=function(){var t=Cf;null!==t&&t.doSimulatedDragOut(),this.doCancel()},yn.prototype.doSimulatedDragOver=function(){var t=this.g;if(null!==t){var n=Cf;null!==n&&null!==n.Xb&&this.mayDragIn()&&(t.dc="copy",zn(this,n.Xb.Fj(),!1),Cn(this,this.cc,!1),Dn(this,t.R.da))}},yn.prototype.doSimulatedDrop=function(){var t=this.g;if(null!==t){var n=Cf;if(null!==n){var i=n.g;n.or=!0,Tn(this),this.mayDragIn()&&(this.Ub("Drop"),zn(this,n.Xb.Fj(),!0),Cn(this,this.cc,!1),null!==this.cc&&t.dG(this.cc.Fj()),qn(this,t.R.da),t.rc(),n=t.selection,null!==this.cc?this.Hf="ExternalCopy":n=new d(as),this.cc=null,t.doFocus(),t.Aa("ExternalObjectsDropped",n,i),this.Lk())}}},yn.prototype.doSimulatedDragOut=function(){var t=this.g;null!==t&&(this.mayCopy()||this.mayMove()?t.dc="":t.dc="no-drop")},Yh.ga("DraggingInfo",En),Yh.Ka(Rn,dn),Yh.ga("LinkingBaseTool",Rn),Rn.prototype.doStop=function(){var t=this.g;null!==t&&oo(t),this.Tg=this.Sg=this.Rg=this.Qg=this.kc=null,this.oy.clear(),this.Ef=null},Yh.defineProperty(Rn,{LF:"portGravity"},function(){return this.tD},function(t){Yh.j(t,"number",Rn,"portGravity"),0<=t&&(this.tD=t)}),Yh.defineProperty(Rn,{bq:"isUnconnectedLinkValid"},function(){return this.UC},function(t){Yh.j(t,"boolean",Rn,"isUnconnectedLinkValid"),this.UC=t}),Yh.defineProperty(Rn,{Xg:"temporaryLink"},function(){return this.ND},function(t){Yh.G(t,Js,Rn,"temporaryLink"),this.ND=t}),Yh.defineProperty(Rn,{Rd:"temporaryFromNode"},function(){return this.LD},function(t){Yh.G(t,As,Rn,"temporaryFromNode"),this.LD=t}),Yh.defineProperty(Rn,{$n:"temporaryFromPort"},function(){return this.MD},function(t){Yh.G(t,To,Rn,"temporaryFromPort"),this.MD=t}),Yh.defineProperty(Rn,{Sd:"temporaryToNode"},function(){return this.OD},function(t){Yh.G(t,As,Rn,"temporaryToNode"),this.OD=t}),Yh.defineProperty(Rn,{ao:"temporaryToPort"},function(){return this.PD},function(t){Yh.G(t,To,Rn,"temporaryToPort"),this.PD=t}),Yh.defineProperty(Rn,{kc:"originalLink"},function(){return this.nD},function(t){null!==t&&Yh.G(t,Js,Rn,"originalLink"),this.nD=t}),Yh.defineProperty(Rn,{Qg:"originalFromNode"},function(){return this.lD},function(t){null!==t&&Yh.G(t,As,Rn,"originalFromNode"),this.lD=t}),Yh.defineProperty(Rn,{Rg:"originalFromPort"},function(){return this.mD},function(t){null!==t&&Yh.G(t,To,Rn,"originalFromPort"),this.mD=t}),Yh.defineProperty(Rn,{Sg:"originalToNode"},function(){return this.qD},function(t){null!==t&&Yh.G(t,As,Rn,"originalToNode"),this.qD=t}),Yh.defineProperty(Rn,{Tg:"originalToPort"},function(){return this.rD},function(t){null!==t&&Yh.G(t,To,Rn,"originalToPort"),this.rD=t}),Yh.defineProperty(Rn,{Nd:"isForwards"},function(){return this.QC},function(t){Yh.j(t,"boolean",Rn,"isForwards"),this.QC=t}),Yh.u(Rn,{oy:"validPortsCache"},function(){return this.WG}),Yh.defineProperty(Rn,{Ef:"targetPort"},function(){return this.HD},function(t){null!==t&&Yh.G(t,To,Rn,"targetPort"),this.HD=t}),Rn.prototype.copyPortProperties=function(t,n,i,e,o){if(null!==t&&null!==n&&null!==i&&null!==e){e.Ba=n.W.size,o?(e.Bb=n.Bb,e.km=n.km):(e.Ab=n.Ab,e.Sl=n.Sl),i.Bf=lu;var r=Yh.K();i.location=n.Xa(lu,r),Yh.v(r),e.angle=n.Tl(),null!==this.Tx&&this.Tx(t,n,i,e,o)}},Rn.prototype.setNoTargetPortProperties=function(t,n,i){null!==n&&(n.Ba=Ku,n.Ab=nu,n.Bb=nu),null!==t&&null!==this.g&&(t.location=this.g.R.da),null!==this.Tx&&this.Tx(null,null,t,n,i)},Rn.prototype.doMouseDown=function(){this.sa&&this.doMouseMove()},Rn.prototype.doMouseMove=function(){if(this.sa){var t=this.g;if(null!==t){if(this.Ef=this.findTargetPort(this.Nd),null!==this.Ef&&this.Ef.U instanceof As){var n=this.Ef.U;this.Nd?this.copyPortProperties(n,this.Ef,this.Sd,this.ao,!0):this.copyPortProperties(n,this.Ef,this.Rd,this.$n,!1)}else this.Nd?this.setNoTargetPortProperties(this.Sd,this.ao,!0):this.setNoTargetPortProperties(this.Rd,this.$n,!1);(t.me||t.ne)&&t.fA(t.R.cf)}}},Rn.prototype.findValidLinkablePort=function(t,n){if(null===t)return null;var i=t.U;if(!(i instanceof As))return null;for(;null!==t;){var e=n?t.qG:t.PE;if(!0===e&&(null!==t.Qd||t instanceof As)&&(n?this.isValidTo(i,t):this.isValidFrom(i,t)))return t;if(!1===e)break;t=t.O}return null},Rn.prototype.findTargetPort=function(t){var n=this.g,i=n.R.da,e=this.LF;0>=e&&(e=.1);for(var o=this,r=n.wn(i,e,function(n){return o.findValidLinkablePort(n,t)},null,!0),e=1/0,n=null,r=r.i;r.next();){var s=r.value,l=s.U;if(l instanceof As){var a=s.Xa(lu,Yh.K()),h=i.x-a.x,u=i.y-a.y;Yh.v(a),a=h*h+u*u,a<e&&(h=this.oy.ja(s),null!==h?h&&(n=s,e=a):t&&this.isValidLink(this.Qg,this.Rg,l,s)||!t&&this.isValidLink(l,s,this.Sg,this.Tg)?(this.oy.add(s,!0),n=s,e=a):this.oy.add(s,!1))}}return null!==n&&(i=n.U)instanceof As&&(null===i.layer||i.layer.zt)?n:null},Rn.prototype.isValidFrom=function(t,n){if(null===t||null===n)return this.bq;if(null!==this.g&&this.g.$a===this&&(null!==t.layer&&!t.layer.zt||!0!==n.PE))return!1;var i=n.lA;if(1/0>i){if(null!==this.kc&&t===this.Qg&&n===this.Rg)return!0;var e=n.Qd;if(null===e&&(e=""),t.mx(e).count>=i)return!1}return!0},Rn.prototype.isValidTo=function(t,n){if(null===t||null===n)return this.bq;if(null!==this.g&&this.g.$a===this&&(null!==t.layer&&!t.layer.zt||!0!==n.qG))return!1;var i=n.PJ;if(1/0>i){if(null!==this.kc&&t===this.Sg&&n===this.Tg)return!0;var e=n.Qd;if(null===e&&(e=""),t.Lg(e).count>=i)return!1}return!0},Rn.prototype.isInSameNode=function(t,n){if(null===t||null===n)return!1;if(t===n)return!0;var i=t.U,e=n.U;return null!==i&&i===e},Rn.prototype.isLinked=function(t,n){if(null===t||null===n)return!1;var i=t.U;if(!(i instanceof As))return!1;var e=t.Qd;null===e&&(e="");var o=n.U;if(!(o instanceof As))return!1;var r=n.Qd;for(null===r&&(r=""),o=o.Lg(r);o.next();)if(r=o.value,r.Y===i&&r.Mg===e)return!0;return!1},Rn.prototype.isValidLink=function(t,n,i,e){if(!this.isValidFrom(t,n)||!this.isValidTo(i,e)||!(null===n||null===e||(n.VH&&e.OJ||!this.isInSameNode(n,e))&&(n.UH&&e.NJ||!this.isLinked(n,e)))||null!==this.kc&&(null!==t&&this.isLabelDependentOnLink(t,this.kc)||null!==i&&this.isLabelDependentOnLink(i,this.kc))||null!==t&&null!==i&&(null===t.data&&null!==i.data||null!==t.data&&null===i.data)||!this.isValidCycle(t,i,this.kc))return!1;if(null!==t){var o=t.Jx;if(null!==o&&!o(t,n,i,e,this.kc))return!1}return!(null!==i&&null!==(o=i.Jx)&&!o(t,n,i,e,this.kc))&&(null===(o=this.Jx)||o(t,n,i,e,this.kc))},Rn.prototype.isLabelDependentOnLink=function(t,n){if(null===t)return!1;var i=t.Mc;if(null===i)return!1;if(i===n)return!0;var e=new d(As);return e.add(t),Gn(this,i,n,e)},Rn.prototype.isValidCycle=function(t,n,i){if(void 0===i&&(i=null),null===t||null===n)return this.bq;var e=null!==this.g?this.g.VJ:ec;if(e!==ec){if(e===lc){if(null!==i&&!i.Lc)return!0;for(e=n.fe;e.next();){var o=e.value;if(o!==i&&o.Lc&&o.$===n)return!1}return!Vn(this,t,n,i,!0)}if(e===ac){if(null!==i&&!i.Lc)return!0;for(e=t.fe;e.next();)if((o=e.value)!==i&&o.Lc&&o.Y===t)return!1;return!Vn(this,t,n,i,!0)}if(e===oc)return t===n?t=!0:(e=new d(As),e.add(n),t=Hn(this,e,t,n,i)),!t;if(e===rc)return!Vn(this,t,n,i,!1);if(e===sc)return t===n?t=!0:(e=new d(As),e.add(n),t=Kn(this,e,t,n,i)),!t}return!0},Yh.defineProperty(Rn,{Jx:"linkValidation"},function(){return this.ol},function(t){null!==t&&Yh.j(t,"function",Rn,"linkValidation"),this.ol=t}),Yh.defineProperty(Rn,{Tx:"portTargeted"},function(){return this.uD},function(t){null!==t&&Yh.j(t,"function",Rn,"portTargeted"),this.uD=t}),Yh.Ka(Un,Rn),Yh.ga("LinkingTool",Un);var jf;Un.Either=jf=Yh.p(Un,"Either",0);var Lf;Un.ForwardsOnly=Lf=Yh.p(Un,"ForwardsOnly",0);var Df;Un.BackwardsOnly=Df=Yh.p(Un,"BackwardsOnly",0),Yh.defineProperty(Un,{hH:"archetypeLinkData"},function(){return this.RB},function(t){null!==t&&Yh.G(t,Object,Un,"archetypeLinkData"),t instanceof To&&Yh.G(t,Js,Un,"archetypeLinkData"),this.RB=t}),Yh.defineProperty(Un,{kE:"archetypeLabelNodeData"},function(){return this.QB},function(t){null!==t&&Yh.G(t,Object,Un,"archetypeLabelNodeData"),t instanceof To&&Yh.G(t,As,Un,"archetypeLabelNodeData"),this.QB=t}),Yh.defineProperty(Un,{direction:"direction"},function(){return this.aa},function(t){Yh.mb(t,Un,Un,"direction"),this.aa=t}),Yh.defineProperty(Un,{lG:"startObject"},function(){return this.CD},function(t){null!==t&&Yh.G(t,To,Un,"startObject"),this.CD=t}),Un.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||t.fb||t.zf||!t.zt)return!1;var n=t.ba;return!(!(n instanceof Zt||n instanceof en)||!t.R.left||t.$a!==this&&!this.isBeyondDragSize())&&null!==this.findLinkablePort()},Un.prototype.findLinkablePort=function(){var t=this.g;if(null===t)return null;var n=this.lG;if(null===n&&(n=t.Je(t.zc.da,null,null)),null===n||!(n.U instanceof As))return null;if((t=this.direction)===jf||t===Lf){var i=this.findValidLinkablePort(n,!1);if(null!==i)return this.Nd=!0,i}return t!==jf&&t!==Df||null===(i=this.findValidLinkablePort(n,!0))?null:(this.Nd=!1,i)},Un.prototype.doActivate=function(){var t=this.g;if(null!==t){var n=this.findLinkablePort();null!==n&&(this.Ub(this.name),t.af=!0,t.dc="pointer",this.Nd?(null===this.Sd||this.Sd.location.I()||(this.Sd.location=t.R.da),this.Rg=n,n=this.Rg.U,n instanceof As&&(this.Qg=n),this.copyPortProperties(this.Qg,this.Rg,this.Rd,this.$n,!1)):(null===this.Rd||this.Rd.location.I()||(this.Rd.location=t.R.da),this.Tg=n,n=this.Tg.U,n instanceof As&&(this.Sg=n),this.copyPortProperties(this.Sg,this.Tg,this.Sd,this.ao,!0)),t.add(this.Rd),t.add(this.Sd),null!==this.Xg&&(null!==this.Rd&&(this.Xg.Y=this.Rd),null!==this.Sd&&(this.Xg.$=this.Sd),this.Xg.Yb(),t.add(this.Xg)),this.sa=!0)}},Un.prototype.doDeactivate=function(){this.sa=!1;var t=this.g;null!==t&&(t.remove(this.Xg),t.remove(this.Rd),t.remove(this.Sd),t.af=!1,t.dc="",this.Lk())},Un.prototype.doStop=function(){Rn.prototype.doStop.call(this),this.lG=null},Un.prototype.doMouseUp=function(){if(this.sa){var t=this.g;if(null===t)return;var n=this.Hf=null,i=null,e=null,o=null,r=this.Ef=this.findTargetPort(this.Nd);if(null!==r){var s=r.U;s instanceof As&&(this.Nd?(null!==this.Qg&&(n=this.Qg,i=this.Rg),e=s,o=r):(n=s,i=r,null!==this.Sg&&(e=this.Sg,o=this.Tg)))}else this.Nd?null!==this.Qg&&this.bq&&(n=this.Qg,i=this.Rg):null!==this.Sg&&this.bq&&(e=this.Sg,o=this.Tg);null!==n||null!==e?(s=this.insertLink(n,i,e,o),null!==s?(null===r&&(this.Nd?s.Np=t.R.da:s.Mp=t.R.da),t.vf&&t.select(s),this.Hf=this.name,t.Aa("LinkDrawn",s)):(t.ba.oE(),this.doNoLink(n,i,e,o))):this.Nd?this.doNoLink(this.Qg,this.Rg,null,null):this.doNoLink(null,null,this.Sg,this.Tg)}this.stopTool()},Un.prototype.insertLink=function(t,n,i,e){var o=this.g;if(null===o)return null;var r=o.ba;if(r instanceof en){var s=t;if(n=i,o.Pd||(s=i,n=t),null!==s&&null!==n)return r.pi(n.data,r.ub(s.data)),n.xn()}else if(r instanceof Zt)if(s="",null!==t&&(null===n&&(n=t),null===(s=n.Qd)&&(s="")),n="",null!==i&&(null===e&&(e=i),null===(n=e.Qd)&&(n="")),(e=this.hH)instanceof Js){if(br(e),null!==(r=e.copy()))return r.Y=t,r.Mg=s,r.$=i,r.Fh=n,o.add(r),t=this.kE,t instanceof As&&(br(t),null!==(t=t.copy())&&(t.Mc=r,o.add(t))),r}else if(null!==e&&(e=r.Yw(e),Yh.Qa(e)))return null!==t&&r.dB(e,r.ub(t.data)),r.eB(e,s),null!==i&&r.jB(e,r.ub(i.data)),r.kB(e,n),r.ut(e),t=this.kE,null===t||t instanceof As||(t=r.copyNodeData(t),Yh.Qa(t)&&(r.Cl(t),void 0!==(t=r.ub(t))&&r.fE(e,t))),r=o.Sf(e);return null},Un.prototype.doNoLink=function(){},Yh.Ka(Jn,Rn),Yh.ga("RelinkingTool",Jn),Jn.prototype.updateAdornments=function(t){if(null!==t&&t instanceof Js){var n="RelinkFrom",i=null;if(t.gb&&null!==this.g&&!this.g.fb){var e=t.Gu;null!==e&&t.canRelinkFrom()&&t.W.I()&&t.isVisible()&&e.W.I()&&e.wj()&&null===(i=t.Rp(n))&&(i=this.makeAdornment(e,!1),t.Bl(n,i))}null===i&&t.Bj(n),n="RelinkTo",i=null,t.gb&&null!==this.g&&!this.g.fb&&null!==(e=t.Gu)&&t.canRelinkTo()&&t.W.I()&&t.isVisible()&&e.W.I()&&e.wj()&&null===(i=t.Rp(n))&&(i=this.makeAdornment(e,!0),t.Bl(n,i)),null===i&&t.Bj(n)}},Jn.prototype.makeAdornment=function(t,n){var i=new Ds;i.type=id;var e=n?this.MJ:this.TH;return null!==e&&i.add(e.copy()),i.rb=t,i},Yh.defineProperty(Jn,{TH:"fromHandleArchetype"},function(){return this.DC},function(t){null!==t&&Yh.G(t,To,Jn,"fromHandleArchetype"),this.DC=t}),Yh.defineProperty(Jn,{MJ:"toHandleArchetype"},function(){return this.QD},function(t){null!==t&&Yh.G(t,To,Jn,"toHandleArchetype"),this.QD=t}),Yh.u(Jn,{handle:"handle"},function(){return this.gc}),Jn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||t.fb||t.zf||!t.hn)return!1;var n=t.ba;return!(!(n instanceof Zt||n instanceof en)||!t.R.left)&&(n=this.findToolHandleAt(t.zc.da,"RelinkFrom"),null===n&&(n=this.findToolHandleAt(t.zc.da,"RelinkTo")),null!==n)},Jn.prototype.doActivate=function(){var t=this.g;if(null!==t){if(null===this.kc){var n=this.findToolHandleAt(t.zc.da,"RelinkFrom");if(null===n&&(n=this.findToolHandleAt(t.zc.da,"RelinkTo")),null===n)return;var i=n.U;if(!(i instanceof Ds&&i.Pf instanceof Js))return;this.gc=n,this.Nd=null===i||"RelinkTo"===i.td,this.kc=i.Pf}this.Ub(this.name),t.af=!0,t.dc="pointer",this.Rg=this.kc.Jc,this.Qg=this.kc.Y,this.Tg=this.kc.jd,this.Sg=this.kc.$,this.oD.set(this.kc.W),null!==this.kc&&0<this.kc.qa&&(null===this.kc.Y&&(null!==this.$n&&(this.$n.Ba=Hu),null!==this.Rd&&(this.Rd.location=this.kc.l(0))),null===this.kc.$&&(null!==this.ao&&(this.ao.Ba=Hu),null!==this.Sd&&(this.Sd.location=this.kc.l(this.kc.qa-1)))),this.copyPortProperties(this.Qg,this.Rg,this.Rd,this.$n,!1),this.copyPortProperties(this.Sg,this.Tg,this.Sd,this.ao,!0),t.add(this.Rd),t.add(this.Sd),null!==this.Xg&&(null!==this.Rd&&(this.Xg.Y=this.Rd),null!==this.Sd&&(this.Xg.$=this.Sd),this.copyLinkProperties(this.kc,this.Xg),this.Xg.Yb(),t.add(this.Xg)),this.sa=!0}},Jn.prototype.copyLinkProperties=function(t,n){if(null!==t&&null!==n){n.wt=t.wt,n.bA=t.bA;var i=t.Ze;i!==Ud&&i!==Kd||(i=Vd),n.Ze=i,n.ax=t.ax,n.by=t.by,n.vq=t.vq,n.Ab=t.Ab,n.Sl=t.Sl,n.Tt=t.Tt,n.Ut=t.Ut,n.Bb=t.Bb,n.km=t.km,n.Nu=t.Nu,n.Ou=t.Ou}},Jn.prototype.doDeactivate=function(){this.sa=!1;var t=this.g;null!==t&&(t.remove(this.Xg),t.remove(this.Rd),t.remove(this.Sd),t.af=!1,t.dc="",this.Lk())},Jn.prototype.doStop=function(){Rn.prototype.doStop.call(this),this.gc=null},Jn.prototype.doMouseUp=function(){if(this.sa){var t=this.g;if(null===t)return;this.Hf=null;var n=this.Qg,i=this.Rg,e=this.Sg,o=this.Tg,r=this.kc;if(this.Ef=this.findTargetPort(this.Nd),null!==this.Ef){var s=this.Ef.U;s instanceof As&&(this.Nd?(e=s,o=this.Ef):(n=s,i=this.Ef))}else this.bq?this.Nd?o=e=null:i=n=null:r=null;null!==r?(this.reconnectLink(r,this.Nd?e:n,this.Nd?o:i,this.Nd),null===this.Ef&&(this.Nd?r.Np=t.R.da:r.Mp=t.R.da,r.Yb()),t.vf&&(r.gb=!0),this.Hf=this.name,t.Aa("LinkRelinked",r,this.Nd?this.Tg:this.Rg)):this.doNoRelink(this.kc,this.Nd),fl(this.kc,this.oD)}this.stopTool()},Jn.prototype.reconnectLink=function(t,n,i,e){return null!==this.g&&(i=null!==i&&null!==i.Qd?i.Qd:"",e?(t.$=n,t.Fh=i):(t.Y=n,t.Mg=i),!0)},Jn.prototype.doNoRelink=function(){},Yh.Ka(Wn,dn),Yh.ga("LinkReshapingTool",Wn);var Af;Wn.None=Af=Yh.p(Wn,"None",0);var Ff;Wn.Horizontal=Ff=Yh.p(Wn,"Horizontal",1);var Of;Wn.Vertical=Of=Yh.p(Wn,"Vertical",2);var Bf;Wn.All=Bf=Yh.p(Wn,"All",3),Wn.prototype.getReshapingBehavior=Wn.prototype.UE=function(t){return t&&t.wz?t.wz:Af},Wn.prototype.setReshapingBehavior=Wn.prototype.Iu=function(t,n){Yh.G(t,To,Wn,"setReshapingBehavior:obj"),Yh.mb(n,Wn,Wn,"setReshapingBehavior:behavior"),t.wz=n},Wn.prototype.updateAdornments=function(t){if(null!==t&&t instanceof Js){if(t.gb&&null!==this.g&&!this.g.fb){var n=t.path;if(null!==n&&t.canReshape()&&t.W.I()&&t.isVisible()&&n.W.I()&&n.wj()){var i=t.Rp(this.name);if(null!==i&&i.iD===t.qa&&i.ZD===t.Cu||null!==(i=this.makeAdornment(n))&&(i.iD=t.qa,i.ZD=t.Cu,t.Bl(this.name,i)),null!==i)return void(i.location=t.position)}}t.Bj(this.name)}},Wn.prototype.makeAdornment=function(t){var n=t.U,i=n.qa,e=n.Zb,o=null;if(null!==n.points&&1<i){o=new Ds,o.type=id;var i=n.Nt,r=n.Fx,s=e?1:0;if(n.Cu&&n.Ze!==Hd)for(var l=i+s;l<r-s;l++){var a=this.makeResegmentHandle(t,l);null!==a&&(a.Me=l,a.aB=.5,a.lA=999,o.add(a))}for(l=i+1;l<r;l++)if(null!==(a=this.makeHandle(t,l))){if(a.Me=l,l!==i)if(l===i+1&&e){var s=n.l(i),h=n.l(i+1);W(s.x,h.x)&&W(s.y,h.y)&&(h=n.l(i-1)),W(s.x,h.x)?(this.Iu(a,Of),a.cursor="n-resize"):W(s.y,h.y)&&(this.Iu(a,Ff),a.cursor="w-resize")}else l===r-1&&e?(s=n.l(r-1),h=n.l(r),W(s.x,h.x)&&W(s.y,h.y)&&(s=n.l(r+1)),W(s.x,h.x)?(this.Iu(a,Of),a.cursor="n-resize"):W(s.y,h.y)&&(this.Iu(a,Ff),a.cursor="w-resize")):l!==r&&(this.Iu(a,Bf),a.cursor="move");o.add(a)}o.rb=t}return o},Wn.prototype.makeHandle=function(){var t=this.Xt;return null===t?null:t.copy()},Yh.defineProperty(Wn,{Xt:"handleArchetype"},function(){return this.dl},function(t){null!==t&&Yh.G(t,To,Wn,"handleArchetype"),this.dl=t}),Wn.prototype.makeResegmentHandle=function(){var t=this.VI;return null===t?null:t.copy()},Yh.defineProperty(Wn,{VI:"midHandleArchetype"},function(){return this.aD},function(t){null!==t&&Yh.G(t,To,Wn,"midHandleArchetype"),this.aD=t}),Yh.u(Wn,{handle:"handle"},function(){return this.gc}),Yh.u(Wn,{xt:"adornedLink"},function(){return this.Dy}),Wn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return!(null===t||t.fb||!t.Qw||!t.R.left)&&null!==this.findToolHandleAt(t.zc.da,this.name)},Wn.prototype.doActivate=function(){var t=this.g;if(null!==t&&(this.gc=this.findToolHandleAt(t.zc.da,this.name),null!==this.gc)){var n=this.gc.U.Pf;if(n instanceof Js){if(this.Dy=n,t.af=!0,this.Ub(this.name),n.Cu&&999===this.gc.lA){var i=n.points.copy(),e=this.gc.Xa(lu);if(i.Md(this.gc.Me+1,e),n.Zb&&i.Md(this.gc.Me+1,e),n.points=i,n.ce(),this.gc=this.findToolHandleAt(t.zc.da,this.name),null===this.gc)return void this.doDeactivate()}this.gp=n.l(this.gc.Me),this.jw=n.points.copy(),this.sa=!0}}},Wn.prototype.doDeactivate=function(){this.Lk(),this.Dy=this.gc=null;var t=this.g;null!==t&&(t.af=!1),this.sa=!1},Wn.prototype.doCancel=function(){var t=this.xt;null!==t&&(t.points=this.jw),this.stopTool()},Wn.prototype.doMouseMove=function(){var t=this.g;this.sa&&null!==t&&(t=this.computeReshape(t.R.da),this.reshape(t))},Wn.prototype.doMouseUp=function(){var t=this.g;if(this.sa&&null!==t){var n=this.computeReshape(t.R.da);if(this.reshape(n),null!==(n=this.xt)&&n.Cu){var i=this.handle.Me,e=n.l(i-1),o=n.l(i),r=n.l(i+1);if(n.Zb){if(i>n.Nt+1&&i<n.Fx-1){var s=n.l(i-2);if(Math.abs(e.x-o.x)<this.Dh&&Math.abs(e.y-o.y)<this.Dh&&(Xn(this,s,e,o,r,!0)||Xn(this,s,e,o,r,!1))){var l=n.points.copy();Xn(this,s,e,o,r,!0)?(l.hg(i-2,new x(s.x,(r.y+s.y)/2)),l.hg(i+1,new x(r.x,(r.y+s.y)/2))):(l.hg(i-2,new x((r.x+s.x)/2,s.y)),l.hg(i+1,new x((r.x+s.x)/2,r.y))),l.Yc(i),l.Yc(i-1),n.points=l,n.ce()}else s=n.l(i+2),Math.abs(o.x-r.x)<this.Dh&&Math.abs(o.y-r.y)<this.Dh&&(Xn(this,e,o,r,s,!0)||Xn(this,e,o,r,s,!1))&&(l=n.points.copy(),Xn(this,e,o,r,s,!0)?(l.hg(i-1,new x(e.x,(e.y+s.y)/2)),l.hg(i+2,new x(s.x,(e.y+s.y)/2))):(l.hg(i-1,new x((e.x+s.x)/2,e.y)),l.hg(i+2,new x((e.x+s.x)/2,s.y))),l.Yc(i+1),l.Yc(i),n.points=l,n.ce())}}else s=Yh.K(),st(e.x,e.y,r.x,r.y,o.x,o.y,s)&&s.wf(o)<this.Dh*this.Dh&&(l=n.points.copy(),l.Yc(i),n.points=l,n.ce()),Yh.v(s)}t.rc(),this.Hf=this.name,t.Aa("LinkReshaped",this.xt,this.jw)}this.stopTool()},Yh.defineProperty(Wn,{Dh:"resegmentingDistance"},function(){return this.vD},function(t){Yh.j(t,"number",Wn,"resegmentingDistance"),this.vD=t}),Wn.prototype.reshape=function(t){var n=this.xt;n.fm();var i=this.handle.Me,e=this.UE(this.handle);if(n.Zb)if(i===n.Nt+1)i=n.Nt+1,e===Of?(n.ca(i,n.l(i-1).x,t.y),n.ca(i+1,n.l(i+2).x,t.y)):e===Ff&&(n.ca(i,t.x,n.l(i-1).y),n.ca(i+1,t.x,n.l(i+2).y));else if(i===n.Fx-1)i=n.Fx-1,e===Of?(n.ca(i-1,n.l(i-2).x,t.y),n.ca(i,n.l(i+1).x,t.y)):e===Ff&&(n.ca(i-1,t.x,n.l(i-2).y),n.ca(i,t.x,n.l(i+1).y));else{var e=i,o=n.l(e),r=n.l(e-1),s=n.l(e+1);W(r.x,o.x)&&W(o.y,s.y)?(W(r.x,n.l(e-2).x)&&!W(r.y,n.l(e-2).y)?(n.w(e,t.x,r.y),i++,e++):n.ca(e-1,t.x,r.y),W(s.y,n.l(e+2).y)&&!W(s.x,n.l(e+2).x)?n.w(e+1,s.x,t.y):n.ca(e+1,s.x,t.y)):W(r.y,o.y)&&W(o.x,s.x)?(W(r.y,n.l(e-2).y)&&!W(r.x,n.l(e-2).x)?(n.w(e,r.x,t.y),i++,e++):n.ca(e-1,r.x,t.y),W(s.x,n.l(e+2).x)&&!W(s.y,n.l(e+2).y)?n.w(e+1,t.x,s.y):n.ca(e+1,t.x,s.y)):W(r.x,o.x)&&W(o.x,s.x)?(W(r.x,n.l(e-2).x)&&!W(r.y,n.l(e-2).y)?(n.w(e,t.x,r.y),i++,e++):n.ca(e-1,t.x,r.y),W(s.x,n.l(e+2).x)&&!W(s.y,n.l(e+2).y)?n.w(e+1,t.x,s.y):n.ca(e+1,t.x,s.y)):W(r.y,o.y)&&W(o.y,s.y)&&(W(r.y,n.l(e-2).y)&&!W(r.x,n.l(e-2).x)?(n.w(e,r.x,t.y),i++,e++):n.ca(e-1,r.x,t.y),W(s.y,n.l(e+2).y)&&!W(s.x,n.l(e+2).x)?n.w(e+1,s.x,t.y):n.ca(e+1,s.x,t.y)),n.ca(i,t.x,t.y)}else n.ca(i,t.x,t.y),1===i&&n.computeSpot(!0).Od()&&(o=n.Y,r=n.Jc,null===o||o.isVisible()||(o=o.findVisibleNode())!==n.Y&&(r=o.Pl("")),e=r.Xa(lu,Yh.K()),o=n.getLinkPointFromPoint(o,r,e,t,!0,Yh.K()),n.ca(0,o.x,o.y),Yh.v(e),Yh.v(o)),i===n.qa-2&&n.computeSpot(!1).Od()&&(i=n.$,o=n.jd,null===i||i.isVisible()||(i=i.findVisibleNode())!==n.$&&(o=i.Pl("")),e=o.Xa(lu,Yh.K()),o=n.getLinkPointFromPoint(i,o,e,t,!1,Yh.K()),n.ca(n.qa-1,o.x,o.y),Yh.v(e),Yh.v(o));n.jj()},Wn.prototype.computeReshape=function(t){var n=this.xt,i=this.handle.Me;switch(this.UE(this.handle)){case Bf:return t;case Of:return n=n.l(i),new x(n.x,t.y);case Ff:return n=n.l(i),new x(t.x,n.y);default:case Af:return n.l(i)}},Yh.u(Wn,{xL:"originalPoint"},function(){return this.gp}),Yh.u(Wn,{yL:"originalPoints"},function(){return this.jw}),Yh.Ka($n,dn),Yh.ga("ResizingTool",$n),$n.prototype.updateAdornments=function(t){if(!(null===t||t instanceof Js)){if(t.gb&&null!==this.g&&!this.g.fb){var n=t.WF;if(null!==n&&t.canResize()&&t.W.I()&&t.isVisible()&&n.W.I()&&n.wj()){var i=t.Rp(this.name);if(null!==i&&i.rb===n||(i=this.makeAdornment(n)),null!==i){var e=n.Tl();i.angle=e;var o=n.Xa(i.Bf,Yh.K()),r=n.oj();if(i.location=o,Yh.v(o),null!==(o=i.placeholder)){var n=n.Ia,s=Yh.jm();s.m(n.width*r,n.height*r),o.Ba=s,Yh.Ak(s)}return this.updateResizeHandles(i,e),void t.Bl(this.name,i)}}}t.Bj(this.name)}},$n.prototype.makeAdornment=function(t){var n=null,n=t.U.VF;if(null===n){n=new Ds,n.type=Qc,n.Bf=lu;var i=new Bl;i.Wf=!0,n.add(i),n.add(this.makeHandle(t,eu)),n.add(this.makeHandle(t,ru)),n.add(this.makeHandle(t,fu)),n.add(this.makeHandle(t,hu)),n.add(this.makeHandle(t,cu)),n.add(this.makeHandle(t,pu)),n.add(this.makeHandle(t,yu)),n.add(this.makeHandle(t,du))}else if(br(n),null===(n=n.copy()))return null;return n.rb=t,n},$n.prototype.makeHandle=function(t,n){var i=this.Xt;return null===i?null:(i=i.copy(),i.alignment=n,i)},$n.prototype.updateResizeHandles=function(t,n){if(null!==t)if(!t.alignment.Vc()&&("pointer"===t.cursor||0<t.cursor.indexOf("resize")))t:{var i=t.alignment;i.Od()&&(i=lu);var e=n;if(0>=i.x)e=0>=i.y?e+225:1<=i.y?e+135:e+180;else if(1<=i.x)0>=i.y?e+=315:1<=i.y&&(e+=45);else if(0>=i.y)e+=270;else{if(!(1<=i.y))break t;e+=90}0>e?e+=360:360<=e&&(e-=360),t.cursor=22.5>e?"e-resize":67.5>e?"se-resize":112.5>e?"s-resize":157.5>e?"sw-resize":202.5>e?"w-resize":247.5>e?"nw-resize":292.5>e?"n-resize":337.5>e?"ne-resize":"e-resize"}else if(t instanceof tr)for(i=t.elements;i.next();)this.updateResizeHandles(i.value,n)},Yh.defineProperty($n,{Xt:"handleArchetype"},function(){return this.dl},function(t){null!==t&&Yh.G(t,To,$n,"handleArchetype"),this.dl=t}),Yh.u($n,{handle:"handle"},function(){return this.gc}),Yh.defineProperty($n,{rb:"adornedObject"},function(){return this.Dc},function(t){null!==t&&Yh.G(t,To,$n,"adornedObject"),this.Dc=t}),$n.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return!(null===t||t.fb||!t.At||!t.R.left)&&null!==this.findToolHandleAt(t.zc.da,this.name)},$n.prototype.doActivate=function(){var t=this.g;null!==t&&(this.gc=this.findToolHandleAt(t.zc.da,this.name),null!==this.gc&&(this.Dc=this.gc.U.rb,this.gp.set(this.rb.Xa(this.handle.alignment.GF())),this.pD.set(this.Dc.U.location),this.kD.set(this.Dc.Ba),this.Yy=this.computeCellSize(),this.$y=this.computeMinSize(),this.Zy=this.computeMaxSize(),t.af=!0,this.hD=t.Oa.isEnabled,t.Oa.isEnabled=!1,this.Ub(this.name),this.sa=!0))},$n.prototype.doDeactivate=function(){var t=this.g;null!==t&&(this.Lk(),this.Dc=this.gc=null,this.sa=t.af=!1,t.Oa.isEnabled=this.hD)},$n.prototype.doCancel=function(){null!==this.rb&&(this.rb.Ba=this.HF,this.rb.U.location=this.eJ),this.stopTool()},$n.prototype.doMouseMove=function(){var t=this.g;if(this.sa&&null!==t){var n=this.$y,i=this.Zy,e=this.Yy,o=this.rb.SE(t.R.da,Yh.K()),r=this.computeReshape(),n=this.computeResize(o,this.handle.alignment,n,i,e,r);this.resize(n),t.$f(),Yh.v(o)}},$n.prototype.doMouseUp=function(){var t=this.g;if(this.sa&&null!==t){var n=this.$y,i=this.Zy,e=this.Yy,o=this.rb.SE(t.R.da,Yh.K()),r=this.computeReshape(),n=this.computeResize(o,this.handle.alignment,n,i,e,r);this.resize(n),Yh.v(o),t.rc(),this.Hf=this.name,t.Aa("PartResized",this.rb,this.HF)}this.stopTool()},$n.prototype.resize=function(t){if(null!==this.g){var n=this.rb,i=n.U;n.Ba=t.size,i.$e(),t=this.rb.Xa(this.handle.alignment.GF()),i instanceof Ll?(t=i.position.copy().Zn(t).add(this.gp),i.move(t)):i.location=i.location.copy().Zn(t).add(this.gp)}},$n.prototype.computeResize=function(t,n,i,e,o,r){n.Od()&&(n=lu);var s=this.rb.Ia,l=s.x,a=s.y,h=s.x+s.width,u=s.y+s.height,f=1;if(!r){var f=s.width,c=s.height;0>=f&&(f=1),0>=c&&(c=1),f=c/f}return c=Yh.K(),yt(t.x,t.y,l,a,o.width,o.height,c),t=s.copy(),0>=n.x?0>=n.y?(t.x=Math.max(c.x,h-e.width),t.x=Math.min(t.x,h-i.width),t.width=Math.max(h-t.x,i.width),t.y=Math.max(c.y,u-e.height),t.y=Math.min(t.y,u-i.height),t.height=Math.max(u-t.y,i.height),r||(n=t.height/t.width,f<n?(t.height=f*t.width,t.y=u-t.height):(t.width=t.height/f,t.x=h-t.width))):1<=n.y?(t.x=Math.max(c.x,h-e.width),t.x=Math.min(t.x,h-i.width),t.width=Math.max(h-t.x,i.width),t.height=Math.max(Math.min(c.y-a,e.height),i.height),r||(n=t.height/t.width,f<n?t.height=f*t.width:(t.width=t.height/f,t.x=h-t.width))):(t.x=Math.max(c.x,h-e.width),t.x=Math.min(t.x,h-i.width),t.width=h-t.x,r||(t.height=f*t.width,t.y=a+.5*(u-a-t.height))):1<=n.x?0>=n.y?(t.width=Math.max(Math.min(c.x-l,e.width),i.width),t.y=Math.max(c.y,u-e.height),t.y=Math.min(t.y,u-i.height),t.height=Math.max(u-t.y,i.height),r||(n=t.height/t.width,f<n?(t.height=f*t.width,t.y=u-t.height):t.width=t.height/f)):1<=n.y?(t.width=Math.max(Math.min(c.x-l,e.width),i.width),t.height=Math.max(Math.min(c.y-a,e.height),i.height),r||(n=t.height/t.width,f<n?t.height=f*t.width:t.width=t.height/f)):(t.width=Math.max(Math.min(c.x-l,e.width),i.width),r||(t.height=f*t.width,t.y=a+.5*(u-a-t.height))):0>=n.y?(t.y=Math.max(c.y,u-e.height),t.y=Math.min(t.y,u-i.height),t.height=u-t.y,r||(t.width=t.height/f,t.x=l+.5*(h-l-t.width))):1<=n.y&&(t.height=Math.max(Math.min(c.y-a,e.height),i.height),r||(t.width=t.height/f,t.x=l+.5*(h-l-t.width))),Yh.v(c),t},$n.prototype.computeReshape=function(){var t=Bc;return this.rb instanceof Cr&&(t=Dr(this.rb)),!(t===Rc||t===Gc||null!==this.g&&this.g.R.shift)},$n.prototype.computeMinSize=function(){var t=this.rb.Ah.copy(),n=this.Ah;return!isNaN(n.width)&&n.width>t.width&&(t.width=n.width),!isNaN(n.height)&&n.height>t.height&&(t.height=n.height),t},$n.prototype.computeMaxSize=function(){var t=this.rb.Cf.copy(),n=this.Cf;return!isNaN(n.width)&&n.width<t.width&&(t.width=n.width),!isNaN(n.height)&&n.height<t.height&&(t.height=n.height),t},$n.prototype.computeCellSize=function(){var t=new M(NaN,NaN),n=this.rb.U;if(null!==n){var i=n.pJ;!isNaN(i.width)&&0<i.width&&(t.width=i.width),!isNaN(i.height)&&0<i.height&&(t.height=i.height)}return i=this.Gp,isNaN(t.width)&&!isNaN(i.width)&&0<i.width&&(t.width=i.width),isNaN(t.height)&&!isNaN(i.height)&&0<i.height&&(t.height=i.height),n=this.g,(isNaN(t.width)||isNaN(t.height))&&n&&(i=n.bb.re,null!==i&&i.yx&&(i=i.$E,isNaN(t.width)&&!isNaN(i.width)&&0<i.width&&(t.width=i.width),isNaN(t.height)&&!isNaN(i.height)&&0<i.height&&(t.height=i.height)),null!==(n=n.Cn)&&n.visible&&this.yx&&(i=n.tx,isNaN(t.width)&&!isNaN(i.width)&&0<i.width&&(t.width=i.width),isNaN(t.height)&&!isNaN(i.height)&&0<i.height&&(t.height=i.height))),(isNaN(t.width)||0===t.width||1/0===t.width)&&(t.width=1),(isNaN(t.height)||0===t.height||1/0===t.height)&&(t.height=1),t},Yh.defineProperty($n,{Ah:"minSize"},function(){return this.Wh},function(t){if(Yh.G(t,M,$n,"minSize"),!this.Wh.L(t)){var n=t.width;isNaN(n)&&(n=0),t=t.height,isNaN(t)&&(t=0),this.Wh.m(n,t)}}),Yh.defineProperty($n,{Cf:"maxSize"},function(){return this.Vh},function(t){if(Yh.G(t,M,$n,"maxSize"),!this.Vh.L(t)){var n=t.width;isNaN(n)&&(n=1/0),t=t.height,isNaN(t)&&(t=1/0),this.Vh.m(n,t)}}),Yh.defineProperty($n,{Gp:"cellSize"},function(){return this.Jj},function(t){Yh.G(t,M,$n,"cellSize"),this.Jj.L(t)||this.Jj.assign(t)}),Yh.defineProperty($n,{yx:"isGridSnapEnabled"},function(){return this.Ir},function(t){Yh.j(t,"boolean",$n,"isGridSnapEnabled"),this.Ir=t}),Yh.u($n,{HF:"originalDesiredSize"},function(){return this.kD}),Yh.u($n,{eJ:"originalLocation"},function(){return this.pD}),Yh.Ka(Qn,dn),Yh.ga("RotatingTool",Qn),Qn.prototype.updateAdornments=function(t){if(!(null===t||t instanceof Js)){if(t.gb&&null!==this.g&&!this.g.fb){var n=t.ZF;if(null!==n&&t.canRotate()&&t.W.I()&&t.isVisible()&&n.W.I()&&n.wj()){var i=t.Rp(this.name);if(null!==i&&i.rb===n||(i=this.makeAdornment(n)),null!==i){i.angle=n.Tl();var e=null,o=null;n===t||n===t.Zf?(e=t.Zf,o=t.Bf):(e=n,o=lu);for(var r=e.Ia,o=Yh.xb(r.width*o.x+o.offsetX,r.height*o.y+o.offsetY);null!==e&&e!==n;)e.transform.nb(o),e=e.O;var e=o.y,r=Math.max(o.x-n.Ia.width,0),s=Yh.K();return i.location=n.Xa(new F(1,0,50+r,e),s),Yh.v(s),Yh.v(o),void t.Bl(this.name,i)}}}t.Bj(this.name)}},Qn.prototype.makeAdornment=function(t){var n=null,n=t.U.sJ;if(null===n){n=new Ds,n.type=Xc,n.Bf=lu;var i=this.Xt;null!==i&&n.add(i.copy())}else if(br(n),null===(n=n.copy()))return null;return n.rb=t,n},Yh.defineProperty(Qn,{Xt:"handleArchetype"},function(){return this.dl},function(t){null!==t&&Yh.G(t,To,Qn,"handleArchetype"),this.dl=t}),Yh.u(Qn,{handle:"handle"},function(){return this.gc}),Yh.defineProperty(Qn,{rb:"adornedObject"},function(){return this.Dc},function(t){null!==t&&Yh.G(t,To,Qn,"adornedObject"),this.Dc=t}),Qn.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return!(null===t||t.fb||!t.Rw||!t.R.left)&&null!==this.findToolHandleAt(t.zc.da,this.name)},Qn.prototype.doActivate=function(){var t=this.g;if(null!==t&&(this.gc=this.findToolHandleAt(t.zc.da,this.name),null!==this.gc)){this.Dc=this.gc.U.rb;var n=this.Dc.U,i=n.Zf;this.wD=this.Dc===n||this.Dc===i?i.Xa(n.Bf):this.Dc.Xa(lu),this.iw=this.Dc.angle,t.af=!0,t.dA=!0,this.Ub(this.name),this.sa=!0}},Qn.prototype.doDeactivate=function(){var t=this.g;null!==t&&(this.Lk(),this.Dc=this.gc=null,this.sa=t.af=!1)},Qn.prototype.doCancel=function(){var t=this.g;null!==t&&(t.dA=!1),this.rotate(this.iw),this.stopTool()},Qn.prototype.doMouseMove=function(){var t=this.g;this.sa&&null!==t&&(t=this.computeRotate(t.R.da),this.rotate(t))},Qn.prototype.doMouseUp=function(){var t=this.g;if(this.sa&&null!==t){t.dA=!1;var n=this.computeRotate(t.R.da);this.rotate(n),t.rc(),this.Hf=this.name,t.Aa("PartRotated",this.Dc,this.iw)}this.stopTool()},Qn.prototype.rotate=function(t){null!==this.Dc&&(this.Dc.angle=t)},Qn.prototype.computeRotate=function(t){t=this.wD.Ob(t);var n=this.Dc.O;null!==n&&(t-=n.Tl(),360<=t?t-=360:0>t&&(t+=360));var n=Math.min(Math.abs(this.FJ),180),i=Math.min(Math.abs(this.EJ),n/2);return(null===this.g||!this.g.R.shift)&&0<n&&0<i&&(t%n<i?t=Math.floor(t/n)*n:t%n>n-i&&(t=(Math.floor(t/n)+1)*n)),360<=t?t-=360:0>t&&(t+=360),t},Yh.defineProperty(Qn,{FJ:"snapAngleMultiple"},function(){return this.AD},function(t){Yh.j(t,"number",Qn,"snapAngleMultiple"),this.AD=t}),Yh.defineProperty(Qn,{EJ:"snapAngleEpsilon"},function(){return this.zD},function(t){Yh.j(t,"number",Qn,"snapAngleEpsilon"),this.zD=t}),Yh.u(Qn,{wL:"originalAngle"},function(){return this.iw}),Yh.Ka(Zn,dn),Yh.ga("ClickSelectingTool",Zn),Zn.prototype.canStart=function(){return!(!this.isEnabled||null===this.g||this.isBeyondDragSize())},Zn.prototype.doMouseUp=function(){this.sa&&(this.standardMouseSelect(),!this.standardMouseClick()&&null!==this.g&&this.g.R.uj&&this.g.bb.doToolTip()),this.stopTool()},Yh.Ka(_n,dn),Yh.ga("ActionTool",_n),_n.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t)return!1;var n=t.R,i=t.Je(n.da,function(t){for(;null!==t.O&&!t.vx;)t=t.O;return t});return null!==i&&(!!i.vx&&(this.io=i,t.vo=t.Je(n.da,null,null),!0))},_n.prototype.doMouseDown=function(){if(this.sa){var t=this.g.R,n=this.io;null!==n&&(t.Pe=n,null!==n.bE&&n.bE(t,n))}else this.canStart()&&this.doActivate()},_n.prototype.doMouseMove=function(){if(this.sa){var t=this.g.R,n=this.io;null!==n&&(t.Pe=n,null!==n.cE&&n.cE(t,n))}},_n.prototype.doMouseUp=function(){if(this.sa){var t=this.g,n=t.R,i=this.io;if(null===i)return;n.Pe=i,null!==i.dE&&i.dE(n,i),this.isBeyondDragSize()||pn(i,n,t)}this.stopTool()},_n.prototype.doCancel=function(){var t=this.g;if(null!==t){var t=t.R,n=this.io;if(null===n)return;t.Pe=n,null!==n.aE&&n.aE(t,n)}this.stopTool()},_n.prototype.doStop=function(){this.io=null},Yh.Ka(ti,dn),Yh.ga("ClickCreatingTool",ti),ti.prototype.canStart=function(){if(!this.isEnabled||null===this.Sz)return!1;var t=this.g;if(null===t||t.fb||t.zf||!t.Ep||!t.R.left||this.isBeyondDragSize())return!1;if(this.sI){if(1===t.R.Fe&&(this.CC=t.R.cf.copy()),2!==t.R.Fe||this.isBeyondDragSize(this.CC))return!1}else if(1!==t.R.Fe)return!1;return t.$a===this||null===t.Mt(t.R.da,!0)},ti.prototype.doMouseUp=function(){var t=this.g;this.sa&&null!==t&&this.insertPart(t.R.da),this.stopTool()},ti.prototype.insertPart=function(t){var n=this.g;if(null===n)return null;var i=this.Sz;if(null===i)return null;this.Ub(this.name);var e=null;return i instanceof as?i.de()&&(br(i),null!==(e=i.copy())&&n.add(e)):null!==i&&(i=n.ba.copyNodeData(i),Yh.Qa(i)&&(n.ba.Cl(i),e=n.wh(i))),null!==e&&(e.location=t,n.vf&&n.select(e)),n.rc(),this.Hf=this.name,n.Aa("PartCreated",e),this.Lk(),e},Yh.defineProperty(ti,{Sz:"archetypeNodeData"},function(){return this.qm},function(t){null!==t&&Yh.G(t,Object,ti,"archetypeNodeData"),this.qm=t}),Yh.defineProperty(ti,{sI:"isDoubleClick"},function(){return this.OC},function(t){Yh.j(t,"boolean",ti,"isDoubleClick"),this.OC=t}),Yh.ga("HTMLInfo",ni),Yh.defineProperty(ni,{FA:"mainElement"},function(){return this.ZC},function(t){null!==t&&Yh.G(t,HTMLElement,ni,"mainElement"),this.ZC=t}),Yh.defineProperty(ni,{show:"show"},function(){return this.Cz},function(t){this.Cz!==t&&(null!==t&&Yh.j(t,"function",ni,"show"),this.Cz=t)}),Yh.defineProperty(ni,{Dn:"hide"},function(){return this.gz},function(t){this.gz!==t&&(null!==t&&Yh.j(t,"function",ni,"hide"),this.gz=t)}),Yh.defineProperty(ni,{zB:"valueFunction"},function(){return this.WD},function(t){this.WD=t}),Yh.Ka(ei,dn),Yh.ga("ContextMenuTool",ei),ei.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return!(null===t||this.isBeyondDragSize()||!t.R.right)&&!!(null!==this.wm&&t.R.uj||null!==this.findObjectWithContextMenu())},ei.prototype.doStart=function(){var t=this.g;null!==t&&this.eD.set(t.zc.da)},ei.prototype.doStop=function(){this.hideContextMenu(),this.$w=null},ei.prototype.findObjectWithContextMenu=function(t){void 0===t&&(t=null);var n=this.g;if(null===n)return null;var i=n.R,e=null;if(t instanceof Ei||(e=t instanceof To?t:n.Je(i.da,null,function(t){return!t.layer.Kc})),null!==e){for(t=e;null!==t;){if(null!==t.contextMenu)return t;t=t.O}if(null!==this.wm&&n.R.uj)return e.U}else if(null!==n.contextMenu)return n;return null},ei.prototype.doActivate=function(){},ei.prototype.doMouseDown=function(){dn.prototype.doMouseDown.call(this),null!==this.g&&this.g.bb.bf.contains(this)&&si(this)},ei.prototype.doMouseUp=function(){si(this)},ei.prototype.doMouseMove=function(){this.sa&&null!==this.g&&this.g.bb.doMouseMove()},ei.prototype.showContextMenu=function(t,n){null!==n&&Yh.G(n,To,ei,"showContextMenu:obj");var i=this.g;if(null!==i){if(t!==this.Jl&&this.hideContextMenu(),t instanceof Ds){if(t.Yf="Tool",t.dm=!1,t.scale=1/i.scale,t.td=this.name,null!==t.placeholder&&(t.placeholder.scale=i.scale),i.add(t),null!==n){var i=null,e=n.Ql();null!==e&&(i=e.data),t.rb=n,t.data=i}else t.data=i.ba;t.$e(),this.positionContextMenu(t,n)}else t instanceof ni&&t.show(n,i,this);this.Jl=t}},ei.prototype.positionContextMenu=function(t){if(null===t.placeholder){var n=this.g;if(null!==n){var i=n.R.da.copy(),e=t.za,o=n.pb;n.R.uj&&(i.x-=e.width),i.x+e.width>o.right&&(i.x-=e.width+5),i.x<o.x&&(i.x=o.x),i.y+e.height>o.bottom&&(i.y-=e.height+5),i.y<o.y&&(i.y=o.y),t.position=i}}},ei.prototype.hideContextMenu=function(){var t=this.g;if(null!==t){var n=this.Jl;null!==n&&(n instanceof Ds?(t.remove(n),null!==this.Ky&&this.Ky.Bj(n.td),n.data=null,n.rb=null):n instanceof ni&&(null!==n.Dn?n.Dn(t,this):null!==n.FA&&(n.FA.style.display="none")),this.Jl=null,this.standardMouseOver())}},ei.prototype.showDefaultContextMenu=function(){var t=this.g;if(null!==t){null===this.My&&(this.My=ai(this)),Yh.Dt.innerHTML="",Yh.Ct.addEventListener("click",this.Jz,!1);var n=this,i=Yh.createElement("ul");i.className="goCXul",Yh.Dt.appendChild(i),i.innerHTML="";for(var e=this.My.i;e.next();){var o=e.value,r=o.visible;if("function"==typeof o.qE&&("function"!=typeof r||r(t))){r=Yh.createElement("li"),r.className="goCXli";var s=Yh.createElement("a");s.className="goCXa",s.href="#",s.GG=o.qE,s.addEventListener("click",function(i){return this.GG(t),n.stopTool(),i.preventDefault(),!1},!1),s.textContent=o.text,r.appendChild(s),i.appendChild(r)}}Yh.Dt.style.display="block",Yh.Ct.style.display="block"}},ei.prototype.hideDefaultContextMenu=function(){null!==this.Jl&&this.Jl===this.wm&&(Yh.Dt.style.display="none",Yh.Ct.style.display="none",Yh.Ct.removeEventListener("click",this.Jz,!1),this.Jl=null)},Yh.defineProperty(ei,{Jl:"currentContextMenu"},function(){return this.eC},function(t){this.eC=t,this.Ky=t instanceof Ds?t.Pf:null}),Yh.defineProperty(ei,{QK:"defaultTouchContextMenu"},function(){return this.wm},function(t){this.wm=t}),Yh.defineProperty(ei,{$w:"currentObject"},function(){return this.hC},function(t){null!==t&&Yh.G(t,To,ei,"currentObject"),this.hC=t}),Yh.u(ei,{rL:"mouseDownPoint"},function(){return this.eD}),Yh.Ka(hi,dn),Yh.ga("DragSelectingTool",hi),hi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||!t.vf)return!1;var n=t.R;return!(!n.left||t.$a!==this&&(!this.isBeyondDragSize()||n.timestamp-t.zc.timestamp<this.yE||null!==t.Mt(n.da,!0)))},hi.prototype.doActivate=function(){var t=this.g;null!==t&&(this.sa=!0,t.af=!0,t.wb=!0,t.add(this.sh),this.doMouseMove())},hi.prototype.doDeactivate=function(){var t=this.g;null!==t&&(oo(t),t.remove(this.sh),t.wb=!1,this.sa=t.af=!1)},hi.prototype.doMouseMove=function(){var t=this.g;if(null!==t&&this.sa&&null!==this.sh){var n=this.computeBoxBounds(),i=this.sh.ud("SHAPE");null===i&&(i=this.sh.Jd()),i.Ba=n.size,this.sh.position=n.position,(t.me||t.ne)&&t.fA(t.R.cf)}},hi.prototype.doMouseUp=function(){if(this.sa){var t=this.g;t.remove(this.sh);try{t.dc="wait",this.selectInRect(this.computeBoxBounds())}finally{t.dc=""}}this.stopTool()},hi.prototype.computeBoxBounds=function(){var t=this.g;return null===t?new P(0,0,0,0):new P(t.zc.da,t.R.da)},hi.prototype.selectInRect=function(t){var n=this.g;if(null!==n){var i=n.R;if(n.Aa("ChangingSelection"),t=n.zk(t,null,function(t){return t instanceof as&&t.canSelect()},this.zI),Yh.Fk?i.ou:i.control)if(i.shift)for(t=t.i;t.next();)i=t.value,i.gb&&(i.gb=!1);else for(t=t.i;t.next();)i=t.value,i.gb=!i.gb;else{if(!i.shift){for(var i=new f(as),e=n.selection.i;e.next();){var o=e.value;t.contains(o)||i.add(o)}for(i=i.i;i.next();)i.value.gb=!1}for(t=t.i;t.next();)i=t.value,i.gb||(i.gb=!0)}n.Aa("ChangedSelection")}},Yh.defineProperty(hi,{yE:"delay"},function(){return this.Bo},function(t){Yh.j(t,"number",hi,"delay"),this.Bo=t}),Yh.defineProperty(hi,{zI:"isPartialInclusion"},function(){return this.TC},function(t){Yh.j(t,"boolean",hi,"isPartialInclusion"),this.TC=t}),Yh.defineProperty(hi,{sh:"box"},function(){return this.sm},function(t){null!==t&&Yh.G(t,as,hi,"box"),this.sm=t}),Yh.Ka(ui,dn),Yh.ga("PanningTool",ui),ui.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;return!(null===t||!t.me&&!t.ne||!t.R.left||t.$a!==this&&!this.isBeyondDragSize())},ui.prototype.doActivate=function(){var t=this.g;null!==t&&(this.Ij?(t.R.bubbles=!0,n.document.addEventListener("scroll",this.ED,!1)):(t.dc="move",t.af=!0,this.uz=t.position.copy()),this.sa=!0)},ui.prototype.doDeactivate=function(){var t=this.g;null!==t&&(t.dc="",this.sa=t.af=!1)},ui.prototype.doCancel=function(){var t=this.g;null!==t&&(t.position=this.uz,t.af=!1),this.stopTool()},ui.prototype.doMouseMove=function(){this.move()},ui.prototype.doMouseUp=function(){this.move(),this.stopTool()},ui.prototype.move=function(){var t=this.g;if(this.sa&&t)if(this.Ij)t.R.bubbles=!0;else{var n=t.position,i=t.zc.da,e=t.R.da,o=n.x+i.x-e.x,i=n.y+i.y-e.y;t.me||(o=n.x),t.ne||(i=n.y),t.position=new x(o,i)}},Yh.defineProperty(ui,{bubbles:"bubbles"},function(){return this.Ij},function(t){Yh.j(t,"boolean",ui,"bubbles"),this.Ij=t}),Yh.u(ui,{zL:"originalPosition"},function(){return this.uz}),Yh.ga("TextEditingTool",fi),Yh.Ka(fi,dn);var qf;fi.LostFocus=qf=Yh.p(fi,"LostFocus",0);var zf;fi.MouseDown=zf=Yh.p(fi,"MouseDown",1);var Ef;fi.Tab=Ef=Yh.p(fi,"Tab",2);var If;fi.Enter=If=Yh.p(fi,"Enter",3),fi.SingleClick=Yh.p(fi,"SingleClick",0);var Rf;fi.SingleClickSelected=Rf=Yh.p(fi,"SingleClickSelected",1);var Gf;fi.DoubleClick=Gf=Yh.p(fi,"DoubleClick",2);var Vf;fi.StateNone=Vf=Yh.p(fi,"StateNone",0);var Hf;fi.StateActive=Hf=Yh.p(fi,"StateActive",1);var Kf;fi.StateEditing=Kf=Yh.p(fi,"StateEditing",2);var Uf;fi.StateValidating=Uf=Yh.p(fi,"StateValidating",3);var Jf;fi.StateInvalid=Jf=Yh.p(fi,"StateInvalid",4);var Yf;fi.StateValidated=Yf=Yh.p(fi,"StateValidated",5),Yh.defineProperty(fi,{Yg:"textBlock"},function(){return this.Hz},function(t){null!==t&&Yh.G(t,qr,fi,"textBlock"),this.Hz=t}),Yh.defineProperty(fi,{kj:"currentTextEditor"},function(){return this.jC},function(t){this.jC=t}),Yh.defineProperty(fi,{HH:"defaultTextEditor"},function(){return this.rC},function(t){this.rC=t}),Yh.defineProperty(fi,{mG:"starting"},function(){return this.DD},function(t){Yh.mb(t,fi,fi,"starting"),this.DD=t}),fi.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||t.fb||!t.R.left||this.isBeyondDragSize())return!1;var n=t.Je(t.R.da,null,function(t){return t instanceof qr});return!(null===n||!n.gA||!n.U.canEdit())&&!(null===(n=n.U)||this.mG===Rf&&!n.gb||this.mG===Gf&&2>t.R.Fe)},fi.prototype.doStart=function(){this.sa||null===this.Yg||this.doActivate()},fi.prototype.doActivate=function(){if(!this.sa){var t=this.g;if(null!==t){var n=this.Yg;if(null===n&&(n=t.Je(t.R.da,function(t){return t instanceof qr?t:null})),null!==n&&(this.Yg=n,null!==n.U)){this.sa=!0,this.Ta=Hf;var i=this.HH;null!==n.pG&&(i=n.pG),this.lk=this.Yg.copy();var e=new P(this.Yg.Xa(eu),this.Yg.Xa(fu));t.xJ(e),i instanceof ni?i.show(n,t,this):(i.style.position="absolute",i.style.zIndex="100",i.textEditingTool=this,"function"==typeof i.onActivate&&i.onActivate(),"function"==typeof i.focus&&i.focus(),"function"==typeof i.select&&this.gy&&(i.select(),i.setSelectionRange(0,9999)),t.mj.appendChild(i)),this.kj=i}}}},fi.prototype.doCancel=function(){null!==this.sl&&this.kj instanceof HTMLElement&&(this.kj.style.border=this.sl,this.sl=null),this.stopTool()},fi.prototype.doMouseUp=function(){!this.sa&&this.canStart()&&this.doActivate()},fi.prototype.doMouseDown=function(){this.sa&&this.acceptText(zf)},fi.prototype.acceptText=function(t){switch(t){case zf:this.Ta===Yf?this.kj instanceof HTMLElement&&this.kj.focus():this.Ta!==Hf&&this.Ta!==Jf&&this.Ta!==Kf||(this.Ta=Uf,di(this));break;case qf:case If:case Ef:if(If===t&&!0===this.Hz.Bx)break;this.Ta!==Hf&&this.Ta!==Jf&&this.Ta!==Kf||(this.Ta=Uf,di(this))}},fi.prototype.doDeactivate=function(){var t=this.g;if(null!==t){if(this.Ta=Vf,this.Yg=null,null!==this.kj){var n=this.kj;n instanceof ni?n.Dn(t,this):("function"==typeof n.onDeactivate&&n.onDeactivate(),null!==n&&t.mj.removeChild(n))}this.sa=!1}},fi.prototype.doFocus=function(){pi(this)},fi.prototype.doBlur=function(){yi(this)},fi.prototype.isValidText=function(t,n,i){Yh.G(t,qr,fi,"isValidText:textblock");var e=this.pB;return!(null!==e&&!e(t,n,i))&&!(null!==(e=t.pB)&&!e(t,n,i))},Yh.defineProperty(fi,{pB:"textValidation"},function(){return this.xl},function(t){null!==t&&Yh.j(t,"function",fi,"textValidation"),this.xl=t}),Yh.defineProperty(fi,{BF:"minimumEditorScale"},function(){return this.bD},function(t){null!==t&&Yh.j(t,"number",fi,"minimumEditorScale"),this.bD=t}),Yh.defineProperty(fi,{gy:"selectsTextOnActivate"},function(){return this.xD},function(t){null!==t&&Yh.j(t,"boolean",fi,"selectsTextOnActivate"),this.xD=t}),Yh.defineProperty(fi,{state:"state"},function(){return this.Ta},function(t){this.Ta!==t&&(Yh.mb(t,fi,fi,"starting"),this.Ta=t)}),fi.prototype.measureTemporaryTextBlock=fi.prototype.SI=function(t){var n=this.lk;return n.text=t,Do(n,this.Yg.Xo,1/0),n},Yh.Ka(vi,dn),Yh.ga("ToolManager",vi);var Wf;vi.WheelScroll=Wf=Yh.p(vi,"WheelScroll",0);var Xf;vi.WheelZoom=Xf=Yh.p(vi,"WheelZoom",1),vi.WheelNone=Yh.p(vi,"WheelNone",2);var $f;vi.GestureZoom=$f=Yh.p(vi,"GestureZoom",3);var Qf;vi.GestureCancel=Qf=Yh.p(vi,"GestureCancel",4);var Zf;vi.GestureNone=Zf=Yh.p(vi,"GestureNone",5),Yh.defineProperty(vi,{ru:"mouseWheelBehavior"},function(){return this.fD},function(t){Yh.mb(t,vi,vi,"mouseWheelBehavior"),this.fD=t}),Yh.defineProperty(vi,{Vp:"gestureBehavior"},function(){return this.EC},function(t){Yh.mb(t,vi,vi,"gestureBehavior"),this.EC=t}),vi.prototype.initializeStandardTools=function(){this.YG=new _n,this.NF=new Jn,this.JI=new Wn,this.YF=new $n,this.uJ=new Qn,this.xF=new Un,this.re=new yn,this.MH=new hi,this.fJ=new ui,this.Zz=new ei,this.oB=new fi,this.oH=new ti,this.pH=new Zn},vi.prototype.updateAdornments=function(t){var n=this.Kl;if(n instanceof Ds&&this.qv===t){var i=n.rb;(null!==t?i.U===t:null===i)?this.showToolTip(n,i):this.hideToolTip()}},vi.prototype.doMouseDown=function(){var t=this.g;if(null!==t){var n=t.R;if(n.uj&&this.Vp===Qf&&(n.bubbles=!1),n.fu){if(this.cancelWaitAfter(),this.Vp===Zf)return void(n.bubbles=!0);if(this.Vp===Qf)return;if(t.$a.canStartMultiTouch())return void t.$a.standardPinchZoomStart()}var i=t.oa;i.Vz&&0!==i.Gh&&Yh.trace("WARNING: In ToolManager.doMouseDown: UndoManager.transactionLevel is not zero");for(var i=this.bf.length,e=0;e<i;e++){var o=this.bf.ea(e);if(null===o.g&&o.Qc(this.g),o.canStart())return t.doFocus(),t.$a=o,void(t.$a===o&&(o.sa||o.doActivate(),o.doMouseDown()))}1===t.R.button&&(this.ru===Wf?this.ru=Xf:this.ru===Xf&&(this.ru=Wf)),this.doActivate(),this.standardWaitAfter(this.cF,n)}},vi.prototype.doMouseMove=function(){var t=this.g;if(null!==t){var n=t.R;if(n.fu){if(this.Vp===Zf)return void(n.bubbles=!0);if(this.Vp===Qf)return;if(t.$a.canStartMultiTouch())return void t.$a.standardPinchZoomMove()}if(this.sa)for(var i=this.ag.length,e=0;e<i;e++){var o=this.ag.ea(e);if(null===o.g&&o.Qc(this.g),o.canStart())return t.doFocus(),t.$a=o,void(t.$a===o&&(o.sa||o.doActivate(),o.doMouseMove()))}gi(this,t),null===n.event||"mousemove"!==n.event.type&&n.event.cancelable||(n.bubbles=!0)}},vi.prototype.doCurrentObjectChanged=function(t,n){var i=this.Kl;null===i||null!==n&&i instanceof Ds&&(n===i||n.Zl(i))||this.hideToolTip()},vi.prototype.doWaitAfter=function(t){var n=this.g;null!==n&&n.Fb&&(this.doMouseHover(),this.sa||this.doToolTip(),t.uj&&!n.R.Ac&&(t=t.copy(),t.button=2,t.buttons=2,n.R=t,n.gt=!0,n.doMouseUp()))},vi.prototype.doMouseHover=function(){var t=this.g;if(null!==t){var n=t.R;null===n.Pe&&(n.Pe=t.Je(n.da,null,null));var i=n.Pe;if(null!==i)for(n.Ac=!1;null!==i&&(null===(t=this.sa?i.LA:i.MA)||(t(n,i),!n.Ac));)i=i.O;else null!==(i=this.sa?t.LA:t.MA)&&i(n)}},vi.prototype.doToolTip=function(){var t=this.g;if(null!==t){var n=t.R;if(null===n.Pe&&(n.Pe=t.Je(n.da,null,null)),null!==(n=n.Pe)){if(!((t=this.Kl)instanceof Ds)||n!==t&&!n.Zl(t)){for(;null!==n;){if(null!==(t=n.rB))return void this.showToolTip(t,n);n=n.O}this.hideToolTip()}}else t=t.rB,null!==t?this.showToolTip(t,null):this.hideToolTip()}},vi.prototype.showToolTip=function(t,n){null!==n&&Yh.G(n,To,vi,"showToolTip:obj");var i=this.g;if(null!==i){if(t!==this.Kl&&this.hideToolTip(),t instanceof Ds){if(t.Yf="Tool",t.dm=!1,t.scale=1/i.scale,t.td="ToolTip",null!==t.placeholder&&(t.placeholder.scale=i.scale),i.add(t),null!==n){var i=null,e=n.Ql();null!==e&&(i=e.data),t.rb=n,t.data=i}else t.data=i.ba;t.$e(),this.positionToolTip(t,n)}else t instanceof ni&&t!==this.Kl&&t.show(n,i,this);if(this.Kl=t,-1!==this.en&&(Yh.clearTimeout(this.en),this.en=-1),0<(i=this.QJ)&&1/0!==i){var o=this;this.en=Yh.setTimeout(function(){o.hideToolTip()},i)}}},vi.prototype.positionToolTip=function(t){if(null===t.placeholder){var n=this.g;if(null!==n){var i=n.R.da.copy(),e=t.za,o=n.pb;n.R.uj&&(i.x-=e.width),i.x+e.width>o.right&&(i.x-=e.width+5),i.x<o.x&&(i.x=o.x),i.y=i.y+20+e.height>o.bottom?i.y-(e.height+5):i.y+20,i.y<o.y&&(i.y=o.y),t.position=i}}},vi.prototype.hideToolTip=function(){-1!==this.en&&(Yh.clearTimeout(this.en),this.en=-1);var t=this.g;if(null!==t){var n=this.Kl;null!==n&&(n instanceof Ds?(t.remove(n),null!==this.qv&&this.qv.Bj(n.td),n.data=null,n.rb=null):n instanceof ni&&null!==n.Dn&&n.Dn(t,this),this.Kl=null)}},Yh.defineProperty(vi,{Kl:"currentToolTip"},function(){return this.kC},function(t){this.kC=t,this.qv=null!==t&&t instanceof Ds?t.Pf:null}),vi.prototype.doMouseUp=function(){this.cancelWaitAfter();var t=this.g;if(null!==t){if(this.sa)for(var n=this.bg.length,i=0;i<n;i++){var e=this.bg.ea(i);if(null===e.g&&e.Qc(this.g),e.canStart())return t.doFocus(),t.$a=e,void(t.$a===e&&(e.sa||e.doActivate(),e.doMouseUp()))}t.doFocus(),this.doDeactivate()}},vi.prototype.doMouseWheel=function(){this.standardMouseWheel()},vi.prototype.doKeyDown=function(){var t=this.g;null!==t&&t.ob.doKeyDown()},vi.prototype.doKeyUp=function(){var t=this.g;null!==t&&t.ob.doKeyUp()},vi.prototype.doCancel=function(){null!==Cf&&Cf.doCancel(),dn.prototype.doCancel.call(this)},vi.prototype.findTool=function(t){Yh.j(t,"string",vi,"findTool:name");for(var n=this.bf.length,i=0;i<n;i++){var e=this.bf.ea(i);if(e.name===t)return e}for(n=this.ag.length,i=0;i<n;i++)if(e=this.ag.ea(i),e.name===t)return e;for(n=this.bg.length,i=0;i<n;i++)if(e=this.bg.ea(i),e.name===t)return e;return null},vi.prototype.replaceTool=function(t,n){Yh.j(t,"string",vi,"replaceTool:name"),null!==n&&(Yh.G(n,dn,vi,"replaceTool:newtool"),n.g&&n.g!==this.g&&Yh.k("Cannot share tools between Diagrams: "+n.toString()),n.Qc(this.g));for(var i=this.bf.length,e=0;e<i;e++){var o=this.bf.ea(e);if(o.name===t)return null!==n?this.bf.hg(e,n):this.bf.Yc(e),o}for(i=this.ag.length,e=0;e<i;e++)if(o=this.ag.ea(e),o.name===t)return null!==n?this.ag.hg(e,n):this.ag.Yc(e),o;for(i=this.bg.length,e=0;e<i;e++)if(o=this.bg.ea(e),o.name===t)return null!==n?this.bg.hg(e,n):this.bg.Yc(e),o;return null},Yh.u(vi,{bf:"mouseDownTools"},function(){return this.LG}),Yh.u(vi,{ag:"mouseMoveTools"},function(){return this.MG}),Yh.u(vi,{bg:"mouseUpTools"},function(){return this.NG}),Yh.defineProperty(vi,{kI:"hoverDelay"},function(){return this.HC},function(t){Yh.j(t,"number",vi,"hoverDelay"),this.HC=t}),Yh.defineProperty(vi,{cF:"holdDelay"},function(){return this.GC},function(t){Yh.j(t,"number",vi,"holdDelay"),this.GC=t}),Yh.defineProperty(vi,{NH:"dragSize"},function(){return this.wC},function(t){Yh.G(t,M,vi,"dragSize"),this.wC=t.S()}),Yh.defineProperty(vi,{QJ:"toolTipDuration"},function(){return this.RD},function(t){Yh.j(t,"number",vi,"toolTipDuration"),this.RD=t}),Yh.defineProperty(vi,{YG:"actionTool"},function(){return this.findTool("Action")},function(t){mi(this,"Action",t,this.bf)}),Yh.defineProperty(vi,{NF:"relinkingTool"},function(){return this.findTool("Relinking")},function(t){mi(this,"Relinking",t,this.bf)}),Yh.defineProperty(vi,{JI:"linkReshapingTool"},function(){return this.findTool("LinkReshaping")},function(t){mi(this,"LinkReshaping",t,this.bf)}),Yh.defineProperty(vi,{YF:"resizingTool"},function(){return this.findTool("Resizing")},function(t){mi(this,"Resizing",t,this.bf)}),Yh.defineProperty(vi,{uJ:"rotatingTool"},function(){return this.findTool("Rotating")},function(t){mi(this,"Rotating",t,this.bf)}),Yh.defineProperty(vi,{xF:"linkingTool"},function(){return this.findTool("Linking")},function(t){mi(this,"Linking",t,this.ag)}),Yh.defineProperty(vi,{re:"draggingTool"},function(){return this.findTool("Dragging")},function(t){mi(this,"Dragging",t,this.ag)}),Yh.defineProperty(vi,{MH:"dragSelectingTool"},function(){return this.findTool("DragSelecting")},function(t){mi(this,"DragSelecting",t,this.ag)}),Yh.defineProperty(vi,{fJ:"panningTool"},function(){return this.findTool("Panning")},function(t){mi(this,"Panning",t,this.ag)}),Yh.defineProperty(vi,{Zz:"contextMenuTool"},function(){return this.findTool("ContextMenu")},function(t){mi(this,"ContextMenu",t,this.bg)}),Yh.defineProperty(vi,{oB:"textEditingTool"},function(){return this.findTool("TextEditing")},function(t){mi(this,"TextEditing",t,this.bg)}),Yh.defineProperty(vi,{oH:"clickCreatingTool"},function(){return this.findTool("ClickCreating")},function(t){mi(this,"ClickCreating",t,this.bg)}),Yh.defineProperty(vi,{pH:"clickSelectingTool"},function(){return this.findTool("ClickSelecting")},function(t){mi(this,"ClickSelecting",t,this.bg)}),Yh.ga("AnimationManager",bi),bi.prototype.Qc=function(t){this.Z=t},Yh.u(bi,{uK:"animationReasons"},function(){return this.cv}),bi.prototype.canStart=function(){return!0},bi.prototype.prepareAutomaticAnimation=bi.prototype.Tn=function(t){this.df&&(this.Xj||this.Z.Gn)&&(this.cv.add(t),this.canStart(t)&&(this.Wj&&this.qi(),this.pc=!0))},bi.prototype.stopAnimation=bi.prototype.qi=function(){!0===this.pc&&(this.pc=!1,this.mo&&this.Z.Le()),this.Wj&&this.df&&Ni(this)},Yh.defineProperty(bi,{isEnabled:"isEnabled"},function(){return this.df},function(t){Yh.j(t,"boolean",bi,"isEnabled"),this.df=t}),Yh.defineProperty(bi,{duration:"duration"},function(){return this.Vy},function(t){Yh.j(t,"number",bi,"duration"),1>t&&Yh.Ea(t,">= 1",bi,"duration"),this.Vy=t}),Yh.u(bi,{lf:"isAnimating"},function(){return this.Wj}),Yh.u(bi,{AI:"isTicking"},function(){return this.So}),Yh.defineProperty(bi,{oF:"isInitial"},function(){return this.Xj},function(t){Yh.j(t,"boolean",bi,"isInitial"),this.Xj=t});var _f={opacity:function(t,n,i,e,o,r){t.opacity=e(o,n,i-n,r)},position:function(t,n,i,e,o,r){o!==r?t.ky(e(o,n.x,i.x-n.x,r),e(o,n.y,i.y-n.y,r)):t.position=new x(e(o,n.x,i.x-n.x,r),e(o,n.y,i.y-n.y,r))},"position:node":function(t,n,i,e,o,r){var s=t.W,l=i.W;i=l.x+l.width/2-s.width/2,s=l.y+l.height/2-s.height/2,o!==r?t.ky(e(o,n.x,i-n.x,r),e(o,n.y,s-n.y,r)):t.position=new x(e(o,n.x,i-n.x,r),e(o,n.y,s-n.y,r))},"position:placeholder":function(t,n,i,e,o,r){o!==r?t.ky(e(o,n.x,i.x-n.x,r),e(o,n.y,i.y-n.y,r)):t.position=new x(e(o,n.x,i.x-n.x,r),e(o,n.y,i.y-n.y,r))},scale:function(t,n,i,e,o,r){t.scale=e(o,n,i-n,r)},visible:function(t,n,i,e,o,r){t.visible=o!==r?n:i}};Yh.ga("Layer",Oi),Oi.prototype.Qc=function(t){this.Z=t},Oi.prototype.toString=function(t){void 0===t&&(t=0);var n='Layer "'+this.name+'"';if(0>=t)return n;for(var i=0,e=0,o=0,r=0,s=0,l=this.zb.i;l.next();){var a=l.value;a instanceof Ll?o++:a instanceof As?e++:a instanceof Js?r++:a instanceof Ds?s++:i++}if(l="",0<i&&(l+=i+" Parts "),0<e&&(l+=e+" Nodes "),0<o&&(l+=o+" Groups "),0<r&&(l+=r+" Links "),0<s&&(l+=s+" Adornments "),1<t)for(t=this.zb.i;t.next();)i=t.value,l+="\n    "+i.toString(),e=i.data,null!==e&&Yh.Kd(e)&&(l+=" #"+Yh.Kd(e)),i instanceof As?l+=" "+Mf(e):i instanceof Js&&(l+=" "+Mf(i.Y)+" "+Mf(i.$));return n+" "+this.zb.count+": "+l},Oi.prototype.findObjectAt=Oi.prototype.Je=function(t,n,i){if(void 0===n&&(n=null),void 0===i&&(i=null),!1===this.tl)return null;var e=!1;null!==this.g&&this.g.pb.Ha(t)&&(e=!0);for(var o=Yh.K(),r=this.zb.n,s=r.length;s--;){var l=r[s];if((!0!==e||!1!==Ts(l))&&l.isVisible()&&(o.assign(t),k(o,l.qh),null!==(l=l.Je(o,n,i))&&(null!==n&&(l=n(l)),null!==l&&(null===i||i(l)))))return Yh.v(o),l}return Yh.v(o),null},Oi.prototype.findObjectsAt=Oi.prototype.Lt=function(t,n,i,e){if(void 0===n&&(n=null),void 0===i&&(i=null),e instanceof f||e instanceof d||(e=new d(To)),!1===this.tl)return e;var o=!1;null!==this.g&&this.g.pb.Ha(t)&&(o=!0);for(var r=Yh.K(),s=this.zb.n,l=s.length;l--;){var a=s[l];if((!0!==o||!1!==Ts(a))&&a.isVisible()){r.assign(t),k(r,a.qh);var h=a;a.Lt(r,n,i,e)&&(null!==n&&(h=n(h)),null===h||null!==i&&!i(h)||(e instanceof d&&e.add(h),e instanceof f&&e.add(h)))}}return Yh.v(r),e},Oi.prototype.findObjectsIn=Oi.prototype.zk=function(t,n,i,e,o){if(void 0===n&&(n=null),void 0===i&&(i=null),void 0===e&&(e=!1),o instanceof f||o instanceof d||(o=new d(To)),!1===this.tl)return o;var r=!1;null!==this.g&&this.g.pb.wk(t)&&(r=!0);for(var s=this.zb.n,l=s.length;l--;){var a=s[l];if((!0!==r||!1!==Ts(a))&&a.isVisible()){var h=a;a.zk(t,n,i,e,o)&&(null!==n&&(h=n(h)),null===h||null!==i&&!i(h)||(o instanceof d&&o.add(h),o instanceof f&&o.add(h)))}}return o},Oi.prototype.jA=function(t,n,i,e,o,r,s){if(!1===this.tl)return o;for(var l=this.zb.n,a=l.length;a--;){var h=l[a];if((!0!==s||!1!==Ts(h))&&r(h)&&h.isVisible()){var u=h;h.zk(t,n,i,e,o)&&(null!==n&&(u=n(u)),null===u||null!==i&&!i(u)||(o instanceof d&&o.add(u),o instanceof f&&o.add(u)))}}return o},Oi.prototype.findObjectsNear=Oi.prototype.wn=function(t,n,i,e,o,r){if(void 0===i&&(i=null),void 0===e&&(e=null),void 0===o&&(o=!0),!1!==o&&!0!==o&&((o instanceof f||o instanceof d)&&(r=o),o=!0),r instanceof f||r instanceof d||(r=new d(To)),!1===this.tl)return r;var s=!1;null!==this.g&&this.g.pb.Ha(t)&&(s=!0);for(var l=Yh.K(),a=Yh.K(),h=this.zb.n,u=h.length;u--;){var c=h[u];if((!0!==s||!1!==Ts(c))&&c.isVisible()){l.assign(t),k(l,c.qh),a.m(t.x+n,t.y),k(a,c.qh);var p=c;c.wn(l,a,i,e,o,r)&&(null!==i&&(p=i(p)),null===p||null!==e&&!e(p)||(r instanceof d&&r.add(p),r instanceof f&&r.add(p)))}}return Yh.v(l),Yh.v(a),r},Uh=Oi.prototype,Uh.Df=function(t,n){if(this.visible){var i;i=void 0===n?t.pb:n;for(var e=this.zb.n,o=e.length,r=0;r<o;r++){var s=e[r];if(s.YC=r,!(s instanceof Js&&!1===s.$g)){if(s instanceof Ds){var l=s;if(null!==l.Pf)continue}if(j(s.W,i))for(s.Df(!0),us(s),s=s.Ow;s.next();)l=s.value,Do(l,1/0,1/0),l.ic(),l.Df(!0);else s.Df(!1),null!==s.Ow&&0<s.Ow.count&&us(s)}}}},Uh.se=function(t,n,i){if(this.visible&&0!==this.wc&&(void 0===i&&(i=!0),i||!this.Kc)){i=this.zb.n;var e=i.length;if(0!==e){1!==this.wc&&(t.globalAlpha=this.wc);var o=this.kw;o.length=0;for(var r=n.scale,s=0;s<e;s++){var l=i[s];if(Ts(l)){if(l instanceof Js){var a=l;if(a.Zb&&o.push(a),!1===a.$g)continue}a=l.W,1<a.width*r||1<a.height*r?l.se(t,n):xs(l,t)}}t.globalAlpha=1}}},Uh.h=function(t,n,i,e,o){var r=this.g;null!==r&&r.Xc(gf,t,this,n,i,e,o)},Uh.Yp=function(t,n,i){var e=this.zb;if(n.Uv=this,t>=e.count)t=e.count;else if(e.ea(t)===n)return-1;return e.Md(t,n),n.Yt(i),e=this.g,null!==e&&(i?e.na():e.Yp(n)),qi(this,t,n),t},Uh.kf=function(t,n,i){if(!i&&n.layer!==this&&null!==n.layer)return n.layer.kf(t,n,i);var e=this.zb;if(0>t||t>=e.length){if(0>(t=e.indexOf(n)))return-1}else if(e.ea(t)!==n&&0>(t=e.indexOf(n)))return-1;return n.Zt(i),e.Yc(t),e=this.g,null!==e&&(i?e.na():e.kf(n)),n.Uv=null,t},Uh.clear=function(){for(var t=this.zb.fc(),n=t.length,i=0;i<n;i++)t[i].Df(!1),this.kf(-1,t[i],!1)},Yh.u(Oi,{Jk:"parts"},function(){return this.zb.i}),Yh.u(Oi,{CL:"partsBackwards"},function(){return this.zb.Hn}),Yh.u(Oi,{g:"diagram"},function(){return this.Z}),Yh.defineProperty(Oi,{name:"name"},function(){return this.Rb},function(t){Yh.j(t,"string",Oi,"name");var n=this.Rb;if(n!==t){var i=this.g;if(null!==i)for(""===n&&Yh.k("Cannot rename default Layer to: "+t),i=i.Hx;i.next();)i.value.name===t&&Yh.k("Layer.name is already present in this diagram: "+t);for(this.Rb=t,this.h("name",n,t),t=this.zb.i;t.next();)t.value.Yf=this.Rb}}),Yh.defineProperty(Oi,{opacity:"opacity"},function(){return this.wc},function(t){var n=this.wc;n!==t&&(Yh.j(t,"number",Oi,"opacity"),(0>t||1<t)&&Yh.Ea(t,"0 <= value <= 1",Oi,"opacity"),this.wc=t,this.h("opacity",n,t),null!==(t=this.g)&&t.na())}),Yh.defineProperty(Oi,{Kc:"isTemporary"},function(){return this.kz},function(t){var n=this.kz;n!==t&&(Yh.j(t,"boolean",Oi,"isTemporary"),this.kz=t,this.h("isTemporary",n,t))}),Yh.defineProperty(Oi,{visible:"visible"},function(){return this.Mz},function(t){var n=this.Mz;if(n!==t){for(Yh.j(t,"boolean",Oi,"visible"),this.Mz=t,this.h("visible",n,t),n=this.zb.i;n.next();)n.value.vd(t);t=this.g,null!==t&&t.na()}}),Yh.defineProperty(Oi,{Ug:"pickable"},function(){return this.tl},function(t){var n=this.tl;n!==t&&(Yh.j(t,"boolean",Oi,"pickable"),this.tl=t,this.h("pickable",n,t))}),Yh.defineProperty(Oi,{hF:"isBoundsIncluded"},function(){return this.hz},function(t){this.hz!==t&&(this.hz=t,null!==this.g&&this.g.rc())}),Yh.defineProperty(Oi,{tk:"allowCopy"},function(){return this.Mk},function(t){var n=this.Mk;n!==t&&(Yh.j(t,"boolean",Oi,"allowCopy"),this.Mk=t,this.h("allowCopy",n,t))}),Yh.defineProperty(Oi,{gn:"allowDelete"},function(){return this.Nk},function(t){var n=this.Nk;n!==t&&(Yh.j(t,"boolean",Oi,"allowDelete"),this.Nk=t,this.h("allowDelete",n,t))}),Yh.defineProperty(Oi,{Sw:"allowTextEdit"},function(){return this.Wk},function(t){var n=this.Wk;n!==t&&(Yh.j(t,"boolean",Oi,"allowTextEdit"),this.Wk=t,this.h("allowTextEdit",n,t))}),Yh.defineProperty(Oi,{Pw:"allowGroup"},function(){return this.Ok},function(t){var n=this.Ok;n!==t&&(Yh.j(t,"boolean",Oi,"allowGroup"),this.Ok=t,this.h("allowGroup",n,t))}),Yh.defineProperty(Oi,{Tw:"allowUngroup"},function(){return this.Xk},function(t){var n=this.Xk;n!==t&&(Yh.j(t,"boolean",Oi,"allowUngroup"),this.Xk=t,this.h("allowUngroup",n,t))}),Yh.defineProperty(Oi,{zt:"allowLink"},function(){return this.Pk},function(t){var n=this.Pk;n!==t&&(Yh.j(t,"boolean",Oi,"allowLink"),this.Pk=t,this.h("allowLink",n,t))}),Yh.defineProperty(Oi,{hn:"allowRelink"},function(){return this.Rk},function(t){var n=this.Rk;n!==t&&(Yh.j(t,"boolean",Oi,"allowRelink"),this.Rk=t,this.h("allowRelink",n,t))}),Yh.defineProperty(Oi,{El:"allowMove"},function(){return this.Qk},function(t){var n=this.Qk;n!==t&&(Yh.j(t,"boolean",Oi,"allowMove"),this.Qk=t,this.h("allowMove",n,t))}),Yh.defineProperty(Oi,{Qw:"allowReshape"},function(){return this.Sk},function(t){var n=this.Sk;n!==t&&(Yh.j(t,"boolean",Oi,"allowReshape"),this.Sk=t,this.h("allowReshape",n,t))}),Yh.defineProperty(Oi,{At:"allowResize"},function(){return this.Tk},function(t){var n=this.Tk;n!==t&&(Yh.j(t,"boolean",Oi,"allowResize"),this.Tk=t,this.h("allowResize",n,t))}),Yh.defineProperty(Oi,{Rw:"allowRotate"},function(){return this.Uk},function(t){var n=this.Uk;n!==t&&(Yh.j(t,"boolean",Oi,"allowRotate"),this.Uk=t,this.h("allowRotate",n,t))}),Yh.defineProperty(Oi,{vf:"allowSelect"},function(){return this.Vk},function(t){var n=this.Vk;n!==t&&(Yh.j(t,"boolean",Oi,"allowSelect"),this.Vk=t,this.h("allowSelect",n,t))}),Yh.ga("Diagram",Ei),Ei.prototype.clear=Ei.prototype.clear=function(){var t=null;null!==this.pd&&(t=this.pd.U),this.ba.clear();for(var n=this.bc.length,i=0;i<n;i++)this.bc.n[i].clear();this.tg.clear(),this.al.clear(),this.fp.clear(),this.yl.clear(),this.Zo.clear(),this.zb.clear(),this.Bi.clear(),this.Kj.clear(),this.Em.clear(),this.zw.Ra(),this.zw.clear(),this.zw.freeze(),this.Hv.Ra(),this.Hv.clear(),this.Hv.freeze(),Pf=this.vo=null,Tf="",this.uv=new P(NaN,NaN,NaN,NaN).freeze(),null!==t&&(this.add(t),this.zb.remove(t)),this.na()},Ei.prototype.reset=Ei.prototype.reset=function(){this.Sc=!0,this.clear(),this.bc=new f(Oi),this.UF(),this.TF(),this.ib=new x(NaN,NaN).freeze(),this.tb=1,this.Jv=new x(NaN,NaN).freeze(),this.Kv=NaN,this.bw=1e-4,this.$v=100,this.Mw=new x(NaN,NaN).freeze(),this.Bv=new P(NaN,NaN,NaN,NaN).freeze(),this.uw=new D(0,0,0,0).freeze(),this.vw=hc,this.rw=this.pw=null,this.rm=tc,this.so=iu,this.gl=tc,this.Mo=iu,this.Lv=this.Iv=eu,this.Mq=250,this.fv=new D(16,16,16,16).freeze(),this.Rv=!0,this.Hw=fc,this.Jw=ec,this.ir="auto",this.Ai=this.dj=this.Si=this.ew=this.Ti=this.Ui=this.Vi=this.zi=this.Fi=this.xi=null,this.Ki=!1,this.Nk=this.Mk=this.Vu=this.df=!0,this.Xu=this.Wu=!1,this.av=this.Yu=this.Gv=this.Fv=this.bv=this.$u=this.Vk=this.Uk=this.Tk=this.Sk=this.Qk=this.Rk=this.Pk=this.Zu=this.Xk=this.Ok=this.Wk=!0,this.xw=this.tw=16,this.ff=new D(5).freeze(),this.aw=999999999,this.ie=null,this.Sv=!1,Ii(this),this.pd=null,this.bb=new vi,this.bb.initializeStandardTools(),this.$a=this.Et=this.bb,this.ob=new hn,this.cj=!0,Hi(this),this.Sb=new ql,this.cj=!1,this.ba=new Zt,this.fh=!1,this.Ho=!0,this.Sc=this.Of=!1,this.na(),this.hh=this.wi=null,Qe(this),this.mv=""},Ei.prototype.hc=function(t){t.De===Ei?this.Gl=t:Yh.Ej(this,t)},Ei.prototype.toString=function(t){void 0===t&&(t=0);var n="";if(this.mj&&this.mj.id&&(n=this.mj.id),n='Diagram "'+n+'"',0>=t)return n;for(var i=this.bc.i;i.next();)n+="\n  "+i.value.toString(t-1);return n},Ei.fromDiv=function(t){var i=t;return"string"==typeof t&&(i=n.document.getElementById(t)),i instanceof HTMLDivElement&&i.Z instanceof Ei?i.Z:null},Yh.defineProperty(Ei,{mj:"div"},function(){return this.Mb},function(t){if(null!==t&&Yh.G(t,HTMLDivElement,Ei,"div"),this.Mb!==t){Sd=[];var i=this.Mb;null!==i?(i.Z=void 0,i.innerHTML="",null!==this.Fb&&(this.Fb.removeEventListener("touchstart",this.uB,!1),this.Fb.removeEventListener("touchmove",this.tB,!1),this.Fb.removeEventListener("touchend",this.sB,!1),this.Fb.Hd.Z=null),i=this.bb,null!==i&&(i.bf.each(function(t){t.cancelWaitAfter()}),i.ag.each(function(t){t.cancelWaitAfter()}),i.bg.each(function(t){t.cancelWaitAfter()})),i.cancelWaitAfter(),this.$a.doCancel(),this.rf=this.Fb=null,n.removeEventListener("resize",this.BB,!1),n.removeEventListener("mousemove",this.On,!0),n.removeEventListener("mousedown",this.Nn,!0),n.removeEventListener("mouseup",this.Qn,!0),n.removeEventListener("mousewheel",this.Pg,!0),n.removeEventListener("DOMMouseScroll",this.Pg,!0),n.removeEventListener("mouseout",this.Pn,!0)):this.fh=!1,this.Mb=null,null!==t&&((i=t.Z)&&(i.mj=null),ho(this,t),this.Vx())}}),Ei.prototype.computePixelRatio=function(){return null!==this.kk?this.kk:this.gD},Ei.prototype.doMouseMove=function(){this.$a.doMouseMove()},Ei.prototype.doMouseDown=function(){this.$a.doMouseDown()},Ei.prototype.doMouseUp=function(){this.$a.doMouseUp()},Ei.prototype.doMouseWheel=function(){this.$a.doMouseWheel()},Ei.prototype.doKeyDown=function(){this.$a.doKeyDown()},Ei.prototype.doKeyUp=function(){this.$a.doKeyUp()},Ei.prototype.doFocus=function(){this.focus()},Ei.prototype.focus=Ei.prototype.focus=function(){this.Fb&&this.Fb.focus()},Ei.prototype.diagramScroll=Ei.prototype.LH=function(t){if(this.zz&&null!==this.Fb){this.sw=!0;var n,i=this.qe,e=this.pb,o=i.width,r=e.width,s=i.height,l=e.height,a=i.right,h=e.right,u=i.bottom,f=e.bottom,c=i.x,d=e.x,i=i.y,e=e.y,p=this.scale;if(n=t.scrollLeft,this.Kr)switch(this.xz){case"negative":n=n+t.scrollWidth-t.clientWidth;break;case"reverse":n=t.scrollWidth-n-t.clientWidth}var y=n;r<o||l<s?(n=Yh.xb(this.position.x,this.position.y),this.me&&this.Az!==y&&(n.x=y/p+c,this.Az=y),this.ne&&this.Bz!==t.scrollTop&&(n.y=t.scrollTop/p+i,this.Bz=t.scrollTop),this.position=n,Yh.v(n),this.Am=this.sw=!1):(n=Yh.K(),t.RG&&this.me&&(c<d&&(this.position=n.m(y+c,this.position.y)),a>h&&(this.position=n.m(-(this.ww.scrollWidth-this.Ib)+y-this.Ib/p+a,this.position.y))),t.SG&&this.ne&&(i<e&&(this.position=n.m(this.position.x,t.scrollTop+i)),u>f&&(this.position=n.m(this.position.x,-(this.ww.scrollHeight-this.Lb)+t.scrollTop-this.Lb/p+u))),Yh.v(n),ye(this),this.Am=this.sw=!1,i=this.qe,e=this.pb,a=i.right,h=e.right,u=i.bottom,f=e.bottom,c=i.x,d=e.x,i=i.y,e=e.y,r>=o&&c>=d&&a<=h&&(this.Qs.style.width="1px"),l>=s&&i>=e&&u<=f&&(this.Qs.style.height="1px"))}},Ei.prototype.computeBounds=Ei.prototype.th=function(){return 0<this.tg.count&&ae(this),Yi(this)},Ei.prototype.computePartsBounds=function(t,n){void 0===n&&(n=!1);for(var i=null,e=t.i;e.next();){var o=e.value;!n&&o instanceof Js||(o.$e(),null===i?i=o.W.copy():i.Hh(o.W))}return null===i?new P(NaN,NaN,0,0):i},Ei.prototype.zoomToFit=Ei.prototype.zoomToFit=function(){this.scale=Xi(this,nc)},Ei.prototype.zoomToRect=function(t,n){void 0===n&&(n=nc);var i=t.width,e=t.height;if(!(0===i||0===e||isNaN(i)&&isNaN(e))){var o=1;if(n===nc||n===ic)if(isNaN(i))o=this.pb.height*this.scale/e;else if(isNaN(e))o=this.pb.width*this.scale/i;else var o=this.Ib,r=this.Lb,o=n===ic?r/e>o/i?(r-(this.Uj?this.Dd:0))/e:(o-(this.el?this.Dd:0))/i:Math.min(r/e,o/i);this.scale=o,this.position=new x(t.x,t.y)}},Yh.defineProperty(Ei,{yA:null},function(){return this.Sc},function(t){this.Sc=t}),Ei.prototype.alignDocument=function(t,n){this.Vj&&Je(this,this.th());var i=this.qe,e=this.pb;this.position=new x(i.x+(t.x*i.width+t.offsetX)-(n.x*e.width-n.offsetX),i.y+(t.y*i.height+t.offsetY)-(n.y*e.height-n.offsetY))},Ei.prototype.findPartAt=Ei.prototype.Mt=function(t,n){var i=n?Qi(this,t,function(t){return t.U},function(t){return t.canSelect()}):Qi(this,t,function(t){return t.U});return i instanceof as?i:null},Ei.prototype.findObjectAt=Ei.prototype.Je=function(t,n,i){void 0===n&&(n=null),void 0===i&&(i=null),ae(this);for(var e=this.bc.Hn;e.next();){var o=e.value;if(o.visible&&null!==(o=o.Je(t,n,i)))return o}return null},Ei.prototype.findObjectsAt=Ei.prototype.Lt=function(t,n,i,e){void 0===n&&(n=null),void 0===i&&(i=null),e instanceof f||e instanceof d||(e=new d(To)),ae(this);for(var o=this.bc.Hn;o.next();){var r=o.value;r.visible&&r.Lt(t,n,i,e)}return e},Ei.prototype.findObjectsIn=Ei.prototype.zk=function(t,n,i,e,o){void 0===n&&(n=null),void 0===i&&(i=null),void 0===e&&(e=!1),o instanceof f||o instanceof d||(o=new d(To)),ae(this);for(var r=this.bc.Hn;r.next();){var s=r.value;s.visible&&s.zk(t,n,i,e,o)}return o},Ei.prototype.jA=function(t,n,i,e,o,r){var s=new d(To);ae(this);for(var l=this.bc.Hn;l.next();){var a=l.value;a.visible&&a.jA(t,n,i,e,s,o,r)}return s},Ei.prototype.findObjectsNear=Ei.prototype.wn=function(t,n,i,e,o,r){void 0===i&&(i=null),void 0===e&&(e=null),void 0===o&&(o=!0),!1!==o&&!0!==o&&((o instanceof f||o instanceof d)&&(r=o),o=!0),r instanceof f||r instanceof d||(r=new d(To)),ae(this);for(var s=this.bc.Hn;s.next();){var l=s.value;l.visible&&l.wn(t,n,i,e,o,r)}return r},Ei.prototype.acceptEvent=function(t){var n=this.Uc;return this.Uc=this.Qb,this.Qb=n,Zi(this,this,t,n,t instanceof MouseEvent),n},Ei.prototype.CI=function(t){if(!this.Z.isEnabled)return!1;var n=this.Z.Qb;switch(Zi(this.Z,this.Z,t,n,!1),n.key=String.fromCharCode(t.which),n.Ol=!0,t.which){case 8:n.key="Backspace";break;case 33:n.key="PageUp";break;case 34:n.key="PageDown";break;case 35:n.key="End";break;case 36:n.key="Home";break;case 37:n.key="Left";break;case 38:n.key="Up";break;case 39:n.key="Right";break;case 40:n.key="Down";break;case 45:n.key="Insert";break;case 46:n.key="Del";break;case 48:n.key="0";break;case 187:case 61:case 107:n.key="Add";break;case 189:case 173:case 109:n.key="Subtract";break;case 27:n.key="Esc"}return this.Z.doKeyDown(),187!==t.which&&189!==t.which&&48!==t.which&&107!==t.which&&109!==t.which&&61!==t.which&&173!==t.which||!0!==t.ctrlKey?ne(n,t):(t.cancelBubble=!0,t.preventDefault(),t.stopPropagation(),!1)},Ei.prototype.DI=function(t){if(!this.Z.isEnabled)return!1;var n=this.Z.Qb;switch(Zi(this.Z,this.Z,t,n,!1),n.key=String.fromCharCode(t.which),n.up=!0,t.which){case 8:n.key="Backspace";break;case 33:n.key="PageUp";break;case 34:n.key="PageDown";break;case 35:n.key="End";break;case 36:n.key="Home";break;case 37:n.key="Left";break;case 38:n.key="Up";break;case 39:n.key="Right";break;case 40:n.key="Down";break;case 45:n.key="Insert";break;case 46:n.key="Del";break;case 93:t.preventDefault()}return this.Z.doKeyUp(),ne(n,t)},Ei.prototype.yr=function(t){var n=this.Fb;if(null===n)return new x(0,0);var i=this.Ib,e=this.Lb,n=n.getBoundingClientRect(),i=t.clientX-i/n.width*n.left;return t=t.clientY-e/n.height*n.top,null!==this.dd?(t=new x(i,t),k(t,this.dd),t):new x(i,t)},Ei.prototype.invalidateDocumentBounds=Ei.prototype.rc=function(){this.Vj||(this.Vj=!0,this.Le(!0))},Ei.prototype.redraw=Ei.prototype.Vx=function(){this.Sc||this.Xd||(this.na(),pe(this),ye(this),this.rc(),this.$f())},Ei.prototype.isUpdateRequested=function(){return this.Of},Ei.prototype.delayInitialization=function(t){void 0===t&&(t=null);var n=this.Oa,i=n.isEnabled;n.qi(),n.isEnabled=!1,se(this),this.fh=!1,n.isEnabled=i,null!==t&&Yh.setTimeout(t,1)},Ei.prototype.requestUpdate=Ei.prototype.Le=function(t){if(void 0===t&&(t=!1),!0!==this.Of&&!(this.Sc||!1===t&&this.Xd)){this.Of=!0;var n=this;requestAnimationFrame(function(){n.Of&&n.$f()})}},Ei.prototype.maybeUpdate=Ei.prototype.$f=function(){this.Ho&&!this.Of||(this.Ho&&(this.Ho=!1),se(this))},Yh.u(Ei,{Gn:null},function(){return this.fh}),Ei.prototype.yB=function(t,n){for(t.reset();t.next();){var i=t.value;!i.de()||i instanceof Ll||(i.$l()?(Do(i,1/0,1/0),i.ic()):n.add(i))}for(t.reset();t.next();)(i=t.value)instanceof Ll&&i.isVisible()&&he(this,i);for(t.reset();t.next();)(i=t.value)instanceof Js&&i.isVisible()&&(i.$l()?(Do(i,1/0,1/0),i.ic()):n.add(i));for(t.reset();t.next();)(i=t.value)instanceof Ds&&i.isVisible()&&(i.$l()?(Do(i,1/0,1/0),i.ic()):n.add(i))},Ei.prototype.Df=function(t,n,i,e){var o=this.Oa;if(this.hl||o.lf)for(o=0;o<n;o++)t[o].Df(i,e)},Ei.prototype.se=function(t,n){void 0===n&&(n=null),null===this.Mb&&Yh.k("No div specified");var i=this.Fb;null===i&&Yh.k("No canvas specified");var e=this.Oa;if(!e.pc&&(ve(this),"0"!==this.Mb.style.opacity)){var o=t!==this.rf,r=this.bc.n,s=r.length,l=this;if(this.Df(r,s,l),o)t.Ee(!0),ye(this);else if(!this.Be&&null===n&&!e.Wj)return;var s=this.ib,a=this.tb,h=Math.round(s.x*a)/a,u=Math.round(s.y*a)/a,e=this.dd;for(e.reset(),1!==a&&e.scale(a),0===s.x&&0===s.y||e.translate(-h,-u),a=this.Ad,Yh.En?(i.width=i.width,t.Ee(!0),t.scale(a,a)):(t.setTransform(1,0,0,1,0,0),t.scale(a,a),t.clearRect(0,0,this.Ib,this.Lb)),t.setTransform(1,0,0,1,0,0),t.scale(a,a),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),i=null!==n?function(i){var e=n;if(i.visible&&0!==i.wc){var o=i.zb.n,r=o.length;if(0!==r){1!==i.wc&&(t.globalAlpha=i.wc),i=i.kw,i.length=0;for(var s=l.scale,a=0;a<r;a++){var h=o[a];if(Ts(h)&&!e.contains(h)){if(h instanceof Js){var u=h;if(u.Zb&&i.push(u),!1===u.$g)continue}u=h.W,1<u.width*s||1<u.height*s?h.se(t,l):xs(h,t)}}t.globalAlpha=1}}}:function(n){n.se(t,l)},ce(this,t),s=r.length,h=0;h<s;h++)t.setTransform(1,0,0,1,0,0),t.scale(a,a),t.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy),i(r[h]);this.fl?this.fl.lm(this)&&this.wv():this.yr=function(){return new x(0,0)},o?(this.rf.Ee(!0),ye(this)):this.Be=this.hl=!1}},Ei.prototype.getRenderingHint=Ei.prototype.pj=function(t){return this.hk[t]},Ei.prototype.setRenderingHint=Ei.prototype.CJ=function(t,n){this.hk[t]=n,this.Vx()},Ei.prototype.resetRenderingHints=Ei.prototype.UF=function(){this.hk=new o,this.hk.drawShadows=!0,this.hk.textGreeking=!0,this.hk.viewportOptimizations=!Yh.mF,this.hk.temporaryPixelRatio=!0,this.hk.pictureRatioOptimization=!0},Ei.prototype.getInputOption=Ei.prototype.Vt=function(t){return this.Po[t]},Ei.prototype.setInputOption=function(t,n){this.Po[t]=n},Ei.prototype.resetInputOptions=Ei.prototype.TF=function(){this.Po=new o,this.Po.extraTouchArea=10,this.Po.extraTouchThreshold=10,this.Po.hasGestureZoom=!0},Ei.prototype.setProperties=function(t){Yh.Hu(this,t)},Ei.prototype.na=function(t){if(void 0===t&&(t=null),null===t)this.Be=!0,this.Le();else{var n=this.pb;null!==t&&t.I()&&n.Uf(t)&&(this.Be=!0,this.Le())}for(n=this.lw.i;n.next();)n.value.na(t)},Ei.prototype.fF=function(t,n){if(!0!==this.Be){this.Be=!0;var i=!0===this.pj("temporaryPixelRatio");if(!0===this.pj("viewportOptimizations")&&this.$A!==uc&&this.aG.jx(0,0,0,0)&&n.width===t.width&&n.height===t.height){var e=this.scale,o=Yh.Ff(),r=Math.max(t.x,n.x),s=Math.max(t.y,n.y),l=Math.min(t.x+t.width,n.x+n.width),a=Math.min(t.y+t.height,n.y+n.height);if(o.x=r,o.y=s,o.width=Math.max(0,l-r)*e,o.height=Math.max(0,a-s)*e,0<o.width&&0<o.height){if(!this.Xd&&(this.Of=!1,null!==this.Mb)){this.Xd=!0,de(this),this.qe.I()||Je(this,this.th());var h=this.Fb;if(null!==h){var u=this.Ad,s=this.Ib*u,l=this.Lb*u,r=this.scale*u,e=Math.round(Math.round(n.x*r)-Math.round(t.x*r)),r=Math.round(Math.round(n.y*r)-Math.round(t.y*r)),a=this.Uy,f=this.AC;a.width!==s&&(a.width=s),a.height!==l&&(a.height=l),f.clearRect(0,0,s,l);var a=190*this.Ad,c=70*this.Ad,d=Math.max(e,0),p=Math.max(r,0),y=Math.floor(s-d),v=Math.floor(l-p);f.iy(!1),f.drawImage(h.Hd,d,p,y,v,0,0,y,v),this.fl.lm(this)&&f.clearRect(0,0,a,c);var h=Yh.lb(),f=Yh.lb(),v=Math.abs(e),y=Math.abs(r),g=0===d?0:s-v,d=Yh.xb(g,0),v=Yh.xb(v+g,l);f.push(new P(Math.min(d.x,v.x),Math.min(d.y,v.y),Math.abs(d.x-v.x),Math.abs(d.y-v.y)));var m=this.dd;m.reset(),m.scale(u,u),1!==this.tb&&m.scale(this.tb),u=this.ib,(0!==u.x||0!==u.y)&&isFinite(u.x)&&isFinite(u.y)&&m.translate(-u.x,-u.y),k(d,m),k(v,m),h.push(new P(Math.min(d.x,v.x),Math.min(d.y,v.y),Math.abs(d.x-v.x),Math.abs(d.y-v.y))),g=0===p?0:l-y,d.m(0,g),v.m(s,y+g),f.push(new P(Math.min(d.x,v.x),Math.min(d.y,v.y),Math.abs(d.x-v.x),Math.abs(d.y-v.y))),k(d,m),k(v,m),h.push(new P(Math.min(d.x,v.x),Math.min(d.y,v.y),Math.abs(d.x-v.x),Math.abs(d.y-v.y))),this.fl.lm(this)&&(s=0<e?0:-e,l=0<r?0:-r,d.m(s,l),v.m(a+s,c+l),f.push(new P(Math.min(d.x,v.x),Math.min(d.y,v.y),Math.abs(d.x-v.x),Math.abs(d.y-v.y))),k(d,m),k(v,m),h.push(new P(Math.min(d.x,v.x),Math.min(d.y,v.y),Math.abs(d.x-v.x),Math.abs(d.y-v.y)))),Yh.v(d),Yh.v(v),re(this,!1),ue(this,h,f,e,r),Yh.wa(h),Yh.wa(f),this.Xd=!1}}}else this.$f();Yh.Db(o),i&&(this.kk=1,this.$f(),this.kk=null,this.Wx())}else i?(this.kk=1,this.$f(),this.kk=null,this.Wx()):this.$f()}},Ei.prototype.add=Ei.prototype.add=function(t){Yh.G(t,as,Ei,"add:part");var n=t.g;if(n!==this){null!==n&&Yh.k("Cannot add part "+t.toString()+" to "+this.toString()+". It is already a part of "+n.toString()),this.Eq&&(t.ml="Tool");var i=t.Yf,n=this.Kt(i);null===n&&(n=this.Kt("")),null===n&&Yh.k('Cannot add a Part when unable find a Layer named "'+i+'" and there is no default Layer'),t.layer!==n&&(i=n.Yp(99999999,t,t.g===this),0<=i&&this.Xc(mf,"parts",n,null,t,null,i),n.Kc||this.rc(),t.J(Ld),null!==(i=t.Gx)&&i(t,null,n))}},Ei.prototype.Yp=function(t){if(t instanceof As){if(this.fp.add(t),t instanceof Ll){var n=t.Pa;null===n?this.yl.add(t):n.cp.add(t),n=t.Sb,null!==n&&(n.g=this)}}else t instanceof Js?this.Zo.add(t):t instanceof Ds||this.zb.add(t);var i=this;hr(t,function(t){Le(i,t)}),(t instanceof Ds||t instanceof Ll&&null!==t.Kb)&&t.H(),n=t.data,null!==n&&(t instanceof Ds||(t instanceof Js?this.Kj.add(n,t):this.Bi.add(n,t)),hr(t,function(t){Ne(i,t)})),!0!==Wo(t)&&!0!==ks(t)||this.tg.add(t),bs(t,!0,this),Ls(t)?(t.W.I()&&this.na(ps(t,t.W)),this.rc()):t.isVisible()&&t.W.I()&&this.na(ps(t,t.W)),this.Le()},Ei.prototype.kf=function(t){if(t.Bt(),t instanceof As){if(this.fp.remove(t),t instanceof Ll){var n=t.Pa;null===n?this.yl.remove(t):n.cp.remove(t),n=t.Sb,null!==n&&(n.g=null)}}else t instanceof Js?this.Zo.remove(t):t instanceof Ds||this.zb.remove(t);var i=this;hr(t,function(t){Ae(i,t)}),n=t.data,null!==n&&(t instanceof Ds||(t instanceof Js?this.Kj.remove(n):this.Bi.remove(n)),hr(t,function(t){je(i,t)})),this.tg.remove(t),Ls(t)?(t.W.I()&&this.na(ps(t,t.W)),this.rc()):t.isVisible()&&t.W.I()&&this.na(ps(t,t.W)),this.Le()},Ei.prototype.remove=Ei.prototype.remove=function(t){Yh.G(t,as,Ei,"remove:part"),be(this,t,!0)},Ei.prototype.removeParts=Ei.prototype.XA=function(t,n){if(Yh.isArray(t))for(var i=Yh.Za(t),e=0;e<i;e++){var o=Yh.Da(t,e);n&&!o.canDelete()||this.remove(o)}else for(o=new d(as),o.Hc(t),i=o.i;i.next();)o=i.value,n&&!o.canDelete()||this.remove(o)},Ei.prototype.copyParts=Ei.prototype.Lp=function(t,n,i){return this.ob.Lp(t,n,i)},Ei.prototype.moveParts=Ei.prototype.moveParts=function(t,n,i){Yh.G(n,x,Ei,"moveParts:offset");var e=this.bb;if(null!==e){e=e.re,null===e&&(e=new yn,e.Qc(this));var o=new b(as);if(null!==t)t=t.i;else{for(t=this.Jk;t.next();)mn(e,o,t.value,i);for(t=this.fg;t.next();)mn(e,o,t.value,i);t=this.links}for(;t.next();)mn(e,o,t.value,i);e.moveParts(o,n,i)}},Ei.prototype.addLayer=Ei.prototype.tt=function(t){xe(this,t,null),t.Qc(this);var n=this.bc,i=n.count-1;if(!t.Kc)for(;0<=i&&n.ea(i).Kc;)i--;n.Md(i+1,t),null!==this.ke&&this.Xc(mf,"layers",this,null,t,null,i+1),this.na(),this.rc()},Ei.prototype.addLayerBefore=Ei.prototype.cH=function(t,n){xe(this,t,n),t.Qc(this);var i=this.bc,e=i.indexOf(t);0<=e&&(i.remove(t),null!==this.ke&&this.Xc(bf,"layers",this,t,null,e,null));for(var o=i.count,r=0;r<o;r++)if(i.ea(r)===n){i.Md(r,t);break}null!==this.ke&&this.Xc(mf,"layers",this,null,t,null,r),this.na(),0>e&&this.rc()},Ei.prototype.addLayerAfter=function(t,n){xe(this,t,n),t.Qc(this);var i=this.bc,e=i.indexOf(t);0<=e&&(i.remove(t),null!==this.ke&&this.Xc(bf,"layers",this,t,null,e,null));for(var o=i.count,r=0;r<o;r++)if(i.ea(r)===n){i.Md(r+1,t);break}null!==this.ke&&this.Xc(mf,"layers",this,null,t,null,r+1),this.na(),0>e&&this.rc()},Ei.prototype.removeLayer=function(t){if(Yh.G(t,Oi,Ei,"removeLayer:layer"),t.g!==this&&Yh.k("Cannot remove a Layer from another Diagram: "+t+" of "+t.g),""!==t.name){var n=this.bc,i=n.indexOf(t);if(n.remove(t)){for(n=t.zb.copy().i;n.next();){var e=n.value,o=e.Yf;e.Yf=o!==t.name?o:""}null!==this.ke&&this.Xc(bf,"layers",this,t,null,i,null),this.na(),this.rc()}}},Ei.prototype.findLayer=Ei.prototype.Kt=function(t){for(var n=this.Hx;n.next();){var i=n.value;if(i.name===t)return i}return null},Ei.prototype.addModelChangedListener=Ei.prototype.eH=function(t){Yh.j(t,"function",Ei,"addModelChangedListener:listener"),null===this.hh&&(this.hh=new f("function")),this.hh.add(t),this.ba.fn(t)},Ei.prototype.removeModelChangedListener=function(t){Yh.j(t,"function",Ei,"removeModelChangedListener:listener"),null!==this.hh&&(this.hh.remove(t),0===this.hh.count&&(this.hh=null)),this.ba.zu(t)},Ei.prototype.addChangedListener=Ei.prototype.fn=function(t){Yh.j(t,"function",Ei,"addChangedListener:listener"),null===this.wi&&(this.wi=new f("function")),this.wi.add(t)},Ei.prototype.removeChangedListener=Ei.prototype.zu=function(t){Yh.j(t,"function",Ei,"removeChangedListener:listener"),null!==this.wi&&(this.wi.remove(t),0===this.wi.count&&(this.wi=null))},Ei.prototype.Vw=function(t){if(this.wb||this.oa.aF(t),t.yc!==vf&&(this.oi=!0),null!==this.wi){var n=this.wi,i=n.length;if(1===i)(n=n.ea(0))(t);else if(0!==i)for(var e=n.fc(),o=0;o<i;o++)(n=e[o])(t)}},Ei.prototype.raiseChangedEvent=Ei.prototype.Xc=function(t,n,i,e,o,r,s){void 0===r&&(r=null),void 0===s&&(s=null);var l=new At;l.g=this,l.yc=t,l.propertyName=n,l.object=i,l.oldValue=e,l.Aj=r,l.newValue=o,l.zj=s,this.Vw(l)},Ei.prototype.raiseChanged=Ei.prototype.h=function(t,n,i,e,o){this.Xc(gf,t,this,n,i,e,o)},Yh.u(Ei,{Oa:"animationManager"},function(){return this.OB}),Yh.u(Ei,{oa:"undoManager"},function(){return this.ke.oa}),Yh.defineProperty(Ei,{wb:"skipsUndoManager"},function(){return this.cj},function(t){Yh.j(t,"boolean",Ei,"skipsUndoManager"),this.cj=t,this.ke.cj=t}),Yh.defineProperty(Ei,{dA:"delaysLayout"},function(){return this.Py},function(t){this.Py=t}),Ei.prototype.nn=function(t,n){if(null!==t&&t.g===this){var i=this.Ne;try{this.Ne=!0;var e,o=t.yc;if(o===gf){var r=t.object,s=t.propertyName,l=t.ja(n);if(Yh.La(r,s,l),r instanceof To){var a,h=r.U;null!==h&&h.ce()}this.oi=!0}else if(o===mf){var u=t.object,f=t.zj,r=t.newValue;if(u instanceof tr){if("number"==typeof f&&r instanceof To){a=r;var c=u;n?c.kf(f):c.Md(f,a),h=u.U,null!==h&&h.ce()}else if("number"==typeof f&&r instanceof Tr){var d=r,c=u;n?d.ve?c.SF(f):c.PF(f):(e=d.ve?c.be(d.index):c.ae(d.index),e.Kp(d))}}else if(u instanceof Oi){var p=!0===t.Aj;if("number"==typeof f&&r instanceof as){var h=r,y=u;n?(h.gb=!1,h.Ng=!1,h.ce(),y.kf(p?f:-1,h,p)):y.Yp(f,h,p)}}else if(u instanceof Ei){if("number"==typeof f&&r instanceof Oi){var v=r;n?this.bc.Yc(f):(o=v,o.Qc(this),this.bc.Md(f,o))}}else Yh.k("unknown ChangedEvent.Insert object: "+t.toString());this.oi=!0}else o===bf?(u=t.object,f=t.Aj,r=t.oldValue,u instanceof tr?"number"==typeof f&&r instanceof To?(c=u,n?c.Md(f,r):c.kf(f)):"number"==typeof f&&r instanceof Tr&&(d=r,c=u,n?(e=d.ve?c.be(d.index):c.ae(d.index),e.Kp(d)):d.ve?c.SF(f):c.PF(f)):u instanceof Oi?(p=!0===t.zj,"number"==typeof f&&r instanceof as&&(h=r,y=u,n?y.Yp(f,h,p):(h.gb=!1,h.Ng=!1,h.ce(),y.kf(p?f:-1,h,p)))):u instanceof Ei?"number"==typeof f&&r instanceof Oi&&(v=r,n?(o=v,o.Qc(this),this.bc.Md(f,o)):this.bc.Yc(f)):Yh.k("unknown ChangedEvent.Remove object: "+t.toString()),this.oi=!0):o!==vf&&Yh.k("unknown ChangedEvent: "+t.toString())}finally{this.Ne=i}}},Ei.prototype.startTransaction=Ei.prototype.Ub=function(t){return this.oa.Ub(t)},Ei.prototype.commitTransaction=Ei.prototype.Gd=function(t){return this.oa.Gd(t)},Ei.prototype.rollbackTransaction=Ei.prototype.mq=function(){return this.oa.mq()},Ei.prototype.updateAllTargetBindings=Ei.prototype.yG=function(t){void 0===t&&(t="");for(var n=this.Jk;n.next();)n.value.Hb(t);for(n=this.fg;n.next();)n.value.Hb(t);for(n=this.links;n.next();)n.value.Hb(t)},Ei.prototype.updateAllRelationshipsFromData=Ei.prototype.UJ=function(){for(var t=this.ba,n=new d,i=t.eg,e=0;e<i.length;e++){var o=i[e];n.add(o)}var r=[];for(this.fg.each(function(t){null===t.data||n.contains(t.data)||r.push(t.data)}),this.Jk.each(function(t){null===t.data||n.contains(t.data)||r.push(t.data)}),r.forEach(function(n){Yt(t,n,!1)}),e=0;e<i.length;e++){var o=i[e],s=this.wh(o);null===s&&Jt(t,o,!1)}if(t instanceof Zt){for(var l=new d,i=t.Og,e=0;e<i.length;e++)o=i[e],l.add(o);var a=[];for(this.links.each(function(t){null===t.data||l.contains(t.data)||a.push(t.data)}),a.forEach(function(n){tn(t,n,!1)}),e=0;e<i.length;e++)o=i[e],null===(s=this.Sf(o))&&_t(t,o,!1)}for(e=this.Jk;e.next();)s=e.value,s.updateRelationshipsFromData();for(e=this.fg;e.next();)e.value.updateRelationshipsFromData();for(e=this.links;e.next();)s=e.value,s.updateRelationshipsFromData()},Ei.prototype.wu=function(t,n,i,e,o){t.L(n)||(void 0===o&&(o=!1),o||pe(this),ye(this),e=this.Sb,null===e||!e.Dx||this.Gl!==tc||o||t.width===n.width&&t.height===n.height||e.J(),e=this.$a,!0===this.Cm&&e instanceof vi&&(this.R.da=this.vB(this.R.cf),gi(e,this)),this.Sc||this.fF(t,n),ke(this),this.oh.scale=i,this.oh.position.x=t.x,this.oh.position.y=t.y,this.oh.bounds.set(t),this.oh.isScroll=o,this.Aa("ViewportBoundsChanged",this.oh,t),this.BA&&this.links.each(function(t){t.Xl&&t.W.Uf(n)&&t.Yb()}))},Ei.prototype.clearSelection=Ei.prototype.Ww=function(){var t=0<this.selection.count;t&&this.Aa("ChangingSelection"),Me(this),t&&this.Aa("ChangedSelection")},Ei.prototype.select=Ei.prototype.select=function(t){null!==t&&(Yh.G(t,as,Ei,"select:part"),t.layer.g===this&&(!t.gb||1<this.selection.count)&&(this.Aa("ChangingSelection"),Me(this),t.gb=!0,this.Aa("ChangedSelection")))},Ei.prototype.selectCollection=Ei.prototype.dG=function(t){if(this.Aa("ChangingSelection"),Me(this),Yh.isArray(t))for(var n=Yh.Za(t),i=0;i<n;i++){var e=Yh.Da(t,i);e instanceof as||Yh.k("Diagram.selectCollection given something that is not a Part: "+e),e.gb=!0}else for(t=t.i;t.next();)e=t.value,e instanceof as||Yh.k("Diagram.selectCollection given something that is not a Part: "+e),e.gb=!0;this.Aa("ChangedSelection")},Ei.prototype.clearHighlighteds=Ei.prototype.nH=function(){var t=this.Wl;if(0<t.count){for(var n=t.fc(),i=n.length,e=0;e<i;e++)n[e].Ng=!1;t.Ra(),t.clear(),t.freeze()}},Ei.prototype.highlight=function(t){null!==t&&t.layer.g===this&&(Yh.G(t,as,Ei,"highlight:part"),!t.Ng||1<this.Wl.count)&&(this.nH(),t.Ng=!0)},Ei.prototype.highlightCollection=function(t){for(var n=new d(as).Hc(t),i=this.Wl.copy().Yx(n).i;i.next();)t=i.value,t.Ng=!1;for(n=n.i;n.next();)t=n.value,t instanceof as||Yh.k("Diagram.highlightCollection given something that is not a Part: "+t),t.Ng=!0},Ei.prototype.scroll=Ei.prototype.scroll=function(t,n,i){void 0===i&&(i=1);var e="up"===n||"down"===n,o=0;if("pixel"===t)o=i;else if("line"===t)o=i*(e?this.Fu:this.Eu);else if("page"===t)t=e?this.pb.height:this.pb.width,0!==(t*=this.scale)&&(o=Math.max(t-(e?this.Fu:this.Eu),0),o*=i);else{if("document"===t)return o=this.qe,e=this.pb,i=Yh.K(),"up"===n?this.position=i.m(e.x,o.y):"left"===n?this.position=i.m(o.x,e.y):"down"===n?this.position=i.m(e.x,o.bottom-e.height):"right"===n&&(this.position=i.m(o.right-e.width,e.y)),void Yh.v(i);Yh.k("scrolling unit must be 'pixel', 'line', 'page', or 'document', not: "+t)}o/=this.scale,i=this.position.copy(),"up"===n?i.y=this.position.y-o:"down"===n?i.y=this.position.y+o:"left"===n?i.x=this.position.x-o:"right"===n?i.x=this.position.x+o:Yh.k("scrolling direction must be 'up', 'down', 'left', or 'right', not: "+n),this.position=i},Ei.prototype.scrollToRect=Ei.prototype.xJ=function(t){var n=this.pb;n.wk(t)||(t=t.Hl,t.x-=n.width/2,t.y-=n.height/2,this.position=t)},Ei.prototype.centerRect=Ei.prototype.mH=function(t){var n=this.pb;t=t.Hl,t.x-=n.width/2,t.y-=n.height/2,this.position=t},Ei.prototype.transformDocToView=Ei.prototype.vG=function(t){var n=this.dd;n.reset(),1!==this.tb&&n.scale(this.tb);var i=this.ib;return(0!==i.x||0!==i.y)&&isFinite(i.x)&&isFinite(i.y)&&n.translate(-i.x,-i.y),t.copy().transform(this.dd)},Ei.prototype.transformViewToDoc=Ei.prototype.vB=function(t){var n=this.dd;n.reset(),1!==this.tb&&n.scale(this.tb);var i=this.ib;return(0!==i.x||0!==i.y)&&isFinite(i.x)&&isFinite(i.y)&&n.translate(-i.x,-i.y),k(t.copy(),this.dd)};var tc;Ei.None=tc=Yh.p(Ei,"None",0);var nc;Ei.Uniform=nc=Yh.p(Ei,"Uniform",1);var ic;Ei.UniformToFill=ic=Yh.p(Ei,"UniformToFill",2);var ec;Ei.CycleAll=ec=Yh.p(Ei,"CycleAll",10);var oc;Ei.CycleNotDirected=oc=Yh.p(Ei,"CycleNotDirected",11);var rc;Ei.CycleNotDirectedFast=rc=Yh.p(Ei,"CycleNotDirectedFast",12);var sc;Ei.CycleNotUndirected=sc=Yh.p(Ei,"CycleNotUndirected",13);var lc;Ei.CycleDestinationTree=lc=Yh.p(Ei,"CycleDestinationTree",14);var ac;Ei.CycleSourceTree=ac=Yh.p(Ei,"CycleSourceTree",15);var hc;Ei.DocumentScroll=hc=Yh.p(Ei,"DocumentScroll",1);var uc;Ei.InfiniteScroll=uc=Yh.p(Ei,"InfiniteScroll",2);var fc;Ei.TreeParentCollapsed=fc=Yh.p(Ei,"TreeParentCollapsed",21);var cc;Ei.AllParentsCollapsed=cc=Yh.p(Ei,"AllParentsCollapsed",22);var dc;Ei.AnyParentsCollapsed=dc=Yh.p(Ei,"AnyParentsCollapsed",23),Yh.defineProperty(Ei,{VJ:"validCycle"},function(){return this.Jw},function(t){var n=this.Jw;n!==t&&(Yh.mb(t,Ei,Ei,"validCycle"),this.Jw=t,this.h("validCycle",n,t))}),Yh.u(Ei,{Hx:"layers"},function(){return this.bc.i}),Yh.defineProperty(Ei,{zf:"isModelReadOnly"},function(){var t=this.ke;return null!==t&&t.fb},function(t){var n=this.ke;null!==n&&(n.fb=t)}),Yh.defineProperty(Ei,{fb:"isReadOnly"},function(){return this.Ki},function(t){var n=this.Ki;n!==t&&(Yh.j(t,"boolean",Ei,"isReadOnly"),this.Ki=t,this.h("isReadOnly",n,t))}),Yh.defineProperty(Ei,{isEnabled:"isEnabled"},function(){return this.df},function(t){var n=this.df;n!==t&&(Yh.j(t,"boolean",Ei,"isEnabled"),this.df=t,this.h("isEnabled",n,t))}),Yh.defineProperty(Ei,{Qz:"allowClipboard"},function(){return this.Vu},function(t){var n=this.Vu;n!==t&&(Yh.j(t,"boolean",Ei,"allowClipboard"),this.Vu=t,this.h("allowClipboard",n,t))}),Yh.defineProperty(Ei,{tk:"allowCopy"},function(){return this.Mk},function(t){var n=this.Mk;n!==t&&(Yh.j(t,"boolean",Ei,"allowCopy"),this.Mk=t,this.h("allowCopy",n,t))}),Yh.defineProperty(Ei,{gn:"allowDelete"},function(){return this.Nk},function(t){var n=this.Nk;n!==t&&(Yh.j(t,"boolean",Ei,"allowDelete"),this.Nk=t,this.h("allowDelete",n,t))}),Yh.defineProperty(Ei,{yt:"allowDragOut"},function(){return this.Wu},function(t){var n=this.Wu;n!==t&&(Yh.j(t,"boolean",Ei,"allowDragOut"),this.Wu=t,this.h("allowDragOut",n,t))}),Yh.defineProperty(Ei,{hE:"allowDrop"},function(){return this.Xu},function(t){var n=this.Xu;n!==t&&(Yh.j(t,"boolean",Ei,"allowDrop"),this.Xu=t,this.h("allowDrop",n,t))}),Yh.defineProperty(Ei,{Sw:"allowTextEdit"},function(){return this.Wk},function(t){var n=this.Wk;n!==t&&(Yh.j(t,"boolean",Ei,"allowTextEdit"),this.Wk=t,this.h("allowTextEdit",n,t))}),Yh.defineProperty(Ei,{Pw:"allowGroup"},function(){return this.Ok},function(t){var n=this.Ok;n!==t&&(Yh.j(t,"boolean",Ei,"allowGroup"),this.Ok=t,this.h("allowGroup",n,t))}),Yh.defineProperty(Ei,{Tw:"allowUngroup"},function(){return this.Xk},function(t){var n=this.Xk;n!==t&&(Yh.j(t,"boolean",Ei,"allowUngroup"),this.Xk=t,this.h("allowUngroup",n,t))}),Yh.defineProperty(Ei,{Ep:"allowInsert"},function(){return this.Zu},function(t){var n=this.Zu;n!==t&&(Yh.j(t,"boolean",Ei,"allowInsert"),this.Zu=t,this.h("allowInsert",n,t))}),Yh.defineProperty(Ei,{zt:"allowLink"},function(){return this.Pk},function(t){var n=this.Pk;n!==t&&(Yh.j(t,"boolean",Ei,"allowLink"),this.Pk=t,this.h("allowLink",n,t))}),Yh.defineProperty(Ei,{hn:"allowRelink"},function(){return this.Rk},function(t){var n=this.Rk;n!==t&&(Yh.j(t,"boolean",Ei,"allowRelink"),this.Rk=t,this.h("allowRelink",n,t))}),Yh.defineProperty(Ei,{El:"allowMove"},function(){return this.Qk},function(t){var n=this.Qk;n!==t&&(Yh.j(t,"boolean",Ei,"allowMove"),this.Qk=t,this.h("allowMove",n,t))}),Yh.defineProperty(Ei,{Qw:"allowReshape"},function(){return this.Sk},function(t){var n=this.Sk;n!==t&&(Yh.j(t,"boolean",Ei,"allowReshape"),this.Sk=t,this.h("allowReshape",n,t))}),Yh.defineProperty(Ei,{At:"allowResize"},function(){return this.Tk},function(t){var n=this.Tk;n!==t&&(Yh.j(t,"boolean",Ei,"allowResize"),this.Tk=t,this.h("allowResize",n,t))}),Yh.defineProperty(Ei,{Rw:"allowRotate"},function(){return this.Uk},function(t){var n=this.Uk;n!==t&&(Yh.j(t,"boolean",Ei,"allowRotate"),this.Uk=t,this.h("allowRotate",n,t))}),Yh.defineProperty(Ei,{vf:"allowSelect"},function(){return this.Vk},function(t){var n=this.Vk;n!==t&&(Yh.j(t,"boolean",Ei,"allowSelect"),this.Vk=t,this.h("allowSelect",n,t))}),Yh.defineProperty(Ei,{iE:"allowUndo"},function(){return this.$u},function(t){var n=this.$u;n!==t&&(Yh.j(t,"boolean",Ei,"allowUndo"),this.$u=t,this.h("allowUndo",n,t))}),Yh.defineProperty(Ei,{Uw:"allowZoom"},function(){return this.bv},function(t){var n=this.bv;n!==t&&(Yh.j(t,"boolean",Ei,"allowZoom"),this.bv=t,this.h("allowZoom",n,t))}),Yh.defineProperty(Ei,{tA:"hasVerticalScrollbar"},function(){return this.Gv},function(t){var n=this.Gv;n!==t&&(Yh.j(t,"boolean",Ei,"hasVerticalScrollbar"),this.Gv=t,pe(this),this.na(),this.h("hasVerticalScrollbar",n,t),Wi(this,!1))}),Yh.defineProperty(Ei,{sA:"hasHorizontalScrollbar"},function(){return this.Fv},function(t){var n=this.Fv;n!==t&&(Yh.j(t,"boolean",Ei,"hasHorizontalScrollbar"),this.Fv=t,pe(this),this.na(),this.h("hasHorizontalScrollbar",n,t),Wi(this,!1))}),Yh.defineProperty(Ei,{me:"allowHorizontalScroll"},function(){return this.Yu},function(t){var n=this.Yu;n!==t&&(Yh.j(t,"boolean",Ei,"allowHorizontalScroll"),this.Yu=t,this.h("allowHorizontalScroll",n,t),Wi(this,!1))}),Yh.defineProperty(Ei,{ne:"allowVerticalScroll"},function(){return this.av},function(t){var n=this.av;n!==t&&(Yh.j(t,"boolean",Ei,"allowVerticalScroll"),this.av=t,this.h("allowVerticalScroll",n,t),Wi(this,!1))}),Yh.defineProperty(Ei,{Eu:"scrollHorizontalLineChange"},function(){return this.tw},function(t){var n=this.tw;n!==t&&(Yh.j(t,"number",Ei,"scrollHorizontalLineChange"),0>t&&Yh.Ea(t,">= 0",Ei,"scrollHorizontalLineChange"),this.tw=t,this.h("scrollHorizontalLineChange",n,t))}),Yh.defineProperty(Ei,{Fu:"scrollVerticalLineChange"},function(){return this.xw},function(t){var n=this.xw;n!==t&&(Yh.j(t,"number",Ei,"scrollVerticalLineChange"),0>t&&Yh.Ea(t,">= 0",Ei,"scrollVerticalLineChange"),this.xw=t,this.h("scrollVerticalLineChange",n,t))}),Yh.defineProperty(Ei,{R:"lastInput"},function(){return this.Qb},function(t){this.Qb=t}),Yh.defineProperty(Ei,{zc:"firstInput"},function(){return this.Ii},function(t){this.Ii=t}),Yh.defineProperty(Ei,{dc:"currentCursor"},function(){return this.mv},function(t){""===t&&(t=this.ir);var n=this.mv;if(n!==t){Yh.j(t,"string",Ei,"currentCursor");var i=this.Fb,e=this.Mb;null!==i&&(this.mv=t,i.style.cursor=t,e.style.cursor=t,i.style.cursor===n&&(i.style.cursor="-webkit-"+t,e.style.cursor="-webkit-"+t,i.style.cursor===n&&(i.style.cursor="-moz-"+t,e.style.cursor="-moz-"+t,i.style.cursor===n&&(i.style.cursor=t,e.style.cursor=t))))}}),Yh.defineProperty(Ei,{HK:"defaultCursor"},function(){return this.ir},function(t){""===t&&(t="auto");var n=this.ir;n!==t&&(Yh.j(t,"string",Ei,"defaultCursor"),this.ir=t,this.h("defaultCursor",n,t))}),Yh.defineProperty(Ei,{click:"click"},function(){return this.xi},function(t){var n=this.xi;n!==t&&(null!==t&&Yh.j(t,"function",Ei,"click"),this.xi=t,this.h("click",n,t))}),Yh.defineProperty(Ei,{Gt:"doubleClick"},function(){return this.Fi},function(t){var n=this.Fi;n!==t&&(null!==t&&Yh.j(t,"function",Ei,"doubleClick"),this.Fi=t,this.h("doubleClick",n,t))}),Yh.defineProperty(Ei,{Yz:"contextClick"},function(){return this.zi},function(t){var n=this.zi;n!==t&&(null!==t&&Yh.j(t,"function",Ei,"contextClick"),this.zi=t,this.h("contextClick",n,t))}),Yh.defineProperty(Ei,{NA:"mouseOver"},function(){return this.Vi},function(t){var n=this.Vi;n!==t&&(null!==t&&Yh.j(t,"function",Ei,"mouseOver"),this.Vi=t,this.h("mouseOver",n,t))}),Yh.defineProperty(Ei,{MA:"mouseHover"},function(){return this.Ui},function(t){var n=this.Ui;n!==t&&(null!==t&&Yh.j(t,"function",Ei,"mouseHover"),this.Ui=t,this.h("mouseHover",n,t))}),Yh.defineProperty(Ei,{LA:"mouseHold"},function(){return this.Ti},function(t){var n=this.Ti;n!==t&&(null!==t&&Yh.j(t,"function",Ei,"mouseHold"),this.Ti=t,this.h("mouseHold",n,t))}),Yh.defineProperty(Ei,{$I:"mouseDragOver"},function(){return this.ew},function(t){var n=this.ew;n!==t&&(null!==t&&Yh.j(t,"function",Ei,"mouseDragOver"),this.ew=t,this.h("mouseDragOver",n,t))}),Yh.defineProperty(Ei,{KA:"mouseDrop"},function(){return this.Si},function(t){var n=this.Si;n!==t&&(null!==t&&Yh.j(t,"function",Ei,"mouseDrop"),this.Si=t,this.h("mouseDrop",n,t))}),Yh.defineProperty(Ei,{rB:"toolTip"},function(){return this.dj},function(t){var n=this.dj;n!==t&&(this.dj=t,this.h("toolTip",n,t))}),Yh.defineProperty(Ei,{contextMenu:"contextMenu"},function(){return this.Ai},function(t){var n=this.Ai;n!==t&&(this.Ai=t,this.h("contextMenu",n,t))}),Yh.defineProperty(Ei,{ob:"commandHandler"},function(){return this.Iy},function(t){var n=this.Iy;n!==t&&(Yh.G(t,hn,Ei,"commandHandler"),null!==t.g&&Yh.k("Cannot share CommandHandlers between Diagrams: "+t.toString()),null!==n&&n.Qc(null),this.Iy=t,t.Qc(this))}),Yh.defineProperty(Ei,{bb:"toolManager"},function(){return this.Iz},function(t){var n=this.Iz;n!==t&&(Yh.G(t,vi,Ei,"toolManager"),null!==t.g&&Yh.k("Cannot share ToolManagers between Diagrams: "+t.toString()),null!==n&&n.Qc(null),this.Iz=t,t.Qc(this))}),Yh.defineProperty(Ei,{Et:"defaultTool"},function(){return this.Oy},function(t){var n=this.Oy;n!==t&&(Yh.G(t,dn,Ei,"defaultTool"),this.Oy=t,this.$a===n&&(this.$a=t))}),Yh.defineProperty(Ei,{$a:"currentTool"},function(){return this.Ly},function(t){var n=this.Ly;null!==n&&(n.sa&&n.doDeactivate(),n.cancelWaitAfter(),n.doStop()),null===t&&(t=this.Et),null!==t&&(Yh.G(t,dn,Ei,"currentTool"),this.Ly=t,t.Qc(this),t.doStart())}),Yh.u(Ei,{selection:"selection"},function(){return this.zw}),Yh.defineProperty(Ei,{RI:"maxSelectionCount"},function(){return this.aw},function(t){var n=this.aw;if(n!==t)if(Yh.j(t,"number",Ei,"maxSelectionCount"),0<=t&&!isNaN(t)){if(this.aw=t,this.h("maxSelectionCount",n,t),!this.oa.hb&&0<(t=this.selection.count-t)){this.Aa("ChangingSelection");for(var n=this.selection.fc(),i=0;i<t;i++)n[i].gb=!1;this.Aa("ChangedSelection")}}else Yh.Ea(t,">= 0",Ei,"maxSelectionCount")}),Yh.defineProperty(Ei,{cJ:"nodeSelectionAdornmentTemplate"},function(){return this.fw},function(t){var n=this.fw;n!==t&&(Yh.G(t,Ds,Ei,"nodeSelectionAdornmentTemplate"),this.fw=t,this.h("nodeSelectionAdornmentTemplate",n,t))}),Yh.defineProperty(Ei,{fI:"groupSelectionAdornmentTemplate"},function(){return this.Dv},function(t){var n=this.Dv;n!==t&&(Yh.G(t,Ds,Ei,"groupSelectionAdornmentTemplate"),this.Dv=t,this.h("groupSelectionAdornmentTemplate",n,t))}),Yh.defineProperty(Ei,{KI:"linkSelectionAdornmentTemplate"},function(){return this.Wv},function(t){var n=this.Wv;n!==t&&(Yh.G(t,Ds,Ei,"linkSelectionAdornmentTemplate"),this.Wv=t,this.h("linkSelectionAdornmentTemplate",n,t))}),Yh.u(Ei,{Wl:"highlighteds"},function(){return this.Hv}),Yh.defineProperty(Ei,{oi:"isModified"},function(){var t=this.oa;return t.isEnabled?null!==t.lj||this.Ov&&this.eh!==t.qj:this.Ov},function(t){if(this.Ov!==t){Yh.j(t,"boolean",Ei,"isModified"),this.Ov=t;var n=this.oa;!t&&n.isEnabled&&(this.eh=n.qj),t||Pe(this)}}),Yh.defineProperty(Ei,{ba:"model"},function(){return this.ke},function(t){var n=this.ke;if(n!==t){Yh.G(t,Ft,Ei,"model"),this.$a.doCancel(),null!==n&&n.oa!==t.oa&&n.oa.nF&&Yh.k("Do not replace a Diagram.model while a transaction is in progress."),this.Oa.qi(),this.Ww(),this.fh=!1,this.Ho=!0,this.eh=-2,this.Of=!1;var i=this.Xd;this.Xd=!0,this.Oa.Tn("Model"),null!==n&&(null!==this.hh&&this.hh.each(function(t){n.zu(t)}),n.zu(this.dD),n instanceof Zt&&Ve(this,n.Og),Ve(this,n.eg)),this.ke=t,t.fn(this.cD),Oe(this,t.eg),t instanceof Zt&&Ie(this,t.Og),t.zu(this.cD),t.fn(this.dD),null!==this.hh&&this.hh.each(function(n){t.fn(n)}),this.Xd=i,this.Sc||this.na(),null!==n&&(t.oa.isEnabled=n.oa.isEnabled)}}),Yh.defineProperty(Ei,{Ua:null},function(){return this.VC},function(t){this.VC=t}),Yh.u(Ei,{Kx:null},function(){return this.KG}),Yh.defineProperty(Ei,{Ne:"skipsModelSourceBindings"},function(){return this.yD},function(t){this.yD=t}),Yh.defineProperty(Ei,{Lu:null},function(){return this.Dz},function(t){this.Dz=t}),Ei.prototype.rebuildParts=Ei.prototype.cm=function(){for(var t=this.QA.i;t.next();){var n=t.value,i=t.key;(!n.de()||n instanceof Ll)&&Yh.k('Invalid node template in Diagram.nodeTemplateMap: template for "'+i+'" must be a Node or a simple Part, not a Group or Link: '+n)}for(t=this.rA.i;t.next();)n=t.value,i=t.key,n instanceof Ll||Yh.k('Invalid group template in Diagram.groupTemplateMap: template for "'+i+'" must be a Group, not a normal Node or Link: '+n);for(t=this.DA.i;t.next();)n=t.value,i=t.key,n instanceof Js||Yh.k('Invalid link template in Diagram.linkTemplateMap: template for "'+i+'" must be a Link, not a normal Node or simple Part: '+n);for(t=Yh.lb(),n=this.selection.i;n.next();)(i=n.value.data)&&t.push(i);for(var n=Yh.lb(),e=this.Wl.i;e.next();)(i=e.value.data)&&n.push(i);for(i=Yh.lb(),e=this.fg.i;e.next();){var o=e.value;null!==o.data&&(i.push(o.data),i.push(o.location))}for(e=this.links.i;e.next();)o=e.value,null!==o.data&&(i.push(o.data),i.push(o.location));for(e=this.Jk.i;e.next();)o=e.value,null!==o.data&&(i.push(o.data),i.push(o.location));for(e=this.ba,e instanceof Zt&&Ve(this,e.Og),Ve(this,e.eg),Oe(this,e.eg),e instanceof Zt&&Ie(this,e.Og),e=0;e<t.length;e++)null!==(o=this.wh(t[e]))&&(o.gb=!0);for(e=0;e<n.length;e++)null!==(o=this.wh(n[e]))&&(o.Ng=!0);for(e=0;e<i.length;e+=2)null!==(o=this.wh(i[e]))&&(o.location=i[e+1]);Yh.wa(t),Yh.wa(n),Yh.wa(i)},Ei.prototype.nA=function(t){return this.ba.nA(t)};var pc=!1,yc=!1;Ei.prototype.qx=function(t){var n=this.ba,i="";return n instanceof Zt?i=n.qx(t):n instanceof en&&(i=n.$H(t)),i};var vc=!1;Ei.prototype.findPartForKey=Ei.prototype.SH=function(t){if(null===t||void 0===t)return null;var n=this.ba.te(t);return null!==n?this.Bi.ja(n):this.ba instanceof Zt&&null!==(n=this.ba.Sp(t))?this.Kj.ja(n):null},Ei.prototype.findNodeForKey=Ei.prototype.Ie=function(t){return null===t||void 0===t?null:null===(t=this.ba.te(t))?null:(t=this.Bi.ja(t),t instanceof As?t:null)},Ei.prototype.findPartForData=Ei.prototype.wh=function(t){if(null===t)return null;var n=this.Bi.ja(t);return null!==n?n:n=this.Kj.ja(t)},Ei.prototype.findNodeForData=Ei.prototype.nx=function(t){return null===t?null:(t=this.Bi.ja(t),t instanceof As?t:null)},Ei.prototype.findLinkForData=Ei.prototype.Sf=function(t){return null===t?null:this.Kj.ja(t)},Ei.prototype.findNodesByExample=function(t){for(var n=new d(As),i=this.fp.i;i.next();){var e=i.value,o=e.data;if(null!==o)for(var r=0;r<arguments.length;r++){var s=arguments[r];if(Yh.Qa(s)&&Ke(this,o,s)){n.add(e);break}}}return n.i},Ei.prototype.findLinksByExample=function(t){for(var n=new d(Js),i=this.Zo.i;i.next();){var e=i.value,o=e.data;if(null!==o)for(var r=0;r<arguments.length;r++){var s=arguments[r];if(Yh.Qa(s)&&Ke(this,o,s)){n.add(e);break}}}return n.i},Yh.defineProperty(Ei,{tL:"nodeTemplate"},function(){return this.Wi.ja("")},function(t){var n=this.Wi.ja("");n!==t&&(Yh.G(t,as,Ei,"nodeTemplate"),this.Wi.add("",t),this.h("nodeTemplate",n,t),this.oa.hb||this.cm())}),Yh.defineProperty(Ei,{QA:"nodeTemplateMap"},function(){return this.Wi},function(t){var n=this.Wi;n!==t&&(Yh.G(t,b,Ei,"nodeTemplateMap"),this.Wi=t,this.h("nodeTemplateMap",n,t),this.oa.hb||this.cm())}),Yh.defineProperty(Ei,{VK:"groupTemplate"},function(){return this.cl.ja("")},function(t){var n=this.cl.ja("");n!==t&&(Yh.G(t,Ll,Ei,"groupTemplate"),this.cl.add("",t),this.h("groupTemplate",n,t),this.oa.hb||this.cm())}),Yh.defineProperty(Ei,{rA:"groupTemplateMap"},function(){return this.cl},function(t){var n=this.cl;n!==t&&(Yh.G(t,b,Ei,"groupTemplateMap"),this.cl=t,this.h("groupTemplateMap",n,t),this.oa.hb||this.cm())}),Yh.defineProperty(Ei,{hL:"linkTemplate"},function(){return this.ak.ja("")},function(t){var n=this.ak.ja("");n!==t&&(Yh.G(t,Js,Ei,"linkTemplate"),this.ak.add("",t),this.h("linkTemplate",n,t),this.oa.hb||this.cm())}),Yh.defineProperty(Ei,{DA:"linkTemplateMap"},function(){return this.ak},function(t){var n=this.ak;n!==t&&(Yh.G(t,b,Ei,"linkTemplateMap"),this.ak=t,this.h("linkTemplateMap",n,t),this.oa.hb||this.cm())}),Yh.defineProperty(Ei,{wI:null},function(){return this.Cm},function(t){this.Cm=t}),Yh.defineProperty(Ei,{af:"isMouseCaptured"},function(){return this.SC},function(t){var i=this.Fb;null!==i&&(t?(this.R.bubbles=!1,i.removeEventListener("mousemove",this.On,!1),i.removeEventListener("mousedown",this.Nn,!1),i.removeEventListener("mouseup",this.Qn,!1),i.removeEventListener("mousewheel",this.Pg,!1),i.removeEventListener("DOMMouseScroll",this.Pg,!1),i.removeEventListener("mouseout",this.Pn,!1),n.addEventListener("mousemove",this.On,!0),n.addEventListener("mousedown",this.Nn,!0),n.addEventListener("mouseup",this.Qn,!0),n.addEventListener("mousewheel",this.Pg,!0),n.addEventListener("DOMMouseScroll",this.Pg,!0),n.addEventListener("mouseout",this.Pn,!0),n.addEventListener("selectstart",this.preventDefault,!1)):(n.removeEventListener("mousemove",this.On,!0),n.removeEventListener("mousedown",this.Nn,!0),n.removeEventListener("mouseup",this.Qn,!0),n.removeEventListener("mousewheel",this.Pg,!0),n.removeEventListener("DOMMouseScroll",this.Pg,!0),n.removeEventListener("mouseout",this.Pn,!0),n.removeEventListener("selectstart",this.preventDefault,!1),i.addEventListener("mousemove",this.On,!1),i.addEventListener("mousedown",this.Nn,!1),i.addEventListener("mouseup",this.Qn,!1),i.addEventListener("mousewheel",this.Pg,!1),i.addEventListener("DOMMouseScroll",this.Pg,!1),i.addEventListener("mouseout",this.Pn,!1)),this.SC=t)}),Yh.defineProperty(Ei,{position:"position"},function(){return this.ib},function(t){var n=this.ib;if(!n.L(t)){Yh.G(t,x,Ei,"position");var i=this.pb.copy();if(t=t.copy(),!this.Sc&&null!==this.Fb){this.Sc=!0;var e=this.scale;$i(this,t,this.qe,this.Ib/e,this.Lb/e,this.so,!1),this.Sc=!1}this.ib=t.S(),t=this.Oa,t.pc&&Di(t,n,this.ib),this.Sc||this.wu(i,this.pb,this.tb,this.tb,!1)}}),Yh.defineProperty(Ei,{nI:"initialPosition"},function(){return this.Jv},function(t){this.Jv.L(t)||(Yh.G(t,x,Ei,"initialPosition"),this.Jv=t.S())}),Yh.defineProperty(Ei,{oI:"initialScale"},function(){return this.Kv},function(t){this.Kv!==t&&(Yh.j(t,"number",Ei,"initialScale"),this.Kv=t)}),Yh.defineProperty(Ei,{Cn:"grid"},function(){return null===this.pd&&Ki(this),this.pd},function(t){var n=this.pd;if(n!==t){null===n&&(Ki(this),n=this.pd),Yh.G(t,tr,Ei,"grid"),t.type!==ed&&Yh.k("Diagram.grid must be a Panel of type Panel.Grid");var i=n.O;null!==i&&i.remove(n),this.pd=t,t.name="GRID",null!==i&&i.add(t),ke(this),this.na(),this.h("grid",n,t)}}),Yh.u(Ei,{pb:"viewportBounds"},function(){var t=this.XD;if(null===this.Fb)return t;var n=this.ib,i=this.tb;return t.m(n.x,n.y,Math.max(this.Ib,0)/i,Math.max(this.Lb,0)/i),t}),Yh.defineProperty(Ei,{OE:"fixedBounds"},function(){return this.Bv},function(t){var n=this.Bv;n.L(t)||(Yh.G(t,P,Ei,"fixedBounds"),-1/0!==t.width&&1/0!==t.height&&-1/0!==t.height||Yh.k("fixedBounds width/height must not be Infinity"),this.Bv=t=t.S(),this.rc(),this.h("fixedBounds",n,t))}),Yh.defineProperty(Ei,{aG:"scrollMargin"},function(){return this.uw},function(t){"number"==typeof t?t=new D(t):Yh.G(t,D,Ei,"scrollMargin");var n=this.uw;n.L(t)||(this.uw=t=t.S(),this.rc(),this.h("scrollMargin",n,t))}),Yh.defineProperty(Ei,{$A:"scrollMode"},function(){return this.vw},function(t){var n=this.vw;n!==t&&(Yh.mb(t,Ei,Ei,"scrollMode"),this.vw=t,t===hc&&Wi(this,!1),this.h("scrollMode",n,t))}),Yh.defineProperty(Ei,{MF:"positionComputation"},function(){return this.pw},function(t){var n=this.pw;n!==t&&(null!==t&&Yh.j(t,"function",Ei,"positionComputation"),this.pw=t,Wi(this,!1),this.h("positionComputation",n,t))}),Yh.defineProperty(Ei,{$F:"scaleComputation"},function(){return this.rw},function(t){var n=this.rw;n!==t&&(null!==t&&Yh.j(t,"function",Ei,"scaleComputation"),this.rw=t,we(this,this.scale,this.scale),this.h("scaleComputation",n,t))}),Yh.u(Ei,{qe:"documentBounds"},function(){return this.uv}),Yh.defineProperty(Ei,{BA:"isVirtualized"},function(){return this.Sv},function(t){var n=this.Sv;n!==t&&(Yh.j(t,"boolean",Ei,"isVirtualized"),this.Sv=t,this.h("isVirtualized",n,t))}),Yh.defineProperty(Ei,{scale:"scale"},function(){return this.tb},function(t){var n=this.tb;Yh.Fd(t,Ei,"scale"),n!==t&&we(this,n,t)}),Yh.defineProperty(Ei,{Gl:"autoScale"},function(){return this.rm},function(t){var n=this.rm;n!==t&&(Yh.mb(t,Ei,Ei,"autoScale"),this.rm=t,this.h("autoScale",n,t),t!==tc&&Wi(this,!1))}),Yh.defineProperty(Ei,{YK:"initialAutoScale"},function(){return this.gl},function(t){var n=this.gl;n!==t&&(Yh.mb(t,Ei,Ei,"initialAutoScale"),this.gl=t,this.h("initialAutoScale",n,t))}),Yh.defineProperty(Ei,{pI:"initialViewportSpot"},function(){return this.Lv},function(t){var n=this.Lv;n!==t&&(Yh.G(t,F,Ei,"initialViewportSpot"),t.fd()||Yh.k("initialViewportSpot must be a specific Spot: "+t),this.Lv=t,this.h("initialViewportSpot",n,t))}),Yh.defineProperty(Ei,{mI:"initialDocumentSpot"},function(){return this.Iv},function(t){var n=this.Iv;n!==t&&(Yh.G(t,F,Ei,"initialDocumentSpot"),t.fd()||Yh.k("initialViewportSpot must be a specific Spot: "+t),this.Iv=t,this.h("initialDocumentSpot",n,t))}),Yh.defineProperty(Ei,{zh:"minScale"},function(){return this.bw},function(t){Yh.Fd(t,Ei,"minScale");var n=this.bw;n!==t&&(0<t?(this.bw=t,this.h("minScale",n,t),t>this.scale&&(this.scale=t)):Yh.Ea(t,"> 0",Ei,"minScale"))}),Yh.defineProperty(Ei,{yh:"maxScale"},function(){return this.$v},function(t){Yh.Fd(t,Ei,"maxScale");var n=this.$v;n!==t&&(0<t?(this.$v=t,this.h("maxScale",n,t),t<this.scale&&(this.scale=t)):Yh.Ea(t,"> 0",Ei,"maxScale"))}),Yh.defineProperty(Ei,{mm:"zoomPoint"},function(){return this.Mw},function(t){this.Mw.L(t)||(Yh.G(t,x,Ei,"zoomPoint"),this.Mw=t=t.S())}),Yh.defineProperty(Ei,{tE:"contentAlignment"},function(){return this.so},function(t){var n=this.so;n.L(t)||(Yh.G(t,F,Ei,"contentAlignment"),this.so=t=t.S(),this.h("contentAlignment",n,t),Wi(this,!1))}),Yh.defineProperty(Ei,{ZK:"initialContentAlignment"},function(){return this.Mo},function(t){var n=this.Mo;n.L(t)||(Yh.G(t,F,Ei,"initialContentAlignment"),this.Mo=t=t.S(),this.h("initialContentAlignment",n,t))}),Yh.defineProperty(Ei,{padding:"padding"},function(){return this.ff},function(t){"number"==typeof t?t=new D(t):Yh.G(t,D,Ei,"padding");var n=this.ff;n.L(t)||(this.ff=t=t.S(),this.rc(),this.h("padding",n,t))}),Yh.u(Ei,{fg:"nodes"},function(){return this.fp.i}),Yh.u(Ei,{links:"links"},function(){return this.Zo.i}),Yh.u(Ei,{Jk:"parts"},function(){return this.zb.i}),Ei.prototype.findTopLevelNodesAndLinks=function(){for(var t=new d(as),n=this.fp.i;n.next();){var i=n.value;i.aq&&t.add(i)}for(n=this.Zo.i;n.next();)i=n.value,i.aq&&t.add(i);return t.i},Ei.prototype.findTopLevelGroups=function(){return this.yl.i},Yh.defineProperty(Ei,{Sb:"layout"},function(){return this.ie},function(t){var n=this.ie;n!==t&&(Yh.G(t,ql,Ei,"layout"),null!==n&&(n.g=null,n.group=null),this.ie=t,t.g=this,t.group=null,this.dv=!0,this.h("layout",n,t),this.Le())}),Ei.prototype.layoutDiagram=function(t){ae(this),t&&Ye(this,!0),Xe(this,!1)},Yh.defineProperty(Ei,{Pd:"isTreePathToChildren"},function(){return this.Rv},function(t){var n=this.Rv;if(n!==t&&(Yh.j(t,"boolean",Ei,"isTreePathToChildren"),this.Rv=t,this.h("isTreePathToChildren",n,t),!this.oa.hb))for(t=this.fg;t.next();)Is(t.value)}),Ei.prototype.findTreeRoots=function(){for(var t=new f(As),n=this.fg;n.next();){var i=n.value;i.aq&&null===i.xn()&&t.add(i)}return t.i},Yh.defineProperty(Ei,{wB:"treeCollapsePolicy"},function(){return this.Hw},function(t){var n=this.Hw;n!==t&&(t!==fc&&t!==cc&&t!==dc&&Yh.k("Unknown Diagram.treeCollapsePolicy: "+t),this.Hw=t,this.h("treeCollapsePolicy",n,t))}),Yh.defineProperty(Ei,{xh:null},function(){return this.KC},function(t){this.KC=t}),Ei.prototype.addDiagramListener=Ei.prototype.Pz=function(t,n){Yh.j(t,"string",Ei,"addDiagramListener:name"),Yh.j(n,"function",Ei,"addDiagramListener:listener");var i=_e(this,t);null!==i&&i.add(n)},Ei.prototype.removeDiagramListener=Ei.prototype.QF=function(t,n){Yh.j(t,"string",Ei,"removeDiagramListener:name"),Yh.j(n,"function",Ei,"addDiagramListener:listener");var i=_e(this,t);null!==i&&i.remove(n)},Ei.prototype.raiseDiagramEvent=Ei.prototype.Aa=function(t,n,i){var e=_e(this,t),o=new Dt;if(o.g=this,t=Ze(this,t),null!==t&&(o.name=t),void 0!==n&&(o.nB=n),void 0!==i&&(o.SA=i),1===(n=e.length))(e=e.ea(0))(o);else if(0!==n)for(i=e.fc(),t=0;t<n;t++)(e=i[t])(o);return o.cancel},Ei.prototype.isUnoccupied=Ei.prototype.cq=function(t,n){return void 0===n&&(n=null),no(this,!1,null,n).cq(t.x,t.y,t.width,t.height)},Ei.prototype.computeOccupiedArea=function(){return this.BA?this.pb.copy():this.Vj?Yi(this):this.qe.copy()},Ei.invalidatePositionArray=Ei.prototype.xA=function(t){null!==this.Cd&&!this.Cd.$t&&(void 0===t&&(t=null),null===t||t.Tz&&!t.mf)&&(this.Cd.$t=!0)},Ei.prototype.simulatedMouseMove=function(t,n,i){if(null!==Cf){var e=Cf.g;i instanceof Ei||(i=null);var o=Nf;return i!==o&&(null!==o&&o!==e&&null!==o.bb.re&&(oo(o),Cf.xx=!1,o.bb.re.doSimulatedDragLeave()),Nf=i,null!==i&&i!==e&&null!==i.bb.re&&(xn(),o=i.bb.re,Sf.contains(o)||Sf.add(o),i.bb.re.doSimulatedDragEnter())),null!==i&&i!==e&&i.hE&&!i.fb&&i.Ep?(e=i.bb.re,null!==e&&(null!==t?n=i.yr(t):null===n&&(n=new x),i.Qb.da=n,i.Qb.Ol=!1,i.Qb.up=!1,e.doSimulatedDragOver()),!0):!1}return!1},Ei.prototype.simulatedMouseUp=function(t,n,i,e){if(null!==Cf){null===e&&(e=n),n=Nf;var o=Cf.g;if(e!==n){if(null!==n&&n!==o&&null!==n.bb.re)return oo(n),Cf.xx=!1,n.bb.re.doSimulatedDragLeave(),!1;Nf=e,null!==e&&null!==e.bb.re&&(xn(),n=e.bb.re,Sf.contains(n)||Sf.add(n),e.bb.re.doSimulatedDragEnter())}if(null===e)return Cf.doCancel(),!0;if(e!==this)return null!==t&&(i=e.yr(t)),e.Qb.da=i,e.Qb.Ol=!1,e.Qb.up=!0,t=e.bb.re,null!==t&&t.doSimulatedDrop(),t=Cf,null!==t&&(e=t.mayCopy(),t.Hf=e?"Copy":"Move",t.stopTool()),!0}return!1},Yh.defineProperty(Ei,{xK:"autoScrollInterval"},function(){return this.Mq},function(t){var n=this.Mq;Yh.Fd(t,Ei,"scale"),n!==t&&(this.Mq=t,this.h("autoScrollInterval",n,t))}),Yh.defineProperty(Ei,{nE:"autoScrollRegion"},function(){return this.fv},function(t){"number"==typeof t?t=new D(t):Yh.G(t,D,Ei,"autoScrollRegion");var n=this.fv;n.L(t)||(this.fv=t=t.S(),this.rc(),this.h("autoScrollRegion",n,t))}),Ei.prototype.doAutoScroll=Ei.prototype.fA=function(t){this.ev.assign(t),ro(this,this.ev).Ic(this.position)?oo(this):eo(this)},Ei.prototype.makeSvg=Ei.prototype.makeSVG=function(t){return void 0===t&&(t=new o),t.context="svg",t=so(this,t),null!==t?t.hm:null},Ei.prototype.makeImage=function(t){void 0===t&&(t=new o);var n=(t.document||document).createElement("img");return n.src=this.LI(t),n},Ei.prototype.makeImageData=Ei.prototype.LI=function(t){void 0===t&&(t=new o);var n=so(this,t);if(null!==n){var i=t.returnType,i=void 0===i?"string":i.toLowerCase();switch(i){case"imagedata":return n.xk.getImageData(0,0,n.width,n.height);case"blob":if(n=n.Hd,"function"!=typeof(i=t.callback)){Yh.k('Error: Diagram.makeImageData called with "returnType: toBlob", but no "callback" function property defined.');break}if("function"==typeof n.toBlob)return n.toBlob(i,t.type,t.details),"toBlob";if("function"==typeof n.msToBlob)return i(n.msToBlob()),"msToBlob";i(null);break;default:return n.toDataURL(t.type,t.details)}}return""};var gc=!1;Ei.inherit=function(t,n){Yh.j(t,"function",Ei,"inherit"),Yh.j(n,"function",Ei,"inherit"),n.TG&&Yh.k("Cannot inherit from "+Yh.jf(n)),Yh.Ka(t,n)},lo.prototype.lm=function(t){return t.rf.setTransform(t.Ad,0,0,t.Ad,0,0),null===this.Gi&&ao(this),0<this.Gi&&this!==this.FD},lo.prototype.t=function(){this.FD=null},Yh.Ka(uo,Ei),Yh.ga("Palette",uo),Yh.Ka(fo,Ei),Yh.ga("Overview",fo),fo.prototype.computePixelRatio=function(){return 1},fo.prototype.se=function(){if(null===this.Mb&&Yh.k("No div specified"),null===this.Fb&&Yh.k("No canvas specified"),this.Be){var t=this.gk;if(null!==t&&!t.Oa.lf){ve(this);var n=t.Cn;(null!==n&&n.visible&&isNaN(n.width)||isNaN(n.height))&&ke(t);var i=this.Fb,n=this.rf,e=this.Fz,o=this.UG;e.width=i.width,e.height=i.height,n.Ee(!0),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,i.width,i.height),e=this.dd,e.reset(),1!==this.scale&&e.scale(this.scale),0===this.position.x&&0===this.position.y||e.translate(-this.position.x,-this.position.y),n.scale(this.Ad,this.Ad),n.transform(e.m11,e.m12,e.m21,e.m22,e.dx,e.dy);for(var e=this.xv,r=this.pb,s=t.bc.n,l=s.length,t=0;t<l;t++){var a=s[t],h=n,u=r,f=e;if(a.visible&&0!==a.wc&&(void 0===f&&(f=!0),f||!a.Kc)){1!==a.wc&&(h.globalAlpha=a.wc);for(var f=this.scale,a=a.zb.n,c=a.length,d=0;d<c;d++){var p=a[d],y=p.W;y.Uf(u)&&(1<y.width*f||1<y.height*f?p.se(h,this):xs(p,h))}h.globalAlpha=1}}for(o.drawImage(i.Hd,0,0),i=this.bc.n,o=i.length,t=0;t<o;t++)i[t].se(n,this);this.Be=this.hl=!1}}},Yh.defineProperty(fo,{RA:"observed"},function(){return this.gk},function(t){var n=this.gk;null!==t&&Yh.G(t,Ei,fo,"observed"),t instanceof fo&&Yh.k("Overview.observed Diagram may not be an Overview itself: "+t),n!==t&&(null!==n&&(this.remove(this.sh),n.QF("ViewportBoundsChanged",this.FF),n.QF("DocumentBoundsChanged",this.EF),n.lw.remove(this)),this.gk=t,null!==t&&(t.Pz("ViewportBoundsChanged",this.FF),t.Pz("DocumentBoundsChanged",this.EF),t.lw.add(this),this.add(this.sh),po(this)),this.rc(),this.h("observed",n,t))}),Yh.defineProperty(fo,{sh:"box"},function(){return this.sm},function(t){var n=this.sm;n!==t&&(this.sm=t,this.remove(n),this.add(this.sm),po(this),this.h("box",n,t))}),Yh.defineProperty(fo,{SK:"drawsTemporaryLayers"},function(){return this.xv},function(t){this.xv!==t&&(this.xv=t,this.Vx())}),fo.prototype.th=function(){var t=this.gk;return null===t?zu:t.qe},fo.prototype.fF=function(){!0!==this.Be&&(this.Be=!0,co(this))},fo.prototype.wu=function(t,n,i,e,o){this.Sc||(ye(this),this.na(),pe(this),this.rc(),po(this),this.oh.scale=i,this.oh.position.x=t.x,this.oh.position.y=t.y,this.oh.bounds.set(t),this.oh.isScroll=o,this.Aa("ViewportBoundsChanged",this.oh,t))},Yh.Ka(yo,yn),yo.prototype.canStart=function(){if(!this.isEnabled)return!1;var t=this.g;if(null===t||!t.El||!t.vf)return!1;var n=t.RA;if(null===n)return!1;if(null===this.findDraggablePart()){var i=n.pb;this.rl=new x(i.width/2,i.height/2),t=t.zc.da,n.position=new x(t.x-this.rl.x,t.y-this.rl.y)}return!0},yo.prototype.doActivate=function(){this.rl=null,yn.prototype.doActivate.call(this)},yo.prototype.moveParts=function(){var t=this.g,n=t.RA;if(null!==n){var i=t.sh;if(null!==i){if(null===this.rl){var e=t.zc.da,i=i.location;this.rl=new x(e.x-i.x,e.y-i.y)}t=t.R.da,n.position=new x(t.x-this.rl.x,t.y-this.rl.y)}}},Yh.Ka(vo,$n),vo.prototype.resize=function(t){var n=this.g.RA;if(null!==n){var i=n.pb.copy();n.position=t.position,(i.width!==t.width||i.height!==t.height)&&0<t.width&&0<t.height&&(n.scale=Math.min(i.width/t.width,i.height/t.height))}},Yh.ga("Brush",mo);var mc;mo.Solid=mc=Yh.p(mo,"Solid",0);var bc;mo.Linear=bc=Yh.p(mo,"Linear",1);var xc;mo.Radial=xc=Yh.p(mo,"Radial",2);var wc;mo.Pattern=wc=Yh.p(mo,"Pattern",4);var kc;mo.Lab=kc=Yh.p(mo,"Lab",5);var Mc;mo.HSL=Mc=Yh.p(mo,"HSL",6),mo.prototype.copy=function(){var t=new mo;return t.ma=this.ma,t.qo=this.qo,t.qp=this.qp.S(),t.Fo=this.Fo.S(),t.Cw=this.Cw,t.yv=this.yv,null!==this.bh&&(t.bh=this.bh.copy()),t.nw=this.nw,t},Uh=mo.prototype,Uh.Ga=function(){return this.freeze(),Object.freeze(this),this},Uh.freeze=function(){return this.Q=!0,null!==this.bh&&this.bh.freeze(),this},Uh.Ra=function(){return Object.isFrozen(this)&&Yh.k("cannot thaw constant: "+this),this.Q=!1,null!==this.bh&&this.bh.Ra(),this},Uh.hc=function(t){t.De===mo?this.type=t:Yh.Ej(this,t)},Uh.toString=function(){var t="Brush(";if(this.type===mc)t+=this.color;else if(t=this.type===bc?t+"Linear ":this.type===xc?t+"Radial ":this.type===wc?t+"Pattern ":t+"(unknown) ",t+=this.start+" "+this.end,null!==this.uk)for(var n=this.uk.i;n.next();)t+=" "+n.key+":"+n.value;return t+")"},mo.prototype.addColorStop=mo.prototype.addColorStop=function(t,n){this.Q&&Yh.la(this),("number"!=typeof t||!isFinite(t)||1<t||0>t)&&Yh.Ea(t,"0 <= loc <= 1",mo,"addColorStop:loc"),Yh.j(n,"string",mo,"addColorStop:color"),null===this.bh&&(this.bh=new b("number","string")),this.bh.add(t,n),this.ma===mc&&(this.type=bc),this.dh=null},Yh.defineProperty(mo,{type:"type"},function(){return this.ma},function(t){this.Q&&Yh.la(this,t),Yh.mb(t,mo,mo,"type"),this.ma=t,this.start.Od()&&(t===bc?this.start=ou:t===xc&&(this.start=lu)),this.end.Od()&&(t===bc?this.end=uu:t===xc&&(this.end=lu)),this.dh=null}),Yh.defineProperty(mo,{color:"color"},function(){return this.qo},function(t){this.Q&&Yh.la(this,t),this.qo=t,this.dh=null}),Yh.defineProperty(mo,{start:"start"},function(){return this.qp},function(t){this.Q&&Yh.la(this,t),Yh.G(t,F,mo,"start"),this.qp=t.S(),this.dh=null}),Yh.defineProperty(mo,{end:"end"},function(){return this.Fo},function(t){this.Q&&Yh.la(this,t),Yh.G(t,F,mo,"end"),this.Fo=t.S(),this.dh=null}),Yh.defineProperty(mo,{Mu:"startRadius"},function(){return this.Cw},function(t){this.Q&&Yh.la(this,t),Yh.Fd(t,mo,"startRadius"),0>t&&Yh.Ea(t,">= zero",mo,"startRadius"),this.Cw=t,this.dh=null}),Yh.defineProperty(mo,{Ht:"endRadius"},function(){return this.yv},function(t){this.Q&&Yh.la(this,t),Yh.Fd(t,mo,"endRadius"),0>t&&Yh.Ea(t,">= zero",mo,"endRadius"),this.yv=t,this.dh=null}),Yh.defineProperty(mo,{uk:"colorStops"},function(){return this.bh},function(t){this.Q&&Yh.la(this,t),this.bh=t,this.dh=null}),Yh.defineProperty(mo,{pattern:"pattern"},function(){return this.nw},function(t){this.Q&&Yh.la(this,t),this.nw=t,this.dh=null}),mo.randomColor=function(t,n){void 0===t&&(t=128),void 0===n&&(n=Math.max(t,255));var i=Math.abs(n-t),e=Math.floor(t+Math.random()*i).toString(16),o=Math.floor(t+Math.random()*i).toString(16),i=Math.floor(t+Math.random()*i).toString(16);return 2>e.length&&(e="0"+e),2>o.length&&(o="0"+o),2>i.length&&(i="0"+i),"#"+e+o+i};var Pc,Tc=new U(null).xk;mo.isValidColor=Pc=function(t){if("black"===t)return!0;if(""===t)return!1;Tc.fillStyle="#000000";var n=Tc.fillStyle;return Tc.fillStyle=t,Tc.fillStyle!==n||(Tc.fillStyle="#FFFFFF",n=Tc.fillStyle,Tc.fillStyle=t,Tc.fillStyle!==n)};var Sc=new go,Cc=new go,Nc=new go,jc=new go;mo.lighten=function(t){return Lc(t)},mo.prototype.lightenBy=function(t,n){this.Q&&Yh.la(this);var i=void 0===t||"number"!=typeof t?.2:t,e=void 0===n?kc:n;if(this.type===mc)xo(this.color),this.color=bo(i,e);else if((this.type===bc||this.type===xc)&&null!==this.uk)for(var o=this.uk.i;o.next();)xo(o.value),this.addColorStop(o.key,bo(i,e));return this};var Lc;mo.lightenBy=Lc=function(t,n,i){return n=void 0===n||"number"!=typeof n?.2:n,i=void 0===i?kc:i,xo(t),bo(n,i)},mo.darken=function(t){return Dc(t)},mo.prototype.darkenBy=function(t,n){this.Q&&Yh.la(this);var i=void 0===t||"number"!=typeof t?.2:t,e=void 0===n?kc:n;if(this.type===mc)xo(this.color),this.color=bo(-i,e);else if((this.type===bc||this.type===xc)&&null!==this.uk)for(var o=this.uk.i;o.next();)xo(o.value),this.addColorStop(o.key,bo(-i,e));return this};var Dc;mo.darkenBy=Dc=function(t,n,i){return n=void 0===n||"number"!=typeof n?.2:n,i=void 0===i?kc:i,xo(t),bo(-n,i)};var Ac=216/24389,Fc=24389/27,Oc=[95.047,100,108.883];Yh.ki(To),Yh.ga("GraphObject",To),To.prototype.cloneProtected=function(t){t.P=6144|this.P,t.wc=this.wc,t.Rb=this.Rb,t.Eb=this.Eb,t.ac=this.ac,t.ib.assign(this.ib),t.Re=this.Re.S(),t.Wh=this.Wh.S(),t.Vh=this.Vh.S(),t.Qi=this.Qi.copy(),t.tb=this.tb,t.jg=this.jg,t.Dg=this.Dg,t.Lm=this.Lm.S(),t.qd.assign(this.qd),t.nc.assign(this.nc),t.Tc.assign(this.Tc),t.As=this.As,null!==this.V&&(t.V=this.V.copy()),t.ge=this.ge.S(),t.om=this.om.S(),t.Ns=this.Ns,t.aj=this.aj,t.Tq=this.Tq,t.yi=this.yi,t.ct=this.ct,t.Rs=this.Rs,t.Wm=this.Wm,t.Xm=this.Xm.S(),t.Ym=this.Ym,t.br=this.br,null!==this.ia&&(t.ia=this.ia.copy()),t.tc=this.tc,t.oo=this.oo,null!==this.$k&&(t.$k=Yh.Il(this.$k)),null!==this.mg&&(t.mg=this.mg.copy()),t.bn=this.bn},To.prototype.addCopyProperty=To.prototype.bH=function(t){var n=this.$k;if(Yh.isArray(n)){for(var i=0;i<n.length;i++)if(n[i]===t)return}else this.$k=n=[];n.push(t)},To.prototype.li=function(t){t.Bs=null,t.Sm=null,t.H()},To.prototype.clone=function(){var t=new this.constructor;if(this.cloneProtected(t),null!==this.$k)for(var n=0;n<this.$k.length;n++){var i=this.$k[n];t[i]=this[i]}return t},To.prototype.copy=function(){return this.clone()},To.prototype.hc=function(t){t.De===Js?0===t.name.indexOf("Orient")?this.qq=t:Yh.k("Unknown Link enum value for GraphObject.segmentOrientation property: "+t):t.De===To?this.stretch=t:Yh.Ej(this,t)},To.prototype.toString=function(){return Yh.jf(Object.getPrototypeOf(this))+"#"+Yh.Kd(this)};var Bc;To.None=Bc=Yh.p(To,"None",0);var qc;To.Default=qc=Yh.p(To,"Default",0);var zc;To.Vertical=zc=Yh.p(To,"Vertical",4);var Ec;To.Horizontal=Ec=Yh.p(To,"Horizontal",5);var Ic;To.Fill=Ic=Yh.p(To,"Fill",3);var Rc;To.Uniform=Rc=Yh.p(To,"Uniform",1);var Gc;To.UniformToFill=Gc=Yh.p(To,"UniformToFill",2);var Vc;To.FlipVertical=Vc=Yh.p(To,"FlipVertical",1);var Hc;To.FlipHorizontal=Hc=Yh.p(To,"FlipHorizontal",2);var Kc;To.FlipBoth=Kc=Yh.p(To,"FlipBoth",3),To.prototype.Ld=function(){if(null===this.V){var t=new jl;t.Sj=nu,t.pk=nu,t.Qj=10,t.nk=10,t.Pj=zd,t.mk=zd,t.Rj=0,t.ok=0,this.V=t}},To.prototype.raiseChangedEvent=To.prototype.Xc=function(t,n,i,e,o,r,s){var l=this.U;if(null!==l&&(l.Un(t,n,i,e,o,r,s),Vo(this)&&i===this&&t===gf&&No(this,l,n),i===l&&0!=(16777216&l.P)&&null!==l.data))for(t=this.xa.n,i=t.length,e=0;e<i;e++)(o=t[e])instanceof tr&&hr(o,function(t){null!==t.data&&0!=(16777216&t.P)&&t.Hb(n)})},To.prototype.lx=function(t){return this.oo===t?this:null},To.prototype.raiseChanged=To.prototype.h=function(t,n,i){this.Xc(gf,t,this,n,i)},To.prototype.ME=function(t,n,i){if(!1===this.Ug)return!1;var e=this.Ia;n=t.wf(n);var o=!1;return i&&(o=$h(t.x,t.y,0,0,0,e.height)<n||$h(t.x,t.y,0,e.height,e.width,e.height)<n||$h(t.x,t.y,e.width,e.height,e.width,0)<n||$h(t.x,t.y,e.width,0,0,0)<n),i||(o=$h(t.x,t.y,0,0,0,e.height)<n&&$h(t.x,t.y,0,e.height,e.width,e.height)<n&&$h(t.x,t.y,e.width,e.height,e.width,0)<n&&$h(t.x,t.y,e.width,0,0,0)<n),o},To.prototype.Zg=function(){return!0},To.prototype.containsPoint=To.prototype.Ha=function(t){var n=Yh.K();n.assign(t),this.transform.nb(n);var i=this.W;if(!i.I())return Yh.v(n),!1;var e=this.g;if(null!==e&&e.il){var o=e.Vt("extraTouchThreshold"),r=e.Vt("extraTouchArea"),s=r/2,l=this.Ia,e=this.oj()*e.scale,a=1/e;if(l.width*e<o&&l.height*e<o)return t=_h(i.x-s*a,i.y-s*a,i.width+r*a,i.height+r*a,n.x,n.y),Yh.v(n),t}return(this instanceof Ds||this instanceof Cr?_h(i.x-5,i.y-5,i.width+10,i.height+10,n.x,n.y):i.Ha(n))?(o=!1,o=!(this.mg&&!this.mg.Ha(n))&&(!(null===this.ac||!i.Ha(n))||(!(null===this.Eb||!this.Tc.Ha(t))||this.vk(t))),Yh.v(n),o):(Yh.v(n),!1)},To.prototype.vk=function(t){var n=this.Ia;return _h(0,0,n.width,n.height,t.x,t.y)},To.prototype.containsRect=To.prototype.wk=function(t){if(0===this.angle)return this.W.wk(t);var n=this.Ia,n=Yh.ig(0,0,n.width,n.height),i=this.transform,e=!1,o=Yh.xb(t.x,t.y);return n.Ha(i.mi(o))&&(o.m(t.x,t.bottom),n.Ha(i.mi(o))&&(o.m(t.right,t.bottom),n.Ha(i.mi(o))&&(o.m(t.right,t.y),n.Ha(i.mi(o))&&(e=!0)))),Yh.v(o),Yh.Db(n),e},To.prototype.containedInRect=To.prototype.qn=function(t,n){if(void 0===n)return t.wk(this.W);var i=this.Ia,e=!1,o=Yh.xb(0,0);return t.Ha(n.nb(o))&&(o.m(0,i.height),t.Ha(n.nb(o))&&(o.m(i.width,i.height),t.Ha(n.nb(o))&&(o.m(i.width,0),t.Ha(n.nb(o))&&(e=!0)))),Yh.v(o),e},To.prototype.intersectsRect=To.prototype.Uf=function(t,n){if(void 0===n&&(n=this.transform,0===this.angle))return t.Uf(this.W);var i=this.Ia,e=n,o=Yh.xb(0,0),r=Yh.xb(0,i.height),s=Yh.xb(i.width,i.height),l=Yh.xb(i.width,0),a=!1;if(t.Ha(e.nb(o))||t.Ha(e.nb(r))||t.Ha(e.nb(s))||t.Ha(e.nb(l)))a=!0;else{var i=Yh.ig(0,0,i.width,i.height),h=Yh.xb(t.x,t.y);i.Ha(e.mi(h))?a=!0:(h.m(t.x,t.bottom),i.Ha(e.mi(h))?a=!0:(h.m(t.right,t.bottom),i.Ha(e.mi(h))?a=!0:(h.m(t.right,t.y),i.Ha(e.mi(h))&&(a=!0)))),Yh.v(h),Yh.Db(i),!a&&(ut(t,o,r)||ut(t,r,s)||ut(t,s,l)||ut(t,l,o))&&(a=!0)}return Yh.v(o),Yh.v(r),Yh.v(s),Yh.v(l),a},To.prototype.getDocumentPoint=To.prototype.Xa=function(t,n){if(void 0===n&&(n=new x),t instanceof F){t.Od()&&Yh.k("getDocumentPoint:s Spot must be specific: "+t.toString());var i=this.Ia;n.m(t.x*i.width+t.offsetX,t.y*i.height+t.offsetY)}else n.set(t);return this.qh.nb(n),n},To.prototype.getDocumentAngle=To.prototype.Tl=function(){var t;return t=this.qh,1===t.m11&&0===t.m12?t=0:0>(t=180*Math.atan2(t.m12,t.m11)/Math.PI)&&(t+=360),t},To.prototype.getDocumentScale=To.prototype.oj=function(){if(0!=(4096&this.P)==!1)return this.Co;var t=this.tb;return null!==this.O?t*this.O.oj():t},To.prototype.getLocalPoint=To.prototype.SE=function(t,n){return void 0===n&&(n=new x),n.assign(t),this.qh.mi(n),n},To.prototype.getNearestIntersectionPoint=To.prototype.TE=function(t,n,i){return this.An(t.x,t.y,n.x,n.y,i)},Uh=To.prototype,Uh.An=function(t,n,i,e,o){var r=this.transform,s=1/(r.m11*r.m22-r.m12*r.m21),l=r.m22*s,a=-r.m12*s,h=-r.m21*s,u=r.m11*s,f=s*(r.m21*r.dy-r.m22*r.dx),c=s*(r.m12*r.dx-r.m11*r.dy);return null!==this.jn?(r=this.W,at(r.left,r.top,r.right,r.bottom,t,n,i,e,o)):(s=t*l+n*h+f,t=t*a+n*u+c,n=i*l+e*h+f,i=i*a+e*u+c,o.m(0,0),e=this.Ia,i=at(0,0,e.width,e.height,s,t,n,i,o),o.transform(r),i)},Uh.Mn=function(){},Uh.sj=function(){return!1},Uh.ic=function(t,n,i,e,o){this.Ji();var r=Yh.Ff();if(r.assign(this.nc),this.nc.Ra(),!1===Wo(this)){var s=this.nc;s.x=t,s.y=n,s.width=i,s.height=e}else this.ij(t,n,i,e);this.nc.freeze(),this.mg=void 0===o?null:o,i=!1,void 0!==o?i=!0:null!==this.O&&(o=this.O.Tc,e=this.za,null!==this.jn&&(e=this.nc),i=n+e.height,e=t+e.width,i=!(0<=t+.05&&e<=o.width+.05&&0<=n+.05&&i<=o.height+.05),this instanceof qr&&(t=this.Tc,this.Zv>t.height||this.tf.Ue>t.width))&&(i=!0),this.P=i?256|this.P:-257&this.P,this.nc.I()||Yh.k("Non-real actualBounds has been set. Object "+this+", actualBounds: "+this.nc.toString()),this.Ox(r,this.nc),Xo(this,!1),Yh.Db(r)},Uh.ij=function(){},Uh.Ox=function(t,n){var i=this.U;null!==i&&null!==i.g&&(i.Gu!==this&&i.WF!==this&&i.ZF!==this||Ps(i,!0),this.na(),S(t,n)||(i.Ek(),this.ss(i)))},Uh.ss=function(t){null!==this.Qd&&(Ps(t,!0),t instanceof As&&Bs(t,this))},Yh.defineProperty(To,{uq:"shadowVisible"},function(){return this.bn},function(t){var n=this.bn;n!==t&&(this.bn=t,this.na(),this.h("shadowVisible",n,t))}),To.prototype.se=function(t,n){if(this.visible){var i=this.nc;if(0!==i.width&&0!==i.height&&!isNaN(i.x)&&!isNaN(i.y)){var e=this.opacity,o=1;if(1!==e){if(0===e)return;o=t.globalAlpha,t.globalAlpha=o*e}if(t instanceof z){t:if(this.visible){var r=null,s=t.Ex;if(this instanceof tr&&(this.type===td||this.type===nd))Fo(this,t,n);else{var l=this.nc;if(0!==l.width&&0!==l.height&&!isNaN(l.x)&&!isNaN(l.y)){var a=this.transform,h=this.O;0!=(4096&this.P)==!0&&Bo(this);var i=0!=(256&this.P),u=!1;if(this instanceof qr&&(t.font=this.font),i){if(u=h.Zg()?h.Ia:h.W,null!==this.mg)var f=this.mg,c=f.x,d=f.y,p=f.width,f=f.height;else c=Math.max(l.x,u.x),d=Math.max(l.y,u.y),p=Math.min(l.right,u.right)-c,f=Math.min(l.bottom,u.bottom)-d;if(c>l.width+l.x||l.x>u.width+u.x||d>l.height+l.y||l.y>u.height+u.y)break t;u=!0,K(t,1,0,0,1,0,0),t.save(),t.beginPath(),t.rect(c,d,p,f),t.clip()}if(this.sj()){var y=this;if(!y.isVisible())break t}t.vh.Tb=[1,0,0,1,0,0],c=!1,this.sj()&&this.am&&n.pj("drawShadows")&&(d=this.an,t.lB(d.x*n.scale*n.Ad,d.y*n.scale*n.Ad,y.Cg),t.Yn(),t.shadowColor=y.$m),y=!1,this.U&&n.pj("drawShadows")&&(y=this.U.am),!0===this.uq?(t.Yn(),!1===c&&y&&(K(t,1,0,0,1,0,0),t.ab(),c=!0)):!1===this.uq&&t.Xn(),null!==this.ac&&(Oo(this,t,this.ac,!0,!0),!1===c&&y&&(K(t,1,0,0,1,0,0),t.ab(),c=!0),this.ac instanceof mo&&this.ac.type===xc?(t.beginPath(),t.rect(l.x,l.y,l.width,l.height),t.Kg(this.ac)):t.fillRect(l.x,l.y,l.width,l.height)),this instanceof tr?K(t,a.m11,a.m12,a.m21,a.m22,a.dx,a.dy):t.vh.Tb=[a.m11,a.m12,a.m21,a.m22,a.dx,a.dy],null!==this.Eb&&(!1===c&&y&&(K(t,1,0,0,1,0,0),t.ab(),c=!0),p=this.Ia,a=l=0,d=p.width,p=p.height,f=0,this instanceof Cr&&(p=this.Va.eb,l=p.x,a=p.y,d=p.width,p=p.height,f=this.gi),Oo(this,t,this.Eb,!0,!1),this.Eb instanceof mo&&this.Eb.type===xc?(t.beginPath(),t.rect(l-f/2,a-f/2,d+f,p+f),t.Kg(this.Eb)):t.fillRect(l-f/2,a-f/2,d+f,p+f)),y&&(null!==this.Eb||null!==this.ac||null!==h&&0!=(512&h.P)||null!==h&&(h.type===Zc||h.type===Qc)&&h.Jd()!==this)?(Go(this,!0),null===this.uq&&t.Xn()):Go(this,!1),this.yk(t,n),y&&0!=(512&this.P)==!0&&t.Yn(),this.sj()&&y&&t.Xn(),i&&(t.restore(),u&&t.xf.pop()),this instanceof tr&&(r=t.xf.pop()),!0===c&&t.xf.pop(),null!==t.EE&&(null===r&&(s===t.Ex?(K(t,1,0,0,1,0,0),r=t.xf.pop()):r=t.Ex),t.EE(this,r))}}}}else{if(this instanceof tr&&(this.type===td||this.type===nd))return Fo(this,t,n),void(1!==e&&(t.globalAlpha=o));if(this instanceof Js&&this.nu(!1),r=this.transform,s=this.O,0!=(4096&this.P)==!0&&Bo(this),h=0!=(256&this.P),t.Ip&&(h=!1),this instanceof qr&&(t.font=this.font),h){if(u=s.Zg()?s.Ia:s.W,null!==this.mg?(c=this.mg,l=c.x,a=c.y,y=c.width,c=c.height):(l=Math.max(i.x,u.x),a=Math.max(i.y,u.y),y=Math.min(i.right,u.right)-l,c=Math.min(i.bottom,u.bottom)-a),l>i.width+i.x||i.x>u.width+u.x||a>i.height+i.y||i.y>u.height+u.y)return void(1!==e&&(t.globalAlpha=o));t.save(),t.beginPath(),t.rect(l,a,y,c),t.clip()}if(this.sj()){if(!this.isVisible())return void(1!==e&&(t.globalAlpha=o));this.am&&n.pj("drawShadows")&&(u=this.an,t.lB(u.x*n.scale*n.Ad,u.y*n.scale*n.Ad,this.Cg),t.Yn(),t.shadowColor=this.$m)}u=!1,this.U&&n.pj("drawShadows")&&(u=this.U.am),!0===this.uq?t.Yn():!1===this.uq&&t.Xn(),null!==this.ac&&(Oo(this,t,this.ac,!0,!0),this.ac instanceof mo&&this.ac.type===xc?(t.beginPath(),t.rect(i.x,i.y,i.width,i.height),t.Kg(this.ac)):t.fillRect(i.x,i.y,i.width,i.height)),r.eu()||t.transform(r.m11,r.m12,r.m21,r.m22,r.dx,r.dy),null!==this.Eb&&(y=this.Ia,l=i=0,a=y.width,y=y.height,c=0,this instanceof Cr&&(y=this.Va.eb,i=y.x,l=y.y,a=y.width,y=y.height,c=this.gi),Oo(this,t,this.Eb,!0,!1),this.Eb instanceof mo&&this.Eb.type===xc?(t.beginPath(),t.rect(i-c/2,l-c/2,a+c,y+c),t.Kg(this.Eb)):t.fillRect(i-c/2,l-c/2,a+c,y+c)),u&&(null!==this.Eb||null!==this.ac||null!==s&&0!=(512&s.P)||null!==s&&(s.type===Zc||s.type===Qc)&&s.Jd()!==this)?(Go(this,!0),null===this.uq&&t.Xn()):Go(this,!1),this.yk(t,n),u&&0!=(512&this.P)==!0&&t.Yn(),this.sj()&&u&&t.Xn(),h?(t.restore(),this instanceof tr?t.Ee(!0):t.Ee(!1)):r.eu()||(s=1/(r.m11*r.m22-r.m12*r.m21),t.transform(r.m22*s,-r.m12*s,-r.m21*s,r.m11*s,s*(r.m21*r.dy-r.m22*r.dx),s*(r.m12*r.dx-r.m11*r.dy)))}1!==e&&(t.globalAlpha=o)}}},To.prototype.yk=function(){},To.prototype.isContainedBy=To.prototype.Zl=function(t){if(t instanceof tr)t:{if(this!==t&&null!==t)for(var n=this.O;null!==n;){if(n===t){t=!0;break t}n=n.O}t=!1}else t=!1;return t},To.prototype.isVisibleObject=To.prototype.wj=function(){if(!this.visible)return!1;var t=this.O;return null===t||t.wj()},To.prototype.isEnabledObject=To.prototype.cu=function(){for(var t=this instanceof tr?this:this.O;null!==t&&t.isEnabled;)t=t.O;return null===t},Yh.defineProperty(To,{FE:"enabledChanged"},function(){return null!==this.ia?this.ia.rr:null},function(t){So(this);var n=this.ia.rr;n!==t&&(null!==t&&Yh.j(t,"function",To,"enabledChanged"),this.ia.rr=t,this.h("enabledChanged",n,t))}),Uh=To.prototype,Uh.H=function(t){if(void 0===t&&(t=!1),!0!==Jo(this)){Yo(this,!0),Xo(this,!0);var n=this.O;null===n||t||n.H()}},Uh.$p=function(){!0!==Jo(this)&&(Yo(this,!0),Xo(this,!0))},Uh.Ji=function(){0!=(2048&this.P)==!1&&(Ko(this,!0),Uo(this,!0))},Uh.wA=function(){Uo(this,!0)},Uh.na=function(){var t=this.U;null!==t&&t.na()},Yh.defineProperty(To,{qq:"segmentOrientation"},function(){return this.Ym},function(t){var n=this.Ym;n!==t&&(this.Ym=t,this.H(),this.h("segmentOrientation",n,t),t===Vd&&(this.angle=0))}),Yh.defineProperty(To,{Me:"segmentIndex"},function(){return this.Rs},function(t){t=Math.round(t);var n=this.Rs;n!==t&&(this.Rs=t,this.H(),this.h("segmentIndex",n,t))}),Yh.defineProperty(To,{aB:"segmentFraction"},function(){return this.Wm},function(t){isNaN(t)?t=0:0>t?t=0:1<t&&(t=1);var n=this.Wm;n!==t&&(this.Wm=t,this.H(),this.h("segmentFraction",n,t))}),Yh.defineProperty(To,{bB:"segmentOffset"},function(){return this.Xm},function(t){var n=this.Xm;n.L(t)||(this.Xm=t=t.S(),this.H(),this.h("segmentOffset",n,t))}),Yh.defineProperty(To,{stretch:"stretch"},function(){return this.Dg},function(t){var n=this.Dg;n!==t&&(this.Dg=t,this.H(),this.h("stretch",n,t))}),Yh.defineProperty(To,{name:"name"},function(){return this.Rb},function(t){var n=this.Rb;n!==t&&(this.Rb=t,null!==this.U&&(this.U.Nm=null),this.h("name",n,t))}),Yh.defineProperty(To,{opacity:"opacity"},function(){return this.wc},function(t){var n=this.wc;n!==t&&(Yh.j(t,"number",To,"opacity"),(0>t||1<t)&&Yh.Ea(t,"0 <= value <= 1",To,"opacity"),this.wc=t,this.h("opacity",n,t),t=this.g,n=this.U,null!==t&&null!==n&&t.na(ps(n,n.W)))}),Yh.defineProperty(To,{visible:"visible"},function(){return 0!=(1&this.P)},function(t){var n=0!=(1&this.P);n!==t&&(this.P^=1,this.h("visible",n,t),n=this.O,null!==n?n.H():this.sj()&&this.vd(t),this.na(),Qo(this))}),Yh.defineProperty(To,{Ug:"pickable"},function(){return 0!=(2&this.P)},function(t){var n=0!=(2&this.P);n!==t&&(this.P^=2,this.h("pickable",n,t))}),Yh.defineProperty(To,{UH:"fromLinkableDuplicates"},function(){return 0!=(4&this.P)},function(t){var n=0!=(4&this.P);n!==t&&(this.P^=4,this.h("fromLinkableDuplicates",n,t))}),Yh.defineProperty(To,{VH:"fromLinkableSelfNode"},function(){return 0!=(8&this.P)},function(t){var n=0!=(8&this.P);n!==t&&(this.P^=8,this.h("fromLinkableSelfNode",n,t))}),Yh.defineProperty(To,{NJ:"toLinkableDuplicates"},function(){return 0!=(16&this.P)},function(t){var n=0!=(16&this.P);n!==t&&(this.P^=16,this.h("toLinkableDuplicates",n,t))}),Yh.defineProperty(To,{OJ:"toLinkableSelfNode"},function(){return 0!=(32&this.P)},function(t){var n=0!=(32&this.P);n!==t&&(this.P^=32,this.h("toLinkableSelfNode",n,t))}),Yh.defineProperty(To,{Wf:"isPanelMain"},function(){return 0!=(64&this.P)},function(t){var n=0!=(64&this.P);n!==t&&(this.P^=64,this.H(),this.h("isPanelMain",n,t))}),Yh.defineProperty(To,{vx:"isActionable"},function(){return 0!=(128&this.P)},function(t){var n=0!=(128&this.P);n!==t&&(this.P^=128,this.h("isActionable",n,t))}),Yh.defineProperty(To,{jn:"areaBackground"},function(){return this.ac},function(t){var n=this.ac;n!==t&&(t instanceof mo&&t.freeze(),this.ac=t,this.na(),this.h("areaBackground",n,t))}),Yh.defineProperty(To,{background:"background"},function(){return this.Eb},function(t){var n=this.Eb;n!==t&&(t instanceof mo&&t.freeze(),this.Eb=t,this.na(),this.h("background",n,t))}),Yh.u(To,{U:"part"},function(){if(this.sj())return this;if(null!==this.Sm)return this.Sm;var t;for(t=this.O;t;){if(t instanceof as)return this.Sm=t;t=t.O}return null}),Yh.u(To,{O:"panel"},function(){return this.mh}),To.prototype.em=function(t){this.mh=t},Yh.u(To,{layer:"layer"},function(){var t=this.U;return null!==t?t.layer:null},{configurable:!0}),Yh.u(To,{g:"diagram"},function(){var t=this.U;return null!==t?t.g:null},{configurable:!0}),Yh.defineProperty(To,{position:"position"},function(){return this.ib},function(t){var n=t.x,i=t.y,e=this.ib,o=e.x,r=e.y;(o===n||isNaN(o)&&isNaN(n))&&(r===i||isNaN(r)&&isNaN(i))?this.iB():(t=t.S(),this.hB(t,e)&&this.h("position",e,t))}),To.prototype.iB=function(){},To.prototype.hB=function(t){return this.ib=t,zo(this),this.Ji(),!0},To.prototype.ky=function(t,n){this.ib.m(t,n),this.Ji()},Yh.u(To,{W:"actualBounds"},function(){return this.nc}),Yh.defineProperty(To,{scale:"scale"},function(){return this.tb},function(t){var n=this.tb;n!==t&&(0>=t&&Yh.k("GraphObject.scale for "+this+" must be greater than zero, not: "+t),this.tb=t,this.Ji(),this.H(),this.h("scale",n,t))}),Yh.defineProperty(To,{angle:"angle"},function(){return this.jg},function(t){var n=this.jg;n!==t&&(t%=360,0>t&&(t+=360),n!==t&&(this.jg=t,Qo(this),this.H(),this.Ji(),this.h("angle",n,t)))}),Yh.defineProperty(To,{Ba:"desiredSize"},function(){return this.Re},function(t){var n=t.width,i=t.height,e=this.Re,o=e.width,r=e.height;(o===n||isNaN(o)&&isNaN(n))&&(r===i||isNaN(r)&&isNaN(i))||(this.Re=t=t.S(),this.H(),this instanceof Cr&&this.Ke(),this.h("desiredSize",e,t),Vo(this)&&null!==(t=this.U)&&(No(this,t,"width"),No(this,t,"height")))}),Yh.defineProperty(To,{width:"width"},function(){return this.Re.width},function(t){var n=this.Re.width;n===t||isNaN(n)&&isNaN(t)||(n=this.Re,this.Re=t=new M(t,this.Re.height).freeze(),this.H(),this instanceof Cr&&this.Ke(),this.h("desiredSize",n,t),Vo(this)&&null!==(t=this.U)&&No(this,t,"width"))}),Yh.defineProperty(To,{height:"height"},function(){return this.Re.height},function(t){var n=this.Re.height;n===t||isNaN(n)&&isNaN(t)||(n=this.Re,this.Re=t=new M(this.Re.width,t).freeze(),this.H(),this instanceof Cr&&this.Ke(),this.h("desiredSize",n,t),Vo(this)&&null!==(t=this.U)&&No(this,t,"height"))}),Yh.defineProperty(To,{Ah:"minSize"},function(){return this.Wh},function(t){var n=this.Wh;n.L(t)||(t=t.copy(),isNaN(t.width)&&(t.width=0),isNaN(t.height)&&(t.height=0),t.freeze(),this.Wh=t,this.H(),this.h("minSize",n,t))}),Yh.defineProperty(To,{Cf:"maxSize"},function(){return this.Vh},function(t){var n=this.Vh;n.L(t)||(t=t.copy(),isNaN(t.width)&&(t.width=1/0),isNaN(t.height)&&(t.height=1/0),t.freeze(),this.Vh=t,this.H(),this.h("maxSize",n,t))}),Yh.u(To,{za:"measuredBounds"},function(){return this.qd}),Yh.u(To,{Ia:"naturalBounds"},function(){return this.Tc},{configurable:!0}),Yh.defineProperty(To,{margin:"margin"},function(){return this.Lm},function(t){"number"==typeof t&&(t=new D(t));var n=this.Lm;n.L(t)||(this.Lm=t=t.S(),this.H(),this.h("margin",n,t))}),Yh.u(To,{transform:null},function(){return 0!=(2048&this.P)==!0&&Bo(this),this.dd}),Yh.u(To,{qh:null},function(){return 0!=(4096&this.P)==!0&&Bo(this),this.pm}),Yh.defineProperty(To,{alignment:"alignment"},function(){return this.ge},function(t){var n=this.ge;n.L(t)||(t.Od()&&!t.Vc()&&Yh.k("GraphObject.alignment for "+this+" must be a real Spot or Spot.Default, not: "+t),this.ge=t=t.S(),zo(this),this.h("alignment",n,t))}),Yh.defineProperty(To,{column:"column"},function(){return this.Tq},function(t){t=Math.round(t);var n=this.Tq;n!==t&&(0>t&&Yh.Ea(t,">= 0",To,"column"),this.Tq=t,this.H(),this.h("column",n,t))}),Yh.defineProperty(To,{uH:"columnSpan"},function(){return this.yi},function(t){t=Math.round(t);var n=this.yi;n!==t&&(1>t&&Yh.Ea(t,">= 1",To,"columnSpan"),this.yi=t,this.H(),this.h("columnSpan",n,t))}),Yh.defineProperty(To,{$b:"row"},function(){return this.Ns},function(t){t=Math.round(t);var n=this.Ns;n!==t&&(0>t&&Yh.Ea(t,">= 0",To,"row"),this.Ns=t,this.H(),this.h("row",n,t))}),Yh.defineProperty(To,{rowSpan:"rowSpan"},function(){return this.aj},function(t){t=Math.round(t);var n=this.aj;n!==t&&(1>t&&Yh.Ea(t,">= 1",To,"rowSpan"),this.aj=t,this.H(),this.h("rowSpan",n,t))}),Yh.defineProperty(To,{ly:"spanAllocation"},function(){return this.ct},function(t){var n=this.ct;n!==t&&(null!==t&&Yh.j(t,"function",To,"spanAllocation"),this.ct=t,this.H(),this.h("spanAllocation",n,t))}),Yh.defineProperty(To,{ph:"alignmentFocus"},function(){return this.om},function(t){var n=this.om;n.L(t)||(!t.Od()||t.Vc()||t.L(nu)&&this instanceof As||Yh.k("GraphObject.alignmentFocus must be a real Spot or Spot.Default, not: "+t),this.om=t=t.S(),this.H(),this.h("alignmentFocus",n,t))}),Yh.defineProperty(To,{Qd:"portId"},function(){return this.As},function(t){var n=this.As;if(n!==t){var i=this.U;if(null===i||i instanceof As||(Yh.k("Cannot set portID on a Link: "+t),i=null),null!==n&&null!==i&&Gs(i,this),this.As=t,null!==t&&i){i.Dk=!0,null===i.le&&Rs(i);var e=this.Qd;null!==e&&i.le.add(e,this)}this.h("portId",n,t)}}),Yh.defineProperty(To,{Bb:"toSpot"},function(){return null!==this.V?this.V.pk:nu},function(t){this.Ld();var n=this.V.pk;n.L(t)||(t=t.S(),this.V.pk=t,this.h("toSpot",n,t),$o(this))}),Yh.defineProperty(To,{km:"toEndSegmentLength"},function(){return null!==this.V?this.V.nk:10},function(t){this.Ld();var n=this.V.nk;n!==t&&(0>t&&Yh.Ea(t,">= 0",To,"toEndSegmentLength"),this.V.nk=t,this.h("toEndSegmentLength",n,t),$o(this))}),Yh.defineProperty(To,{Nu:"toEndSegmentDirection"},function(){return null!==this.V?this.V.mk:zd},function(t){this.Ld();var n=this.V.mk;n!==t&&(Yh.Ft("GraphObject.toEndSegmentDirection","2.0"),this.V.mk=t,this.h("toEndSegmentDirection",n,t),$o(this))}),Yh.defineProperty(To,{Ou:"toShortLength"},function(){return null!==this.V?this.V.ok:0},function(t){this.Ld();var n=this.V.ok;n!==t&&(this.V.ok=t,this.h("toShortLength",n,t),$o(this))}),Yh.defineProperty(To,{qG:"toLinkable"},function(){return null!==this.V?this.V.kt:null},function(t){this.Ld();var n=this.V.kt;n!==t&&(this.V.kt=t,this.h("toLinkable",n,t))}),Yh.defineProperty(To,{PJ:"toMaxLinks"},function(){return null!==this.V?this.V.lt:1/0},function(t){this.Ld();var n=this.V.lt;n!==t&&(0>t&&Yh.Ea(t,">= 0",To,"toMaxLinks"),this.V.lt=t,this.h("toMaxLinks",n,t))}),Yh.defineProperty(To,{Ab:"fromSpot"},function(){return null!==this.V?this.V.Sj:nu},function(t){this.Ld();var n=this.V.Sj;n.L(t)||(t=t.S(),this.V.Sj=t,this.h("fromSpot",n,t),$o(this))}),Yh.defineProperty(To,{Sl:"fromEndSegmentLength"},function(){return null!==this.V?this.V.Qj:10},function(t){this.Ld();var n=this.V.Qj;n!==t&&(0>t&&Yh.Ea(t,">= 0",To,"fromEndSegmentLength"),this.V.Qj=t,this.h("fromEndSegmentLength",n,t),$o(this))}),Yh.defineProperty(To,{Tt:"fromEndSegmentDirection"},function(){return null!==this.V?this.V.Pj:zd},function(t){this.Ld();var n=this.V.Pj;n!==t&&(Yh.Ft("GraphObject.fromEndSegmentDirection","2.0"),this.V.Pj=t,this.h("fromEndSegmentDirection",n,t),$o(this))}),Yh.defineProperty(To,{Ut:"fromShortLength"},function(){return null!==this.V?this.V.Rj:0},function(t){this.Ld();var n=this.V.Rj;n!==t&&(this.V.Rj=t,this.h("fromShortLength",n,t),$o(this))}),Yh.defineProperty(To,{PE:"fromLinkable"},function(){return null!==this.V?this.V.ur:null},function(t){this.Ld();var n=this.V.ur;n!==t&&(this.V.ur=t,this.h("fromLinkable",n,t))}),Yh.defineProperty(To,{lA:"fromMaxLinks"},function(){return null!==this.V?this.V.vr:1/0},function(t){this.Ld();var n=this.V.vr;n!==t&&(0>t&&Yh.Ea(t,">= 0",To,"fromMaxLinks"),this.V.vr=t,this.h("fromMaxLinks",n,t))}),Yh.defineProperty(To,{cursor:"cursor"},function(){return this.br},function(t){var n=this.br;n!==t&&(Yh.j(t,"string",To,"cursor"),this.br=t,this.h("cursor",n,t))}),Yh.defineProperty(To,{click:"click"},function(){return null!==this.ia?this.ia.xi:null},function(t){So(this);var n=this.ia.xi;n!==t&&(null!==t&&Yh.j(t,"function",To,"click"),this.ia.xi=t,this.h("click",n,t))}),Yh.defineProperty(To,{Gt:"doubleClick"},function(){return null!==this.ia?this.ia.Fi:null},function(t){So(this);var n=this.ia.Fi;n!==t&&(null!==t&&Yh.j(t,"function",To,"doubleClick"),this.ia.Fi=t,this.h("doubleClick",n,t))}),Yh.defineProperty(To,{Yz:"contextClick"},function(){return null!==this.ia?this.ia.zi:null},function(t){So(this);var n=this.ia.zi;n!==t&&(null!==t&&Yh.j(t,"function",To,"contextClick"),this.ia.zi=t,this.h("contextClick",n,t))}),Yh.defineProperty(To,{pu:"mouseEnter"},function(){return null!==this.ia?this.ia.ks:null},function(t){So(this);var n=this.ia.ks;n!==t&&(null!==t&&Yh.j(t,"function",To,"mouseEnter"),this.ia.ks=t,this.h("mouseEnter",n,t))}),Yh.defineProperty(To,{qu:"mouseLeave"},function(){return null!==this.ia?this.ia.ls:null},function(t){So(this);var n=this.ia.ls;n!==t&&(null!==t&&Yh.j(t,"function",To,"mouseLeave"),this.ia.ls=t,this.h("mouseLeave",n,t))}),Yh.defineProperty(To,{NA:"mouseOver"},function(){return null!==this.ia?this.ia.Vi:null},function(t){So(this);var n=this.ia.Vi;n!==t&&(null!==t&&Yh.j(t,"function",To,"mouseOver"),this.ia.Vi=t,this.h("mouseOver",n,t))}),Yh.defineProperty(To,{MA:"mouseHover"},function(){return null!==this.ia?this.ia.Ui:null},function(t){So(this);var n=this.ia.Ui;n!==t&&(null!==t&&Yh.j(t,"function",To,"mouseHover"),this.ia.Ui=t,this.h("mouseHover",n,t))}),Yh.defineProperty(To,{LA:"mouseHold"},function(){return null!==this.ia?this.ia.Ti:null},function(t){So(this);var n=this.ia.Ti;n!==t&&(null!==t&&Yh.j(t,"function",To,"mouseHold"),this.ia.Ti=t,this.h("mouseHold",n,t))}),Yh.defineProperty(To,{YI:"mouseDragEnter"},function(){return null!==this.ia?this.ia.hs:null},function(t){So(this);var n=this.ia.hs;n!==t&&(null!==t&&Yh.j(t,"function",To,"mouseDragEnter"),this.ia.hs=t,this.h("mouseDragEnter",n,t))}),Yh.defineProperty(To,{ZI:"mouseDragLeave"},function(){return null!==this.ia?this.ia.js:null},function(t){So(this);var n=this.ia.js;n!==t&&(null!==t&&Yh.j(t,"function",To,"mouseDragLeave"),this.ia.js=t,this.h("mouseDragLeave",n,t))}),Yh.defineProperty(To,{KA:"mouseDrop"},function(){return null!==this.ia?this.ia.Si:null},function(t){So(this);var n=this.ia.Si;n!==t&&(null!==t&&Yh.j(t,"function",To,"mouseDrop"),this.ia.Si=t,this.h("mouseDrop",n,t))}),Yh.defineProperty(To,{bE:"actionDown"},function(){return null!==this.ia?this.ia.Bq:null},function(t){So(this);var n=this.ia.Bq;n!==t&&(null!==t&&Yh.j(t,"function",To,"actionDown"),this.ia.Bq=t,this.h("actionDown",n,t))}),Yh.defineProperty(To,{cE:"actionMove"},function(){return null!==this.ia?this.ia.Cq:null},function(t){So(this);var n=this.ia.Cq;n!==t&&(null!==t&&Yh.j(t,"function",To,"actionMove"),this.ia.Cq=t,this.h("actionMove",n,t))}),Yh.defineProperty(To,{dE:"actionUp"},function(){return null!==this.ia?this.ia.Dq:null},function(t){So(this);var n=this.ia.Dq;n!==t&&(null!==t&&Yh.j(t,"function",To,"actionUp"),this.ia.Dq=t,this.h("actionUp",n,t))}),Yh.defineProperty(To,{aE:"actionCancel"},function(){return null!==this.ia?this.ia.Aq:null},function(t){So(this);var n=this.ia.Aq;n!==t&&(null!==t&&Yh.j(t,"function",To,"actionCancel"),this.ia.Aq=t,this.h("actionCancel",n,t))}),Yh.defineProperty(To,{rB:"toolTip"},function(){return null!==this.ia?this.ia.dj:null},function(t){So(this);var n=this.ia.dj;n!==t&&(this.ia.dj=t,this.h("toolTip",n,t))}),Yh.defineProperty(To,{contextMenu:"contextMenu"},function(){return null!==this.ia?this.ia.Ai:null},function(t){So(this);var n=this.ia.Ai;n!==t&&(this.ia.Ai=t,this.h("contextMenu",n,t))}),To.prototype.bind=To.prototype.bind=function(t){t.Eg=this;var n=this.Ql();null!==n&&mr(n)&&Yh.k("Cannot add a Binding to a template that has already been copied: "+t),null===this.tc&&(this.tc=new f(on)),this.tc.add(t)},To.prototype.findTemplateBinder=To.prototype.Ql=function(){for(var t=this instanceof tr?this:this.O;null!==t;){if(null!==t.Yk)return t;t=t.O}return null},To.prototype.setProperties=function(t){Yh.Hu(this,t)};var Uc;To.make=Uc=function(t,n){var i=arguments,e=null,o=null;if("function"==typeof t)o=t;else if("string"==typeof t){var r=Jc.ja(t);"function"==typeof r?(i=Yh.Il(arguments),e=r(i),Yh.Qa(e)||Yh.k('GraphObject.make invoked object builder "'+t+'", but it did not return an Object')):o=Jh[t]}if(null===e&&(void 0!==o&&null!==o&&o.constructor||Yh.k("GraphObject.make requires a class function or GoJS class name or name of an object builder, not: "+t),e=new o),r=1,e instanceof Ei&&1<i.length){var s=e,o=i[1];("string"==typeof o||o instanceof HTMLDivElement)&&(ho(s,o),r++)}for(;r<i.length;r++)o=i[r],void 0===o?Yh.k("Undefined value at argument "+r+" for object being constructed by GraphObject.make: "+e):Zo(e,o);return e};var Jc=new b("string","function");To.getBuilders=function(){var t,n=new b("string","function");for(t in Jc)if(t!==t.toLowerCase()){var i=Jc.ja(t);"function"==typeof i&&n.add(t,i)}return n.freeze(),n};var Yc;To.defineBuilder=Yc=function(t,n){Yh.j(t,"string",To,"defineBuilder:name"),Yh.j(n,"function",To,"defineBuilder:func");var i=t.toLowerCase();""!==t&&"none"!==i&&t!==i||Yh.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+t),Jc.add(t,n)};var Wc;To.takeBuilderArgument=Wc=function(t,n,i){void 0===i&&(i=null);var e=t[1];if("function"==typeof i?i(e):"string"==typeof e)return t.splice(1,1),e;if(void 0===n)throw Error("no "+("function"==typeof i?"satisfactory":"string")+" argument for GraphObject builder "+t[0]);return n},Yc("Button",function(){var t=new mo(bc);t.addColorStop(0,"white"),t.addColorStop(1,"lightgray");var n=new mo(bc);return n.addColorStop(0,"white"),n.addColorStop(1,"dodgerblue"),t=Uc(tr,Zc,{vx:!0,FE:function(t,n){var i=t.ud("ButtonBorder");null!==i&&(i.fill=n?t._buttonFillNormal:t._buttonFillDisabled)},_buttonFillNormal:t,_buttonStrokeNormal:"gray",_buttonFillOver:n,_buttonStrokeOver:"blue",_buttonFillDisabled:"darkgray"},Uc(Cr,{name:"ButtonBorder",Cb:"Rectangle",A:new F(0,0,2.761423749153968,2.761423749153968),B:new F(1,1,-2.761423749153968,-2.761423749153968),fill:t,stroke:"gray"})),t.pu=function(t,n){if(n.cu()){var i=n.ud("ButtonBorder");if(i instanceof Cr){var e=n._buttonFillOver;n._buttonFillNormal=i.fill,i.fill=e,e=n._buttonStrokeOver,n._buttonStrokeNormal=i.stroke,i.stroke=e}}},t.qu=function(t,n){if(n.cu()){var i=n.ud("ButtonBorder");i instanceof Cr&&(i.fill=n._buttonFillNormal,i.stroke=n._buttonStrokeNormal)}},t}),Yc("TreeExpanderButton",function(){var t=Uc("Button",{_treeExpandedFigure:"MinusLine",_treeCollapsedFigure:"PlusLine"},Uc(Cr,{name:"ButtonIcon",Cb:"MinusLine",Ba:Uu},new on("figure","isTreeExpanded",function(t,n){var i=n.O;return t?i._treeExpandedFigure:i._treeCollapsedFigure}).Nx()),{visible:!1},new on("visible","isTreeLeaf",function(t){return!t}).Nx());return t.click=function(t,n){var i=n.U;if(i instanceof Ds&&(i=i.Pf),i instanceof As){var e=i.g;if(null!==e){if(e=e.ob,i.gd){if(!e.canCollapseTree(i))return}else if(!e.canExpandTree(i))return;t.Ac=!0,i.gd?e.collapseTree(i):e.expandTree(i)}}},t}),Yc("SubGraphExpanderButton",function(){var t=Uc("Button",{_subGraphExpandedFigure:"MinusLine",_subGraphCollapsedFigure:"PlusLine"},Uc(Cr,{name:"ButtonIcon",Cb:"MinusLine",Ba:Uu},new on("figure","isSubGraphExpanded",function(t,n){var i=n.O;return t?i._subGraphExpandedFigure:i._subGraphCollapsedFigure}).Nx()));return t.click=function(t,n){var i=n.U;if(i instanceof Ds&&(i=i.Pf),i instanceof Ll){var e=i.g;if(null!==e){if(e=e.ob,i.we){if(!e.canCollapseSubGraph(i))return}else if(!e.canExpandSubGraph(i))return;t.Ac=!0,i.we?e.collapseSubGraph(i):e.expandSubGraph(i)}}},t}),Yc("ContextMenuButton",function(){var t=Uc("Button");t.stretch=Ec;var n=t.ud("ButtonBorder");return n instanceof Cr&&(n.Cb="Rectangle",n.A=new F(0,0,2,3),n.B=new F(1,1,-2,-2)),t}),Yc("PanelExpanderButton",function(t){var n=Wc(t,"COLLAPSIBLE"),i=Uc("Button",{_buttonExpandedFigure:"TriangleUp",_buttonCollapsedFigure:"TriangleDown"},Uc(Cr,"TriangleUp",{name:"ButtonIcon",Ba:new M(6,4)},new on("figure","visible",function(t){return t?i._buttonExpandedFigure:i._buttonCollapsedFigure}).Nx(n)));return t=i.ud("ButtonBorder"),t instanceof Cr&&(t.stroke=null,t.fill="transparent"),i.click=function(t,i){var e=i.g;if(null!==e&&!e.fb){var o=i.Ql();null===o&&(o=i.U),null!==o&&null!==(o=o.ud(n))&&(e.Ub("Collapse/Expand Panel"),o.visible=!o.visible,e.Gd("Collapse/Expand Panel"))}},i}),Yc("CheckBoxButton",function(t){var n=Wc(t);return t=Uc("Button",{"ButtonBorder.fill":"white","ButtonBorder.stroke":"gray",width:14,height:14},Uc(Cr,{name:"ButtonIcon",WH:"M0 4 L3 9 9 0",kb:2,stretch:Ic,mA:Rc,visible:!1},""!==n?new on("visible",n).MI():[])),t.click=function(t,i){var e=t.g;if(!(null===e||e.fb||""!==n&&e.ba.fb)){t.Ac=!0;var o=i.ud("ButtonIcon");e.Ub("checkbox"),o.visible=!o.visible,"function"==typeof i._doClick&&i._doClick(t,i),e.Gd("checkbox")}},t}),Yc("CheckBox",function(t){t=Wc(t),t=Uc("CheckBoxButton",t,{name:"Button",margin:new D(0,1,0,0)});var n=Uc(tr,"Horizontal",t,{vx:!0,margin:1,_buttonFillNormal:t._buttonFillNormal,_buttonStrokeNormal:t._buttonStrokeNormal,_buttonFillOver:t._buttonFillOver,_buttonStrokeOver:t._buttonStrokeOver,_buttonFillDisabled:t._buttonFillDisabled,pu:t.pu,qu:t.qu,click:t.click,_buttonClick:t.click});return t.pu=null,t.qu=null,t.click=null,n}),_o.prototype.copy=function(){var t=new _o;return t.xi=this.xi,t.Fi=this.Fi,t.zi=this.zi,t.ks=this.ks,t.ls=this.ls,t.Vi=this.Vi,t.Ui=this.Ui,t.Ti=this.Ti,t.hs=this.hs,t.js=this.js,t.Si=this.Si,t.Bq=this.Bq,t.Cq=this.Cq,t.Dq=this.Dq,t.Aq=this.Aq,t.dj=this.dj,t.Ai=this.Ai,t.rr=this.rr,t},Yh.Ka(tr,To),Yh.ki(tr),Yh.ga("Panel",tr),tr.prototype.cloneProtected=function(t){if(To.prototype.cloneProtected.call(this,t),t.ma=this.ma,t.ff=this.ff.S(),t.fr=this.fr.S(),t.Di=this.Di,t.ma===_c){t.Lj=this.Lj.S(),t.Nh=this.Nh,t.Ci=this.Ci,t.vm=this.vm,t.Mh=this.Mh,t.Lh=this.Lh,t.um=this.um;var n=[];if(0<this.Yd.length)for(var i=this.Yd,e=i.length,o=0;o<e;o++)if(void 0!==i[o]){var r=i[o].copy();r.em(t),n[o]=r}if(t.Yd=n,n=[],0<this.Td.length)for(i=this.Td,e=i.length,o=0;o<e;o++)void 0!==i[o]&&(r=i[o].copy(),r.em(t),n[o]=r);t.Td=n,t.Vm=this.Vm,t.tm=this.tm,t.ej=this.ej,t.Oi=this.Oi}t.Cp=this.Cp,t.Dr=this.Dr.S(),t.Er=this.Er.S(),t.Ar=this.Ar,t.zr=this.zr,t.Cr=this.Cr,t.Br=this.Br,t.zm=this.zm,t.Tj=this.Tj,t.Vd=this.Vd,t.Yk=this.Yk,t.Qr=this.Qr,t.$j=this.$j,t.vg=this.vg,t.Uo=this.Uo,t.fj.assign(this.fj),t.Hj=this.Hj,null!==this.Os&&(t.Os=this.Os)},tr.prototype.li=function(t){To.prototype.li.call(this,t),t.xa=this.xa;for(var n=t.xa.n,i=n.length,e=0;e<i;e++)n[e].mh=t;t.dn=null},tr.prototype.copy=function(){var t=To.prototype.copy.call(this);if(null!==t){for(var n=this.xa.n,i=n.length,e=0;e<i;e++){var o=n[e].copy(),r=t;o.em(r),o.Sm=null;var s=r.xa,l=s.count;if(s.Md(l,o),null!==(s=r.U)){s.Nm=null,null!==o.Qd&&s instanceof As&&(s.Dk=!0);var a=r.g;null!==a&&a.oa.hb||s.Xc(mf,"elements",r,null,o,null,l)}}return t}return null},tr.prototype.hc=function(t){t.De===tr?this.type=t:To.prototype.hc.call(this,t)},tr.prototype.toString=function(){return"Panel("+this.type+")#"+Yh.Kd(this)};var Xc;tr.Position=Xc=Yh.p(tr,"Position",0),tr.Horizontal=Yh.p(tr,"Horizontal",1);var $c;tr.Vertical=$c=Yh.p(tr,"Vertical",2);var Qc;tr.Spot=Qc=Yh.p(tr,"Spot",3);var Zc;tr.Auto=Zc=Yh.p(tr,"Auto",4);var _c;tr.Table=_c=Yh.p(tr,"Table",5),tr.Viewbox=Yh.p(tr,"Viewbox",6);var td;tr.TableRow=td=Yh.p(tr,"TableRow",7);var nd;tr.TableColumn=nd=Yh.p(tr,"TableColumn",8);var id;tr.Link=id=Yh.p(tr,"Link",9);var ed;tr.Grid=ed=Yh.p(tr,"Grid",10);var od;tr.Graduated=od=Yh.p(tr,"Graduated",11),Yh.defineProperty(tr,{type:"type"},function(){return this.ma},function(t){var n=this.ma;n!==t&&(n!==td&&n!==nd||Yh.k("Cannot change Panel.type when it is already a TableRow or a TableColumn: "+t),this.ma=t,this.ma===ed?this.Fn=!0:this.ma===_c&&nr(this),this.H(),this.h("type",n,t))}),Yh.u(tr,{elements:"elements"},function(){return this.xa.i}),Yh.u(tr,{Ia:"naturalBounds"},function(){return this.Tc}),Yh.defineProperty(tr,{padding:"padding"},function(){return this.ff},function(t){"number"==typeof t?(0>t&&Yh.Ea(t,">= 0",tr,"padding"),t=new D(t)):(Yh.G(t,D,tr,"padding"),0>t.left&&Yh.Ea(t.left,">= 0",tr,"padding:value.left"),0>t.right&&Yh.Ea(t.right,">= 0",tr,"padding:value.right"),0>t.top&&Yh.Ea(t.top,">= 0",tr,"padding:value.top"),0>t.bottom&&Yh.Ea(t.bottom,">= 0",tr,"padding:value.bottom"));var n=this.ff;n.L(t)||(this.ff=t=t.S(),this.H(),this.h("padding",n,t))}),Yh.defineProperty(tr,{Ml:"defaultAlignment"},function(){return this.fr},function(t){var n=this.fr;n.L(t)||(this.fr=t=t.S(),this.H(),this.h("defaultAlignment",n,t))}),Yh.defineProperty(tr,{Zd:"defaultStretch"},function(){return this.Di},function(t){var n=this.Di;n!==t&&(Yh.mb(t,To,tr,"defaultStretch"),this.Di=t,this.H(),this.h("defaultStretch",n,t))}),Yh.defineProperty(tr,{NK:"defaultSeparatorPadding"},function(){return void 0===this.Lj?Eu:this.Lj},function(t){if(void 0!==this.Lj){"number"==typeof t&&(t=new D(t));var n=this.Lj;n.L(t)||(this.Lj=t=t.S(),this.H(),this.h("defaultSeparatorPadding",n,t))}}),Yh.defineProperty(tr,{LK:"defaultRowSeparatorStroke"},function(){return void 0===this.Ci?null:this.Ci},function(t){var n=this.Ci;n!==t&&(null===t||"string"==typeof t||t instanceof mo)&&(t instanceof mo&&t.freeze(),this.Ci=t,this.na(),this.h("defaultRowSeparatorStroke",n,t))}),Yh.defineProperty(tr,{MK:"defaultRowSeparatorStrokeWidth"},function(){return void 0===this.Nh?1:this.Nh},function(t){if(void 0!==this.Nh){var n=this.Nh;n!==t&&isFinite(t)&&0<=t&&(this.Nh=t,this.H(),this.h("defaultRowSeparatorStrokeWidth",n,t))}}),Yh.defineProperty(tr,{KK:"defaultRowSeparatorDashArray"},function(){return void 0===this.vm?null:this.vm},function(t){if(void 0!==this.vm){var n=this.vm;if(n!==t){if(null===t||Array.isArray(t)||Yh.yd(t,"Array",tr,"defaultRowSeparatorDashArray:value"),null!==t){for(var i=t.length,e=0,o=0;o<i;o++){var r=t[o];"number"==typeof r&&0<=r&&isFinite(r)||Yh.k("defaultRowSeparatorDashArray value "+r+" at index "+o+" must be a positive number or zero."),e+=r}if(0===e){if(null===n)return;t=null}}this.vm=t,this.na(),this.h("defaultRowSeparatorDashArray",n,t)}}}),Yh.defineProperty(tr,{FK:"defaultColumnSeparatorStroke"},function(){return void 0===this.Lh?null:this.Lh},function(t){if(void 0!==this.Lh){var n=this.Lh;n!==t&&(null===t||"string"==typeof t||t instanceof mo)&&(t instanceof mo&&t.freeze(),this.Lh=t,this.na(),this.h("defaultColumnSeparatorStroke",n,t))}}),Yh.defineProperty(tr,{GK:"defaultColumnSeparatorStrokeWidth"},function(){return void 0===this.Mh?1:this.Mh},function(t){if(void 0!==this.Mh){var n=this.Mh;n!==t&&isFinite(t)&&0<=t&&(this.Mh=t,this.H(),this.h("defaultColumnSeparatorStrokeWidth",n,t))}}),Yh.defineProperty(tr,{EK:"defaultColumnSeparatorDashArray"},function(){return void 0===this.um?null:this.um},function(t){if(void 0!==this.um){var n=this.um;if(n!==t){if(null===t||Array.isArray(t)||Yh.yd(t,"Array",tr,"defaultColumnSeparatorDashArray:value"),null!==t){for(var i=t.length,e=0,o=0;o<i;o++){var r=t[o];"number"==typeof r&&0<=r&&isFinite(r)||Yh.k("defaultColumnSeparatorDashArray value "+r+" at index "+o+" must be a positive number or zero."),e+=r}if(0===e){if(null===n)return;t=null}}this.um=t,this.na(),this.h("defaultColumnSeparatorDashArray",n,t)}}}),Yh.defineProperty(tr,{YL:"viewboxStretch"},function(){return this.Cp},function(t){var n=this.Cp;n!==t&&(Yh.mb(t,To,tr,"viewboxStretch"),this.Cp=t,this.H(),this.h("viewboxStretch",n,t))}),Yh.defineProperty(tr,{tx:"gridCellSize"},function(){return this.Dr},function(t){var n=this.Dr;if(!n.L(t)){Yh.G(t,M,tr,"gridCellSize"),t.I()&&0!==t.width&&0!==t.height||Yh.k("Invalid Panel.gridCellSize: "+t),this.Dr=t.S();var i=this.g;null!==i&&this===i.Cn&&ke(i),this.na(),this.h("gridCellSize",n,t)}}),Yh.defineProperty(tr,{ZE:"gridOrigin"},function(){return this.Er},function(t){var n=this.Er;if(!n.L(t)){Yh.G(t,x,tr,"gridOrigin"),t.I()||Yh.k("Invalid Panel.gridOrigin: "+t),this.Er=t.S();var i=this.g;null!==i&&this===i.Cn&&ke(i),this.na(),this.h("gridOrigin",n,t)}}),Yh.defineProperty(tr,{Ck:"graduatedMin"},function(){return this.Ar},function(t){Yh.Fd(t,tr,"graduatedMin");var n=this.Ar;n!==t&&(this.Ar=t,this.H(),this.h("graduatedMin",n,t),Vo(this)&&null!==(t=this.U)&&No(this,t,"graduatedRange"))}),Yh.defineProperty(tr,{pA:"graduatedMax"},function(){return this.zr},function(t){Yh.Fd(t,tr,"graduatedMax");var n=this.zr;n!==t&&(this.zr=t,this.H(),this.h("graduatedMax",n,t),Vo(this)&&null!==(t=this.U)&&No(this,t,"graduatedRange"))}),Yh.u(tr,{Wt:"graduatedRange"},function(){return this.pA-this.Ck}),Yh.defineProperty(tr,{qA:"graduatedTickUnit"},function(){return this.Cr},function(t){Yh.Fd(t,tr,"graduatedTickUnit");var n=this.Cr;n!==t&&0<t&&(this.Cr=t,this.H(),this.h("graduatedTickUnit",n,t))}),Yh.defineProperty(tr,{YE:"graduatedTickBase"},function(){return this.Br},function(t){Yh.Fd(t,tr,"graduatedTickBase");var n=this.Br;n!==t&&(this.Br=t,this.H(),this.h("graduatedTickBase",n,t))}),Uh=tr.prototype,Uh.ss=function(t){To.prototype.ss.call(this,t);for(var n=this.xa.n,i=n.length,e=0;e<i;e++)n[e].ss(t)},Uh.yk=function(t,n){if(this.ma===ed){var i=this.oj()*n.scale;0>=i&&(i=1);var e=this.tx,o=e.width,e=e.height,r=this.Ia,s=r.width,r=r.height,l=Math.ceil(s/o),a=Math.ceil(r/e),h=this.ZE;t.save(),t.beginPath(),t.rect(0,0,s,r),t.clip();for(var u=[],f=this.xa.n,c=f.length,d=0;d<c;d++){var p=f[d],y=[];if(u.push(y),p.visible)for(var p=sr(p.Cb),v=d+1;v<c;v++){var g=f[v];g.visible&&sr(g.Cb)===p&&2<=(g=g.interval)&&y.push(g)}}for(f=this.xa.n,c=f.length,d=0;d<c;d++){var m=f[d];if(m.visible&&(y=m.interval,!(2>o*y*i))){var p=u[d],v=!1,b=!0,x=m.nG;if(null!==x&&(v=!0,b=t.hA(x,m.uf)),"LineV"===m.Cb){t.lineWidth=m.kb,Oo(this,t,m.stroke,!1,!1),t.beginPath();for(var w=g=Math.floor(-h.x/o);w<=g+l;w++){var k=w*o+h.x;0<=k&&k<s&&rr(w,y,p)&&(v&&!b?Co(t,k,0,k,r,x,m.uf):(t.moveTo(k,0),t.lineTo(k,r)))}t.stroke()}else if("LineH"===m.Cb){for(t.lineWidth=m.kb,Oo(this,t,m.stroke,!1,!1),t.beginPath(),w=g=Math.floor(-h.y/e);w<=g+a;w++)0<=(k=w*e+h.y)&&k<=r&&rr(w,y,p)&&(v&&!b?Co(t,0,k,s,k,x,m.uf):(t.moveTo(0,k),t.lineTo(s,k)));t.stroke()}else if("BarV"===m.Cb)for(Oo(this,t,m.fill,!0,!1),m=m.width,isNaN(m)&&(m=o),w=g=Math.floor(-h.x/o);w<=g+l;w++)0<=(k=w*o+h.x)&&k<s&&rr(w,y,p)&&t.fillRect(k,0,m,r);else if("BarH"===m.Cb)for(Oo(this,t,m.fill,!0,!1),m=m.height,isNaN(m)&&(m=e),w=g=Math.floor(-h.y/e);w<=g+a;w++)0<=(k=w*e+h.y)&&k<=r&&rr(w,y,p)&&t.fillRect(0,k,s,m);v&&t.eA()}}t.restore(),t.Ee(!1)}else if(this.ma===od){for(o=this.Ia,i=o.width,o=o.height,t.save(),t.beginPath(),t.rect(-1,-1,i+1,o+1),t.clip(),i=this.Jd(),i.se(t,n),o=this.oj()*n.scale,0>=o&&(o=1),e=i.W,s=this.xa.n,r=this.zm,l=s.length,a=0;a<l;a++)if(c=s[a],h=r[a],u=h.length,c.visible&&c!==i&&0!==h.length)if(c instanceof Cr){if(!(2>this.qA*c.interval*i.hf.Pt/this.Wt*o))for(d=c.za,y=c.kb*c.scale,p=c.ph,p.Od()&&(p=ou),f=0;f<u;f++){var v=c,g=h[f][0],w=e,m=h[f][1],b=d,x=y,k=p,M=v.dd;M.reset(),M.translate(g.x+w.x,g.y+w.y),M.rotate(m+v.angle,0,0),M.translate(-b.width*k.x+k.offsetX+x/2,-b.height*k.y+k.offsetY+x/2),M.scale(v.scale,v.scale),Ko(v,!1),v.pm.set(v.dd),v.Co=v.scale,Uo(v,!1),c.se(t,n),c.dd.reset()}}else if(c instanceof qr)for(null===this.lk&&(this.lk=new qr),d=this.lk,ir(c,d),f=0;f<u;f++)g=h[f],3<g.length&&(p=g[6],d.Ed=g[2],d.jg=g[3],d.je=g[4],d.tf=g[5],d.Tc=g[8],d.ic(p.x,p.y,p.width,p.height),c=d,y=e,v=g[7],g=g[8],w=c.dd,w.reset(),w.translate(p.x+y.x,p.y+y.y),w.translate(-v.x,-v.y),qo(c,w,g.x,g.y,g.width,g.height),Ko(c,!1),c.pm.set(c.dd),c.Co=c.scale,Uo(c,!1),d.se(t,n));t.restore(),t.Ee(!0)}else{for(this.ma===_c&&(t.lineCap="butt",or(this,t,!0,this.Yd,!0),or(this,t,!1,this.Td,!0),er(this,t,!0,this.Yd),er(this,t,!1,this.Td),or(this,t,!0,this.Yd,!1),or(this,t,!1,this.Td,!1)),(i=this.au)&&t.save(),o=this.Jd(),e=this.xa.n,s=e.length,r=0;r<s;r++)l=e[r],i&&l===o&&(t.Ip=!0),l.se(t,n),i&&l===o&&(t.Ip=!1);i&&(t.restore(),t.Ee(!0))}},Uh.An=function(t,n,i,e,o){var r=this.Zg(),s=this.transform,l=1/(s.m11*s.m22-s.m12*s.m21),a=s.m22*l,h=-s.m12*l,u=-s.m21*l,f=s.m11*l,c=l*(s.m21*s.dy-s.m22*s.dx),d=l*(s.m12*s.dx-s.m11*s.dy);if(null!==this.jn)return s=this.W,at(s.left,s.top,s.right,s.bottom,t,n,i,e,o);if(null!==this.background)r=t*a+n*u+c,l=t*h+n*f+d,t=i*a+e*u+c,a=i*h+e*f+d,o.m(0,0),i=this.Ia,i=at(0,0,i.width,i.height,r,l,t,a,o),o.transform(s);else{r||(a=1,u=h=0,f=1,d=c=0),l=t*a+n*u+c,t=t*h+n*f+d,a=i*a+e*u+c,e=i*h+e*f+d,o.m(a,e),h=(a-l)*(a-l)+(e-t)*(e-t),i=!1,f=this.xa.n,d=f.length,u=Yh.K(),c=null,n=1/0;var p=null;this.au&&(p=Yh.K(),c=this.Jd(),(i=c.An(l,t,a,e,p))&&(n=(l-p.x)*(l-p.x)+(t-p.y)*(t-p.y)));for(var y=0;y<d;y++){var v=f[y];v.visible&&v!==c&&v.An(l,t,a,e,u)&&(i=!0,(v=(l-u.x)*(l-u.x)+(t-u.y)*(t-u.y))<h&&(h=v,o.set(u)))}this.au&&(n>h&&o.set(p),Yh.v(p)),Yh.v(u),r&&o.transform(s)}return i},Uh.H=function(t){To.prototype.H.call(this,t),this.ma!==Zc&&this.ma!==id||null!==(t=this.Jd())&&t.H(!0),t=this.xa.n;for(var n=t.length,i=0;i<n;i++){var e=t[i];if(!e.Ba.I()){var o=Eo(e,!1);(e instanceof Bl||e instanceof tr||e instanceof qr||o!==Bc)&&e.H(!0)}}},Uh.$p=function(){if(!1===Jo(this)){Yo(this,!0),Xo(this,!0);for(var t=this.xa.n,n=t.length,i=0;i<n;i++)t[i].$p()}},Uh.Ji=function(){if(0!=(2048&this.P)==!1){Ko(this,!0),Uo(this,!0);for(var t=this.xa.n,n=t.length,i=0;i<n;i++)t[i].wA()}},Uh.wA=function(){Uo(this,!0);for(var t=this.xa.n,n=t.length,i=0;i<n;i++)t[i].wA()},Uh.Mn=function(t,n,i,e){var o=this.fj;o.width=0,o.height=0;var r=this.Ba,s=this.Ah;void 0===i&&(i=s.width,e=s.height),i=Math.max(i,s.width),e=Math.max(e,s.height);var l=this.Cf;isNaN(r.width)||(t=Math.min(r.width,l.width)),isNaN(r.height)||(n=Math.min(r.height,l.height)),t=Math.max(i,t),n=Math.max(e,n);var a=this.padding;t=Math.max(t-a.left-a.right,0),n=Math.max(n-a.top-a.bottom,0);var h=this.xa.n;if(0!==h.length){var u=this.ma.Rb;switch(u){case"Position":var c=t,d=n,p=i,y=e,v=h.length;o.x=0,o.y=0,o.width=0,o.height=0;for(var g=lr(this),m=0;m<v;m++){var b=h[m];if(b.visible||b===g){var w=b.margin,k=w.right+w.left,M=w.top+w.bottom;Do(b,c,d,p,y);var S=b.za,C=Math.max(S.width+k,0),N=Math.max(S.height+M,0),j=b.position.x,D=b.position.y;if(isFinite(j)||(j=0),isFinite(D)||(D=0),b instanceof Cr){var A=b;if(A.jF)var F=A.kb/2,j=j-F,D=D-F}L(o,j,D,C,N)}}break;case"Vertical":for(var O=t,B=i,q=h.length,z=Yh.lb(),E=lr(this),I=0;I<q;I++){var R=h[I];if(R.visible||R===E){var G=Eo(R,!1);if(G!==Bc&&G!==zc)z.push(R);else{var V=R.margin,H=V.right+V.left,K=V.top+V.bottom;Do(R,O,1/0,B,0);var U=R.za,J=Math.max(U.width+H,0),Y=Math.max(U.height+K,0);o.width=Math.max(o.width,J),o.height+=Y}}}var W=z.length;if(0!==W){for(this.Ba.width?O=Math.min(this.Ba.width,this.Cf.width):0!==o.width&&(O=Math.min(o.width,this.Cf.width)),I=0;I<W;I++)R=z[I],(R.visible||R===E)&&(V=R.margin,H=V.right+V.left,K=V.top+V.bottom,Do(R,O,1/0,B,0),U=R.za,J=Math.max(U.width+H,0),Y=Math.max(U.height+K,0),o.width=Math.max(o.width,J),o.height+=Y);Yh.wa(z)}break;case"Horizontal":for(var $=n,Q=e,Z=h.length,_=Yh.lb(),tt=lr(this),nt=0;nt<Z;nt++){var it=h[nt];if(it.visible||it===tt){var et=Eo(it,!1);if(et!==Bc&&et!==Ec)_.push(it);else{var ot=it.margin,rt=ot.right+ot.left,st=ot.top+ot.bottom;Do(it,1/0,$,0,Q);var lt=it.za,at=Math.max(lt.width+rt,0),ht=Math.max(lt.height+st,0);o.width+=at,o.height=Math.max(o.height,ht)}}}var ut=_.length;if(0!==ut){for(this.Ba.height?$=Math.min(this.Ba.height,this.Cf.height):0!==o.height&&($=Math.min(o.height,this.Cf.height)),nt=0;nt<ut;nt++)it=_[nt],(it.visible||it===tt)&&(ot=it.margin,rt=ot.right+ot.left,st=ot.top+ot.bottom,Do(it,1/0,$,0,Q),lt=it.za,at=Math.max(lt.width+rt,0),ht=Math.max(lt.height+st,0),o.width+=at,o.height=Math.max(o.height,ht));Yh.wa(_)}break;case"Spot":t:{var ft=t,ct=n,dt=i,pt=e,yt=h.length,vt=this.Jd(),gt=vt.margin,mt=0,bt=0,xt=gt.right+gt.left,wt=gt.top+gt.bottom;Do(vt,ft,ct,dt,pt);for(var kt=vt.za,Mt=kt.width,Pt=kt.height,Tt=Math.max(Mt+xt,0),St=Math.max(Pt+wt,0),Ct=this.au,Nt=Yh.ig(-gt.left,-gt.top,Tt,St),jt=!0,Lt=lr(this),Dt=0;Dt<yt;Dt++){var At=h[Dt];if(At!==vt&&(At.visible||At===Lt)){gt=At.margin,mt=gt.right+gt.left,bt=gt.top+gt.bottom,Do(At,ft,ct,0,0);var kt=At.za,Tt=Math.max(kt.width+mt,0),St=Math.max(kt.height+bt,0),Ft=At.alignment;Ft.Vc()&&(Ft=this.Ml),Ft.fd()||(Ft=lu);var Ot=At.ph;Ot.Vc()&&(Ot=lu);var Bt=null;At instanceof tr&&""!==At.Hj&&(At.ic(0,0,kt.width,kt.height),(Bt=At.ud(At.Hj))===At&&(Bt=null));var qt,zt;if(null!==Bt){for(var Et=Bt.Ia,It=Bt.margin,Rt=Yh.xb(Ot.x*Et.width+Ot.offsetX-It.left,Ot.y*Et.height+Ot.offsetY-It.top);Bt!==At;)Bt.transform.nb(Rt),Bt=Bt.O;qt=Ft.x*Mt+Ft.offsetX-Rt.x,zt=Ft.y*Pt+Ft.offsetY-Rt.y,Yh.v(Rt)}else qt=Ft.x*Mt+Ft.offsetX-(Ot.x*kt.width-Ot.offsetX)-gt.left,zt=Ft.y*Pt+Ft.offsetY-(Ot.y*kt.height-Ot.offsetY)-gt.top;jt?(jt=!1,o.x=qt,o.y=zt,o.width=Tt,o.height=St):L(o,qt,zt,Tt,St)}}jt?o.assign(Nt):Ct?o.dF(Nt.x,Nt.y,Nt.width,Nt.height):L(o,Nt.x,Nt.y,Nt.width,Nt.height),Yh.Db(Nt);var Gt=vt.stretch;switch(Gt===qc&&(Gt=Eo(vt,!1)),Gt){case Bc:break t;case Ic:if(!isFinite(ft)&&!isFinite(ct))break t;break;case Ec:if(!isFinite(ft))break t;break;case zc:if(!isFinite(ct))break t}for(kt=vt.za,Mt=kt.width,Pt=kt.height,Tt=Math.max(Mt+xt,0),St=Math.max(Pt+wt,0),gt=vt.margin,Nt=Yh.ig(-gt.left,-gt.top,Tt,St),Dt=0;Dt<yt;Dt++)(At=h[Dt])===vt||!At.visible&&At!==Lt||(gt=At.margin,mt=gt.right+gt.left,bt=gt.top+gt.bottom,kt=At.za,Tt=Math.max(kt.width+mt,0),St=Math.max(kt.height+bt,0),Ft=At.alignment,Ft.Vc()&&(Ft=this.Ml),Ft.fd()||(Ft=lu),Ot=At.ph,Ot.Vc()&&(Ot=lu),jt?(jt=!1,o.x=Ft.x*Mt+Ft.offsetX-(Ot.x*kt.width-Ot.offsetX)-gt.left,o.y=Ft.y*Pt+Ft.offsetY-(Ot.y*kt.height-Ot.offsetY)-gt.top,o.width=Tt,o.height=St):L(o,Ft.x*Mt+Ft.offsetX-(Ot.x*kt.width-Ot.offsetX)-gt.left,Ft.y*Pt+Ft.offsetY-(Ot.y*kt.height-Ot.offsetY)-gt.top,Tt,St));jt?o.assign(Nt):Ct?o.dF(Nt.x,Nt.y,Nt.width,Nt.height):L(o,Nt.x,Nt.y,Nt.width,Nt.height),Yh.Db(Nt)}break;case"Auto":var Vt=t,Ht=n,Kt=i,Ut=e,Jt=h.length,Yt=this.Jd(),Wt=Yt.margin,Xt=Vt,$t=Ht,Qt=Wt.right+Wt.left,Zt=Wt.top+Wt.bottom;Do(Yt,Vt,Ht,Kt,Ut);var _t=Yt.za,tn=0,nn=null;Yt instanceof Cr&&(nn=Yt,tn=nn.kb*nn.scale);var en=Math.max(_t.width+Qt,0),on=Math.max(_t.height+Zt,0),rn=yr(Yt),sn=rn.x*en+rn.offsetX,ln=rn.y*on+rn.offsetY,an=vr(Yt),hn=an.x*en+an.offsetX,un=an.y*on+an.offsetY;isFinite(Vt)&&(Xt=Math.max(Math.abs(sn-hn)-tn,0)),isFinite(Ht)&&($t=Math.max(Math.abs(ln-un)-tn,0));var fn=Yh.jm();fn.m(0,0);for(var cn=lr(this),dn=0;dn<Jt;dn++){var pn=h[dn];if(pn!==Yt&&(pn.visible||pn===cn)){var Wt=pn.margin,yn=Wt.right+Wt.left,vn=Wt.top+Wt.bottom;Do(pn,Xt,$t,0,0),_t=pn.za,en=Math.max(_t.width+yn,0),on=Math.max(_t.height+vn,0),fn.m(Math.max(en,fn.width),Math.max(on,fn.height))}}if(1===Jt)o.width=en,o.height=on,Yh.Ak(fn);else{var rn=yr(Yt),an=vr(Yt),gn=0,mn=0;an.x!==rn.x&&an.y!==rn.y&&(gn=fn.width/Math.abs(an.x-rn.x),mn=fn.height/Math.abs(an.y-rn.y)),Yh.Ak(fn),tn=0,null!==nn&&(tn=nn.kb*nn.scale,Dr(nn)===Rc&&(gn=mn=Math.max(gn,mn)));var gn=gn+(Math.abs(rn.offsetX)+Math.abs(an.offsetX)+tn),mn=mn+(Math.abs(rn.offsetY)+Math.abs(an.offsetY)+tn),bn=Yt.stretch;switch(bn===qc&&(bn=Eo(Yt,!1)),bn){case Bc:Ut=Kt=0;break;case Ic:isFinite(Vt)&&(gn=Vt),isFinite(Ht)&&(mn=Ht);break;case Ec:isFinite(Vt)&&(gn=Vt),Ut=0;break;case zc:Kt=0,isFinite(Ht)&&(mn=Ht)}Yt.$p(),Do(Yt,gn,mn,Kt,Ut),o.width=Yt.za.width+Qt,o.height=Yt.za.height+Zt}break;case"Table":for(var xn=t,wn=n,kn=i,Mn=e,Pn=h.length,Tn=Yh.lb(),Sn=Yh.lb(),Cn=0;Cn<Pn;Cn++){var Nn=h[Cn],jn=Nn instanceof tr?Nn:null;if(null===jn||jn.type!==td&&jn.type!==nd||!Nn.visible)Tn.push(Nn);else{Sn.push(jn);for(var Ln=jn.xa.n,Dn=Ln.length,An=0;An<Dn;An++){var Fn=Ln[An];jn.type===td?Fn.$b=Nn.$b:jn.type===nd&&(Fn.column=Nn.column),Tn.push(Fn)}}}Pn=Tn.length,0===Pn&&(this.be(0),this.ae(0));for(var On=[],Cn=0;Cn<Pn;Cn++)Nn=Tn[Cn],Yo(Nn,!0),Xo(Nn,!0),On[Nn.$b]||(On[Nn.$b]=[]),On[Nn.$b][Nn.column]||(On[Nn.$b][Nn.column]=[]),On[Nn.$b][Nn.column].push(Nn);Yh.wa(Tn);for(var Bn=Yh.lb(),qn=Yh.lb(),zn=Yh.lb(),En={count:0},In={count:0},Rn=xn,Gn=wn,Vn=this.Yd,Pn=Vn.length,Cn=0;Cn<Pn;Cn++){var Hn=Vn[Cn];void 0!==Hn&&(Hn.Ja=0)}for(Vn=this.Td,Pn=Vn.length,Cn=0;Cn<Pn;Cn++)void 0!==(Hn=Vn[Cn])&&(Hn.Ja=0);for(var Kn=On.length,Un=0,Cn=0;Cn<Kn;Cn++)On[Cn]&&(Un=Math.max(Un,On[Cn].length));for(var Jn=Math.min(this.ej,Kn-1),Yn=Math.min(this.Oi,Un-1),Wn=0,Kn=On.length,Xn=lr(this),Cn=0;Cn<Kn;Cn++)if(On[Cn])for(var Un=On[Cn].length,$n=this.be(Cn),An=$n.Ja=0;An<Un;An++)if(On[Cn][An]){var Qn=this.ae(An);void 0===Bn[An]&&(Qn.Ja=0,Bn[An]=!0);for(var Zn=On[Cn][An],_n=Zn.length,ti=0;ti<_n;ti++)if(Nn=Zn[ti],Nn.visible||Nn===Xn){var ni=1<Nn.aj||1<Nn.yi;ni&&(Cn<Jn||An<Yn||qn.push(Nn));var ii=Nn.margin,ei=ii.right+ii.left,oi=ii.top+ii.bottom,ri=Io(Nn,$n,Qn,!1),si=Nn.Ba,li=!isNaN(si.height),ai=!isNaN(si.width)&&li;if(ni||ri===Bc||ai||Cn<Jn||An<Yn||(void 0!==En[An]||ri!==Ic&&ri!==Ec||(En[An]=-1,En.count++),void 0!==In[Cn]||ri!==Ic&&ri!==zc||(In[Cn]=-1,In.count++),zn.push(Nn)),Do(Nn,1/0,1/0,0,0),!(Cn<Jn||An<Yn)){var hi=Nn.za,ui=Math.max(hi.width+ei,0),fi=Math.max(hi.height+oi,0);if(1===Nn.aj&&(ri===Bc||ri===Ec)){var Hn=this.be(Cn),ci=Hn.Ye(),Wn=Math.max(fi-Hn.Ja,0);Wn+ci>Gn&&(Wn=Math.max(Gn-ci,0));var di=0===Hn.Ja;Hn.Ja+=Wn,Gn=Math.max(Gn-(Wn+(di?ci:0)),0)}1!==Nn.yi||ri!==Bc&&ri!==zc||(Hn=this.ae(An),ci=Hn.Ye(),Wn=Math.max(ui-Hn.Ja,0),Wn+ci>Rn&&(Wn=Math.max(Rn-ci,0)),di=0===Hn.Ja,Hn.Ja+=Wn,Rn=Math.max(Rn-(Wn+(di?ci:0)),0)),ni&&Nn.$p()}}}Yh.wa(Bn);for(var pi=0,yi=0,Pn=this.Jp,Cn=0;Cn<Pn;Cn++){var vi=this.Td[Cn];void 0!==vi&&(pi+=vi.Sa,0!==vi.Sa&&(pi+=vi.Ye()))}for(Pn=this.pq,Cn=0;Cn<Pn;Cn++){var gi=this.Yd[Cn];void 0!==gi&&(yi+=gi.Sa,0!==gi.Sa&&(yi+=gi.Ye()))}for(var Rn=Math.max(xn-pi,0),mi=Gn=Math.max(wn-yi,0),bi=Rn,Pn=zn.length,Cn=0;Cn<Pn;Cn++){var Nn=zn[Cn],$n=this.be(Nn.$b),Qn=this.ae(Nn.column),xi=Nn.za,ii=Nn.margin,ei=ii.right+ii.left,oi=ii.top+ii.bottom;En[Nn.column]=0===Qn.Ja&&void 0!==En[Nn.column]?Math.max(xi.width+ei,En[Nn.column]):null,In[Nn.$b]=0===$n.Ja&&void 0!==In[Nn.$b]?Math.max(xi.height+oi,In[Nn.$b]):null}var wi,ki=0,Mi=0;for(wi in In)"count"!==wi&&(ki+=In[wi]);for(wi in En)"count"!==wi&&(Mi+=En[wi]);for(var Pi=Yh.jm(),Cn=0;Cn<Pn;Cn++)if(Nn=zn[Cn],Nn.visible||Nn===Xn){var $n=this.be(Nn.$b),Qn=this.ae(Nn.column),Ti=0;isFinite(Qn.width)?Ti=Qn.width:(Ti=isFinite(Rn)&&null!==En[Nn.column]?0===Mi?Qn.Ja+Rn:En[Nn.column]/Mi*bi:null!==En[Nn.column]?Rn:Qn.Ja||Rn,Ti=Math.max(0,Ti-Qn.Ye()));var Si=0;switch(isFinite($n.height)?Si=$n.height:(Si=isFinite(Gn)&&null!==In[Nn.$b]?0===ki?$n.Ja+Gn:In[Nn.$b]/ki*mi:null!==In[Nn.$b]?Gn:$n.Ja||Gn,Si=Math.max(0,Si-$n.Ye())),Pi.m(Math.max(Qn.yj,Math.min(Ti,Qn.nf)),Math.max($n.yj,Math.min(Si,$n.nf))),ri=Io(Nn,$n,Qn,!1)){case Ec:Pi.height=Math.max(Pi.height,$n.Ja+Gn);break;case zc:Pi.width=Math.max(Pi.width,Qn.Ja+Rn)}ii=Nn.margin,ei=ii.right+ii.left,oi=ii.top+ii.bottom,Nn.$p(),Do(Nn,Pi.width,Pi.height,Qn.yj,$n.yj),hi=Nn.za,ui=Math.max(hi.width+ei,0),fi=Math.max(hi.height+oi,0),isFinite(Rn)&&(ui=Math.min(ui,Pi.width)),isFinite(Gn)&&(fi=Math.min(fi,Pi.height));var Ci=0,Ci=$n.Ja;$n.Ja=Math.max($n.Ja,fi),Wn=$n.Ja-Ci,Gn=Math.max(Gn-Wn,0),Ci=Qn.Ja,Qn.Ja=Math.max(Qn.Ja,ui),Wn=Qn.Ja-Ci,Rn=Math.max(Rn-Wn,0)}Yh.wa(zn);for(var Ni=Yh.jm(),Pn=qn.length,Cn=0;Cn<Pn;Cn++)if(Nn=qn[Cn],Nn.visible||Nn===Xn){switch($n=this.be(Nn.$b),Qn=this.ae(Nn.column),Pi.m(Math.max(Qn.yj,Math.min(xn,Qn.nf)),Math.max($n.yj,Math.min(wn,$n.nf))),ri=Io(Nn,$n,Qn,!1)){case Ic:0!==Qn.Ja&&(Pi.width=Math.min(Pi.width,Qn.Ja)),0!==$n.Ja&&(Pi.height=Math.min(Pi.height,$n.Ja));break;case Ec:0!==Qn.Ja&&(Pi.width=Math.min(Pi.width,Qn.Ja));break;case zc:0!==$n.Ja&&(Pi.height=Math.min(Pi.height,$n.Ja))}isFinite(Qn.width)&&(Pi.width=Qn.width),isFinite($n.height)&&(Pi.height=$n.height),Ni.m(0,0);for(var ji=1;ji<Nn.aj&&!(Nn.$b+ji>=this.pq);ji++)Hn=this.be(Nn.$b+ji),Ni.height+=Math.max(Hn.yj,isNaN(Hn.gf)?Hn.nf:Math.min(Hn.gf,Hn.nf));for(ji=1;ji<Nn.yi&&!(Nn.column+ji>=this.Jp);ji++)Hn=this.ae(Nn.column+ji),Ni.width+=Math.max(Hn.yj,isNaN(Hn.gf)?Hn.nf:Math.min(Hn.gf,Hn.nf));Pi.width+=Ni.width,Pi.height+=Ni.height,ii=Nn.margin,ei=ii.right+ii.left,oi=ii.top+ii.bottom,Do(Nn,Pi.width,Pi.height,kn,Mn);for(var hi=Nn.za,ui=Math.max(hi.width+ei,0),fi=Math.max(hi.height+oi,0),Li=0,ji=0;ji<Nn.aj&&!(Nn.$b+ji>=this.pq);ji++)Hn=this.be(Nn.$b+ji),Li+=Hn.total||0;if(Li<fi){var Di=fi-Li,Ai=fi-Li;if(null!==Nn.ly)for(var Fi=Nn.ly,ji=0;ji<Nn.aj&&!(0>=Di)&&!(Nn.$b+ji>=this.pq);ji++){var Hn=this.be(Nn.$b+ji),Oi=Hn.Sa||0,Bi=Fi(Nn,Hn,Ai);Hn.Ja=Math.min(Hn.nf,Oi+Bi),Hn.Sa!==Oi&&(Di-=Hn.Sa-Oi)}for(;0<Di&&(Oi=Hn.Sa||0,isNaN(Hn.height)&&Hn.nf>Oi&&(Hn.Ja=Math.min(Hn.nf,Oi+Di),Hn.Sa!==Oi&&(Di-=Hn.Sa-Oi)),0!==Hn.index);)Hn=this.be(Hn.index-1)}for(var qi=0,ji=0;ji<Nn.yi&&!(Nn.column+ji>=this.Jp);ji++)Hn=this.ae(Nn.column+ji),qi+=Hn.total||0;if(qi<ui){if(Di=ui-qi,Ai=ui-qi,null!==Nn.ly)for(Fi=Nn.ly,ji=0;ji<Nn.yi&&!(0>=Di)&&!(Nn.column+ji>=this.Jp);ji++)Hn=this.ae(Nn.column+ji),Oi=Hn.Sa||0,Bi=Fi(Nn,Hn,Ai),Hn.Ja=Math.min(Hn.nf,Oi+Bi),Hn.Sa!==Oi&&(Di-=Hn.Sa-Oi);for(;0<Di&&(Oi=Hn.Sa||0,isNaN(Hn.width)&&Hn.nf>Oi&&(Hn.Ja=Math.min(Hn.nf,Oi+Di),Hn.Sa!==Oi&&(Di-=Hn.Sa-Oi)),0!==Hn.index);)Hn=this.ae(Hn.index-1)}}Yh.wa(qn),Yh.Ak(Ni),Yh.Ak(Pi);for(var zi=0,Ei=0,ri=Eo(this,!0),Ii=this.Ba,Ri=this.Cf,Gi=yi=pi=0,Vi=0,Pn=this.Jp,Cn=0;Cn<Pn;Cn++)void 0!==this.Td[Cn]&&(Hn=this.ae(Cn),isFinite(Hn.width)?(Gi+=Hn.width,Gi+=Hn.Ye()):Sr(Hn)===ad?(Gi+=Hn.Sa,Gi+=Hn.Ye()):0!==Hn.Sa&&(pi+=Hn.Sa,pi+=Hn.Ye()));var zi=isFinite(Ii.width)?Math.min(Ii.width,Ri.width):ri!==Bc&&isFinite(xn)?xn:pi,zi=Math.max(zi,this.Ah.width),zi=Math.max(zi-Gi,0),Hi=Math.max(zi/pi,1);for(isFinite(Hi)||(Hi=1),Cn=0;Cn<Pn;Cn++)void 0!==this.Td[Cn]&&(Hn=this.ae(Cn),isFinite(Hn.width)||Sr(Hn)===ad||(Hn.Ja=Hn.Sa*Hi),Hn.position=o.width,0!==Hn.Sa&&(o.width+=Hn.Sa,o.width+=Hn.Ye()));for(Pn=this.pq,Cn=0;Cn<Pn;Cn++)void 0!==this.Yd[Cn]&&(Hn=this.be(Cn),isFinite(Hn.height)?(Vi+=Hn.height,Vi+=Hn.Ye()):Sr(Hn)===ad?(Vi+=Hn.Sa,Vi+=Hn.Ye()):0!==Hn.Sa&&(yi+=Hn.Sa,0!==Hn.Sa&&(yi+=Hn.Ye())));var Ei=isFinite(Ii.height)?Math.min(Ii.height,Ri.height):ri!==Bc&&isFinite(wn)?wn:yi,Ei=Math.max(Ei,this.Ah.height),Ei=Math.max(Ei-Vi,0),Ki=Math.max(Ei/yi,1);for(isFinite(Ki)||(Ki=1),Cn=0;Cn<Pn;Cn++)void 0!==this.Yd[Cn]&&(Hn=this.be(Cn),isFinite(Hn.height)||Sr(Hn)===ad||(Hn.Ja=Hn.Sa*Ki),Hn.position=o.height,0!==Hn.Sa&&(o.height+=Hn.Sa,0!==Hn.Sa&&(o.height+=Hn.Ye())));for(Pn=Sn.length,Cn=0;Cn<Pn;Cn++){var Ui=Sn[Cn];Ui.type===td?(Ti=o.width,Hn=this.be(Ui.$b),Si=Hn.Ja):(Hn=this.ae(Ui.column),Ti=Hn.Ja,Si=o.height),Ui.qd.m(0,0,Ti,Si),Yo(Ui,!1),On[Ui.$b]||(On[Ui.$b]=[]),On[Ui.$b][Ui.column]||(On[Ui.$b][Ui.column]=[]),On[Ui.$b][Ui.column].push(Ui)}Yh.wa(Sn),this.Os=On;break;case"Viewbox":var Ji=t,Yi=n,Wi=i,Xi=e;1<h.length&&Yh.k("Viewbox Panel cannot contain more than one GraphObject.");var $i=h[0];$i.tb=1,$i.$p(),Do($i,1/0,1/0,Wi,Xi);var Qi=$i.za,Zi=$i.margin,_i=Zi.right+Zi.left,te=Zi.top+Zi.bottom;if(isFinite(Ji)||isFinite(Yi)){var ne=$i.scale,ie=Qi.width,ee=Qi.height,oe=Math.max(Ji-_i,0),re=Math.max(Yi-te,0),se=1;this.Cp===Rc?0!==ie&&0!==ee&&(se=Math.min(oe/ie,re/ee)):0!==ie&&0!==ee&&(se=Math.max(oe/ie,re/ee)),0===se&&(se=1e-4),$i.tb*=se,ne!==$i.scale&&(Yo($i,!0),Do($i,1/0,1/0,Wi,Xi))}Qi=$i.za,o.width=isFinite(Ji)?Ji:Math.max(Qi.width+_i,0),o.height=isFinite(Yi)?Yi:Math.max(Qi.height+te,0);break;case"Link":var le=h.length;if(this instanceof Ds||this instanceof Js){var ae=null;if(this instanceof Js&&(ae=this),this instanceof Ds&&(ae=this.Pf),ae instanceof Js){var he=ae;if(0===le){var ue=this.Ia;T(ue,0,0);var fe=this.za;fe.m(0,0,0,0)}else{var ce=this instanceof Ds?null:ae.path,de=ae.Vn,pe=this.fj;pe.assign(de),pe.x=0,pe.y=0;var ye=he.points,ve=ae.qa;this.nu(!1);var ge=de.width,me=de.height;this.Ri.m(de.x,de.y),null===this.ah&&(this.ah=new f(P)),this.ah.clear(),null!==ce&&(Lr(ce,ge,me,this),fe=ce.za,pe.Hh(fe),this.ah.add(fe));for(var be=Yh.Gf(),xe=Yh.K(),we=Yh.K(),ke=0;ke<le;ke++){var Me=h[ke];if(Me!==ce)if(Me.Wf&&Me instanceof Cr)Lr(Me,ge,me,this),fe=Me.za,pe.Hh(fe),this.ah.add(fe);else if(2>ve)Do(Me,1/0,1/0),fe=Me.za,pe.Hh(fe),this.ah.add(fe);else{var Pe=Me.Me,Te=Me.aB,Se=Me.ph;Se.Od()&&(Se=lu);var Ce=Me.qq,Ne=Me.bB,je=0,Le=0,De=0;if(Pe<-ve||Pe>=ve){var Ae=he.AF,Fe=he.zF;Ce!==Vd&&(De=he.computeAngle(Me,Ce,Fe),Me.jg=De),je=Ae.x-de.x,Le=Ae.y-de.y}else{var Oe,Be;if(0<=Pe)Oe=ye.ea(Pe),Be=Pe<ve-1?ye.ea(Pe+1):Oe;else{var qe=ve+Pe;Oe=ye.ea(qe),Be=0<qe?ye.ea(qe-1):Oe}if(Oe.Ic(Be)){var ze,Ee;0<=Pe?(ze=0<Pe?ye.ea(Pe-1):Oe,Ee=Pe<ve-2?ye.ea(Pe+2):Be):(ze=qe<ve-1?ye.ea(qe+1):Oe,Ee=1<qe?ye.ea(qe-2):Be);var Ie=ze.wf(Oe),Re=Be.wf(Ee),Fe=Ie>Re+10?0<=Pe?ze.Ob(Oe):Oe.Ob(ze):Re>Ie+10?0<=Pe?Be.Ob(Ee):Ee.Ob(Be):0<=Pe?ze.Ob(Ee):Ee.Ob(ze)}else Fe=0<=Pe?Oe.Ob(Be):Be.Ob(Oe);Ce!==Vd&&(De=he.computeAngle(Me,Ce,Fe),Me.jg=De),je=Oe.x+(Be.x-Oe.x)*Te-de.x,Le=Oe.y+(Be.y-Oe.y)*Te-de.y}Do(Me,1/0,1/0);var fe=Me.za,ue=Me.Ia,Ge=0;Me instanceof Cr&&(Ge=Me.kb);var Ve=ue.width+Ge,He=ue.height+Ge;be.reset(),be.translate(-fe.x,-fe.y),be.scale(Me.scale,Me.scale),be.rotate(Ce===Vd?Me.angle:Fe,Ve/2,He/2),Ce!==$d&&Ce!==tp||be.rotate(90,Ve/2,He/2),Ce!==Qd&&Ce!==np||be.rotate(-90,Ve/2,He/2),Ce===ip&&(45<Fe&&135>Fe||225<Fe&&315>Fe)&&be.rotate(-Fe,Ve/2,He/2);var Ke=new P(0,0,Ve,He);xe.Wn(Ke,Se),be.nb(xe);var Ue=-xe.x+Ge/2,Je=-xe.y+Ge/2;we.assign(Ne),isNaN(we.x)&&(we.x=0<=Pe?Ve/2+3:-(Ve/2+3)),isNaN(we.y)&&(we.y=-(He/2+3)),we.rotate(Fe),je+=we.x,Le+=we.y,Ke.set(fe),Ke.x=je+Ue,Ke.y=Le+Je,this.ah.add(Ke),pe.Hh(Ke)}}if(this instanceof Js)for(var Ye=this.Xf;Ye.next();)Do(Ye.value,1/0,1/0);this.fj=pe;var We=this.Ri;We.m(We.x+pe.x,We.y+pe.y),T(o,pe.width||0,pe.height||0),Yh.ue(be),Yh.v(xe),Yh.v(we)}}}break;case"Grid":break;case"Graduated":var Xe=t,$e=n,Qe=i,Ze=e,_e=this.Jd();this.xm=[];var to=_e.margin,no=to.right+to.left,io=to.top+to.bottom;Do(_e,Xe,$e,Qe,Ze);var eo=_e.za,oo=eo.height,ro=Math.max(eo.width+no,0),so=Math.max(oo+io,0),lo=new P(-to.left,-to.top,ro,so);this.xm.push(lo),o.assign(lo);for(var ao=_e.hf,ho=_e.kb,uo=ao.px,fo=ao.Ot,co=ao.Pt,po=uo.length,yo=0,vo=0,go=Yh.lb(),mo=0;mo<po;mo++){for(var bo=uo[mo],xo=[],vo=yo=0,wo=bo.length,ko=0;ko<wo;ko+=2){var Mo=bo[ko],Po=bo[ko+1];if(0!==ko){var To=180*Math.atan2(Po-vo,Mo-yo)/Math.PI;0>To&&(To+=360),xo.push(To)}yo=Mo,vo=Po}go.push(xo)}var So;if(null===this.Tj){for(var Co=[],No=this.xa.n,Lo=No.length,Ao=0;Ao<Lo;Ao++){var Fo=No[Ao],Oo=[];if(Co.push(Oo),Fo.visible)for(var Bo=Fo.interval,qo=0;qo<Lo;qo++){var zo=No[qo];if(zo.visible&&Fo!==zo&&!(Fo instanceof Cr&&!(zo instanceof Cr)||Fo instanceof qr&&!(zo instanceof qr))){var Ro=zo.interval;Ro>Bo&&Oo.push(Ro)}}}this.Tj=Co}So=this.Tj;var Go=this.xa.n,Vo=Go.length,Ho=0,Ko=0,Uo=co;this.zm=[];for(var Jo=[],Wo=0;Wo<Vo;Wo++){var $o=Go[Wo],Jo=[];if($o.visible&&$o!==_e){var Qo=$o.interval,Zo=this.qA;if(!(2>Zo*Qo*co/this.Wt)){var _o=this.YE,nr=So[Wo],er=fo[0][0],or=0,rr=0,Ko=co*$o.XE-1e-4,Uo=co*$o.VE+1e-4,sr=Zo*Qo;if(_o<this.Ck)var ar=(this.Ck-_o)/sr,ar=0==ar%1?ar:Math.floor(ar+1),_o=_o+ar*sr;else _o>this.Ck+sr&&(ar=Math.floor((_o-this.Ck)/sr),_o-=ar*sr);for(;_o<=this.pA;){var hr;t:{for(var ur=nr.length,fr=0;fr<ur;fr++)if(X((_o-this.YE)%(nr[fr]*this.qA),0)){hr=!1;break t}hr=!0}if(hr&&(Ho=(_o-this.Ck)*co/this.Wt,Ho>co&&(Ho=co),Ko<=Ho&&Ho<=Uo)){for(var To=go[or][rr],cr=fo[or][rr];or<fo.length;){for(;Ho>er&&rr<fo[or].length-1;)rr++,To=go[or][rr],cr=fo[or][rr],er+=cr;if(Ho<=er)break;or++,rr=0,To=go[or][rr],cr=fo[or][rr],er+=cr}var dr=uo[or],pr=dr[2*rr],gr=dr[2*rr+1],mr=(Ho-(er-cr))/cr,br=new x(pr+(dr[2*rr+2]-pr)*mr+ho/2-ao.eb.x,gr+(dr[2*rr+3]-gr)*mr+ho/2-ao.eb.y);br.scale(_e.scale,_e.scale);var xr=To,wr=go[or];if(1e-4>mr?0<rr?xr=wr[rr-1]:X(dr[0],dr[dr.length-2])&&X(dr[1],dr[dr.length-1])&&(xr=wr[wr.length-1]):.9999<mr&&(rr+1<wr.length?xr=wr[rr+1]:X(dr[0],dr[dr.length-2])&&X(dr[1],dr[dr.length-1])&&(xr=wr[0])),To!==xr&&(180<Math.abs(To-xr)&&(To<xr?To+=360:xr+=360),To=(To+xr)/2%360),$o instanceof qr){var kr="",kr=null!==$o.WE?$o.WE(_o):(+_o.toFixed(2)).toString();""!==kr&&Jo.push([br,To,kr])}else Jo.push([br,To])}_o+=sr}}}this.zm.push(Jo)}Yh.wa(go);for(var Mr=this.zm,Pr=h.length,Tr=0;Tr<Pr;Tr++){var Nr=h[Tr],jr=Mr[Tr];if(Nr.visible&&Nr!==_e&&0!==jr.length){if(Nr instanceof Cr){var Ar=Nr,Fr=jr,Or=o,Br=Ar.ph;Br.Od()&&(Br=ou);var zr=Ar.angle;Ar.jg=0,Do(Ar,1/0,1/0),Ar.jg=zr;var Er=Ar.za,Ir=Er.width,Rr=Er.height,Gr=Yh.ig(0,0,Ir,Rr),Vr=Yh.K();Vr.Wn(Gr,Br),Yh.Db(Gr);for(var Kr=-Vr.x,Ur=-Vr.y,Jr=new P,Yr=Fr.length,Wr=0;Wr<Yr;Wr++)for(var Xr=Fr[Wr],$r=Xr[0].x,Qr=Xr[0].y,Zr=Xr[1],_r=0;4>_r;_r++){switch(_r){case 0:Vr.m(Kr,Ur);break;case 1:Vr.m(Kr+Ir,Ur);break;case 2:Vr.m(Kr,Ur+Rr);break;case 3:Vr.m(Kr+Ir,Ur+Rr)}Vr.rotate(Zr+Ar.angle),Vr.offset($r,Qr),0===Wr&&0===_r?Jr.m(Vr.x,Vr.y,0,0):Jr.si(Vr),Vr.offset(-$r,-Qr),Vr.rotate(-Zr-Ar.angle)}Yh.v(Vr),this.xm.push(Jr),L(Or,Jr.x,Jr.y,Jr.width,Jr.height)}else if(Nr instanceof qr){var ts=Nr,ns=jr,is=o;null===this.lk&&(this.lk=new qr);var es=this.lk;ir(ts,es);var os=ts.ph;os.Od()&&(os=ou);for(var rs=ts.qq,ss=ts.bB,ls=null,as=0,hs=0,us=0,fs=0,cs=ns.length,ds=0;ds<cs;ds++){var ps=ns[ds],as=ps[0].x,hs=ps[0].y,us=ps[1];rs!==Vd&&(fs=Js.computeAngle(rs,us),es.jg=fs),es.text=ps[2],Do(es,1/0,1/0);var ys=es.za,vs=es.Ia,gs=vs.width,ms=vs.height,bs=Yh.Gf();bs.reset(),bs.translate(-ys.x,-ys.y),bs.scale(es.scale,es.scale),bs.rotate(rs===Vd?es.angle:us,gs/2,ms/2),rs!==$d&&rs!==tp||bs.rotate(90,gs/2,ms/2),rs!==Qd&&rs!==np||bs.rotate(-90,gs/2,ms/2),rs===ip&&(45<us&&135>us||225<us&&315>us)&&bs.rotate(-us,gs/2,ms/2);var xs=Yh.ig(0,0,gs,ms),ws=Yh.K();ws.Wn(xs,os),bs.nb(ws);var ks=-ws.x,Ms=-ws.y,Ps=Yh.K();Ps.assign(ss),isNaN(Ps.x)&&(Ps.x=gs/2+3),isNaN(Ps.y)&&(Ps.y=-(ms/2+3)),Ps.rotate(us);var as=as+(Ps.x+ks),hs=hs+(Ps.y+Ms),Ts=new P(as,hs,ys.width,ys.height),Ss=new P(ys.x,ys.y,ys.width,ys.height),Cs=new P(vs.x,vs.y,vs.width,vs.height),Ns=new Hr;Ns.Kp(es.tf),ps.push(fs),ps.push(es.je),ps.push(Ns),ps.push(Ts),ps.push(Ss),ps.push(Cs),0===ds?ls=Ts.copy():ls.Hh(Ts),Yh.v(Ps),Yh.v(ws),Yh.Db(xs),Yh.ue(bs)}this.xm.push(ls),L(is,ls.x,ls.y,ls.width,ls.height)}Yo(Nr,!1)}}break;case"TableRow":case"TableColumn":Yh.k(this.toString()+" is not an element of a Table Panel. TableRow and TableColumn Panels can only be elements of a Table Panel.");break;default:Yh.k("Unknown panel type: "+u)}}var js=o.width,Ls=o.height,As=this.padding,Fs=As.top+As.bottom,js=js+(As.left+As.right),Ls=Ls+Fs;isFinite(r.width)&&(js=r.width),isFinite(r.height)&&(Ls=r.height),js=Math.min(l.width,js),Ls=Math.min(l.height,Ls),js=Math.max(s.width,js),Ls=Math.max(s.height,Ls),js=Math.max(i,js),Ls=Math.max(e,Ls),o.width=js,o.height=Ls,T(this.Tc,js,Ls),jo(this,0,0,js,Ls)},tr.prototype.findMainElement=tr.prototype.Jd=function(){if(null===this.dn){var t=this.xa.n,n=t.length;if(0===n)return null;for(var i=0;i<n;i++){var e=t[i];if(!0===e.Wf)return this.dn=e}this.dn=t[0]}return this.dn},tr.prototype.ij=function(t,n,i,e){var o=this.fj,r=this.xa.n,s=Yh.ig(0,0,0,0);if(0===r.length){var l=this.W;l.x=t,l.y=n,l.width=i,l.height=e}else{if(!this.Ba.I()){var a=Eo(this,!0),h=this.qd,u=h.width,f=h.height,c=this.margin,d=c.left+c.right,p=c.top+c.bottom;switch(u===i&&f===e&&(a=Bc),a){case Bc:(u>i||f>e)&&(this.H(),Do(this,u>i?i:u,f>e?e:f));break;case Ic:this.H(!0),Do(this,i+d,e+p,0,0);break;case Ec:this.H(!0),Do(this,i+d,f+p,0,0);break;case zc:this.H(!0),Do(this,u+d,e+p,0,0)}}l=this.W,l.x=t,l.y=n,l.width=i,l.height=e;var y=this.ma.Rb;switch(y){case"Position":for(var v=r.length,g=o.x-this.padding.left,m=o.y-this.padding.top,b=0;b<v;b++){var w=r[b],k=w.za,M=w.margin,T=w.position.x,C=w.position.y;if(s.x=isNaN(T)?-g:T-g,s.y=isNaN(C)?-m:C-m,w instanceof Cr){var N=w;if(N.jF){var j=N.kb/2;s.x-=j,s.y-=j}}s.x+=M.left,s.y+=M.top,s.width=k.width,s.height=k.height,w.visible&&w.ic(s.x,s.y,s.width,s.height)}break;case"Vertical":for(var D=r.length,A=this.padding.left,F=this.qF,O=F?o.height:this.padding.top,B=0;B<D;B++){var q=A,z=r[B];if(z.visible){var E=z.za,I=z.margin,R=I.left+I.right,G=A+this.padding.right,V=E.width,H=Eo(z,!1);(isNaN(z.Ba.width)&&H===Ic||H===Ec)&&(V=Math.max(o.width-R-G,0));var K=V+R+G,U=z.alignment;U.Vc()&&(U=this.Ml),U.fd()||(U=lu),F&&(O-=E.height+I.bottom+I.top),z.ic(q+U.offsetX+I.left+(o.width*U.x-K*U.x),O+U.offsetY+I.top,V,E.height),F||(O+=E.height+I.bottom+I.top)}}break;case"Horizontal":for(var J=r.length,Y=this.padding.top,W=this.qF,X=W?o.width:this.padding.left,$=0;$<J;$++){var Q=Y,Z=r[$];if(Z.visible){var _=Z.za,tt=Z.margin,nt=tt.top+tt.bottom,it=Y+this.padding.bottom,et=_.height,ot=Eo(Z,!1);(isNaN(Z.Ba.height)&&ot===Ic||ot===zc)&&(et=Math.max(o.height-nt-it,0));var rt=et+nt+it,st=Z.alignment;st.Vc()&&(st=this.Ml),st.fd()||(st=lu),W&&(X-=_.width+tt.left+tt.right),Z.ic(X+st.offsetX+tt.left,Q+st.offsetY+tt.top+(o.height*st.y-rt*st.y),_.width,et),W||(X+=_.width+tt.left+tt.right)}}break;case"Spot":var lt=r.length,at=this.Jd(),ht=at.za,ut=ht.width,ft=ht.height,ct=this.padding,dt=ct.left,pt=ct.top;s.x=dt-o.x,s.y=pt-o.y,at.ic(s.x,s.y,ut,ft);for(var yt=0;yt<lt;yt++){var vt=r[yt];if(vt!==at){var gt=vt.za,mt=gt.width,bt=gt.height,xt=vt.alignment;xt.Vc()&&(xt=this.Ml),xt.fd()||(xt=lu);var wt=vt.ph;wt.Vc()&&(wt=lu);var kt=null;if(vt instanceof tr&&""!==vt.Hj&&(kt=vt.ud(vt.Hj))===vt&&(kt=null),null!==kt){for(var Mt=kt.Ia,Pt=Yh.xb(wt.x*Mt.width+wt.offsetX,wt.y*Mt.height+wt.offsetY);kt!==vt;)kt.transform.nb(Pt),kt=kt.O;s.x=xt.x*ut+xt.offsetX-Pt.x,s.y=xt.y*ft+xt.offsetY-Pt.y,Yh.v(Pt)}else s.x=xt.x*ut+xt.offsetX-(wt.x*mt-wt.offsetX),s.y=xt.y*ft+xt.offsetY-(wt.y*bt-wt.offsetY);s.x-=o.x,s.y-=o.y,vt.visible&&vt.ic(dt+s.x,pt+s.y,mt,bt)}}break;case"Auto":var Tt=r.length,St=this.Jd(),Ct=St.za,Nt=Yh.Ff();Nt.m(0,0,1,1);var jt=St.margin,Lt=jt.left,Dt=jt.top,At=this.padding,Ft=At.left,Ot=At.top;s.x=Lt,s.y=Dt,s.width=Ct.width,s.height=Ct.height,St.ic(Ft+s.x,Ot+s.y,s.width,s.height);var Bt=yr(St),qt=vr(St),zt=0+Bt.y*Ct.height+Bt.offsetY,Et=0+qt.x*Ct.width+qt.offsetX,It=0+qt.y*Ct.height+qt.offsetY;Nt.x=0+Bt.x*Ct.width+Bt.offsetX,Nt.y=zt,L(Nt,Et,It,0,0),Nt.x+=Lt+Ft,Nt.y+=Dt+Ot;for(var Rt=0;Rt<Tt;Rt++){var Gt=r[Rt];if(Gt!==St){var Vt=Gt.za,jt=Gt.margin,Ht=Math.max(Vt.width+jt.right+jt.left,0),Kt=Math.max(Vt.height+jt.top+jt.bottom,0),Ut=Gt.alignment;Ut.Vc()&&(Ut=this.Ml),Ut.fd()||(Ut=lu),s.x=Nt.width*Ut.x+Ut.offsetX-Ht*Ut.x+jt.left+Nt.x,s.y=Nt.height*Ut.y+Ut.offsetY-Kt*Ut.y+jt.top+Nt.y,s.width=Nt.width,s.height=Nt.height,Gt.visible&&(_h(Nt.x,Nt.y,Nt.width,Nt.height,s.x,s.y,Vt.width,Vt.height)?Gt.ic(s.x,s.y,Vt.width,Vt.height):Gt.ic(s.x,s.y,Vt.width,Vt.height,new P(Nt.x,Nt.y,Nt.width,Nt.height)))}}Yh.Db(Nt);break;case"Table":for(var Jt=r.length,Yt=this.padding,Wt=Yt.left,Xt=Yt.top,$t=this.Os,Qt=0,Zt=0,_t=$t.length,tn=0,nn=0;nn<_t;nn++)$t[nn]&&(tn=Math.max(tn,$t[nn].length));for(var en=Math.min(this.ej,_t-1);en!==_t&&(void 0===this.Yd[en]||0===this.Yd[en].Sa);)en++;for(var en=Math.min(en,_t-1),on=-this.Yd[en].ib,rn=Math.min(this.Oi,tn-1);rn!==tn&&(void 0===this.Td[rn]||0===this.Td[rn].Sa);)rn++;for(var rn=Math.min(rn,tn-1),sn=-this.Td[rn].ib,ln=Yh.jm(),nn=0;nn<_t;nn++)if($t[nn]){var tn=$t[nn].length,an=this.be(nn),Zt=an.ib+on+Xt;0!==an.Sa&&(Zt+=an.rE());for(var hn=0;hn<tn;hn++)if($t[nn][hn]){var un=this.ae(hn),Qt=un.ib+sn+Wt;0!==un.Sa&&(Qt+=un.rE());for(var fn=$t[nn][hn],cn=fn.length,dn=0;dn<cn;dn++){var pn=fn[dn],yn=pn.za,vn=pn instanceof tr?pn:null;if(null===vn||vn.type!==td&&vn.type!==nd){ln.m(0,0);for(var gn=1;gn<pn.rowSpan&&!(nn+gn>=this.pq);gn++){var mn=this.be(nn+gn);ln.height+=mn.total}for(gn=1;gn<pn.uH&&!(hn+gn>=this.Jp);gn++){var bn=this.ae(hn+gn);ln.width+=bn.total}var xn=un.Sa+ln.width,wn=an.Sa+ln.height;s.x=Qt,s.y=Zt,s.width=xn,s.height=wn;var kn=Qt,Mn=Zt,Pn=xn,Tn=wn;Qt+xn>o.width&&(Pn=Math.max(o.width-Qt,0)),Zt+wn>o.height&&(Tn=Math.max(o.height-Zt,0));var Sn=pn.alignment,Cn=0,Nn=0,jn=0,Ln=0;if(Sn.Vc()){Sn=this.Ml,Sn.fd()||(Sn=lu);var Cn=Sn.x,Nn=Sn.y,jn=Sn.offsetX,Ln=Sn.offsetY,Dn=un.alignment,An=an.alignment;Dn.fd()&&(Cn=Dn.x,jn=Dn.offsetX),An.fd()&&(Nn=An.y,Ln=An.offsetY)}else Cn=Sn.x,Nn=Sn.y,jn=Sn.offsetX,Ln=Sn.offsetY;(isNaN(Cn)||isNaN(Nn))&&(Nn=Cn=.5,Ln=jn=0);var Fn=yn.width,On=yn.height,Bn=pn.margin,qn=Bn.left+Bn.right,zn=Bn.top+Bn.bottom,En=Io(pn,an,un,!1);!isNaN(pn.Ba.width)||En!==Ic&&En!==Ec||(Fn=Math.max(xn-qn,0)),!isNaN(pn.Ba.height)||En!==Ic&&En!==zc||(On=Math.max(wn-zn,0));var In=pn.Cf,Rn=pn.Ah,Fn=Math.min(In.width,Fn),On=Math.min(In.height,On),Fn=Math.max(Rn.width,Fn),On=Math.max(Rn.height,On),Gn=On+zn;s.x+=s.width*Cn-(Fn+qn)*Cn+jn+Bn.left,s.y+=s.height*Nn-Gn*Nn+Ln+Bn.top,pn.visible&&(_h(kn,Mn,Pn,Tn,s.x,s.y,yn.width,yn.height)?pn.ic(s.x,s.y,Fn,On):pn.ic(s.x,s.y,Fn,On,new P(kn,Mn,Pn,Tn)))}else{pn.Ji(),pn.nc.Ra();var Vn=pn.nc,Hn=Yh.ig(Vn.x,Vn.y,Vn.width,Vn.height);if(Vn.x=vn.type===td?Wt:Qt,Vn.y=vn.type===nd?Xt:Zt,Vn.width=yn.width,Vn.height=yn.height,pn.nc.freeze(),Xo(pn,!1),!S(Hn,Vn)){var Kn=pn.U;null!==Kn&&(Kn.Ek(),pn.ss(Kn))}Yh.Db(Hn)}}}}for(Yh.Ak(ln),nn=0;nn<Jt;nn++)pn=r[nn],null===(vn=pn instanceof tr?pn:null)||vn.type!==td&&vn.type!==nd||(Vn=pn.nc,pn.Tc.Ra(),pn.Tc.m(0,0,Vn.width,Vn.height),pn.Tc.freeze());break;case"Viewbox":var Un=r[0],Jn=Un.za,Yn=Un.margin,Wn=Yn.top+Yn.bottom,Xn=Math.max(Jn.width+(Yn.right+Yn.left),0),$n=Math.max(Jn.height+Wn,0),Qn=Un.alignment;Qn.Vc()&&(Qn=this.Ml),Qn.fd()||(Qn=lu),s.x=o.width*Qn.x-Xn*Qn.x+Qn.offsetX,s.y=o.height*Qn.y-$n*Qn.y+Qn.offsetY,s.width=Jn.width,s.height=Jn.height,Un.ic(s.x,s.y,s.width,s.height);break;case"Link":var Zn=r.length;if(this instanceof Ds||this instanceof Js){var _n=null;this instanceof Js&&(_n=this),this instanceof Ds&&(_n=this.Pf);var ti=_n,ni=this instanceof Ds?null:ti.path;if(null!==this.ah){var ii=this.ah.n,ei=0;if(null!==ni&&ei<this.ah.count){var oi=ii[ei];ei++,ni.ic(oi.x-this.fj.x,oi.y-this.fj.y,oi.width,oi.height)}for(var ri=0;ri<Zn;ri++){var si=r[ri];si!==ni&&ei<this.ah.count&&(oi=ii[ei],ei++,si.ic(oi.x-this.fj.x,oi.y-this.fj.y,oi.width,oi.height))}}var li=ti.points,ai=li.count;if(2<=ai&&this instanceof Js)for(var hi=this.Xf;hi.next();){var ui=hi.value,fi=ai,ci=li,di=ui.Me,pi=ui.aB,yi=ui.ph,vi=ui.qq,gi=ui.bB,mi=0,bi=0,xi=0;if(di<-fi||di>=fi){var wi=this.AF,ki=this.zF;vi!==Vd&&(xi=this.computeAngle(ui,vi,ki),ui.angle=xi),mi=wi.x,bi=wi.y}else{var Mi=void 0,Pi=void 0;if(0<=di)Mi=ci.n[di],Pi=di<fi-1?ci.n[di+1]:Mi;else var Ti=fi+di,Mi=ci.n[Ti],Pi=0<Ti?ci.n[Ti-1]:Mi;if(Mi.Ic(Pi)){var Si=void 0,Ci=void 0;0<=di?(Si=0<di?ci.n[di-1]:Mi,Ci=di<fi-2?ci.n[di+2]:Pi):(Si=Ti<fi-1?ci.n[Ti+1]:Mi,Ci=1<Ti?ci.n[Ti-2]:Pi);var Ni=Si.wf(Mi),ji=Pi.wf(Ci),ki=Ni>ji+10?0<=di?Si.Ob(Mi):Mi.Ob(Si):ji>Ni+10?0<=di?Pi.Ob(Ci):Ci.Ob(Pi):0<=di?Si.Ob(Ci):Ci.Ob(Si)}else ki=0<=di?Mi.Ob(Pi):Pi.Ob(Mi);vi!==Vd&&(xi=this.computeAngle(ui,vi,ki),ui.angle=xi),mi=Mi.x+(Pi.x-Mi.x)*pi,bi=Mi.y+(Pi.y-Mi.y)*pi}if(yi.L(nu))ui.location=new x(mi,bi);else{yi.Od()&&(yi=lu);var Li=Yh.Gf();Li.reset(),Li.scale(ui.scale,ui.scale),Li.rotate(ui.angle,0,0);var Di=ui.Ia,Ai=Yh.ig(0,0,Di.width,Di.height),Fi=Yh.K();Fi.Wn(Ai,yi),Li.nb(Fi);var Oi=-Fi.x,Bi=-Fi.y,qi=gi.copy();isNaN(qi.x)&&(qi.x=0<=di?Fi.x+3:-(Fi.x+3)),isNaN(qi.y)&&(qi.y=-(Fi.y+3)),qi.rotate(ki),mi+=qi.x,bi+=qi.y,Li.wG(Ai);var Oi=Oi+Ai.x,Bi=Bi+Ai.y,zi=Yh.xb(mi+Oi,bi+Bi);ui.move(zi),Yh.v(zi),Yh.v(Fi),Yh.Db(Ai),Yh.ue(Li)}}this.nu(!1)}break;case"Grid":break;case"Graduated":if(null!==this.xm){var Ei=this.Jd(),Ii=this.zm,Ri=this.xm,Gi=0,Vi=Ri[Gi];Gi++,Ei.ic(Vi.x-o.x,Vi.y-o.y,Vi.width,Vi.height);for(var Hi=r.length,Ki=0;Ki<Hi;Ki++){var Ui=r[Ki],Ji=Ii[Ki];Ui.visible&&Ui!==Ei&&0!==Ji.length&&(Vi=Ri[Gi],Gi++,Ui.ic(Vi.x-o.x,Vi.y-o.y,Vi.width,Vi.height))}this.xm=null}break;case"TableRow":case"TableColumn":Yh.k(this.toString()+" is not an element of a Table Panel.TableRow and TableColumn panels can only be elements of a Table Panel.");break;default:Yh.k("Unknown panel type: "+y)}Yh.Db(s)}},tr.prototype.vk=function(t){var n=this.Ia,i=lr(this);if(_h(0,0,n.width,n.height,t.x,t.y)){for(var n=this.xa.n,e=n.length,o=Yh.xb(0,0);e--;){var r=n[e];if((r.visible||r===i)&&(k(o.set(t),r.transform),r.Ha(o)))return Yh.v(o),!0}return Yh.v(o),null!==this.Eb||null!==this.ac}return!1},tr.prototype.lx=function(t){if(this.oo===t)return this;for(var n=this.xa.n,i=n.length,e=0;e<i;e++){var o=n[e].lx(t);if(null!==o)return o}return null},tr.prototype.walkVisualTree=tr.prototype.WJ=function(t){fr(this,this,t)},tr.prototype.findInVisualTree=tr.prototype.Jt=function(t){return cr(this,this,t)},tr.prototype.findObject=tr.prototype.ud=function(t){if(this.name===t)return this;for(var n=this.xa.n,i=n.length,e=0;e<i;e++){var o=n[e];if(o.name===t)return o;if(o instanceof tr)if(null===o.$j&&null===o.vg){if(null!==(o=o.ud(t)))return o}else if(xr(o)&&null!==(o=o.xa.first())&&null!==(o=o.ud(t)))return o}return null},Uh=tr.prototype,Uh.Zg=function(){return!(this.type===td||this.type===nd)},Uh.Je=function(t,n,i){if(!1===this.Ug)return null;if(void 0===n&&(n=null),void 0===i&&(i=null),Wo(this))return null;var e=this.Ia,o=1/this.oj(),r=this.Zg(),s=r?t:k(Yh.xb(t.x,t.y),this.transform),l=this.g,a=10,h=5;if(null!==l&&(a=l.Vt("extraTouchArea"),h=a/2),_h(-h*o,-h*o,e.width+a*o,e.height+a*o,s.x,s.y)){if(!this.Fn){var o=this.xa.n,u=o.length,l=Yh.K(),h=(a=this.au)?this.Jd():null;if(a&&(h.Zg()?k(l.set(t),h.transform):l.set(t),!h.Ha(l)))return Yh.v(l),r||Yh.v(s),null;for(var f=lr(this);u--;){var c=o[u];if((c.visible||c===f)&&(c.Zg()?k(l.set(t),c.transform):l.set(t),!a||c!==h)){var d=null;if(c instanceof tr?d=c.Je(l,n,i):!0===c.Ug&&c.Ha(l)&&(d=c),null!==d&&(null!==n&&(d=n(d)),null!==d&&(null===i||i(d))))return Yh.v(l),r||Yh.v(s),d}}Yh.v(l)}return null===this.background&&null===this.jn?(r||Yh.v(s),null):(t=_h(0,0,e.width,e.height,s.x,s.y)?this:null,r||Yh.v(s),t)}return r||Yh.v(s),null},Uh.Lt=function(t,n,i,e){if(!1===this.Ug)return!1;void 0===n&&(n=null),void 0===i&&(i=null),e instanceof f||e instanceof d||(e=new f(To));var o=this.Ia,r=this.Zg(),s=r?t:k(Yh.xb(t.x,t.y),this.transform);if(_h(0,0,o.width,o.height,s.x,s.y)){if(!this.Fn){for(var o=this.xa.n,l=o.length,a=Yh.K(),h=lr(this);l--;){var u=o[l];if(u.visible||u===h){u.Zg()?k(a.set(t),u.transform):a.set(t);var c=u,u=u instanceof tr?u:null;(null!==u?u.Lt(a,n,i,e):c.Ha(a))&&!1!==c.Ug&&(null!==n&&(c=n(c)),null===c||null!==i&&!i(c)||e.add(c))}}Yh.v(a)}return r||Yh.v(s),null!==this.background||null!==this.jn}return r||Yh.v(s),!1},Uh.zk=function(t,n,i,e,o,r){if(!1===this.Ug)return!1;void 0===n&&(n=null),void 0===i&&(i=null);var s=r;if(void 0===r&&(s=Yh.Gf(),s.reset()),s.multiply(this.transform),this.qn(t,s))return pr(this,n,i,o),void 0===r&&Yh.ue(s),!0;if(this.Uf(t,s)){if(!this.Fn)for(var l=lr(this),a=this.xa.n,h=a.length;h--;){var u=a[h];if(u.visible||u===l){var f=u.W,c=this.Ia;f.x>c.width||f.y>c.height||0>f.x+f.width||0>f.y+f.height||(f=u,u=u instanceof tr?u:null,c=Yh.Gf(),c.set(s),(null!==u?u.zk(t,n,i,e,o,c):Lo(f,t,e,c))&&(null!==n&&(f=n(f)),null===f||null!==i&&!i(f)||o.add(f)),Yh.ue(c))}}return void 0===r&&Yh.ue(s),e}return void 0===r&&Yh.ue(s),!1},Uh.wn=function(t,n,i,e,o,r){if(!1===this.Ug)return!1;void 0===i&&(i=null),void 0===e&&(e=null);var s=this.Ia,l=this.Zg(),a=l?t:k(Yh.xb(t.x,t.y),this.transform),h=l?n:k(Yh.xb(n.x,n.y),this.transform),u=a.wf(h),f=0<a.x&&a.x<s.width&&0<a.y&&a.y<s.height||$h(a.x,a.y,0,0,0,s.height)<u||$h(a.x,a.y,0,s.height,s.width,s.height)<u||$h(a.x,a.y,s.width,s.height,s.width,0)<u||$h(a.x,a.y,s.width,0,0,0)<u,s=0<a.x&&a.x<s.width&&0<a.y&&a.y<s.height&&$h(a.x,a.y,0,0,0,s.height)<u&&$h(a.x,a.y,0,s.height,s.width,s.height)<u&&$h(a.x,a.y,s.width,s.height,s.width,0)<u&&$h(a.x,a.y,s.width,0,0,0)<u;if(l||(Yh.v(a),Yh.v(h)),f){if(!this.Fn){for(var l=Yh.K(),a=Yh.K(),h=lr(this),u=this.xa.n,c=u.length;c--;){var d=u[c];if(d.visible||d===h){var p=d.W,y=this.Ia;p.x>y.width||p.y>y.height||0>p.x+p.width||0>p.y+p.height||(d.Zg()?(p=d.transform,k(l.set(t),p),k(a.set(n),p)):(l.set(t),a.set(n)),p=d,d=d instanceof tr?d:null,null!==d?!d.wn(l,a,i,e,o,r):!p.ME(l,a,o))||(null!==i&&(p=i(p)),null===p||null!==e&&!e(p)||r.add(p))}}Yh.v(l),Yh.v(a)}return o?f:s}return!1},tr.prototype.add=tr.prototype.add=function(t){Yh.G(t,To,tr,"add:element"),this.Md(this.xa.count,t)},tr.prototype.elt=tr.prototype.ea=function(t){return this.xa.ea(t)},tr.prototype.insertAt=tr.prototype.Md=function(t,n){n instanceof as&&Yh.k("Cannot add a Part to a Panel: "+n+"; use a Panel instead"),(this===n||this.Zl(n))&&(this===n&&Yh.k("Cannot make a Panel contain itself: "+this.toString()),Yh.k("Cannot make a Panel indirectly contain itself: "+this.toString()+" already contains "+n.toString()));var i=n.O;if(null!==i&&i!==this&&Yh.k("Cannot add a GraphObject that already belongs to another Panel to this Panel: "+n.toString()+", already contained by "+i.toString()+", cannot be shared by this Panel: "+this.toString()),this.ma!==ed||n instanceof Cr||Yh.k("Can only add Shapes to a Grid Panel, not: "+n),this.ma!==od||n instanceof Cr||n instanceof qr||Yh.k("Can only add Shapes or TextBlocks to a Graduated Panel, not: "+n),n.em(this),n.Sm=null,null!==this.dq){var e=n.data;null!==e&&"object"==typeof e&&(null===this.ug&&(this.ug=new b(Object,tr)),this.ug.add(e,n))}var o=this.xa,e=-1;if(i===this){for(var r=-1,s=this.xa.n,l=s.length,a=0;a<l;a++)if(s[a]===n){r=a;break}if(-1!==r){if(r===t||r+1>=o.count&&t>=o.count)return;o.Yc(r),e=r}else Yh.k("element "+n.toString()+" has panel "+i.toString()+" but is not contained by it.")}(0>t||t>o.count)&&(t=o.count),o.Md(t,n),this.H(),n.H(),null!==n.Qd?this.Dk=!0:n instanceof tr&&!0===n.Dk&&(this.Dk=!0),this.Tj=null,null!==(i=this.U)&&(i.Nm=null,i.ck=NaN,this.Dk&&i instanceof As&&(i.Dk=!0),i.Dk&&i instanceof As&&(i.le=null),null!==(o=this.g)&&o.oa.hb||(-1!==e&&i.Xc(bf,"elements",this,n,null,e,null),i.Xc(mf,"elements",this,null,n,null,t),this.cu()||Pr(this,n,!1)))},Yh.defineProperty(tr,{Dk:null},function(){return 0!=(8388608&this.P)},function(t){0!=(8388608&this.P)!==t&&(this.P^=8388608)}),tr.prototype.remove=tr.prototype.remove=function(t){Yh.G(t,To,tr,"remove:element");for(var n=this.xa.n,i=n.length,e=-1,o=0;o<i;o++)if(n[o]===t){e=o;break}-1!==e&&this.kf(e)},tr.prototype.removeAt=tr.prototype.Yc=function(t){0<=t&&this.kf(t)},tr.prototype.kf=function(t){var n=this.xa,i=n.ea(t);if(i.Sm=null,i.em(null),null!==this.ug){var e=i.data;"object"==typeof e&&this.ug.remove(e)}n.Yc(t),Yo(this,!1),this.H(),this.dn===i&&(this.dn=null),this.Tj=null,null!==(n=this.U)&&(n.Nm=null,n.ck=NaN,n.ce(),null!==(e=this.g)&&e.oa.hb||n.Xc(bf,"elements",this,i,null,t,null))},Yh.u(tr,{pq:"rowCount"},function(){return void 0===this.Yd?0:this.Yd.length}),tr.prototype.getRowDefinition=tr.prototype.be=function(t){0>t&&Yh.Ea(t,">= 0",tr,"getRowDefinition:idx"),t=Math.round(t);var n=this.Yd;if(void 0===n[t]){var i=new Tr;i.em(this),i.ve=!0,i.index=t,n[t]=i}return n[t]},tr.prototype.removeRowDefinition=tr.prototype.SF=function(t){0>t&&Yh.Ea(t,">= 0",tr,"removeRowDefinition:idx"),t=Math.round(t);var n=this.Yd;this.Xc(bf,"coldefs",this,n[t],null,t,null),n[t]&&delete n[t],this.H()},Yh.u(tr,{Jp:"columnCount"},function(){return void 0===this.Td?0:this.Td.length}),tr.prototype.getColumnDefinition=tr.prototype.ae=function(t){0>t&&Yh.Ea(t,">= 0",tr,"getColumnDefinition:idx"),t=Math.round(t);var n=this.Td;if(void 0===n[t]){var i=new Tr;i.em(this),i.ve=!1,i.index=t,n[t]=i}return n[t]},tr.prototype.removeColumnDefinition=tr.prototype.PF=function(t){0>t&&Yh.Ea(t,">= 0",tr,"removeColumnDefinition:idx"),t=Math.round(t);var n=this.Td;this.Xc(bf,"coldefs",this,n[t],null,t,null),n[t]&&delete n[t],this.H()},Yh.defineProperty(tr,{wJ:"rowSizing"},function(){return void 0===this.Vm?hd:this.Vm},function(t){if(void 0!==this.Vm){var n=this.Vm;n!==t&&(t!==hd&&t!==ad&&Yh.k("Panel.rowSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: "+t),this.Vm=t,this.H(),this.h("rowSizing",n,t))}}),Yh.defineProperty(tr,{tH:"columnSizing"},function(){return void 0===this.tm?hd:this.tm},function(t){if(void 0!==this.tm){var n=this.tm;n!==t&&(t!==hd&&t!==ad&&Yh.k("Panel.columnSizing must be RowColumnDefinition.ProportionalExtra or RowColumnDefinition.None, not: "+t),this.tm=t,this.H(),this.h("columnSizing",n,t))}}),Yh.defineProperty(tr,{UL:"topIndex"},function(){return void 0===this.ej?0:this.ej},function(t){if(void 0!==this.ej){var n=this.ej;n!==t&&((!isFinite(t)||0>t)&&Yh.k("Panel.topIndex must be greater than zero and a real number, not: "+t),this.ej=t,this.H(),this.h("topIndex",n,t))}}),Yh.defineProperty(tr,{gL:"leftIndex"},function(){return void 0===this.Oi?0:this.Oi},function(t){if(void 0!==this.Oi){var n=this.Oi;n!==t&&((!isFinite(t)||0>t)&&Yh.k("Panel.leftIndex must be greater than zero and a real number, not: "+t),this.Oi=t,this.H(),this.h("leftIndex",n,t))}}),tr.prototype.findRowForLocalY=function(t){if(0>t)return-1;if(this.type!==_c)return NaN;for(var n=0,i=this.Yd,e=i.length,o=this.ej;o<e;o++){var r=i[o];if(void 0!==r&&(n+=r.total,t<n))return o}return-1},tr.prototype.findColumnForLocalX=function(t){if(0>t)return-1;if(this.type!==_c)return NaN;for(var n=0,i=this.Td,e=i.length,o=this.Oi;o<e;o++){var r=i[o];if(void 0!==r&&(n+=r.total,t<n))return o}return-1},tr.prototype.graduatedPointForValue=function(t,n){if(void 0===n&&(n=new x(NaN,NaN)),this.type!==od)return n.m(NaN,NaN),n;t=Math.min(Math.max(t,this.Ck),this.pA);var i=(t-this.Ck)/this.Wt,e=this.Jd();return e.hf.aI(i,n),i=Yh.Gf(),i.set(e.transform),n.transform(i),Yh.ue(i),n},tr.prototype.graduatedValueForPoint=function(t){if(this.type!==od)return NaN;var n=this.Jd(),i=n.hf,e=Yh.Gf();return e.set(n.transform),e.ux(),t.transform(e),Yh.ue(e),i.XH(t)*this.Wt+this.Ck},Yh.defineProperty(tr,{data:"data"},function(){return this.Vd},function(t){var n=this.Vd;if(n!==t){var i=this instanceof as&&!(this instanceof Ds);i&&Yh.j(t,"object",tr,"data"),br(this),this.Vd=t;var e=this.g;null!==e&&(i?this instanceof Js?(null!==n&&e.Kj.remove(n),null!==t&&e.Kj.add(t,this)):this instanceof as&&(null!==n&&e.Bi.remove(n),null!==t&&e.Bi.add(t,this)):null!==(i=this.O)&&null!==i.ug&&(null!==n&&i.ug.remove(n),null!==t&&i.ug.add(t,this))),this.h("data",n,t),null!==e&&e.oa.hb||null!==t&&this.Hb()}}),Yh.defineProperty(tr,{hu:"itemIndex"},function(){return this.Qr},function(t){var n=this.Qr;n!==t&&(this.Qr=t,this.h("itemIndex",n,t))}),tr.prototype.copyTemplate=function(){var t=this.copy();return t.WJ(function(t){t instanceof tr&&(t.Yk=null,t.Vd=null);var n=t.tc;null!==n&&(t.tc=null,n.each(function(n){t.bind(n.copy())}))}),t},tr.prototype.updateTargetBindings=tr.prototype.Hb=function(t){var n=this.Yk;if(null!==n)for(void 0===t&&(t=""),n=n.i;n.next();){var i=n.value,e=i.kG;if((""===t||""===e||e===t)&&(e=i.my,null!==i.yH||""!==e)){var e=this.data,o=i.xq;if(null!==o)e=""===o?this:"/"===o?this:"."===o?this:".."===o?this:this.ud(o);else{var r=this.g;null!==r&&i.Cx&&(e=r.ba.Gk)}if(null!==e){var r=this,s=i.im;if(-1!==s){if(null===(r=this.lx(s)))continue}else null!==i.Eg&&(r=i.Eg);if("/"===o?e=r.U:"."===o?e=r:".."===o&&(e=r.O),0!==(o=i.ht)){if(!(r instanceof tr))continue;s=r,1===o?r=s.ae(i.xp):2===o&&(r=s.be(i.xp))}void 0!==r&&i.zG(r,e)}}}},Yh.defineProperty(tr,{dq:"itemArray"},function(){return this.$j},function(t){var n=this.$j;if(n!==t){var i=this.g;null!==i&&null!==n&&je(i,this),this.$j=t,null!==i&&null!==t&&Ne(i,this),this.h("itemArray",n,t),null!==i&&i.oa.hb||this.WA()}}),tr.prototype.rebuildItemElements=tr.prototype.WA=function(){var t=0;for(xr(this)&&(t=1);this.xa.length>t;)this.kf(this.xa.length-1);if(null!==(t=this.dq))for(var n=Yh.Za(t),i=0;i<n;i++)wr(this,Yh.Da(t,i),i)},tr.prototype.findItemPanelForData=tr.prototype.RH=function(t){return void 0===t||null===t||null===this.ug?null:(Yh.j(t,"object",tr,"findItemPanelForData"),this.ug.ja(t))},Yh.defineProperty(tr,{eL:"itemTemplate"},function(){return null===this.vg?null:this.vg.ja("")},function(t){if(null===this.vg){if(null===t)return;this.vg=new b("string",tr)}var n=this.vg.ja("");n!==t&&(Yh.G(t,tr,tr,"itemTemplate"),(t instanceof as||t.Wf)&&Yh.k("Panel.itemTemplate must not be a Part or be Panel.isPanelMain: "+t),this.vg.add("",t),this.h("itemTemplate",n,t),null!==(t=this.g)&&t.oa.hb||this.WA())}),Yh.defineProperty(tr,{BI:"itemTemplateMap"},function(){return this.vg},function(t){var n=this.vg;if(n!==t){Yh.G(t,b,tr,"itemTemplateMap");for(var i=t.i;i.next();){var e=i.value;(e instanceof as||e.Wf)&&Yh.k("Template in Panel.itemTemplateMap must not be a Part or be Panel.isPanelMain: "+e)}this.vg=t,this.h("itemTemplateMap",n,t),t=this.g,null!==t&&t.oa.hb||this.WA()}}),Yh.defineProperty(tr,{dL:"itemCategoryProperty"},function(){return this.Uo},function(t){var n=this.Uo;n!==t&&("string"!=typeof t&&"function"!=typeof t&&Yh.yd(t,"string or function",tr,"itemCategoryProperty"),this.Uo=t,this.h("itemCategoryProperty",n,t))});var rd=!1,sd=null;Yh.defineProperty(tr,{Fn:"isAtomic"},function(){return 0!=(1048576&this.P)},function(t){var n=0!=(1048576&this.P);n!==t&&(Yh.j(t,"boolean",tr,"isAtomic"),this.P^=1048576,this.h("isAtomic",n,t))}),Yh.defineProperty(tr,{au:"isClipping"},function(){return 0!=(2097152&this.P)},function(t){var n=0!=(2097152&this.P);n!==t&&(Yh.j(t,"boolean",tr,"isClipping"),this.P^=2097152,this.H(),this.h("isClipping",n,t))}),Yh.defineProperty(tr,{qF:"isOpposite"},function(){return 0!=(33554432&this.P)},function(t){var n=0!=(33554432&this.P);n!==t&&(Yh.j(t,"boolean",tr,"isOpposite"),this.P^=33554432,this.H(),this.h("isOpposite",n,t))}),Yh.defineProperty(tr,{isEnabled:"isEnabled"},function(){return 0!=(4194304&this.P)},function(t){var n=0!=(4194304&this.P);if(n!==t){Yh.j(t,"boolean",tr,"isEnabled");var i=null===this.O||this.O.cu();this.P^=4194304,this.h("isEnabled",n,t),n=this.g,null!==n&&n.oa.hb||i&&Pr(this,this,t)}}),Yh.defineProperty(tr,{$J:"alignmentFocusName"},function(){return this.Hj},function(t){var n=this.Hj;n!==t&&(this.Hj=t,this.H(),this.h("alignmentFocusName",n,t))}),Yh.ga("RowColumnDefinition",Tr),Tr.prototype.copy=function(){var t=new Tr;return t.Qv=this.Qv,t.uc=this.uc,t.gf=this.gf,t.ek=this.ek,t.dk=this.dk,t.ge=this.ge,t.Sa=this.Sa,t.ib=this.ib,t.Dg=this.Dg,t.$s=this.$s,t.ik=null===this.ik?null:this.ik.S(),t.Vs=this.Vs,t.Ws=this.Ws,t.Yh=null,null!==this.Yh&&(t.Yh=Yh.Il(this.Yh)),t.Eb=this.Eb,t.ar=this.ar,t.tc=this.tc,t},Tr.prototype.Kp=function(t){Yh.G(t,Tr,Tr,"copyFrom:pd"),t.ve?this.height=t.height:this.width=t.width,this.yj=t.yj,this.nf=t.nf,this.alignment=t.alignment,this.stretch=t.stretch,this.Ku=t.Ku,this.ik=null===t.ik?null:t.ik.S(),this.rq=t.rq,this.sq=t.sq,this.Yh=null,t.Yh&&(this.Yh=Yh.Il(t.Yh)),this.background=t.background,this.cA=t.cA,this.tc=t.tc},Tr.prototype.hc=function(t){t.De===Tr?this.Ku=t:Yh.Ej(this,t)},Tr.prototype.toString=function(){return"RowColumnDefinition "+(this.ve?"(Row ":"(Column ")+this.index+") #"+Yh.Kd(this)};var ld;Tr.Default=ld=Yh.p(Tr,"Default",0);var ad;Tr.None=ad=Yh.p(Tr,"None",1);var hd;Tr.ProportionalExtra=hd=Yh.p(Tr,"ProportionalExtra",2),Tr.prototype.em=function(t){this.mh=t},Tr.prototype.computeEffectiveSpacingTop=Tr.prototype.rE=function(){var t=0;if(0!==this.index){var n=this.mh,i=this.rq;null===i&&null!==n&&(i=this.ve?n.Ci:n.Lh),null!==i&&(t=this.sq,isNaN(t)&&(t=null!==n?this.ve?n.Nh:n.Mh:0))}if(null===(n=this.eG)){if(null===(n=this.mh))return t;n=n.Lj}return t+(this.ve?n.top:n.left)},Tr.prototype.computeEffectiveSpacing=Tr.prototype.Ye=function(){var t=0;if(0!==this.index){var n=this.mh,i=this.rq;null===i&&null!==n&&(i=this.ve?n.Ci:n.Lh),null!==i&&(t=this.sq,isNaN(t)&&(t=null!==n?this.ve?n.Nh:n.Mh:0))}if(null===(n=this.eG)){if(null===(n=this.mh))return t;n=n.Lj}return t+(this.ve?n.top+n.bottom:n.left+n.right)},Tr.prototype.cd=function(t,n,i,e,o){var r=this.mh;if(null!==r&&(r.Xc(gf,t,this,n,i,e,o),null!==this.tc&&null!==(n=r.g)&&!n.Ne&&null!==(r=r.Ql())&&null!==(n=r.data)))for(i=this.tc.i;i.next();)i.value.ny(this,n,t,r)},Yh.u(Tr,{O:"panel"},function(){return this.mh}),Yh.defineProperty(Tr,{ve:"isRow"},function(){return this.Qv},function(t){this.Qv=t}),Yh.defineProperty(Tr,{index:"index"},function(){return this.uc},function(t){this.uc=t}),Yh.defineProperty(Tr,{height:"height"},function(){return this.gf},function(t){var n=this.gf;n!==t&&(0>t&&Yh.Ea(t,">= 0",Tr,"height"),this.gf=t,this.Ja=this.Sa,null!==this.O&&this.O.H(),this.cd("height",n,t))}),Yh.defineProperty(Tr,{width:"width"},function(){return this.gf},function(t){var n=this.gf;n!==t&&(0>t&&Yh.Ea(t,">= 0",Tr,"width"),this.gf=t,this.Ja=this.Sa,null!==this.O&&this.O.H(),this.cd("width",n,t))}),Yh.defineProperty(Tr,{yj:"minimum"},function(){return this.ek},function(t){var n=this.ek;n!==t&&((0>t||!isFinite(t))&&Yh.Ea(t,">= 0",Tr,"minimum"),this.ek=t,this.Ja=this.Sa,null!==this.O&&this.O.H(),this.cd("minimum",n,t))}),Yh.defineProperty(Tr,{nf:"maximum"},function(){return this.dk},function(t){var n=this.dk;n!==t&&(0>t&&Yh.Ea(t,">= 0",Tr,"maximum"),this.dk=t,this.Ja=this.Sa,null!==this.O&&this.O.H(),this.cd("maximum",n,t))}),Yh.defineProperty(Tr,{alignment:"alignment"},function(){return this.ge},function(t){var n=this.ge;n.L(t)||(this.ge=t.S(),null!==this.O&&this.O.H(),this.cd("alignment",n,t))}),Yh.defineProperty(Tr,{stretch:"stretch"},function(){return this.Dg},function(t){var n=this.Dg;n!==t&&(this.Dg=t,null!==this.O&&this.O.H(),this.cd("stretch",n,t))}),Yh.defineProperty(Tr,{eG:"separatorPadding"},function(){return this.ik},function(t){"number"==typeof t&&(t=new D(t));var n=this.ik;null!==t&&null!==n&&n.L(t)||(null!==t&&(t=t.S()),this.ik=t,null!==this.O&&this.O.H(),this.cd("separatorPadding",n,t))}),Yh.defineProperty(Tr,{rq:"separatorStroke"},function(){return this.Vs},function(t){var n=this.Vs;n!==t&&(null===t||"string"==typeof t||t instanceof mo)&&(t instanceof mo&&t.freeze(),this.Vs=t,null!==this.O&&this.O.H(),this.cd("separatorStroke",n,t))}),Yh.defineProperty(Tr,{sq:"separatorStrokeWidth"},function(){return this.Ws},function(t){var n=this.Ws;n!==t&&(this.Ws=t,null!==this.O&&this.O.H(),this.cd("separatorStrokeWidth",n,t))}),Yh.defineProperty(Tr,{IL:"separatorDashArray"},function(){return this.Yh},function(t){var n=this.Yh;if(n!==t){if(null===t||Array.isArray(t)||Yh.yd(t,"Array",Tr,"separatorDashArray:value"),null!==t){for(var i=t.length,e=0,o=0;o<i;o++){var r=t[o];"number"==typeof r&&0<=r&&isFinite(r)||Yh.k("separatorDashArray value "+r+" at index "+o+" must be a positive number or zero."),e+=r}if(0===e){if(null===n)return;t=null}}this.Yh=t,null!==this.O&&this.O.na(),this.cd("separatorDashArray",n,t)}}),Yh.defineProperty(Tr,{background:"background"},function(){return this.Eb},function(t){var n=this.Eb;n!==t&&(null===t||"string"==typeof t||t instanceof mo)&&(t instanceof mo&&t.freeze(),this.Eb=t,null!==this.O&&this.O.na(),this.cd("background",n,t))}),Yh.defineProperty(Tr,{cA:"coversSeparators"},function(){return this.ar},function(t){var n=this.ar;n!==t&&(Yh.j(t,"boolean",Tr,"coversSeparators"),this.ar=t,null!==this.O&&this.O.na(),this.cd("coversSeparators",n,t))}),Yh.defineProperty(Tr,{Ku:"sizing"},function(){return this.$s},function(t){var n=this.$s;n!==t&&(this.$s=t,null!==this.O&&this.O.H(),this.cd("sizing",n,t))}),Yh.defineProperty(Tr,{Ja:"actual"},function(){return this.Sa},function(t){this.Sa=isNaN(this.gf)?Math.max(Math.min(this.dk,t),this.ek):Math.max(Math.min(this.dk,this.gf),this.ek)}),Yh.defineProperty(Tr,{total:"total"},function(){return this.Sa+this.Ye()},function(t){this.Sa=isNaN(this.gf)?Math.max(Math.min(this.dk,t),this.ek):Math.max(Math.min(this.dk,this.gf),this.ek),this.Sa=Math.max(0,this.Sa-this.Ye())}),Yh.defineProperty(Tr,{position:"position"},function(){return this.ib},function(t){this.ib=t}),Tr.prototype.bind=Tr.prototype.bind=function(t){t.Eg=this;var n=this.O;if(null!==n){var i=n.Ql();null!==i&&mr(i)&&Yh.k("Cannot add a Binding to a RowColumnDefinition that is already frozen: "+t+" on "+n)}null===this.tc&&(this.tc=new f(on)),this.tc.add(t)},Yh.Ka(Cr,To),Yh.ga("Shape",Cr),Cr.prototype.cloneProtected=function(t){To.prototype.cloneProtected.call(this,t),t.Va=this.Va,t.Go=this.Go,t.xr=this.xr,t.Nf=this.Nf,t.zd=this.zd,t.qc=this.qc,t.gi=this.gi,t.sp=this.sp,t.vp=this.vp,t.cn=this.cn,null!==this.tp&&(t.tp=Yh.Il(this.tp)),t.uf=this.uf,t.ei=this.ei.S(),t.fi=this.fi.S(),t.ws=this.ws,t.xs=this.xs,t.Hr=this.Hr,t.zs=this.zs,t.zp=this.zp,t.Io=this.Io,t.sg=this.sg,t.rg=this.rg,t.qg=this.qg},Cr.prototype.hc=function(t){t===Bc||t===Rc||t===Gc||t===qc?this.mA=t:To.prototype.hc.call(this,t)},Cr.prototype.toString=function(){return"Shape("+("None"!==this.Cb?this.Cb:"None"!==this.yq?this.yq:this.kA)+")#"+Yh.Kd(this)},Cr.prototype.yk=function(t,n){if(null!==this.qc||null!==this.zd){null!==this.zd&&Oo(this,t,this.zd,!0,!1),null!==this.qc&&Oo(this,t,this.qc,!1,!1);var i=this.gi;if(0===i){var e=this.U;e instanceof Ds&&e.type===id&&"Selection"===e.td&&e.rb instanceof Cr&&e.Pf.Jd()===e.rb&&(i=e.rb.kb)}t.lineWidth=i,t.lineJoin=this.vp,t.lineCap=this.sp,t.miterLimit=this.cn;var o=!1;this.U&&n.pj("drawShadows")&&(o=this.U.am);var r=!0;null!==this.qc&&null===this.zd&&(r=!1);var e=!1,s=!0,l=this.nG;null!==l&&(e=!0,s=t.hA(l,this.uf));var a=this.Va;if(null!==a){if(a.ma===of)t.beginPath(),e&&!s?Co(t,a.xc,a.Gc,a.yb,a.Gb,l,this.uf):(t.moveTo(a.xc,a.Gc),t.lineTo(a.yb,a.Gb)),null!==this.zd&&t.Kg(this.zd),0!==i&&null!==this.qc&&t.Dj();else if(a.ma===rf){var h=a.xc,u=a.Gc,f=a.yb,c=a.Gb,a=Math.min(h,f),d=Math.min(u,c),h=Math.abs(f-h),u=Math.abs(c-u);if(null!==this.zd&&(t.beginPath(),t.rect(a,d,h,u),t.Kg(this.zd)),null!==this.qc){var p=f=0,y=0;r&&o&&(f=t.shadowOffsetX,p=t.shadowOffsetY,y=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),e&&!s?(s=Yh.lb(),s.push(a),s.push(d),s.push(a+h),s.push(d),s.push(a+h),s.push(d+u),s.push(a),s.push(d+u),s.push(a),s.push(d),t.beginPath(),jr(t,s,l,this.uf),t.Dj(),Yh.wa(s)):0!==i&&(t.beginPath(),t.rect(a,d,h,u),t.Dj()),r&&o&&(t.shadowOffsetX=f,t.shadowOffsetY=p,t.shadowBlur=y)}}else if(a.ma===sf)h=a.xc,u=a.Gc,f=a.yb,c=a.Gb,a=Math.abs(f-h)/2,d=Math.abs(c-u)/2,h=Math.min(h,f)+a,u=Math.min(u,c)+d,t.beginPath(),t.moveTo(h,u-d),t.bezierCurveTo(h+Bu*a,u-d,h+a,u-Bu*d,h+a,u),t.bezierCurveTo(h+a,u+Bu*d,h+Bu*a,u+d,h,u+d),t.bezierCurveTo(h-Bu*a,u+d,h-a,u+Bu*d,h-a,u),t.bezierCurveTo(h-a,u-Bu*d,h-Bu*a,u-d,h,u-d),t.closePath(),null!==this.zd&&t.Kg(this.zd),e&&!s&&(s=Yh.lb(),_(h,u-d,h+Bu*a,u-d,h+a,u-Bu*d,h+a,u,.5,s),_(h+a,u,h+a,u+Bu*d,h+Bu*a,u+d,h,u+d,.5,s),_(h,u+d,h-Bu*a,u+d,h-a,u+Bu*d,h-a,u,.5,s),_(h-a,u,h-a,u-Bu*d,h-Bu*a,u-d,h,u-d,.5,s),t.beginPath(),jr(t,s,l,this.uf),Yh.wa(s)),0!==i&&null!==this.qc&&(r&&o?(f=t.shadowOffsetX,p=t.shadowOffsetY,y=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0,t.Dj(),t.shadowOffsetX=f,t.shadowOffsetY=p,t.shadowBlur=y):t.Dj());else if(a.ma===lf){for(d=a.Nj,u=d.length,c=0;c<u;c++){h=d.n[c],t.beginPath(),t.moveTo(h.ha,h.fa);for(var f=h.vb.n,p=f.length,v=null,y=0;y<p;y++){var g=f[y];switch(g.ma){case uf:t.moveTo(g.C,g.D);break;case ff:t.lineTo(g.C,g.D);break;case cf:t.bezierCurveTo(g.Bd,g.We,g.nh,g.Bg,g.yb,g.Gb);break;case df:t.quadraticCurveTo(g.Bd,g.We,g.yb,g.Gb);break;case pf:if(g.radiusX===g.radiusY)v=Math.PI/180,t.arc(g.Bd,g.We,g.radiusX,g.ye*v,(g.ye+g.pf)*v,0>g.pf);else{var v=Nt(g,h),m=v.length;if(0===m){t.lineTo(g.ka,g.ra);break}for(var b=0;b<m;b++){var x=v[b];0===b&&t.lineTo(x[0],x[1]),t.bezierCurveTo(x[2],x[3],x[4],x[5],x[6],x[7])}}break;case yf:if(b=m=0,null!==v&&v.type===pf){if(v=Nt(v,h),0===(x=v.length)){t.lineTo(g.ka,g.ra);break}v=v[x-1]||null,null!==v&&(m=v[6],b=v[7])}else m=null!==v?v.C:h.ha,b=null!==v?v.D:h.fa;if(v=jt(g,h,m,b),0===(m=v.length)){t.lineTo(g.ka,g.ra);break}for(b=0;b<m;b++)x=v[b],t.bezierCurveTo(x[2],x[3],x[4],x[5],x[6],x[7]);break;default:Yh.k("Segment not of valid type: "+g.ma)}g.Qh&&t.closePath(),v=g}o?(y=p=f=0,h.Ro?(!0===h.Bm&&null!==this.zd?(t.Kg(this.zd),r=!0):r=!1,0!==i&&null!==this.qc&&(r&&(f=t.shadowOffsetX,p=t.shadowOffsetY,y=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),e&&!s||t.Dj(),r&&(t.shadowOffsetX=f,t.shadowOffsetY=p,t.shadowBlur=y))):(r&&(f=t.shadowOffsetX,p=t.shadowOffsetY,y=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),!0===h.Bm&&null!==this.zd&&t.Kg(this.zd),0!==i&&null!==this.qc&&(e&&!s||t.Dj()),r&&(t.shadowOffsetX=f,t.shadowOffsetY=p,t.shadowBlur=y))):(!0===h.Bm&&null!==this.zd&&t.Kg(this.zd),0===i||null===this.qc||e&&!s||t.Dj())}if(e&&!s)for(i=r,r=a.Nj,s=r.length,a=0;a<s;a++){for(d=r.n[a],t.beginPath(),u=Yh.lb(),u.push(d.ha),u.push(d.fa),c=d.ha,h=d.fa,f=c,p=h,y=d.vb.n,g=y.length,v=0;v<g;v++){switch(m=y[v],m.ma){case uf:jr(t,u,l,this.uf),u.length=0,u.push(m.C),u.push(m.D),c=m.C,h=m.D,f=c,p=h;break;case ff:u.push(m.C),u.push(m.D),c=m.C,h=m.D;break;case cf:_(c,h,m.Bd,m.We,m.nh,m.Bg,m.yb,m.Gb,.5,u),c=m.C,h=m.D;break;case df:et(c,h,m.Bd,m.We,m.yb,m.Gb,.5,u),c=m.C,h=m.D;break;case pf:if(b=Nt(m,d),0===(x=b.length)){u.push(m.ka),u.push(m.ra),c=m.ka,h=m.ra;break}for(var w=0;w<x;w++){var k=b[w];_(c,h,k[2],k[3],k[4],k[5],k[6],k[7],.5,u),c=k[6],h=k[7]}break;case yf:if(b=jt(m,d,c,h),0===(x=b.length)){u.push(m.ka),u.push(m.ra),c=m.ka,h=m.ra;break}for(w=0;w<x;w++)k=b[w],_(c,h,k[2],k[3],k[4],k[5],k[6],k[7],.5,u),c=k[6],h=k[7];break;default:Yh.k("Segment not of valid type: "+m.ma)}m.Qh&&(u.push(f),u.push(p),jr(t,u,l,this.uf))}jr(t,u,l,this.uf),Yh.wa(u),null!==this.qc&&(c=u=d=0,i&&o&&(d=t.shadowOffsetX,u=t.shadowOffsetY,c=t.shadowBlur,t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowBlur=0),t.Dj(),i&&o&&(t.shadowOffsetX=d,t.shadowOffsetY=u,t.shadowBlur=c))}}if(e&&t.eA(),null!==this.Qx){if(e=this.Qx,Do(e,1/0,1/0),l=e.za,e.ic(0,0,l.width,l.height),i=this.hf,t.save(),t.beginPath(),l=Yh.lb(),i.type===of)l.push(i.ha),l.push(i.fa),l.push(i.C),l.push(i.D),Nr(t,n,l,e);else if(i.type===lf)for(s=i.ec.i;s.next();){for(a=s.value,l.length=0,l.push(a.ha),l.push(a.fa),r=a.ha,d=a.fa,u=r,c=d,h=a.vb.n,f=h.length,p=0;p<f;p++){switch(y=h[p],y.ma){case uf:Nr(t,n,l,e),l.length=0,l.push(y.C),l.push(y.D),r=y.C,d=y.D,u=r,c=d;break;case ff:l.push(y.C),l.push(y.D),r=y.C,d=y.D;break;case cf:_(r,d,y.Bd,y.We,y.nh,y.Bg,y.yb,y.Gb,.5,l),r=y.C,d=y.D;break;case df:et(r,d,y.Bd,y.We,y.yb,y.Gb,.5,l),r=y.C,d=y.D;break;case pf:if(i=Nt(y,a),0===(o=i.length)){l.push(y.ka),l.push(y.ra),r=y.ka,d=y.ra;break}for(g=0;g<o;g++)v=i[g],_(r,d,v[2],v[3],v[4],v[5],v[6],v[7],.5,l),r=v[6],d=v[7];break;case yf:if(i=jt(y,a,r,d),0===(o=i.length)){l.push(y.ka),l.push(y.ra),r=y.ka,d=y.ra;break}for(g=0;g<o;g++)v=i[g],_(r,d,v[2],v[3],v[4],v[5],v[6],v[7],.5,l),r=v[6],d=v[7];break;default:Yh.k("Segment not of valid type: "+y.ma)}y.Qh&&(l.push(u),l.push(c),Nr(t,n,l,e))}Nr(t,n,l,e)}else if(i.type===rf)l.push(i.ha),l.push(i.fa),l.push(i.C),l.push(i.fa),l.push(i.C),l.push(i.D),l.push(i.ha),l.push(i.D),l.push(i.ha),l.push(i.fa),Nr(t,n,l,e);else if(i.type===sf){if(s=new St,s.ha=i.C,s.fa=(i.fa+i.D)/2,r=new Ct(pf),r.ye=0,r.pf=360,r.ka=(i.ha+i.C)/2,r.ra=(i.fa+i.D)/2,r.radiusX=Math.abs(i.ha-i.C)/2,r.radiusY=Math.abs(i.fa-i.D)/2,s.add(r),i=Nt(r,s),0===(o=i.length))l.push(r.ka),l.push(r.ra);else for(r=s.ha,d=s.fa,g=0;g<o;g++)v=i[g],_(r,d,v[2],v[3],v[4],v[5],v[6],v[7],.5,l),r=v[6],d=v[7];Nr(t,n,l,e)}Yh.wa(l),t.restore(),t.Ee(!1)}}}},Cr.prototype.getDocumentPoint=Cr.prototype.Xa=function(t,n){if(void 0===n&&(n=new x),t instanceof F){t.Od()&&Yh.k("getDocumentPoint Spot must be a real, specific Spot, not: "+t.toString());var i=this.Ia,e=this.kb;n.m(t.x*(i.width+e)-e/2+i.x+t.offsetX,t.y*(i.height+e)-e/2+i.y+t.offsetY)}else n.set(t);return this.qh.nb(n),n},Cr.prototype.vk=function(t,n){var i=this.hf;if(null===i||null===this.fill&&null===this.stroke)return!1;var e=i.eb,o=this.kb/2;i.type!==of||n||(o+=2);var r=Yh.Ff();if(r.assign(e),r.yf(o+2,o+2),!r.Ha(t))return Yh.Db(r),!1;if(e=o+1e-4,i.type===of)return null!==this.stroke&&(e=(i.C-i.ha)*(t.x-i.ha)+(i.D-i.fa)*(t.y-i.fa),!(0>(i.ha-i.C)*(t.x-i.C)+(i.fa-i.D)*(t.y-i.D)||0>e)&&(Yh.Db(r),$(i.ha,i.fa,i.C,i.D,o,t.x,t.y)));if(i.type===rf){var s=i.ha,l=i.fa,a=i.C,h=i.D;if(r.x=Math.min(s,a),r.y=Math.min(l,h),r.width=Math.abs(a-s),r.height=Math.abs(h-l),null===this.fill){if(r.yf(-e,-e),r.Ha(t))return Yh.Db(r),!1;r.yf(e,e)}return null!==this.stroke&&r.yf(o,o),o=r.Ha(t),Yh.Db(r),o}if(i.type===sf){var s=i.ha,l=i.fa,a=i.C,h=i.D,i=Math.min(s,a),u=Math.min(l,h),s=Math.abs(a-s)/2,l=Math.abs(h-l)/2,i=t.x-(i+s),u=t.y-(u+l);if(null===this.fill){if(s-=e,l-=e,0>=s||0>=l||1>=i*i/(s*s)+u*u/(l*l))return Yh.Db(r),!1;s+=e,l+=e}return null!==this.stroke&&(s+=o,l+=o),Yh.Db(r),!(0>=s||0>=l)&&1>=i*i/(s*s)+u*u/(l*l)}return i.type===lf?(Yh.Db(r),null===this.fill?Mt(i,t.x,t.y,o):i.Ha(t,o,1<this.kb,n)):(Yh.k("Unknown Geometry type: "+i.type),!1)},Cr.prototype.Mn=function(t,n,i,e){var o=this.Ba,r=this.gi;t=Math.max(t,0),n=Math.max(n,0);var s;if(null!==this.Nf)s=this.hf.eb;else{var l=this.Cb,a=tf[l];if(void 0===a){var h=Nd[l];"string"==typeof h&&(h=Nd[h]),"function"==typeof h?(a=h(null,100,100),tf[l]=a):Yh.k("Unsupported Figure: "+l)}s=a.eb}var l=s.width,a=s.height,h=s.width,u=s.height;switch(Eo(this,!0)){case Bc:e=i=0;break;case Ic:h=Math.max(t-r,0),u=Math.max(n-r,0);break;case Ec:h=Math.max(t-r,0),e=0;break;case zc:i=0,u=Math.max(n-r,0)}switch(isFinite(o.width)&&(h=o.width),isFinite(o.height)&&(u=o.height),o=this.Cf,s=this.Ah,i=Math.max(i,s.width)-r,e=Math.max(e,s.height)-r,h=Math.min(o.width,h),u=Math.min(o.height,u),h=isFinite(h)?Math.max(i,h):Math.max(l,i),u=isFinite(u)?Math.max(e,u):Math.max(a,e),i=Dr(this)){case Bc:break;case Ic:l=h,a=u;break;case Rc:i=Math.min(h/l,u/a),isFinite(i)||(i=1),l*=i,a*=i;break;default:Yh.k(i+" is not a valid geometryStretch.")}null!==this.Nf?(l=Math.max(l,.01),a=Math.max(a,.01),s=null!==this.Nf?this.Nf:this.Va,o=l,e=a,i=s.copy(),s=s.eb,o/=s.width,e/=s.height,isFinite(o)||(o=1),isFinite(e)||(e=1),1===o&&1===e||i.scale(o,e),this.Va=i):null!==this.Va&&X(this.Va.Qo,t-r)&&X(this.Va.Oo,n-r)||(this.Va=Cr.makeGeometry(this,l,a)),s=this.Va.eb,1/0===t||1/0===n?jo(this,s.x-r/2,s.y-r/2,0===t&&0===l?0:s.width+r,0===n&&0===a?0:s.height+r):jo(this,-r/2,-r/2,h+r,u+r)},Cr.prototype.ij=function(t,n,i,e){Ao(this,t,n,i,e)},Cr.prototype.getNearestIntersectionPoint=Cr.prototype.TE=function(t,n,i){return this.An(t.x,t.y,n.x,n.y,i)},Cr.prototype.An=function(t,n,i,e,o){var r=this.transform,s=1/(r.m11*r.m22-r.m12*r.m21),l=r.m22*s,a=-r.m12*s,h=-r.m21*s,u=r.m11*s,f=s*(r.m21*r.dy-r.m22*r.dx),c=s*(r.m12*r.dx-r.m11*r.dy),r=t*l+n*h+f,s=t*a+n*u+c,l=i*l+e*h+f,a=i*a+e*u+c,h=this.kb/2,f=this.Va;if(null===f&&(Do(this,1/0,1/0),f=this.Va),c=f.eb,u=!1,f.type===of)if(1.5>=this.kb)u=lt(f.xc,f.Gc,f.yb,f.Gb,r,s,l,a,o);else{var d=0,p=0;if(f.xc===f.yb?(d=h,p=0):(n=(f.Gb-f.Gc)/(f.yb-f.xc),p=h/Math.sqrt(1+n*n),d=p*n),e=Yh.lb(),n=new x,lt(f.xc+d,f.Gc+p,f.yb+d,f.Gb+p,r,s,l,a,n)&&e.push(n),n=new x,lt(f.xc-d,f.Gc-p,f.yb-d,f.Gb-p,r,s,l,a,n)&&e.push(n),n=new x,lt(f.xc+d,f.Gc+p,f.xc-d,f.Gc-p,r,s,l,a,n)&&e.push(n),n=new x,lt(f.yb+d,f.Gb+p,f.yb-d,f.Gb-p,r,s,l,a,n)&&e.push(n),0===(n=e.length))return Yh.wa(e),!1;for(u=!0,p=1/0,d=0;d<n;d++){var l=e[d],y=(l.x-r)*(l.x-r)+(l.y-s)*(l.y-s);y<p&&(p=y,o.x=l.x,o.y=l.y)}Yh.wa(e)}else if(f.type===rf)n=c.x-h,u=at(n,c.y-h,c.x+c.width+h,c.y+c.height+h,r,s,l,a,o);else if(f.type===sf)t:if(n=c.copy().yf(h,h),0===n.width)u=lt(n.x,n.y,n.x,n.y+n.height,r,s,l,a,o);else if(0===n.height)u=lt(n.x,n.y,n.x+n.width,n.y,r,s,l,a,o);else{t=n.width/2;var v=n.height/2;if(e=n.x+t,n=n.y+v,i=9999,r!==l&&(i=(s-a)/(r-l)),9999>Math.abs(i)){if(u=s-n-i*(r-e),0>t*t*i*i+v*v-u*u){o.x=NaN,o.y=NaN,u=!1;break t}h=Math.sqrt(t*t*i*i+v*v-u*u),l=(-t*t*i*u+t*v*h)/(v*v+t*t*i*i)+e,t=(-t*t*i*u-t*v*h)/(v*v+t*t*i*i)+e,a=i*(l-e)+u+n,n=i*(t-e)+u+n,e=Math.abs((r-l)*(r-l))+Math.abs((s-a)*(s-a)),s=Math.abs((r-t)*(r-t))+Math.abs((s-n)*(s-n)),e<s?(o.x=l,o.y=a):(o.x=t,o.y=n)}else{if(l=v*v,a=r-e,0>(l-=l/(t*t)*a*a)){o.x=NaN,o.y=NaN,u=!1;break t}h=Math.sqrt(l),a=n+h,n-=h,e=Math.abs(a-s),s=Math.abs(n-s),e<s?(o.x=r,o.y=a):(o.x=r,o.y=n)}u=!0}else if(f.type===lf){var g=0,m=0,b=y=0,c=Yh.K(),d=l-r,p=a-s,p=d*d+p*p;for(o.x=l,o.y=a,d=0;d<f.ec.count;d++)for(var w=f.ec.n[d],k=w.vb,g=w.ha,m=w.fa,M=g,P=m,T=0;T<k.count;T++){var S=k.n[T],C=S.type,y=S.C,b=S.D,N=!1;switch(C){case uf:M=y,P=b;break;case ff:N=Fr(g,m,y,b,r,s,l,a,c);break;case cf:var N=S.sc,C=S.Pc,j=S.Bh,L=S.Ch,N=ot(g,m,N,C,j,L,y,b,r,s,l,a,.5,c);break;case df:N=(g+2*S.sc)/3,C=(m+2*S.Pc)/3,j=(2*S.sc+y)/3,L=(2*S.sc+y)/3,N=ot(g,m,N,C,j,L,y,b,r,s,l,a,.5,c);break;case pf:case yf:if(C=S.type===pf?Nt(S,w):jt(S,w,g,m),0===(j=C.length)){N=Fr(g,m,S.ka,S.ra,r,s,l,a,c);break}for(b=0;b<j;b++)v=C[b],0===b&&Fr(g,m,v[0],v[1],r,s,l,a,c)&&(y=Ar(r,s,c,p,o))<p&&(p=y,u=!0),ot(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],r,s,l,a,.5,c)&&(y=Ar(r,s,c,p,o))<p&&(p=y,u=!0);y=v[6],b=v[7];break;default:Yh.k("Unknown Segment type: "+C)}g=y,m=b,N&&(y=Ar(r,s,c,p,o))<p&&(p=y,u=!0),S.wx&&(y=M,b=P,Fr(g,m,y,b,r,s,l,a,c)&&(y=Ar(r,s,c,p,o))<p&&(p=y,u=!0))}r=i-t,s=e-n,n=Math.sqrt(r*r+s*s),0!==n&&(r/=n,s/=n),o.x-=r*h,o.y-=s*h,Yh.v(c)}else Yh.k("Unknown Geometry type: "+f.type);return!!u&&(this.transform.nb(o),!0)},Cr.prototype.containedInRect=Cr.prototype.qn=function(t,n){if(void 0===n)return t.wk(this.W);var i=this.Va;null===i&&(Do(this,1/0,1/0),i=this.Va);var i=i.eb,e=this.kb/2,o=!1,r=Yh.K();return r.m(i.x-e,i.y-e),t.Ha(n.nb(r))&&(r.m(i.x-e,i.bottom+e),t.Ha(n.nb(r))&&(r.m(i.right+e,i.bottom+e),t.Ha(n.nb(r))&&(r.m(i.right+e,i.y-e),t.Ha(n.nb(r))&&(o=!0)))),Yh.v(r),o},Cr.prototype.intersectsRect=Cr.prototype.Uf=function(t,n){if(this.qn(t,n)||void 0===n&&(n=this.transform,t.wk(this.W)))return!0;var i=Yh.Gf();i.set(n),i.ux();var e=t.left,o=t.right,r=t.top,s=t.bottom,l=Yh.K();if(l.m(e,r),i.nb(l),this.vk(l,!0))return Yh.v(l),!0;if(l.m(o,r),i.nb(l),this.vk(l,!0))return Yh.v(l),!0;if(l.m(e,s),i.nb(l),this.vk(l,!0))return Yh.v(l),!0;if(l.m(o,s),i.nb(l),this.vk(l,!0))return Yh.v(l),!0;var a=Yh.K(),h=Yh.K();i.set(n),i.CF(this.transform),i.ux(),a.x=o,a.y=r,a.transform(i),l.x=e,l.y=r,l.transform(i);var u=!1;return Or(this,l,a,h)?u=!0:(l.x=o,l.y=s,l.transform(i),Or(this,l,a,h)?u=!0:(a.x=e,a.y=s,a.transform(i),Or(this,l,a,h)?u=!0:(l.x=e,l.y=r,l.transform(i),Or(this,l,a,h)&&(u=!0)))),Yh.v(l),Yh.ue(i),Yh.v(a),Yh.v(h),u},Cr.prototype.ME=function(t,n,i){function e(t,n){for(var i=t.length,e=0;e<i;e+=2)if(n.Qp(t[e],t[e+1])>o)return!0;return!1}if(i&&null!==this.fill&&this.vk(t,!0))return!0;var o=t.wf(n);n=o,1.5<this.kb&&(o=this.kb/2+Math.sqrt(o),o*=o);var r=this.Va;if(null===r&&(Do(this,1/0,1/0),null===(r=this.Va)))return!1;if(!i){var s=r.eb,l=s.x,a=s.y,h=s.x+s.width,s=s.y+s.height;if(Qh(t.x,t.y,l,a)<=o&&Qh(t.x,t.y,h,a)<=o&&Qh(t.x,t.y,l,s)<=o&&Qh(t.x,t.y,h,s)<=o)return!0}if(l=r.xc,a=r.Gc,h=r.yb,s=r.Gb,r.type===of){if(i=$h(t.x,t.y,l,a,h,s),r=(l-h)*(t.x-h)+(a-s)*(t.y-s),i<=(0<=(h-l)*(t.x-l)+(s-a)*(t.y-a)&&0<=r?o:n))return!0}else{if(r.type===rf)return n=!1,i&&(n=$h(t.x,t.y,l,a,l,s)<=o||$h(t.x,t.y,l,a,h,a)<=o||$h(t.x,t.y,h,a,h,s)<=o||$h(t.x,t.y,l,s,h,s)<=o),n;if(r.type===sf){n=t.x-(l+h)/2;var r=t.y-(a+s)/2,u=Math.abs(h-l)/2,f=Math.abs(s-a)/2;if(0===u||0===f)return(i=$h(t.x,t.y,l,a,h,s))<=o;if(!i)return!(Qh(n,r,-u,0)>=o||Qh(n,r,0,-f)>=o||Qh(n,r,0,f)>=o||Qh(n,r,u,0)>=o);if((t=gt(u,f,n,r))*t<=o)return!0}else if(r.type===lf){if(s=r.eb,l=s.x,a=s.y,h=s.x+s.width,s=s.y+s.height,t.x>h&&t.x<l&&t.y>s&&t.y<a&&$h(t.x,t.y,l,a,l,s)>o&&$h(t.x,t.y,l,a,h,a)>o&&$h(t.x,t.y,h,s,l,s)>o&&$h(t.x,t.y,h,s,h,a)>o)return!1;if(n=Math.sqrt(o),!i){for(i=r.ec,n=0;n<i.count;n++){if(l=i.n[n],u=l.ha,f=l.fa,t.Qp(u,f)>o)return!1;for(a=l.vb.n,h=a.length,s=0;s<h;s++){var c=a[s];switch(c.type){case uf:case ff:if(u=c.C,f=c.D,t.Qp(u,f)>o)return!1;break;case cf:if(r=Yh.lb(),_(u,f,c.sc,c.Pc,c.Bh,c.Ch,c.C,c.D,.8,r),u=e(r,t),Yh.wa(r),u)return!1;if(u=c.C,f=c.D,t.Qp(u,f)>o)return!1;break;case df:if(r=Yh.lb(),et(u,f,c.sc,c.Pc,c.C,c.D,.8,r),u=e(r,t),Yh.wa(r),u)return!1;if(u=c.C,f=c.D,t.Qp(u,f)>o)return!1;break;case pf:case yf:var d=c.type===pf?Nt(c,l):jt(c,l,u,f),p=d.length;if(0===p){if(u=c.ka,f=c.ra,t.Qp(u,f)>o)return!1;break}for(c=null,r=Yh.lb(),n=0;n<p;n++)if(c=d[n],r.length=0,_(c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],.8,r),e(r,t))return Yh.wa(r),!1;Yh.wa(r),null!==c&&(u=c[6],f=c[7]);break;default:Yh.k("Unknown Segment type: "+c.type)}}}return!0}if(null===this.fill?Mt(r,t.x,t.y,n):r.Ha(t,n,!0))return!0}}return!1},Yh.defineProperty(Cr,{hf:"geometry"},function(){return null!==this.Va?this.Va:this.Nf},function(t){var n=this.Va;if(n!==t){this.Nf=this.Va=null!==t?t.freeze():null;var i=this.U;null!==i&&(i.ck=NaN),this.H(),this.h("geometry",n,t),Vo(this)&&null!==(t=this.U)&&No(this,t,"geometryString")}}),Yh.defineProperty(Cr,{WH:"geometryString"},function(){return null===this.hf?"":this.hf.toString()},function(t){t=hf(t);var n=t.normalize();this.hf=t,this.position=t=Yh.xb(-n.x,-n.y),Yh.v(t)}),Yh.defineProperty(Cr,{jF:"isGeometryPositioned"},function(){return this.Hr},function(t){var n=this.Hr;n!==t&&(this.Hr=t,this.H(),this.h("isGeometryPositioned",n,t))}),Cr.prototype.Ke=function(){this.Va=null},Yh.defineProperty(Cr,{fill:"fill"},function(){return this.zd},function(t){var n=this.zd;n!==t&&(t instanceof mo&&t.freeze(),this.zd=t,this.na(),this.h("fill",n,t))}),Yh.defineProperty(Cr,{stroke:"stroke"},function(){return this.qc},function(t){var n=this.qc;n!==t&&(t instanceof mo&&t.freeze(),this.qc=t,this.na(),this.h("stroke",n,t))}),Yh.defineProperty(Cr,{kb:"strokeWidth"},function(){return this.gi},function(t){var n=this.gi;if(n!==t)if(0<=t){this.gi=t,this.H();var i=this.U;null!==i&&(i.ck=NaN),this.h("strokeWidth",n,t)}else Yh.Ea(t,"value >= 0",Cr,"strokeWidth:value")}),Yh.defineProperty(Cr,{NL:"strokeCap"},function(){return this.sp},function(t){var n=this.sp;n!==t&&("string"!=typeof t||"butt"!==t&&"round"!==t&&"square"!==t?Yh.Ea(t,'"butt", "round", or "square"',Cr,"strokeCap"):(this.sp=t,this.na(),this.h("strokeCap",n,t)))}),Yh.defineProperty(Cr,{PL:"strokeJoin"},function(){return this.vp},function(t){var n=this.vp;n!==t&&("string"!=typeof t||"miter"!==t&&"bevel"!==t&&"round"!==t?Yh.Ea(t,'"miter", "bevel", or "round"',Cr,"strokeJoin"):(this.vp=t,this.na(),this.h("strokeJoin",n,t)))}),Yh.defineProperty(Cr,{QL:"strokeMiterLimit"},function(){return this.cn},function(t){var n=this.cn;if(n!==t)if(1<=t){this.cn=t,this.na();var i=this.U;null!==i&&(i.ck=NaN),this.h("strokeMiterLimit",n,t)}else Yh.Ea(t,"value >= 1",Cr,"strokeWidth:value")}),Yh.defineProperty(Cr,{nG:"strokeDashArray"},function(){return this.tp},function(t){var n=this.tp;if(n!==t){if(null===t||Array.isArray(t)||Yh.yd(t,"Array",Cr,"strokeDashArray:value"),null!==t){for(var i=t.length,e=0,o=0;o<i;o++){var r=t[o];"number"==typeof r&&0<=r&&isFinite(r)||Yh.k("strokeDashArray:value "+r+" at index "+o+" must be a positive number or zero."),e+=r}if(0===e){if(null===n)return;t=null}}this.tp=t,this.na(),this.h("strokeDashArray",n,t)}}),Yh.defineProperty(Cr,{OL:"strokeDashOffset"},function(){return this.uf},function(t){var n=this.uf;n!==t&&0<=t&&(this.uf=t,this.na(),this.h("strokeDashOffset",n,t))}),Yh.defineProperty(Cr,{Cb:"figure"},function(){return this.Go},function(t){var n=this.Go;if(n!==t){var i=Nd[t];"function"==typeof i?i=t:(i=Nd[t.toLowerCase()])||Yh.k("Unknown Shape.figure: "+t),n!==i&&(t=this.U,null!==t&&(t.ck=NaN),this.Go=i,this.Nf=null,this.Ke(),this.H(),this.h("figure",n,i))}}),Yh.defineProperty(Cr,{yq:"toArrow"},function(){return this.zp},function(t){var n=this.zp;if(!0===t?t="Standard":!1===t&&(t=""),n!==t){var i=ls(t);null===i?Yh.k("Unknown Shape.toArrow: "+t):n!==i&&(this.zp=i,this.Nf=null,this.Ke(),this.H(),Br(this),this.h("toArrow",n,i))}}),Yh.defineProperty(Cr,{kA:"fromArrow"},function(){return this.Io},function(t){var n=this.Io;if(!0===t?t="Standard":!1===t&&(t=""),n!==t){var i=ls(t);null===i?Yh.k("Unknown Shape.fromArrow: "+t):n!==i&&(this.Io=i,this.Nf=null,this.Ke(),this.H(),Br(this),this.h("fromArrow",n,i))}}),Yh.defineProperty(Cr,{A:"spot1"},function(){return this.ei},function(t){Yh.G(t,F,Cr,"spot1");var n=this.ei;n.L(t)||(this.ei=t=t.S(),this.H(),this.h("spot1",n,t))}),Yh.defineProperty(Cr,{B:"spot2"},function(){return this.fi},function(t){Yh.G(t,F,Cr,"spot2");var n=this.fi;n.L(t)||(this.fi=t=t.S(),this.H(),this.h("spot2",n,t))}),Yh.defineProperty(Cr,{Cc:"parameter1"},function(){return this.ws},function(t){var n=this.ws;n!==t&&(this.ws=t,this.Ke(),this.H(),this.h("parameter1",n,t))}),Yh.defineProperty(Cr,{xu:"parameter2"},function(){return this.xs},function(t){var n=this.xs;n!==t&&(this.xs=t,this.Ke(),this.H(),this.h("parameter2",n,t))}),Yh.u(Cr,{Ia:"naturalBounds"},function(){if(null!==this.Va)return this.Tc.assign(this.Va.eb),this.Tc;var t=this.Ba;return new P(0,0,t.width,t.height)}),Yh.defineProperty(Cr,{Qx:"pathPattern"},function(){return this.zs},function(t){var n=this.zs;n!==t&&(this.zs=t,this.na(),this.h("pathPattern",n,t))}),Yh.defineProperty(Cr,{DL:"pathObject"},function(){return this.Qx},function(t){this.Qx=t}),Yh.defineProperty(Cr,{mA:"geometryStretch"},function(){return this.xr},function(t){var n=this.xr;n!==t&&(Yh.mb(t,To,Cr,"geometryStretch"),this.xr=t,this.h("geometryStretch",n,t))}),Yh.defineProperty(Cr,{interval:"interval"},function(){return this.sg},function(t){var n=this.sg;if(t=Math.floor(t),n!==t&&0<=t){this.sg=t;var i=this.g;null!==i&&this.O===i.Cn&&ke(i),this.H(),i=this.O,null!==i&&i.type===od&&(i.Tj=null),this.h("interval",n,t)}}),Yh.defineProperty(Cr,{XE:"graduatedStart"},function(){return this.rg},function(t){var n=this.rg;n!==t&&(0>t?t=0:1<t&&(t=1),this.rg=t,this.H(),this.h("graduatedStart",n,t))}),Yh.defineProperty(Cr,{VE:"graduatedEnd"},function(){return this.qg},function(t){var n=this.qg;n!==t&&(0>t?t=0:1<t&&(t=1),this.qg=t,this.H(),this.h("graduatedEnd",n,t))}),Cr.makeGeometry=function(t,n,i){var e=null;if("None"!==t.yq)e=nf[t.yq];else if("None"!==t.kA)e=nf[t.kA];else{var o=Nd[t.Cb];"string"==typeof o&&(o=Nd[o]),void 0===o&&Yh.k("Unknown Shape.figure: "+t.Cb),e=o(t,n,i),e.Qo=n,e.Oo=i}return null===e&&"function"==typeof(o=Nd.Rectangle)&&(e=o(t,n,i)),e},Cr.getFigureGenerators=function(){var t,n=new b("string","function");for(t in Nd)if(t!==t.toLowerCase()){var i=Nd[t];"function"==typeof i&&n.add(t,i)}return n.freeze(),n},Cr.defineFigureGenerator=function(t,n){Yh.j(t,"string",Cr,"defineFigureGenerator:name"),"string"==typeof n?""!==n&&Nd[n]||Yh.k("Shape.defineFigureGenerator synonym must not be empty or None or not a defined figure name: "+n):Yh.j(n,"function",Cr,"defineFigureGenerator:func");var i=t.toLowerCase();""!==t&&"none"!==i&&t!==i||Yh.k("Shape.defineFigureGenerator name must not be empty or None or all-lower-case: "+t),Nd[t]=n,Nd[i]=t},Cr.getArrowheadGeometries=function(){var t,n=new b("string",mt);for(t in jd)if(void 0===nf[t]){var i=hf(jd[t],!1);nf[t]=i,i=t.toLowerCase(),i!==t&&(nf[i]=t)}for(t in nf)t!==t.toLowerCase()&&(i=nf[t])instanceof mt&&n.add(t,i);return n.freeze(),n},Cr.defineArrowheadGeometry=function(t,n){Yh.j(t,"string",Cr,"defineArrowheadGeometry:name");var i=null;"string"==typeof n?(Yh.j(n,"string",Cr,"defineArrowheadGeometry:pathstr"),i=hf(n,!1)):(Yh.G(n,mt,Cr,"defineArrowheadGeometry:pathstr"),i=n);var e=t.toLowerCase();""!==t&&"none"!==e&&t!==e||Yh.k("Shape.defineArrowheadGeometry name must not be empty or None or all-lower-case: "+t),nf[t]=i,nf[e]=t},Yh.Ka(qr,To),Yh.ga("TextBlock",qr);var ud=/[ \u200b\u00ad]/;qr.prototype.cloneProtected=function(t){To.prototype.cloneProtected.call(this,t),t.Ed=this.Ed,t.qc=this.qc,t.og=this.og,t.wl=this.wl,t.ng=this.ng,t.Al=this.Al,t.Dm=this.Dm,t.Zj=this.Zj,t.Yj=this.Yj,t.Xi=this.Xi,t.rk=this.rk,t.je=this.je,t.Zv=this.Zv,t.oz=this.oz,t.nz=this.nz,t.tf.Kp(this.tf),t.qr=this.qr,t.jt=this.jt,t.xl=this.xl,t.it=this.it,t.Rq=this.Rq,t.Te=this.Te,t.ci=this.ci,t.di=this.di,t.gh=this.gh,t.Xo=this.Xo,t.sg=this.sg,t.rg=this.rg,t.qg=this.qg,t.ym=this.ym},qr.prototype.hc=function(t){t.De===qr?this.BG=t:To.prototype.hc.call(this,t)},qr.prototype.toString=function(){return 22<this.Ed.length?'TextBlock("'+this.Ed.substring(0,20)+'"...)':'TextBlock("'+this.Ed+'")'};var fd=new o,cd=0,dd=new o,pd=0,yd="...",vd="",gd=new U(null).xk;qr.getEllipsis=function(){return yd},qr.setEllipsis=function(t){yd=t,dd=new o,pd=0};var md;qr.None=md=Yh.p(qr,"None",0);var bd;qr.WrapFit=bd=Yh.p(qr,"WrapFit",1);var xd;qr.WrapDesiredSize=xd=Yh.p(qr,"WrapDesiredSize",2);var wd;qr.OverflowClip=wd=Yh.p(qr,"OverflowClip",0);var kd;qr.OverflowEllipsis=kd=Yh.p(qr,"OverflowEllipsis",1),qr.prototype.H=function(){To.prototype.H.call(this),this.nz=this.oz=null},Yh.defineProperty(qr,{font:"font"},function(){return this.og},function(t){var n=this.og;n!==t&&(this.og=t,this.tf.Oj=null,this.H(),this.h("font",n,t))}),qr.isValidFont=function(t){var n=gd.font;if(t===n||"10px sans-serif"===t)return!0;gd.font="10px sans-serif";var i;gd.font=t;var e=gd.font;return"10px sans-serif"!==e?(gd.font=n,!0):(gd.font="19px serif",i=gd.font,gd.font=t,e=gd.font,gd.font=n,e!==i)},Yh.defineProperty(qr,{text:"text"},function(){return this.Ed},function(t){var n=this.Ed;t=null!==t&&void 0!==t?t.toString():"",n!==t&&(this.Ed=t,this.H(),this.h("text",n,t))}),Yh.defineProperty(qr,{textAlign:"textAlign"},function(){return this.wl},function(t){var n=this.wl;n!==t&&("start"===t||"end"===t||"left"===t||"right"===t||"center"===t?(this.wl=t,this.na(),this.h("textAlign",n,t)):Yh.Ea(t,'"start", "end", "left", "right", or "center"',qr,"textAlign"))}),Yh.defineProperty(qr,{Qt:"flip"},function(){return this.ng},function(t){var n=this.ng;n!==t&&(Yh.mb(t,To,qr,"flip"),this.ng=t,this.na(),this.h("flip",n,t))}),Yh.defineProperty(qr,{WL:"verticalAlignment"},function(){return this.Al},function(t){var n=this.Al;n.L(t)||(t.Od()&&Yh.k("TextBlock.verticalAlignment for "+this+" must be a real Spot, not:"+t),this.Al=t=t.S(),zo(this),this.h("verticalAlignment",n,t))}),Yh.u(qr,{Ia:"naturalBounds"},function(){if(!this.Tc.I()){var t=zr(this,this.Ed,this.tf,999999).width,n=Vr(this,t,this.tf),i=this.Ba;isNaN(i.width)||(t=i.width),isNaN(i.height)||(n=i.height),T(this.Tc,t,n)}return this.Tc}),Yh.defineProperty(qr,{Bx:"isMultiline"},function(){return this.Dm},function(t){var n=this.Dm;n!==t&&(this.Dm=t,this.H(),this.h("isMultiline",n,t))}),Yh.defineProperty(qr,{cL:"isUnderline"},function(){return this.Zj},function(t){var n=this.Zj;n!==t&&(this.Zj=t,this.na(),this.h("isUnderline",n,t))}),Yh.defineProperty(qr,{bL:"isStrikethrough"},function(){return this.Yj},function(t){var n=this.Yj;n!==t&&(this.Yj=t,this.na(),this.h("isStrikethrough",n,t))}),Yh.defineProperty(qr,{BG:"wrap"},function(){return this.rk},function(t){var n=this.rk;n!==t&&(this.rk=t,this.H(),this.h("wrap",n,t))}),Yh.defineProperty(qr,{overflow:"overflow"},function(){return this.Xi},function(t){var n=this.Xi;n!==t&&(this.Xi=t,this.H(),this.h("overflow",n,t))}),Yh.defineProperty(qr,{stroke:"stroke"},function(){return this.qc},function(t){var n=this.qc;n!==t&&(t instanceof mo&&t.freeze(),this.qc=t,this.na(),this.h("stroke",n,t))}),Yh.u(qr,{GI:"lineCount"},function(){return this.je}),Yh.defineProperty(qr,{gA:"editable"},function(){return this.qr},function(t){var n=this.qr;n!==t&&(this.qr=t,this.h("editable",n,t))}),Yh.defineProperty(qr,{pG:"textEditor"},function(){return this.jt},function(t){var n=this.jt;n!==t&&(this.jt=t,this.h("textEditor",n,t))}),Yh.defineProperty(qr,{iA:"errorFunction"},function(){return this.Te},function(t){var n=this.Te;n!==t&&(null!==t&&Yh.j(t,"function",qr,"errorFunction"),this.Te=t,this.h("errorFunction",n,t))}),Yh.defineProperty(qr,{interval:"interval"},function(){return this.sg},function(t){var n=this.sg;if(t=Math.floor(t),n!==t&&0<=t){this.sg=t,this.H();var i=this.O;null!==i&&i.type===od&&(i.Tj=null),this.h("interval",n,t)}}),Yh.defineProperty(qr,{XE:"graduatedStart"},function(){return this.rg},function(t){var n=this.rg;n!==t&&(0>t?t=0:1<t&&(t=1),this.rg=t,this.H(),this.h("graduatedStart",n,t))}),Yh.defineProperty(qr,{VE:"graduatedEnd"},function(){return this.qg},function(t){var n=this.qg;n!==t&&(0>t?t=0:1<t&&(t=1),this.qg=t,this.H(),this.h("graduatedEnd",n,t))}),Yh.defineProperty(qr,{WE:"graduatedFunction"},function(){return this.ym},function(t){var n=this.ym;n!==t&&(null!==t&&Yh.j(t,"function",qr,"graduatedFunction"),this.ym=t,this.H(),this.h("graduatedFunction",n,t))}),qr.prototype.yk=function(t,n){if(null!==this.qc&&0!==this.Ed.length&&null!==this.og){var i=this.Ia.width,e=this.Ia.height,o=Rr(this),r=t.textAlign=this.wl,s=n.Kr;"start"===r&&(r=s?"right":"left"),"end"===r&&(r=s?"left":"right"),Oo(this,t,this.qc,!0,!1),(this.Zj||this.Yj)&&Oo(this,t,this.qc,!1,!1);var l=0,s=!1,a=Yh.xb(0,0);this.qh.nb(a);var h=Yh.xb(0,o);this.qh.nb(h);var u=a.wf(h);switch(Yh.v(a),Yh.v(h),a=n.scale,8>u*a*a&&(s=!0),n.rf!==t&&(s=!1),!1===n.pj("textGreeking")&&(s=!1),u=this.ci,a=this.di,this.Qt){case Hc:t.translate(i,0),t.scale(-1,1);break;case Vc:t.translate(0,e),t.scale(1,-1);break;case Kc:t.translate(i,e),t.scale(-1,-1)}var h=this.je,f=(u+o+a)*h;e>f&&(l=this.Al,l=l.y*e-l.y*f+l.offsetY);for(var f=this.tf,c=0;c<h;c++){var d=f.qf[c],p=f.Qe[c];d>i&&(d=i);var l=l+u,y=p,p=t,v=l,g=i,m=o,b=r,x=0;s?("left"===b?x=0:"right"===b?x=g-d:"center"===b&&(x=(g-d)/2),p.fillRect(0+x,v+.25*m,d,1)):("left"===b?x=0:"right"===b?x=g:"center"===b&&(x=g/2),p.fillText(y,0+x,v+m-.25*m),y=m/20|0,0===y&&(y=1),"right"===b?x-=d:"center"===b&&(x-=d/2),this.Zj&&(p.beginPath(),p.lineWidth=y,p.moveTo(0+x,v+m-.2*m),p.lineTo(0+x+d,v+m-.2*m),p.stroke()),this.Yj&&(p.beginPath(),p.lineWidth=y,v=v+m-m/2.2|0,0!=y%2&&(v+=.5),p.moveTo(0+x,v),p.lineTo(0+x+d,v),p.stroke())),l+=o+a}switch(this.Qt){case Hc:t.scale(-1,1),t.translate(-i,0);break;case Vc:t.scale(1,-1),t.translate(0,-e);break;case Kc:t.scale(-1,-1),t.translate(-i,-e)}}},qr.prototype.Mn=function(t,n,i,e){this.Xo=t;var o=this.tf;o.reset();var r=0,s=0;if(isNaN(this.Ba.width)){if(r=this.Ed.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),0===r.length)r=0;else if(this.Bx){for(var l=s=0,a=!1;!a;){var h=r.indexOf("\n",l);-1===h&&(h=r.length,a=!0),l=Ir(r.substr(l,h-l).replace(/^\s+|\s+$/g,""),this.og),l>s&&(s=l),l=h+1}r=s}else s=r.indexOf("\n",0),0<=s&&(r=r.substr(0,s)),r=l=Ir(r,this.og);r=Math.min(r,t/this.scale),r=Math.max(8,r)}else r=this.Ba.width;if(null!==this.O&&(r=Math.min(r,this.O.Cf.width),r=Math.max(r,this.O.Ah.width)),s=Vr(this,r,o),h=s=isNaN(this.Ba.height)?Math.min(s,n/this.scale):this.Ba.height,0!==o.Ue&&1!==o.Qe.length&&this.Xi===kd&&(n=this.og,a=this.Xi===kd?Gr(n):0,l=this.ci+this.di,l=Math.max(0,Rr(this)+l),!((h=Math.min(this.OI-1,Math.max(Math.floor(h/l+.01)-1,0)))+1>=o.Qe.length))){for(l=o.Qe[h],t=Math.max(1,t-a);Ir(l,n)>t&&1<l.length;)l=l.substr(0,l.length-1);l+=yd,t=Ir(l,n),o.Qe[h]=l,o.Qe=o.Qe.slice(0,h+1),o.qf[h]=t,o.qf=o.qf.slice(0,h+1),o.gj=o.Qe.length,o.Ue=Math.max(o.Ue,t),this.je=o.gj}(this.BG===bd||isNaN(this.Ba.width))&&(r=o.Ue,isNaN(this.Ba.width)&&(r=Math.max(8,r))),r=Math.max(i,r),s=Math.max(e,s),T(this.Tc,r,s),jo(this,0,0,r,s)},qr.prototype.ij=function(t,n,i,e){Ao(this,t,n,i,e)},Yh.defineProperty(qr,{pB:"textValidation"},function(){return this.xl},function(t){var n=this.xl;n!==t&&(null!==t&&Yh.j(t,"function",qr,"textValidation"),this.xl=t,this.h("textValidation",n,t))}),Yh.defineProperty(qr,{oG:"textEdited"},function(){return this.it},function(t){var n=this.it;n!==t&&(null!==t&&Yh.j(t,"function",qr,"textEdited"),this.it=t,this.h("textEdited",n,t))}),Yh.defineProperty(qr,{KL:"spacingAbove"},function(){return this.ci},function(t){var n=this.ci;n!==t&&(this.ci=t,this.h("spacingAbove",n,t))}),Yh.defineProperty(qr,{LL:"spacingBelow"},function(){return this.di},function(t){var n=this.di;n!==t&&(this.di=t,this.h("spacingBelow",n,t))}),Yh.defineProperty(qr,{OI:"maxLines"},function(){return this.gh},function(t){var n=this.gh;n!==t&&(t=Math.floor(t),0>=t&&Yh.Ea(t,"> 0",qr,"maxLines"),this.gh=t,this.h("maxLines",n,t),this.H())}),Yh.u(qr,{oL:"metrics"},function(){return this.tf}),Yh.defineProperty(qr,{zK:"choices"},function(){return this.Rq},function(t){var n=this.Rq;n!==t&&(null===t||Array.isArray(t)||Yh.yd(t,"Array",qr,"choices:value"),this.Rq=t,this.h("choices",n,t))}),Hr.prototype.reset=function(){this.Ue=this.gj=0,this.Oj=null,this.qf=[],this.Qe=[]},Hr.prototype.Kp=function(t){this.gj=t.gj,this.Oj=t.Oj,this.Ue=t.Ue,this.qf=Yh.Il(t.qf),this.Qe=Yh.Il(t.Qe)},Yh.u(Hr,{vK:"arrSize"},function(){return this.qf}),Yh.u(Hr,{wK:"arrText"},function(){return this.Qe}),Yh.u(Hr,{nL:"maxLineWidth"},function(){return this.Ue}),Yh.u(Hr,{UK:"fontHeight"},function(){return this.Oj}),Yh.Ka(Kr,To),Yh.ga("Picture",Kr),Kr.prototype.cloneProtected=function(t){To.prototype.cloneProtected.call(this,t),t.element=this.Se,t.bt=this.bt,t.jk=this.jk.S(),t.Lo=this.Lo,t.ng=this.ng,t.Te=this.Te,t.hi=this.hi,t.Ko=this.Ko.S(),t.Av=this.Av,t.np=this.np},Kr.prototype.hc=function(t){t===Bc||t===Rc||t===Gc?this.lI=t:To.prototype.hc.call(this,t)},Kr.prototype.toString=function(){return"Picture("+this.source+")#"+Yh.Kd(this)};var Md,Pd=new o,Td=0,Sd=[];Kr.clearCache=Md=function(t){void 0===t&&(t=""),Yh.j(t,"string",Kr,"clearCache:url"),""!==t?Pd[t]&&(delete Pd[t],Td--):(Pd=new o,Td=0)},Yh.defineProperty(Kr,{element:"element"},function(){return this.Se},function(t){var n=this.Se;if(n!==t){if(null===t||t instanceof HTMLImageElement||t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement||Yh.k("Picture.element must be an instance of Image, Canvas, or Video, not: "+t),this.iz=t instanceof HTMLCanvasElement,this.Se=t,null!==t)if(t instanceof HTMLCanvasElement||!0===t.complete)t.Jo instanceof Event&&null!==this.Te&&this.Te(this,t.Jo),!0===t.Nv&&null!==this.hi&&this.hi(this,t.yz),t.Nv=!0,this.Ba.I()||(Yo(this,!1),this.H());else{var i=this;t.FC||(t.addEventListener("load",function(n){Jr(t,n),i.Ba.I()||(Yo(i,!1),i.H())}),t.addEventListener("error",function(n){Yr(t,n)}),t.FC=!0)}this.h("element",n,t),this.na()}}),Yh.defineProperty(Kr,{source:"source"},function(){return this.bt},function(t){var n=this.bt;if(n!==t){Yh.j(t,"string",Kr,"source"),this.bt=t;var i=Pd,e=this.g;if(void 0!==i[t])var o=i[t].Fp[0].source;else{30<Td&&(Md(),i=Pd);var o=Yh.createElement("img"),r=this;o.addEventListener("load",function(t){Jr(o,t),r.Ba.I()||(Yo(r,!1),r.H())}),o.addEventListener("error",function(t){Yr(o,t)}),o.FC=!0;var s=this.np;null!==s&&(o.crossOrigin=s(this)),o.src=t,i[t]=new Wr(o),Td++}null!==e&&Fe(e,this),this.element=o,null!==e&&De(e,this),this.H(),this.na(),this.h("source",n,t)}}),Yh.defineProperty(Kr,{JL:"sourceCrossOrigin"},function(){return this.np},function(t){if(this.np!==t&&(null!==t&&Yh.j(t,"function",Kr,"sourceCrossOrigin"),this.np=t,null!==this.element)){var n=this.element.src;null===t&&"string"==typeof n?this.element.crossOrigin=null:null!==t&&(this.element.crossOrigin=t(this)),this.element.src=n}}),Yh.defineProperty(Kr,{Cj:"sourceRect"},function(){return this.jk},function(t){var n=this.jk;n.L(t)||(Yh.G(t,P,Kr,"sourceRect"),this.jk=t=t.S(),this.na(),this.h("sourceRect",n,t))}),Yh.defineProperty(Kr,{lI:"imageStretch"},function(){return this.Lo},function(t){var n=this.Lo;n!==t&&(Yh.mb(t,To,Kr,"imageStretch"),this.Lo=t,this.na(),this.h("imageStretch",n,t))}),Yh.defineProperty(Kr,{Qt:"flip"},function(){return this.ng},function(t){var n=this.ng;n!==t&&(Yh.mb(t,To,Kr,"flip"),this.ng=t,this.na(),this.h("flip",n,t))}),Yh.defineProperty(Kr,{WK:"imageAlignment"},function(){return this.Ko},function(t){Yh.G(t,F,Kr,"imageAlignment");var n=this.Ko;n.L(t)||(this.Ko=t=t.S(),this.H(),this.h("imageAlignment",n,t))}),Yh.defineProperty(Kr,{iA:"errorFunction"},function(){return this.Te},function(t){var n=this.Te;n!==t&&(null!==t&&Yh.j(t,"function",Kr,"errorFunction"),this.Te=t,this.h("errorFunction",n,t))}),Yh.defineProperty(Kr,{TL:"successFunction"},function(){return this.hi},function(t){var n=this.hi;n!==t&&(null!==t&&Yh.j(t,"function",Kr,"successFunction"),this.hi=t,this.h("successFunction",n,t))}),Kr.prototype.yk=function(t,n){var i=this.Se;if(null!==i){var e=i.src;if(null!==e&&""!==e||Yh.k('Element has no source ("src") attribute: '+i),!(i.Jo instanceof Event)&&!0===i.Nv){var e=this.Ia,o=0,r=0,s=this.iz,l=s?+i.width:i.naturalWidth,s=s?+i.height:i.naturalHeight;if(void 0===l&&i.videoWidth&&(l=i.videoWidth),void 0===s&&i.videoHeight&&(s=i.videoHeight),l=l||e.width,s=s||e.height,0!==l&&0!==s){var a=l,h=s;this.Cj.I()&&(o=this.jk.x,r=this.jk.y,l=this.jk.width,s=this.jk.height);var u=l,f=s,c=this.Lo,d=this.Ko;switch(c){case Bc:if(this.Cj.I())break;u>=e.width&&(o=o+d.offsetX+(u*d.x-e.width*d.x)),f>=e.height&&(r=r+d.offsetY+(f*d.y-e.height*d.y)),l=Math.min(e.width,u),s=Math.min(e.height,f);break;case Ic:u=e.width,f=e.height;break;case Rc:case Gc:var p=0;c===Rc?(p=Math.min(e.height/f,e.width/u),u*=p,f*=p):c===Gc&&(p=Math.max(e.height/f,e.width/u),u*=p,f*=p,u>=e.width&&(o=(o+d.offsetX+(u*d.x-e.width*d.x)/u)*l),f>=e.height&&(r=(r+d.offsetY+(f*d.y-e.height*d.y)/f)*s),l*=1/(u/e.width),s*=1/(f/e.height),u=e.width,f=e.height)}var c=this.oj()*n.scale,y=l*s/(u*c*f*c),p=Pd[this.source],c=null;if(void 0!==p&&16<y){2>p.Fp.length&&(Xr(p,4,a,h),Xr(p,16,a,h));for(var a=p.Fp,h=a.length,c=a[0],v=0;v<h&&a[v].jq*a[v].jq<y;v++)c=a[v]}if(!n.Do){if(null===this.wp)if(null===this.Se)this.wp=!1;else{a=new U(null).xk,a.drawImage(this.Se,0,0);try{a.getImageData(0,0,1,1).data[3]&&(this.wp=!1),this.wp=!1}catch(t){this.wp=!0}}if(this.wp)return}switch(a=0,u<e.width&&(a=d.offsetX+(e.width*d.x-u*d.x)),h=0,f<e.height&&(h=d.offsetY+(e.height*d.y-f*d.y)),this.Qt){case Hc:t.translate(Math.min(e.width,u),0),t.scale(-1,1);break;case Vc:t.translate(0,Math.min(e.height,f)),t.scale(1,-1);break;case Kc:t.translate(Math.min(e.width,u),Math.min(e.height,f)),t.scale(-1,-1)}if(n.pj("pictureRatioOptimization")&&!n.jz&&void 0!==p&&null!==c&&1!==c.jq){t.save(),p=c.jq;try{t.drawImage(c.source,o/p,r/p,Math.min(c.source.width,l/p),Math.min(c.source.height,s/p),a,h,Math.min(e.width,u),Math.min(e.height,f))}catch(t){this.Av=!1}t.restore()}else try{t.drawImage(i,o,r,l,s,a,h,Math.min(e.width,u),Math.min(e.height,f))}catch(t){this.Av=!1}switch(this.Qt){case Hc:t.scale(-1,1),t.translate(-Math.min(e.width,u),0);break;case Vc:t.scale(1,-1),t.translate(0,-Math.min(e.height,f));break;case Kc:t.scale(-1,-1),t.translate(-Math.min(e.width,u),-Math.min(e.height,f))}}}}},Yh.u(Kr,{Ia:"naturalBounds"},function(){return this.Tc}),Kr.prototype.Mn=function(t,n,i,e){var o=this.Ba,r=Eo(this,!0),s=this.Se,l=this.iz;(l||!this.Xv&&s&&s.complete)&&(this.Xv=!0),null===s&&(isFinite(t)||(t=0),isFinite(n)||(n=0)),isFinite(o.width)||r===Ic||r===Ec?(isFinite(t)||(t=this.Cj.I()?this.Cj.width:l?+s.width:s.naturalWidth),i=0):null!==s&&!1!==this.Xv&&(t=this.Cj.I()?this.Cj.width:l?+s.width:s.naturalWidth),isFinite(o.height)||r===Ic||r===zc?(isFinite(n)||(n=this.Cj.I()?this.Cj.height:l?+s.height:s.naturalHeight),e=0):null!==s&&!1!==this.Xv&&(n=this.Cj.I()?this.Cj.height:l?+s.height:s.naturalHeight),isFinite(o.width)&&(t=o.width),isFinite(o.height)&&(n=o.height),o=this.Cf,r=this.Ah,i=Math.max(i,r.width),e=Math.max(e,r.height),t=Math.min(o.width,t),n=Math.min(o.height,n),t=Math.max(i,t),n=Math.max(e,n),null===s||s.complete||(isFinite(t)||(t=0),isFinite(n)||(n=0)),T(this.Tc,t,n),jo(this,0,0,t,n)},Kr.prototype.ij=function(t,n,i,e){Ao(this,t,n,i,e)},Uh=Qr.prototype,Uh.reset=function(){this.o=new mt,this.Vb=null},Uh.ab=function(t){null===this.o&&Yh.k("StreamGeometryContext has been closed"),null===this.Vb&&Yh.k("Need to call beginFigure first"),this.Vb.am=t},Uh.moveTo=function(t,n,i){void 0===i&&(i=!1),null===this.o&&Yh.k("StreamGeometryContext has been closed"),null===this.Vb&&Yh.k("Need to call beginFigure first");var e=new Ct(uf);e.C=t,e.D=n,i&&e.close(),this.Vb.vb.add(e)},Uh.lineTo=function(t,n,i){void 0===i&&(i=!1),null===this.o&&Yh.k("StreamGeometryContext has been closed"),null===this.Vb&&Yh.k("Need to call beginFigure first");var e=new Ct(ff);e.C=t,e.D=n,i&&e.close(),this.Vb.vb.add(e)},Uh.arcTo=function(t,n,i,e,o,r,s){void 0===r&&(r=0),void 0===s&&(s=!1),null===this.o&&Yh.k("StreamGeometryContext has been closed"),null===this.Vb&&Yh.k("Need to call beginFigure first");var l=new Ct(pf);l.ye=t,l.pf=n,l.ka=i,l.ra=e,l.radiusX=o,l.radiusY=0!==r?r:o,s&&l.close(),this.Vb.vb.add(l)};var Cd,Nd={None:"Rectangle",Rectangle:function(t,n,i){return t=new mt,t.type=rf,t.ha=0,t.fa=0,t.C=n,t.D=i,t},Square:function(t,n,i){return t=new mt,t.Zd=Rc,t.type=rf,t.ha=0,t.fa=0,t.C=Math.min(n,i),t.D=Math.min(n,i),t},Ellipse:function(t,n,i){return t=new mt,t.type=sf,t.ha=0,t.fa=0,t.C=n,t.D=i,t.A=Zu,t.B=_u,t},Circle:function(t,n,i){return t=new mt,t.Zd=Rc,t.type=sf,t.ha=0,t.fa=0,t.C=Math.min(n,i),t.D=Math.min(n,i),t.A=Zu,t.B=_u,t},Connector:"Ellipse",TriangleRight:function(t,n,i){t=new mt;var e=new St,o=new Ct;return o.C=n,o.D=.5*i,e.vb.add(o),n=new Ct,n.C=0,n.D=i,e.vb.add(n.close()),t.ec.add(e),t.A=new F(0,.25),t.B=new F(.5,.75),t},TriangleDown:function(t,n,i){t=new mt;var e=new St,o=new Ct;return o.C=n,o.D=0,e.vb.add(o),o=new Ct,o.C=.5*n,o.D=i,e.vb.add(o.close()),t.ec.add(e),t.A=new F(.25,0),t.B=new F(.75,.5),t},TriangleLeft:function(t,n,i){t=new mt;var e=new St;e.ha=n,e.fa=i;var o=new Ct;return o.C=0,o.D=.5*i,e.vb.add(o),i=new Ct,i.C=n,i.D=0,e.vb.add(i.close()),t.ec.add(e),t.A=new F(.5,.25),t.B=new F(1,.75),t},TriangleUp:function(t,n,i){t=new mt;var e=new St;e.ha=n,e.fa=i;var o=new Ct;return o.C=0,o.D=i,e.vb.add(o),i=new Ct,i.C=.5*n,i.D=0,e.vb.add(i.close()),t.ec.add(e),t.A=new F(.25,.5),t.B=new F(.75,1),t},Line1:function(t,n,i){return t=new mt,t.type=of,t.ha=0,t.fa=0,t.C=n,t.D=i,t},Line2:function(t,n,i){return t=new mt,t.type=of,t.ha=n,t.fa=0,t.C=0,t.D=i,t},MinusLine:"LineH",LineH:function(t,n,i){return t=new mt,t.type=of,t.ha=0,t.fa=i/2,t.C=n,t.D=i/2,t},LineV:function(t,n,i){return t=new mt,t.type=of,t.ha=n/2,t.fa=0,t.C=n/2,t.D=i,t},BarH:"Rectangle",BarV:"Rectangle",Curve1:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!1),ns(t,Bu*n,0,1*n,(1-Bu)*i,n,i),n=t.o,Yh.q(t),n},Curve2:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!1),ns(t,0,Bu*i,(1-Bu)*n,i,n,i),n=t.o,Yh.q(t),n},Curve3:function(t,n,i){return t=Yh.s(),Zr(t,1*n,0,!1),ns(t,1*n,Bu*i,Bu*n,1*i,0,1*i),n=t.o,Yh.q(t),n},Curve4:function(t,n,i){return t=Yh.s(),Zr(t,1*n,0,!1),ns(t,(1-Bu)*n,0,0,(1-Bu)*i,0,1*i),n=t.o,Yh.q(t),n},Alternative:"Triangle",Merge:"Triangle",Triangle:function(t,n,i){return t=Yh.s(),Zr(t,.5*n,0*i,!0),t.lineTo(0*n,1*i),t.lineTo(1*n,1*i,!0),n=t.o,n.A=new F(.25,.5),n.B=new F(.75,1),Yh.q(t),n},Decision:"Diamond",Diamond:function(t,n,i){return t=Yh.s(),Zr(t,.5*n,0,!0),t.lineTo(0,.5*i),t.lineTo(.5*n,1*i),t.lineTo(1*n,.5*i,!0),n=t.o,n.A=new F(.25,.25),n.B=new F(.75,.75),Yh.q(t),n},Pentagon:function(t,n,i){var e=ss(5);t=Yh.s(),Zr(t,e[0].x*n,e[0].y*i,!0);for(var o=1;5>o;o++)t.lineTo(e[o].x*n,e[o].y*i);return Yh.wa(e),_r(t),n=t.o,n.A=new F(.2,.22),n.B=new F(.8,.9),Yh.q(t),n},DataTransmission:"Hexagon",Hexagon:function(t,n,i){var e=ss(6);t=Yh.s(),Zr(t,e[0].x*n,e[0].y*i,!0);for(var o=1;6>o;o++)t.lineTo(e[o].x*n,e[o].y*i);return Yh.wa(e),_r(t),n=t.o,n.A=new F(.07,.25),n.B=new F(.93,.75),Yh.q(t),n},Heptagon:function(t,n,i){var e=ss(7);t=Yh.s(),Zr(t,e[0].x*n,e[0].y*i,!0);for(var o=1;7>o;o++)t.lineTo(e[o].x*n,e[o].y*i);return Yh.wa(e),_r(t),n=t.o,n.A=new F(.2,.15),n.B=new F(.8,.85),Yh.q(t),n},Octagon:function(t,n,i){var e=ss(8);t=Yh.s(),Zr(t,e[0].x*n,e[0].y*i,!0);for(var o=1;8>o;o++)t.lineTo(e[o].x*n,e[o].y*i);return Yh.wa(e),_r(t),n=t.o,n.A=new F(.15,.15),n.B=new F(.85,.85),Yh.q(t),n},Nonagon:function(t,n,i){var e=ss(9);t=Yh.s(),Zr(t,e[0].x*n,e[0].y*i,!0);for(var o=1;9>o;o++)t.lineTo(e[o].x*n,e[o].y*i);return Yh.wa(e),_r(t),n=t.o,n.A=new F(.17,.13),n.B=new F(.82,.82),Yh.q(t),n},Decagon:function(t,n,i){var e=ss(10);t=Yh.s(),Zr(t,e[0].x*n,e[0].y*i,!0);for(var o=1;10>o;o++)t.lineTo(e[o].x*n,e[o].y*i);return Yh.wa(e),_r(t),n=t.o,n.A=new F(.16,.16),n.B=new F(.84,.84),Yh.q(t),n},Dodecagon:function(t,n,i){var e=ss(12);t=Yh.s(),Zr(t,e[0].x*n,e[0].y*i,!0);for(var o=1;12>o;o++)t.lineTo(e[o].x*n,e[o].y*i);return Yh.wa(e),_r(t),n=t.o,n.A=new F(.16,.16),n.B=new F(.84,.84),Yh.q(t),n},FivePointedStar:function(t,n,i){var e=rs(5);t=Yh.s(),Zr(t,e[0].x*n,e[0].y*i,!0);for(var o=1;10>o;o++)t.lineTo(e[o].x*n,e[o].y*i);return Yh.wa(e),_r(t),n=t.o,n.A=new F(.312,.383),n.B=new F(.693,.765),Yh.q(t),n},SixPointedStar:function(t,n,i){var e=rs(6);t=Yh.s(),Zr(t,e[0].x*n,e[0].y*i,!0);for(var o=1;12>o;o++)t.lineTo(e[o].x*n,e[o].y*i);return Yh.wa(e),_r(t),n=t.o,n.A=new F(.17,.251),n.B=new F(.833,.755),Yh.q(t),n},SevenPointedStar:function(t,n,i){var e=rs(7);t=Yh.s(),Zr(t,e[0].x*n,e[0].y*i,!0);for(var o=1;14>o;o++)t.lineTo(e[o].x*n,e[o].y*i);return Yh.wa(e),_r(t),n=t.o,n.A=new F(.363,.361),n.B=new F(.641,.709),Yh.q(t),n},EightPointedStar:function(t,n,i){var e=rs(8);t=Yh.s(),Zr(t,e[0].x*n,e[0].y*i,!0);for(var o=1;16>o;o++)t.lineTo(e[o].x*n,e[o].y*i);return Yh.wa(e),_r(t),n=t.o,n.A=new F(.252,.255),n.B=new F(.75,.75),Yh.q(t),n},NinePointedStar:function(t,n,i){var e=rs(9);t=Yh.s(),Zr(t,e[0].x*n,e[0].y*i,!0);for(var o=1;18>o;o++)t.lineTo(e[o].x*n,e[o].y*i);return Yh.wa(e),_r(t),n=t.o,n.A=new F(.355,.361),n.B=new F(.645,.651),Yh.q(t),n},TenPointedStar:function(t,n,i){var e=rs(10);t=Yh.s(),Zr(t,e[0].x*n,e[0].y*i,!0);for(var o=1;20>o;o++)t.lineTo(e[o].x*n,e[o].y*i);return Yh.wa(e),_r(t),n=t.o,n.A=new F(.281,.261),n.B=new F(.723,.748),Yh.q(t),n},FivePointedBurst:function(t,n,i){var e=os(5);t=Yh.s(),Zr(t,e[0].x*n,e[0].y*i,!0);for(var o=1;o<e.length;o+=3)ns(t,e[o].x*n,e[o].y*i,e[o+1].x*n,e[o+1].y*i,e[o+2].x*n,e[o+2].y*i);return Yh.wa(e),_r(t),n=t.o,n.A=new F(.312,.383),n.B=new F(.693,.765),Yh.q(t),n},SixPointedBurst:function(t,n,i){var e=os(6);t=Yh.s(),Zr(t,e[0].x*n,e[0].y*i,!0);for(var o=1;o<e.length;o+=3)ns(t,e[o].x*n,e[o].y*i,e[o+1].x*n,e[o+1].y*i,e[o+2].x*n,e[o+2].y*i);return Yh.wa(e),_r(t),n=t.o,n.A=new F(.17,.251),n.B=new F(.833,.755),Yh.q(t),n},SevenPointedBurst:function(t,n,i){var e=os(7);t=Yh.s(),Zr(t,e[0].x*n,e[0].y*i,!0);for(var o=1;o<e.length;o+=3)ns(t,e[o].x*n,e[o].y*i,e[o+1].x*n,e[o+1].y*i,e[o+2].x*n,e[o+2].y*i);return Yh.wa(e),_r(t),n=t.o,n.A=new F(.363,.361),n.B=new F(.641,.709),Yh.q(t),n},EightPointedBurst:function(t,n,i){var e=os(8);t=Yh.s(),Zr(t,e[0].x*n,e[0].y*i,!0);for(var o=1;o<e.length;o+=3)ns(t,e[o].x*n,e[o].y*i,e[o+1].x*n,e[o+1].y*i,e[o+2].x*n,e[o+2].y*i);return Yh.wa(e),_r(t),n=t.o,n.A=new F(.252,.255),n.B=new F(.75,.75),Yh.q(t),n},NinePointedBurst:function(t,n,i){var e=os(9);t=Yh.s(),Zr(t,e[0].x*n,e[0].y*i,!0);for(var o=1;o<e.length;o+=3)ns(t,e[o].x*n,e[o].y*i,e[o+1].x*n,e[o+1].y*i,e[o+2].x*n,e[o+2].y*i);return Yh.wa(e),_r(t),n=t.o,n.A=new F(.355,.361),n.B=new F(.645,.651),Yh.q(t),n},TenPointedBurst:function(t,n,i){var e=os(10);t=Yh.s(),Zr(t,e[0].x*n,e[0].y*i,!0);for(var o=1;o<e.length;o+=3)ns(t,e[o].x*n,e[o].y*i,e[o+1].x*n,e[o+1].y*i,e[o+2].x*n,e[o+2].y*i);return Yh.wa(e),_r(t),n=t.o,n.A=new F(.281,.261),n.B=new F(.723,.748),Yh.q(t),n},Cloud:function(t,n,i){return t=Yh.s(),Zr(t,.08034461*n,.1944299*i,!0),ns(t,-.09239631*n,.07836421*i,.1406031*n,-.0542823*i,.2008615*n,.05349299*i),ns(t,.2450511*n,-.00697547*i,.3776197*n,-.01112067*i,.4338609*n,.074219*i),ns(t,.4539471*n,0,.6066018*n,-.02526587*i,.6558228*n,.07004196*i),ns(t,.6914277*n,-.01904177*i,.8921095*n,-.01220843*i,.8921095*n,.08370865*i),ns(t,1.036446*n,.04105738*i,1.020377*n,.3022052*i,.9147671*n,.3194596*i),ns(t,1.04448*n,.360238*i,.992256*n,.5219009*i,.9082935*n,.562044*i),ns(t,1.032337*n,.5771781*i,1.018411*n,.8120651*i,.9212406*n,.8217117*i),ns(t,1.028411*n,.9571472*i,.8556702*n,1.052487*i,.7592566*n,.9156953*i),ns(t,.7431877*n,1.009325*i,.5624123*n,1.021761*i,.5101666*n,.9310455*i),ns(t,.4820677*n,1.031761*i,.3030112*n,1.002796*i,.2609328*n,.9344623*i),ns(t,.2329994*n,1.01518*i,.03213784*n,1.01518*i,.08034461*n,.870098*i),ns(t,-.02812061*n,.9032597*i,-.01205169*n,.6835638*i,.06829292*n,.6545475*i),ns(t,-.01812061*n,.6089503*i,-.00606892*n,.4555777*i,.06427569*n,.4265613*i),ns(t,-.01606892*n,.3892545*i,-.01205169*n,.1944299*i,.08034461*n,.1944299*i),_r(t),n=t.o,n.A=new F(.1,.1),n.B=new F(.9,.9),Yh.q(t),n},Gate:"Crescent",Crescent:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!0),ns(t,1*n,0,1*n,1*i,0,1*i),ns(t,.5*n,.75*i,.5*n,.25*i,0,0),_r(t),n=t.o,n.A=new F(.511,.19),n.B=new F(.776,.76),Yh.q(t),n},FramedRectangle:function(t,n,i){var e=Yh.s(),o=t?t.Cc:NaN;return t=t?t.xu:NaN,isNaN(o)&&(o=.1),isNaN(t)&&(t=.1),Zr(e,0,0,!0),e.lineTo(1*n,0),e.lineTo(1*n,1*i),e.lineTo(0,1*i,!0),Zr(e,o*n,t*i,!1,!0),e.lineTo(o*n,(1-t)*i),e.lineTo((1-o)*n,(1-t)*i),e.lineTo((1-o)*n,t*i,!0),n=e.o,n.A=new F(o,t),n.B=new F(1-o,1-t),Yh.q(e),n},Delay:"HalfEllipse",HalfEllipse:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!0),ns(t,Bu*n,0,1*n,(.5-Bu/2)*i,1*n,.5*i),ns(t,1*n,(.5+Bu/2)*i,Bu*n,1*i,0,1*i),_r(t),n=t.o,n.A=new F(0,.2),n.B=new F(.75,.8),Yh.q(t),n},Heart:function(t,n,i){return t=Yh.s(),Zr(t,.5*n,1*i,!0),ns(t,.1*n,.8*i,0,.5*i,0*n,.3*i),ns(t,0*n,0,.45*n,0,.5*n,.3*i),ns(t,.55*n,0,1*n,0,1*n,.3*i),ns(t,n,.5*i,.9*n,.8*i,.5*n,1*i),_r(t),n=t.o,n.A=new F(.15,.29),n.B=new F(.86,.68),Yh.q(t),n},Spade:function(t,n,i){return t=Yh.s(),Zr(t,.5*n,0,!0),t.lineTo(.51*n,.01*i),ns(t,.6*n,.2*i,n,.25*i,n,.5*i),ns(t,n,.8*i,.6*n,.8*i,.55*n,.7*i),ns(t,.5*n,.75*i,.55*n,.95*i,.75*n,i),t.lineTo(.25*n,i),ns(t,.45*n,.95*i,.5*n,.75*i,.45*n,.7*i),ns(t,.4*n,.8*i,0,.8*i,0,.5*i),ns(t,0,.25*i,.4*n,.2*i,.49*n,.01*i),_r(t),n=t.o,n.A=new F(.19,.26),n.B=new F(.8,.68),Yh.q(t),n},Club:function(t,n,i){t=Yh.s(),Zr(t,.4*n,.6*i,!0),ns(t,.5*n,.75*i,.45*n,.95*i,.15*n,1*i),t.lineTo(.85*n,i),ns(t,.55*n,.95*i,.5*n,.75*i,.6*n,.6*i);var e=.2,o=.3,r=0,s=4*(Math.SQRT2-1)/3*e;return ns(t,(.5-e+o)*n,(.5+s+r)*i,(.5-s+o)*n,(.5+e+r)*i,(.5+o)*n,(.5+e+r)*i),ns(t,(.5+s+o)*n,(.5+e+r)*i,(.5+e+o)*n,(.5+s+r)*i,(.5+e+o)*n,(.5+r)*i),ns(t,(.5+e+o)*n,(.5-s+r)*i,(.5+s+o)*n,(.5-e+r)*i,(.5+o)*n,(.5-e+r)*i),ns(t,(.5-s+o)*n,(.5-e+r)*i,(.5-e+o+.05)*n,(.5-s+r-.02)*i,.65*n,.36771243*i),e=.2,o=0,r=-.3,s=4*(Math.SQRT2-1)/3*e,ns(t,(.5+s+o)*n,(.5+e+r)*i,(.5+e+o)*n,(.5+s+r)*i,(.5+e+o)*n,(.5+r)*i),ns(t,(.5+e+o)*n,(.5-s+r)*i,(.5+s+o)*n,(.5-e+r)*i,(.5+o)*n,(.5-e+r)*i),ns(t,(.5-s+o)*n,(.5-e+r)*i,(.5-e+o)*n,(.5-s+r)*i,(.5-e+o)*n,(.5+r)*i),ns(t,(.5-e+o)*n,(.5+s+r)*i,(.5-s+o)*n,(.5+e+r)*i,.35*n,.36771243*i),e=.2,o=-.3,r=0,s=4*(Math.SQRT2-1)/3*e,ns(t,(.5+e+o-.05)*n,(.5-s+r-.02)*i,(.5+s+o)*n,(.5-e+r)*i,(.5+o)*n,(.5-e+r)*i),ns(t,(.5-s+o)*n,(.5-e+r)*i,(.5-e+o)*n,(.5-s+r)*i,(.5-e+o)*n,(.5+r)*i),ns(t,(.5-e+o)*n,(.5+s+r)*i,(.5-s+o)*n,(.5+e+r)*i,(.5+o)*n,(.5+e+r)*i),ns(t,(.5+s+o)*n,(.5+e+r)*i,(.5+e+o)*n,(.5+s+r)*i,.4*n,.6*i),_r(t),n=t.o,n.A=new F(.06,.39),n.B=new F(.93,.58),Yh.q(t),n},Ring:function(t,n,i){t=Yh.s();var e=4*(Math.SQRT2-1)/3*.5;return Zr(t,n,.5*i,!0),ns(t,n,(.5-e)*i,(.5+e)*n,0,.5*n,0),ns(t,(.5-e)*n,0,0,(.5-e)*i,0,.5*i),ns(t,0,(.5+e)*i,(.5-e)*n,i,.5*n,i),ns(t,(.5+e)*n,i,n,(.5+e)*i,n,.5*i),e=4*(Math.SQRT2-1)/3*.4,Zr(t,.5*n,.1*i,!0,!0),ns(t,(.5+e)*n,.1*i,.9*n,(.5-e)*i,.9*n,.5*i),ns(t,.9*n,(.5+e)*i,(.5+e)*n,.9*i,.5*n,.9*i),ns(t,(.5-e)*n,.9*i,.1*n,(.5+e)*i,.1*n,.5*i),ns(t,.1*n,(.5-e)*i,(.5-e)*n,.1*i,.5*n,.1*i),n=t.o,n.A=new F(.146,.146),n.B=new F(.853,.853),n.Zd=Rc,Yh.q(t),n},YinYang:function(t,n,i){var e=.5;t=Yh.s(),e=.5,Zr(t,.5*n,0,!0),t.arcTo(270,180,.5*n,.5*n,.5*n),ns(t,1*n,e*i,0,e*i,e*n,0,!0);var e=.1,o=.25;return Zr(t,(.5+e)*n,o*i,!0,!0),t.arcTo(0,-360,.5*n,i*o,e*n),_r(t),Zr(t,.5*n,0,!1),t.arcTo(270,-180,.5*n,.5*n,.5*n),t.ab(!1),o=.75,Zr(t,(.5+e)*n,o*i,!0),t.arcTo(0,360,.5*n,i*o,e*n),_r(t),n=t.o,n.Zd=Rc,Yh.q(t),n},Peace:function(t,n,i){t=Yh.s();var e=4*(Math.SQRT2-1)/3*.5;Zr(t,n,.5*i,!0),ns(t,n,(.5-e)*i,(.5+e)*n,0,.5*n,0),ns(t,(.5-e)*n,0,0,(.5-e)*i,0,.5*i),ns(t,0,(.5+e)*i,(.5-e)*n,i,.5*n,i),ns(t,(.5+e)*n,i,n,(.5+e)*i,n,.5*i),e=4*(Math.SQRT2-1)/3*.4,Zr(t,.5*n,.1*i,!0,!0),ns(t,(.5+e)*n,.1*i,.9*n,(.5-e)*i,.9*n,.5*i),ns(t,.9*n,(.5+e)*i,(.5+e)*n,.9*i,.5*n,.9*i),ns(t,(.5-e)*n,.9*i,.1*n,(.5+e)*i,.1*n,.5*i),ns(t,.1*n,(.5-e)*i,(.5-e)*n,.1*i,.5*n,.1*i);var e=.07,o=0,r=.11*-.707,s=4*(Math.SQRT2-1)/3*e;return Zr(t,(.5+e+o)*n,(.5+r)*i,!0),ns(t,(.5+e+o)*n,(.5-s+r)*i,(.5+s+o)*n,(.5-e+r)*i,(.5+o)*n,(.5-e+r)*i),ns(t,(.5-s+o)*n,(.5-e+r)*i,(.5-e+o)*n,(.5-s+r)*i,(.5-e+o)*n,(.5+r)*i),ns(t,(.5-e+o)*n,(.5+s+r)*i,(.5-s+o)*n,(.5+e+r)*i,(.5+o)*n,(.5+e+r)*i),ns(t,(.5+s+o)*n,(.5+e+r)*i,(.5+e+o)*n,(.5+s+r)*i,(.5+e+o)*n,(.5+r)*i),e=.07,o=.11*-.707,r=.707*.11,s=4*(Math.SQRT2-1)/3*e,Zr(t,(.5+e+o)*n,(.5+r)*i,!0),ns(t,(.5+e+o)*n,(.5-s+r)*i,(.5+s+o)*n,(.5-e+r)*i,(.5+o)*n,(.5-e+r)*i),ns(t,(.5-s+o)*n,(.5-e+r)*i,(.5-e+o)*n,(.5-s+r)*i,(.5-e+o)*n,(.5+r)*i),ns(t,(.5-e+o)*n,(.5+s+r)*i,(.5-s+o)*n,(.5+e+r)*i,(.5+o)*n,(.5+e+r)*i),ns(t,(.5+s+o)*n,(.5+e+r)*i,(.5+e+o)*n,(.5+s+r)*i,(.5+e+o)*n,(.5+r)*i),e=.07,o=.707*.11,r=.707*.11,s=4*(Math.SQRT2-1)/3*e,Zr(t,(.5+e+o)*n,(.5+r)*i,!0),ns(t,(.5+e+o)*n,(.5-s+r)*i,(.5+s+o)*n,(.5-e+r)*i,(.5+o)*n,(.5-e+r)*i),ns(t,(.5-s+o)*n,(.5-e+r)*i,(.5-e+o)*n,(.5-s+r)*i,(.5-e+o)*n,(.5+r)*i),ns(t,(.5-e+o)*n,(.5+s+r)*i,(.5-s+o)*n,(.5+e+r)*i,(.5+o)*n,(.5+e+r)*i),ns(t,(.5+s+o)*n,(.5+e+r)*i,(.5+e+o)*n,(.5+s+r)*i,(.5+e+o)*n,(.5+r)*i),n=t.o,n.A=new F(.146,.146),n.B=new F(.853,.853),n.Zd=Rc,Yh.q(t),n},NotAllowed:function(t,n,i){var e=.5*Bu,o=.5;t=Yh.s(),Zr(t,.5*n,(.5-o)*i,!0),ns(t,(.5-e)*n,(.5-o)*i,(.5-o)*n,(.5-e)*i,(.5-o)*n,.5*i),ns(t,(.5-o)*n,(.5+e)*i,(.5-e)*n,(.5+o)*i,.5*n,(.5+o)*i),ns(t,(.5+e)*n,(.5+o)*i,(.5+o)*n,(.5+e)*i,(.5+o)*n,.5*i),ns(t,(.5+o)*n,(.5-e)*i,(.5+e)*n,(.5-o)*i,.5*n,(.5-o)*i);var o=.4,e=.4*Bu,r=Yh.K(),s=Yh.K(),l=Yh.K(),a=Yh.K();tt(.5,.5-o,.5+e,.5-o,.5+o,.5-e,.5+o,.5,.42,r,s,l,a,a);var h=Yh.K(),u=Yh.K(),f=Yh.K();tt(.5,.5-o,.5+e,.5-o,.5+o,.5-e,.5+o,.5,.58,a,a,f,h,u);var c=Yh.K(),d=Yh.K(),p=Yh.K();tt(.5,.5+o,.5-e,.5+o,.5-o,.5+e,.5-o,.5,.42,c,d,p,a,a);var y=Yh.K(),v=Yh.K(),g=Yh.K();return tt(.5,.5+o,.5-e,.5+o,.5-o,.5+e,.5-o,.5,.58,a,a,g,y,v),Zr(t,g.x*n,g.y*i,!0,!0),ns(t,y.x*n,y.y*i,v.x*n,v.y*i,(.5-o)*n,.5*i),ns(t,(.5-o)*n,(.5-e)*i,(.5-e)*n,(.5-o)*i,.5*n,(.5-o)*i),ns(t,r.x*n,r.y*i,s.x*n,s.y*i,l.x*n,l.y*i),t.lineTo(g.x*n,g.y*i),_r(t),Zr(t,p.x*n,p.y*i,!0,!0),t.lineTo(f.x*n,f.y*i),ns(t,h.x*n,h.y*i,u.x*n,u.y*i,(.5+o)*n,.5*i),ns(t,(.5+o)*n,(.5+e)*i,(.5+e)*n,(.5+o)*i,.5*n,(.5+o)*i),ns(t,c.x*n,c.y*i,d.x*n,d.y*i,p.x*n,p.y*i),_r(t),Yh.v(r),Yh.v(s),Yh.v(l),Yh.v(a),Yh.v(h),Yh.v(u),Yh.v(f),Yh.v(c),Yh.v(d),Yh.v(p),Yh.v(y),Yh.v(v),Yh.v(g),n=t.o,Yh.q(t),n.Zd=Rc,n},Fragile:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!0),t.lineTo(.25*n,0),t.lineTo(.2*n,.15*i),t.lineTo(.3*n,.25*i),t.lineTo(.29*n,.33*i),t.lineTo(.35*n,.25*i),t.lineTo(.3*n,.15*i),t.lineTo(.4*n,0),t.lineTo(1*n,0),ns(t,1*n,.25*i,.75*n,.5*i,.55*n,.5*i),t.lineTo(.55*n,.9*i),t.lineTo(.7*n,.9*i),t.lineTo(.7*n,1*i),t.lineTo(.3*n,1*i),t.lineTo(.3*n,.9*i),t.lineTo(.45*n,.9*i),t.lineTo(.45*n,.5*i),ns(t,.25*n,.5*i,0,.25*i,0,0),_r(t),n=t.o,n.A=new F(.25,0),n.B=new F(.75,.4),Yh.q(t),n},HourGlass:function(t,n,i){return t=Yh.s(),Zr(t,.65*n,.5*i,!0),t.lineTo(1*n,1*i),t.lineTo(0,1*i),t.lineTo(.35*n,.5*i),t.lineTo(0,0),t.lineTo(1*n,0),_r(t),n=t.o,Yh.q(t),n},Lightning:function(t,n,i){return t=Yh.s(),Zr(t,0*n,.55*i,!0),t.lineTo(.75*n,0),t.lineTo(.25*n,.45*i),t.lineTo(.9*n,.48*i),t.lineTo(.4*n,1*i),t.lineTo(.65*n,.55*i),_r(t),n=t.o,Yh.q(t),n},Parallelogram1:function(t,n,i){t=t?t.Cc:NaN,isNaN(t)&&(t=.1);var e=Yh.s();return Zr(e,t*n,0,!0),e.lineTo(1*n,0),e.lineTo((1-t)*n,1*i),e.lineTo(0,1*i),_r(e),n=e.o,n.A=new F(t,0),n.B=new F(1-t,1),Yh.q(e),n},Input:"Output",Output:function(t,n,i){return t=Yh.s(),Zr(t,0,1*i,!0),t.lineTo(.1*n,0),t.lineTo(1*n,0),t.lineTo(.9*n,1*i),_r(t),n=t.o,n.A=new F(.1,0),n.B=new F(.9,1),Yh.q(t),n},Parallelogram2:function(t,n,i){t=t?t.Cc:NaN,isNaN(t)&&(t=.25);var e=Yh.s();return Zr(e,t*n,0,!0),e.lineTo(1*n,0),e.lineTo((1-t)*n,1*i),e.lineTo(0,1*i),_r(e),n=e.o,n.A=new F(t,0),n.B=new F(1-t,1),Yh.q(e),n},ThickCross:function(t,n,i){t=t?t.Cc:NaN,isNaN(t)&&(t=.25);var e=Yh.s();return Zr(e,(.5-t/2)*n,0,!0),e.lineTo((.5+t/2)*n,0),e.lineTo((.5+t/2)*n,(.5-t/2)*i),e.lineTo(1*n,(.5-t/2)*i),e.lineTo(1*n,(.5+t/2)*i),e.lineTo((.5+t/2)*n,(.5+t/2)*i),e.lineTo((.5+t/2)*n,1*i),e.lineTo((.5-t/2)*n,1*i),e.lineTo((.5-t/2)*n,(.5+t/2)*i),e.lineTo(0,(.5+t/2)*i),e.lineTo(0,(.5-t/2)*i),e.lineTo((.5-t/2)*n,(.5-t/2)*i),_r(e),n=e.o,n.A=new F(.5-t/2,.5-t/2),n.B=new F(.5+t/2,.5+t/2),Yh.q(e),n},ThickX:function(t,n,i){t=.25/Math.SQRT2;var e=Yh.s();return Zr(e,.3*n,0,!0),e.lineTo(.5*n,.2*i),e.lineTo(.7*n,0),e.lineTo(1*n,.3*i),e.lineTo(.8*n,.5*i),e.lineTo(1*n,.7*i),e.lineTo(.7*n,1*i),e.lineTo(.5*n,.8*i),e.lineTo(.3*n,1*i),e.lineTo(0,.7*i),e.lineTo(.2*n,.5*i),e.lineTo(0,.3*i),_r(e),n=e.o,n.A=new F(.5-t,.5-t),n.B=new F(.5+t,.5+t),Yh.q(e),n},ThinCross:function(t,n,i){var e=t?t.Cc:NaN;return isNaN(e)&&(e=.1),t=Yh.s(),Zr(t,(.5-e/2)*n,0,!0),t.lineTo((.5+e/2)*n,0),t.lineTo((.5+e/2)*n,(.5-e/2)*i),t.lineTo(1*n,(.5-e/2)*i),t.lineTo(1*n,(.5+e/2)*i),t.lineTo((.5+e/2)*n,(.5+e/2)*i),t.lineTo((.5+e/2)*n,1*i),t.lineTo((.5-e/2)*n,1*i),t.lineTo((.5-e/2)*n,(.5+e/2)*i),t.lineTo(0,(.5+e/2)*i),t.lineTo(0,(.5-e/2)*i),t.lineTo((.5-e/2)*n,(.5-e/2)*i),_r(t),n=t.o,Yh.q(t),n},ThinX:function(t,n,i){return t=Yh.s(),Zr(t,.1*n,0,!0),t.lineTo(.5*n,.4*i),t.lineTo(.9*n,0),t.lineTo(1*n,.1*i),t.lineTo(.6*n,.5*i),t.lineTo(1*n,.9*i),t.lineTo(.9*n,1*i),t.lineTo(.5*n,.6*i),t.lineTo(.1*n,1*i),t.lineTo(0,.9*i),t.lineTo(.4*n,.5*i),t.lineTo(0,.1*i),_r(t),n=t.o,Yh.q(t),n},RightTriangle:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!0),t.lineTo(1*n,1*i),t.lineTo(0,1*i),_r(t),n=t.o,n.A=new F(0,.5),n.B=new F(.5,1),Yh.q(t),n},RoundedIBeam:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!0),t.lineTo(1*n,0),ns(t,.5*n,.25*i,.5*n,.75*i,1*n,1*i),t.lineTo(0,1*i),ns(t,.5*n,.75*i,.5*n,.25*i,0,0),_r(t),n=t.o,Yh.q(t),n},RoundedRectangle:function(t,n,i){var e=t?t.Cc:NaN;isNaN(e)&&(e=5),e=Math.min(e,n/3),e=Math.min(e,i/3),t=e*Bu;var o=Yh.s();return Zr(o,e,0,!0),o.lineTo(n-e,0),ns(o,n-t,0,n,t,n,e),o.lineTo(n,i-e),ns(o,n,i-t,n-t,i,n-e,i),o.lineTo(e,i),ns(o,t,i,0,i-t,0,i-e),o.lineTo(0,e),ns(o,0,t,t,0,e,0),_r(o),n=o.o,1<t?(n.A=new F(0,0,t,t),n.B=new F(1,1,-t,-t)):(n.A=eu,n.B=fu),Yh.q(o),n},Border:function(t,n,i){var e=t?t.Cc:NaN;return isNaN(e)&&(e=5),e=Math.min(e,n/3),e=Math.min(e,i/3),t=Yh.s(),Zr(t,e,0,!0),t.lineTo(n-e,0),ns(t,n-0,0,n,0,n,e),t.lineTo(n,i-e),ns(t,n,i-0,n-0,i,n-e,i),t.lineTo(e,i),ns(t,0,i,0,i-0,0,i-e),t.lineTo(0,e),ns(t,0,0,0,0,e,0),_r(t),n=t.o,n.A=eu,n.B=fu,Yh.q(t),n},SquareIBeam:function(t,n,i){var e=t?t.Cc:NaN;return isNaN(e)&&(e=.2),t=Yh.s(),Zr(t,0,0,!0),t.lineTo(1*n,0),t.lineTo(1*n,e*i),t.lineTo((.5+e/2)*n,e*i),t.lineTo((.5+e/2)*n,(1-e)*i),t.lineTo(1*n,(1-e)*i),t.lineTo(1*n,1*i),t.lineTo(0,1*i),t.lineTo(0,(1-e)*i),t.lineTo((.5-e/2)*n,(1-e)*i),t.lineTo((.5-e/2)*n,e*i),t.lineTo(0,e*i),_r(t),n=t.o,Yh.q(t),n},Trapezoid:function(t,n,i){t=t?t.Cc:NaN,isNaN(t)&&(t=.2);var e=Yh.s();return Zr(e,t*n,0,!0),e.lineTo((1-t)*n,0),e.lineTo(1*n,1*i),e.lineTo(0,1*i),_r(e),n=e.o,n.A=new F(t,0),n.B=new F(1-t,1),Yh.q(e),n},ManualLoop:"ManualOperation",ManualOperation:function(t,n,i){var e=t?t.Cc:NaN;return isNaN(e)&&(e=0),t=Yh.s(),Zr(t,e,0,!0),t.lineTo(0,0),t.lineTo(1*n,0),t.lineTo(.9*n,1*i),t.lineTo(.1*n,1*i),_r(t),n=t.o,n.A=new F(.1,0),n.B=new F(.9,1),Yh.q(t),n},GenderMale:function(t,n,i){t=Yh.s();var e=.4*Bu,o=.4,r=Yh.K(),s=Yh.K(),l=Yh.K(),a=Yh.K();Zr(t,(.5-o)*n,.5*i,!0),ns(t,(.5-o)*n,(.5-e)*i,(.5-e)*n,(.5-o)*i,.5*n,(.5-o)*i),tt(.5,.5-o,.5+e,.5-o,.5+o,.5-e,.5+o,.5,.44,l,a,s,r,r),ns(t,l.x*n,l.y*i,a.x*n,a.y*i,s.x*n,s.y*i);var h=Yh.xb(s.x,s.y);tt(.5,.5-o,.5+e,.5-o,.5+o,.5-e,.5+o,.5,.56,r,r,s,l,a);var u=Yh.xb(s.x,s.y);return t.lineTo((.1*h.x+.855)*n,.1*h.y*i),t.lineTo(.85*n,.1*h.y*i),t.lineTo(.85*n,0),t.lineTo(1*n,0),t.lineTo(1*n,.15*i),t.lineTo((.1*u.x+.9)*n,.15*i),t.lineTo((.1*u.x+.9)*n,(.1*u.y+.05*.9)*i),t.lineTo(u.x*n,u.y*i),ns(t,l.x*n,l.y*i,a.x*n,a.y*i,(.5+o)*n,.5*i),ns(t,(.5+o)*n,(.5+e)*i,(.5+e)*n,(.5+o)*i,.5*n,(.5+o)*i),ns(t,(.5-e)*n,(.5+o)*i,(.5-o)*n,(.5+e)*i,(.5-o)*n,.5*i),o=.35,e=.35*Bu,Zr(t,.5*n,(.5-o)*i,!0,!0),ns(t,(.5-e)*n,(.5-o)*i,(.5-o)*n,(.5-e)*i,(.5-o)*n,.5*i),ns(t,(.5-o)*n,(.5+e)*i,(.5-e)*n,(.5+o)*i,.5*n,(.5+o)*i),ns(t,(.5+e)*n,(.5+o)*i,(.5+o)*n,(.5+e)*i,(.5+o)*n,.5*i),ns(t,(.5+o)*n,(.5-e)*i,(.5+e)*n,(.5-o)*i,.5*n,(.5-o)*i),Zr(t,(.5-o)*n,.5*i,!0),Yh.v(r),Yh.v(s),Yh.v(l),Yh.v(a),Yh.v(h),Yh.v(u),n=t.o,n.A=new F(.202,.257),n.B=new F(.692,.839),n.Zd=Rc,Yh.q(t),n},GenderFemale:function(t,n,i){t=Yh.s();var e=.375,o=0,r=-.125,s=4*(Math.SQRT2-1)/3*e;return Zr(t,(.525+o)*n,(.5+e+r)*i,!0),ns(t,(.5+s+o)*n,(.5+e+r)*i,(.5+e+o)*n,(.5+s+r)*i,(.5+e+o)*n,(.5+r)*i),ns(t,(.5+e+o)*n,(.5-s+r)*i,(.5+s+o)*n,(.5-e+r)*i,(.5+o)*n,(.5-e+r)*i),ns(t,(.5-s+o)*n,(.5-e+r)*i,(.5-e+o)*n,(.5-s+r)*i,(.5-e+o)*n,(.5+r)*i),ns(t,(.5-e+o)*n,(.5+s+r)*i,(.5-s+o)*n,(.5+e+r)*i,(.475+o)*n,(.5+e+r)*i),t.lineTo(.475*n,.85*i),t.lineTo(.425*n,.85*i),t.lineTo(.425*n,.9*i),t.lineTo(.475*n,.9*i),t.lineTo(.475*n,1*i),t.lineTo(.525*n,1*i),t.lineTo(.525*n,.9*i),t.lineTo(.575*n,.9*i),t.lineTo(.575*n,.85*i),t.lineTo(.525*n,.85*i),_r(t),e=.325,o=0,r=-.125,s=4*(Math.SQRT2-1)/3*e,Zr(t,(.5+e+o)*n,(.5+r)*i,!0,!0),ns(t,(.5+e+o)*n,(.5+s+r)*i,(.5+s+o)*n,(.5+e+r)*i,(.5+o)*n,(.5+e+r)*i),ns(t,(.5-s+o)*n,(.5+e+r)*i,(.5-e+o)*n,(.5+s+r)*i,(.5-e+o)*n,(.5+r)*i),ns(t,(.5-e+o)*n,(.5-s+r)*i,(.5-s+o)*n,(.5-e+r)*i,(.5+o)*n,(.5-e+r)*i),ns(t,(.5+s+o)*n,(.5-e+r)*i,(.5+e+o)*n,(.5-s+r)*i,(.5+e+o)*n,(.5+r)*i),Zr(t,(.525+o)*n,(.5+e+r)*i,!0),n=t.o,n.A=new F(.232,.136),n.B=new F(.782,.611),n.Zd=Rc,Yh.q(t),n},PlusLine:function(t,n,i){return t=Yh.s(),Zr(t,0,.5*i,!1),t.lineTo(1*n,.5*i),t.moveTo(.5*n,0),t.lineTo(.5*n,1*i),n=t.o,Yh.q(t),n},XLine:function(t,n,i){return t=Yh.s(),Zr(t,0,1*i,!1),t.lineTo(1*n,0),t.moveTo(0,0),t.lineTo(1*n,1*i),n=t.o,Yh.q(t),n},AsteriskLine:function(t,n,i){t=Yh.s();var e=.2/Math.SQRT2;return Zr(t,e*n,(1-e)*i,!1),t.lineTo((1-e)*n,e*i),t.moveTo(e*n,e*i),t.lineTo((1-e)*n,(1-e)*i),t.moveTo(0*n,.5*i),t.lineTo(1*n,.5*i),t.moveTo(.5*n,0*i),t.lineTo(.5*n,1*i),n=t.o,Yh.q(t),n},CircleLine:function(t,n,i){var e=.5*Bu;return t=Yh.s(),Zr(t,1*n,.5*i,!1),ns(t,1*n,(.5+e)*i,(.5+e)*n,1*i,.5*n,1*i),ns(t,(.5-e)*n,1*i,0,(.5+e)*i,0,.5*i),ns(t,0,(.5-e)*i,(.5-e)*n,0,.5*n,0),ns(t,(.5+e)*n,0,1*n,(.5-e)*i,1*n,.5*i),n=t.o,n.A=new F(.146,.146),n.B=new F(.853,.853),n.Zd=Rc,Yh.q(t),n},Pie:function(t,n,i){t=Yh.s();var e=4*(Math.SQRT2-1)/3*.5;return Zr(t,(.5*Math.SQRT2/2+.5)*n,(.5-.5*Math.SQRT2/2)*i,!0),ns(t,.7*n,0*i,.5*n,0*i,.5*n,0*i),ns(t,(.5-e+0)*n,0*i,0*n,(.5-e+0)*i,0*n,.5*i),ns(t,0*n,(.5+e+0)*i,(.5-e+0)*n,1*i,.5*n,1*i),ns(t,(.5+e+0)*n,1*i,1*n,(.5+e+0)*i,1*n,.5*i),t.lineTo(.5*n,.5*i),_r(t),n=t.o,Yh.q(t),n},PiePiece:function(t,n,i){var e=Bu/Math.SQRT2*.5,o=Math.SQRT2/2,r=1-Math.SQRT2/2;return t=Yh.s(),Zr(t,n,i,!0),ns(t,n,(1-e)*i,(o+e)*n,(r+e)*i,o*n,r*i),t.lineTo(0,i),_r(t),n=t.o,Yh.q(t),n},StopSign:function(t,n,i){t=1/(Math.SQRT2+2);var e=Yh.s();return Zr(e,t*n,0,!0),e.lineTo((1-t)*n,0),e.lineTo(1*n,t*i),e.lineTo(1*n,(1-t)*i),e.lineTo((1-t)*n,1*i),e.lineTo(t*n,1*i),e.lineTo(0,(1-t)*i),e.lineTo(0,t*i),_r(e),n=e.o,n.A=new F(t/2,t/2),n.B=new F(1-t/2,1-t/2),Yh.q(e),n},LogicImplies:function(t,n,i){var e=t?t.Cc:NaN;return isNaN(e)&&(e=.2),t=Yh.s(),Zr(t,(1-e)*n,0*i,!1),t.lineTo(1*n,.5*i),t.lineTo((1-e)*n,i),t.moveTo(0,.5*i),t.lineTo(n,.5*i),n=t.o,n.A=eu,n.B=new F(.8,.5),Yh.q(t),n},LogicIff:function(t,n,i){var e=t?t.Cc:NaN;return isNaN(e)&&(e=.2),t=Yh.s(),Zr(t,(1-e)*n,0*i,!1),t.lineTo(1*n,.5*i),t.lineTo((1-e)*n,i),t.moveTo(0,.5*i),t.lineTo(n,.5*i),t.moveTo(e*n,0),t.lineTo(0,.5*i),t.lineTo(e*n,i),n=t.o,n.A=new F(.2,0),n.B=new F(.8,.5),Yh.q(t),n},LogicNot:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!1),t.lineTo(1*n,0),t.lineTo(1*n,1*i),n=t.o,Yh.q(t),n},LogicAnd:function(t,n,i){return t=Yh.s(),Zr(t,0,1*i,!1),t.lineTo(.5*n,0),t.lineTo(1*n,1*i),n=t.o,n.A=new F(.25,.5),n.B=new F(.75,1),Yh.q(t),n},LogicOr:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!1),t.lineTo(.5*n,1*i),t.lineTo(1*n,0),n=t.o,n.A=new F(.219,0),n.B=new F(.78,.409),Yh.q(t),n},LogicXor:function(t,n,i){t=Yh.s(),Zr(t,.5*n,0,!1),t.lineTo(.5*n,1*i),t.moveTo(0,.5*i),t.lineTo(1*n,.5*i);var e=.5*Bu;return ns(t,1*n,(.5+e)*i,(.5+e)*n,1*i,.5*n,1*i),ns(t,(.5-e)*n,1*i,0,(.5+e)*i,0,.5*i),ns(t,0,(.5-e)*i,(.5-e)*n,0,.5*n,0),ns(t,(.5+e)*n,0,1*n,(.5-e)*i,1*n,.5*i),n=t.o,n.Zd=Rc,Yh.q(t),n},LogicTruth:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!1),t.lineTo(1*n,0),t.moveTo(.5*n,0),t.lineTo(.5*n,1*i),n=t.o,Yh.q(t),n},LogicFalsity:function(t,n,i){return t=Yh.s(),Zr(t,0,1*i,!1),t.lineTo(1*n,1*i),t.moveTo(.5*n,1*i),t.lineTo(.5*n,0),n=t.o,Yh.q(t),n},LogicThereExists:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!1),t.lineTo(1*n,0),t.lineTo(1*n,.5*i),t.lineTo(0,.5*i),t.moveTo(1*n,.5*i),t.lineTo(1*n,1*i),t.lineTo(0,1*i),n=t.o,Yh.q(t),n},LogicForAll:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!1),t.lineTo(.5*n,1*i),t.lineTo(1*n,0),t.moveTo(.25*n,.5*i),t.lineTo(.75*n,.5*i),n=t.o,n.A=new F(.25,0),n.B=new F(.75,.5),Yh.q(t),n},LogicIsDefinedAs:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!1),t.lineTo(n,0),t.moveTo(0,.5*i),t.lineTo(n,.5*i),t.moveTo(0,i),t.lineTo(n,i),n=t.o,n.A=new F(.01,.01),n.B=new F(.99,.49),Yh.q(t),n},LogicIntersect:function(t,n,i){var e=.5*Bu;return t=Yh.s(),Zr(t,0,1*i,!1),t.lineTo(0,.5*i),ns(t,0,(.5-e)*i,(.5-e)*n,0,.5*n,0),ns(t,(.5+e)*n,0,1*n,(.5-e)*i,1*n,.5*i),t.lineTo(1*n,1*i),n=t.o,n.A=new F(0,.5),n.B=fu,Yh.q(t),n},LogicUnion:function(t,n,i){var e=.5*Bu;return t=Yh.s(),Zr(t,1*n,0,!1),t.lineTo(1*n,.5*i),ns(t,1*n,(.5+e)*i,(.5+e)*n,1*i,.5*n,1*i),ns(t,(.5-e)*n,1*i,0,(.5+e)*i,0,.5*i),t.lineTo(0,0),n=t.o,n.A=eu,n.B=new F(1,.5),Yh.q(t),n},Arrow:function(t,n,i){var e=t?t.Cc:NaN,o=t?t.xu:NaN;return isNaN(e)&&(e=.3),isNaN(o)&&(o=.3),t=Yh.s(),Zr(t,0,(.5-o/2)*i,!0),t.lineTo((1-e)*n,(.5-o/2)*i),t.lineTo((1-e)*n,0),t.lineTo(1*n,.5*i),t.lineTo((1-e)*n,1*i),t.lineTo((1-e)*n,(.5+o/2)*i),t.lineTo(0,(.5+o/2)*i),_r(t),n=t.o,n.A=new F(0,.5-o/2),e=ht(0,.5+o/2,1,.5+o/2,1-e,1,1,.5,Yh.K()),n.B=new F(e.x,e.y),Yh.v(e),Yh.q(t),n},ISOProcess:"Chevron",Chevron:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!0),t.lineTo(.5*n,0),t.lineTo(1*n,.5*i),t.lineTo(.5*n,1*i),t.lineTo(0,1*i),t.lineTo(.5*n,.5*i),_r(t),n=t.o,Yh.q(t),n},DoubleArrow:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!0),t.lineTo(.3*n,.214*i),t.lineTo(.3*n,0),t.lineTo(1*n,.5*i),t.lineTo(.3*n,1*i),t.lineTo(.3*n,.786*i),t.lineTo(0,1*i),_r(t),Zr(t,.3*n,.214*i,!1),t.lineTo(.3*n,.786*i),t.ab(!1),n=t.o,Yh.q(t),n},DoubleEndArrow:function(t,n,i){return t=Yh.s(),Zr(t,1*n,.5*i,!0),t.lineTo(.7*n,1*i),t.lineTo(.7*n,.7*i),t.lineTo(.3*n,.7*i),t.lineTo(.3*n,1*i),t.lineTo(0,.5*i),t.lineTo(.3*n,0),t.lineTo(.3*n,.3*i),t.lineTo(.7*n,.3*i),t.lineTo(.7*n,0),_r(t),n=t.o,i=ht(0,.5,.3,0,0,.3,.3,.3,Yh.K()),n.A=new F(i.x,i.y),i=ht(.7,1,1,.5,.7,.7,1,.7,i),n.B=new F(i.x,i.y),Yh.v(i),Yh.q(t),n},IBeamArrow:function(t,n,i){return t=Yh.s(),Zr(t,1*n,.5*i,!0),t.lineTo(.7*n,1*i),t.lineTo(.7*n,.7*i),t.lineTo(.2*n,.7*i),t.lineTo(.2*n,1*i),t.lineTo(0,1*i),t.lineTo(0,0),t.lineTo(.2*n,0),t.lineTo(.2*n,.3*i),t.lineTo(.7*n,.3*i),t.lineTo(.7*n,0),_r(t),n=t.o,n.A=new F(0,.3),i=ht(.7,1,1,.5,.7,.7,1,.7,Yh.K()),n.B=new F(i.x,i.y),Yh.v(i),Yh.q(t),n},Pointer:function(t,n,i){return t=Yh.s(),Zr(t,1*n,.5*i,!0),t.lineTo(0,1*i),t.lineTo(.2*n,.5*i),t.lineTo(0,0),_r(t),n=t.o,n.A=new F(.2,.35),i=ht(.2,.65,1,.65,0,1,1,.5,Yh.K()),n.B=new F(i.x,i.y),Yh.v(i),Yh.q(t),n},RoundedPointer:function(t,n,i){return t=Yh.s(),Zr(t,1*n,.5*i,!0),t.lineTo(0,1*i),ns(t,.5*n,.75*i,.5*n,.25*i,0,0),_r(t),n=t.o,n.A=new F(.4,.35),i=ht(.2,.65,1,.65,0,1,1,.5,Yh.K()),n.B=new F(i.x,i.y),Yh.v(i),Yh.q(t),n},SplitEndArrow:function(t,n,i){return t=Yh.s(),Zr(t,1*n,.5*i,!0),t.lineTo(.7*n,1*i),t.lineTo(.7*n,.7*i),t.lineTo(0,.7*i),t.lineTo(.2*n,.5*i),t.lineTo(0,.3*i),t.lineTo(.7*n,.3*i),t.lineTo(.7*n,0),_r(t),n=t.o,n.A=new F(.2,.3),i=ht(.7,1,1,.5,.7,.7,1,.7,Yh.K()),n.B=new F(i.x,i.y),Yh.v(i),Yh.q(t),n},MessageToUser:"SquareArrow",SquareArrow:function(t,n,i){return t=Yh.s(),Zr(t,1*n,.5*i,!0),t.lineTo(.7*n,1*i),t.lineTo(0,1*i),t.lineTo(0,0),t.lineTo(.7*n,0),_r(t),n=t.o,n.A=eu,n.B=new F(.7,1),Yh.q(t),n},Cone1:function(t,n,i){var e=.5*Bu,o=.1*Bu;return t=Yh.s(),Zr(t,0,.9*i,!0),t.lineTo(.5*n,0),t.lineTo(1*n,.9*i),ns(t,1*n,(.9+o)*i,(.5+e)*n,1*i,.5*n,1*i),ns(t,(.5-e)*n,1*i,0,(.9+o)*i,0,.9*i),_r(t),n=t.o,n.A=new F(.25,.5),n.B=new F(.75,.97),Yh.q(t),n},Cone2:function(t,n,i){return t=Yh.s(),Zr(t,0,.9*i,!0),ns(t,(1-.85/.9)*n,1*i,.85/.9*n,1*i,1*n,.9*i),t.lineTo(.5*n,0),t.lineTo(0,.9*i),_r(t),Zr(t,0,.9*i,!1),ns(t,(1-.85/.9)*n,.8*i,.85/.9*n,.8*i,1*n,.9*i),t.ab(!1),n=t.o,n.A=new F(.25,.5),n.B=new F(.75,.82),Yh.q(t),n},Cube1:function(t,n,i){return t=Yh.s(),Zr(t,.5*n,1*i,!0),t.lineTo(1*n,.85*i),t.lineTo(1*n,.15*i),t.lineTo(.5*n,0*i),t.lineTo(0*n,.15*i),t.lineTo(0*n,.85*i),_r(t),Zr(t,.5*n,1*i,!1),t.lineTo(.5*n,.3*i),t.lineTo(0,.15*i),t.moveTo(.5*n,.3*i),t.lineTo(1*n,.15*i),t.ab(!1),n=t.o,n.A=new F(0,.3),n.B=new F(.5,.85),Yh.q(t),n},Cube2:function(t,n,i){return t=Yh.s(),Zr(t,0,.3*i,!0),t.lineTo(0*n,1*i),t.lineTo(.7*n,i),t.lineTo(1*n,.7*i),t.lineTo(1*n,0*i),t.lineTo(.3*n,0*i),_r(t),Zr(t,0,.3*i,!1),t.lineTo(.7*n,.3*i),t.lineTo(1*n,0*i),t.moveTo(.7*n,.3*i),t.lineTo(.7*n,1*i),t.ab(!1),n=t.o,n.A=new F(0,.3),n.B=new F(.7,1),Yh.q(t),n},MagneticData:"Cylinder1",Cylinder1:function(t,n,i){var e=.5*Bu,o=.1*Bu;return t=Yh.s(),Zr(t,0,.1*i,!0),ns(t,0,(.1-o)*i,(.5-e)*n,0,.5*n,0),ns(t,(.5+e)*n,0,1*n,(.1-o)*i,1*n,.1*i),t.lineTo(n,.9*i),ns(t,1*n,(.9+o)*i,(.5+e)*n,1*i,.5*n,1*i),ns(t,(.5-e)*n,1*i,0,(.9+o)*i,0,.9*i),t.lineTo(0,.1*i),Zr(t,0,.1*i,!1),ns(t,0,(.1+o)*i,(.5-e)*n,.2*i,.5*n,.2*i),ns(t,(.5+e)*n,.2*i,1*n,(.1+o)*i,1*n,.1*i),t.ab(!1),n=t.o,n.A=new F(0,.2),n.B=new F(1,.9),Yh.q(t),n},Cylinder2:function(t,n,i){var e=.5*Bu,o=.1*Bu;return t=Yh.s(),Zr(t,0,.9*i,!0),t.lineTo(0,.1*i),ns(t,0,(.1-o)*i,(.5-e)*n,0,.5*n,0),ns(t,(.5+e)*n,0,1*n,(.1-o)*i,1*n,.1*i),t.lineTo(1*n,.9*i),ns(t,1*n,(.9+o)*i,(.5+e)*n,1*i,.5*n,1*i),ns(t,(.5-e)*n,1*i,0,(.9+o)*i,0,.9*i),Zr(t,0,.9*i,!1),ns(t,0,(.9-o)*i,(.5-e)*n,.8*i,.5*n,.8*i),ns(t,(.5+e)*n,.8*i,1*n,(.9-o)*i,1*n,.9*i),t.ab(!1),n=t.o,n.A=new F(0,.1),n.B=new F(1,.8),Yh.q(t),n},Cylinder3:function(t,n,i){var e=.1*Bu,o=.5*Bu;return t=Yh.s(),Zr(t,.1*n,0,!0),t.lineTo(.9*n,0),ns(t,(.9+e)*n,0,1*n,(.5-o)*i,1*n,.5*i),ns(t,1*n,(.5+o)*i,(.9+e)*n,1*i,.9*n,1*i),t.lineTo(.1*n,1*i),ns(t,(.1-e)*n,1*i,0,(.5+o)*i,0,.5*i),ns(t,0,(.5-o)*i,(.1-e)*n,0,.1*n,0),Zr(t,.1*n,0,!1),ns(t,(.1+e)*n,0,.2*n,(.5-o)*i,.2*n,.5*i),ns(t,.2*n,(.5+o)*i,(.1+e)*n,1*i,.1*n,1*i),t.ab(!1),n=t.o,n.A=new F(.2,0),n.B=new F(.9,1),Yh.q(t),n},DirectData:"Cylinder4",Cylinder4:function(t,n,i){var e=.1*Bu,o=.5*Bu;return t=Yh.s(),Zr(t,.9*n,0,!0),ns(t,(.9+e)*n,0,1*n,(.5-o)*i,1*n,.5*i),ns(t,1*n,(.5+o)*i,(.9+e)*n,1*i,.9*n,1*i),t.lineTo(.1*n,1*i),ns(t,(.1-e)*n,1*i,0,(.5+o)*i,0,.5*i),ns(t,0,(.5-o)*i,(.1-e)*n,0,.1*n,0),t.lineTo(.9*n,0),Zr(t,.9*n,0,!1),ns(t,(.9-e)*n,0,.8*n,(.5-o)*i,.8*n,.5*i),ns(t,.8*n,(.5+o)*i,(.9-e)*n,1*i,.9*n,1*i),t.ab(!1),n=t.o,n.A=new F(.1,0),n.B=new F(.8,1),Yh.q(t),n},Prism1:function(t,n,i){return t=Yh.s(),Zr(t,.25*n,.25*i,!0),t.lineTo(.75*n,0),t.lineTo(n,.5*i),t.lineTo(.5*n,i),t.lineTo(0,i),_r(t),Zr(t,.25*n,.25*i,!1),t.lineTo(.5*n,i),t.ab(!1),n=t.o,n.A=new F(.408,.172),n.B=new F(.833,.662),Yh.q(t),n},Prism2:function(t,n,i){return t=Yh.s(),Zr(t,0,.25*i,!0),t.lineTo(.75*n,0),t.lineTo(1*n,.25*i),t.lineTo(.75*n,.75*i),t.lineTo(0,1*i),_r(t),Zr(t,0,i,!1),t.lineTo(.25*n,.5*i),t.lineTo(n,.25*i),t.moveTo(0,.25*i),t.lineTo(.25*n,.5*i),t.ab(!1),n=t.o,n.A=new F(.25,.5),n.B=new F(.75,.75),Yh.q(t),n},Pyramid1:function(t,n,i){return t=Yh.s(),Zr(t,.5*n,0,!0),t.lineTo(n,.75*i),t.lineTo(.5*n,1*i),t.lineTo(0,.75*i),_r(t),Zr(t,.5*n,0,!1),t.lineTo(.5*n,1*i),t.ab(!1),n=t.o,n.A=new F(.25,.367),n.B=new F(.75,.875),Yh.q(t),n},Pyramid2:function(t,n,i){return t=Yh.s(),Zr(t,.5*n,0,!0),t.lineTo(n,.85*i),t.lineTo(.5*n,1*i),t.lineTo(0,.85*i),_r(t),Zr(t,.5*n,0,!1),t.lineTo(.5*n,.7*i),t.lineTo(0,.85*i),t.moveTo(.5*n,.7*i),t.lineTo(1*n,.85*i),t.ab(!1),n=t.o,n.A=new F(.25,.367),n.B=new F(.75,.875),Yh.q(t),n},Actor:function(t,n,i){var e=.2*Bu,o=.1*Bu,r=.5,s=.1;return t=Yh.s(),Zr(t,r*n,(s+.1)*i,!0),ns(t,(r-e)*n,(s+.1)*i,(r-.2)*n,(s+o)*i,(r-.2)*n,s*i),ns(t,(r-.2)*n,(s-o)*i,(r-e)*n,(s-.1)*i,r*n,(s-.1)*i),ns(t,(r+e)*n,(s-.1)*i,(r+.2)*n,(s-o)*i,(r+.2)*n,s*i),ns(t,(r+.2)*n,(s+o)*i,(r+e)*n,(s+.1)*i,r*n,(s+.1)*i),e=.05,o=Bu*e,Zr(t,.5*n,.2*i,!0),t.lineTo(.95*n,.2*i),r=.95,s=.25,ns(t,(r+o)*n,(s-e)*i,(r+e)*n,(s-o)*i,(r+e)*n,s*i),t.lineTo(1*n,.6*i),t.lineTo(.85*n,.6*i),t.lineTo(.85*n,.35*i),e=.025,o=Bu*e,r=.825,s=.35,ns(t,(r+e)*n,(s-o)*i,(r+o)*n,(s-e)*i,r*n,(s-e)*i),ns(t,(r-o)*n,(s-e)*i,(r-e)*n,(s-o)*i,(r-e)*n,s*i),t.lineTo(.8*n,1*i),t.lineTo(.55*n,1*i),t.lineTo(.55*n,.7*i),e=.05,o=Bu*e,r=.5,s=.7,ns(t,(r+e)*n,(s-o)*i,(r+o)*n,(s-e)*i,r*n,(s-e)*i),ns(t,(r-o)*n,(s-e)*i,(r-e)*n,(s-o)*i,(r-e)*n,s*i),t.lineTo(.45*n,1*i),t.lineTo(.2*n,1*i),t.lineTo(.2*n,.35*i),e=.025,o=Bu*e,r=.175,s=.35,ns(t,(r+e)*n,(s-o)*i,(r+o)*n,(s-e)*i,r*n,(s-e)*i),ns(t,(r-o)*n,(s-e)*i,(r-e)*n,(s-o)*i,(r-e)*n,s*i),t.lineTo(.15*n,.6*i),t.lineTo(0*n,.6*i),t.lineTo(0*n,.25*i),e=.05,o=Bu*e,r=.05,s=.25,ns(t,(r-e)*n,(s-o)*i,(r-o)*n,(s-e)*i,r*n,(s-e)*i),t.lineTo(.5*n,.2*i),n=t.o,n.A=new F(.2,.2),n.B=new F(.8,.65),Yh.q(t),n},Card:function(t,n,i){return t=Yh.s(),Zr(t,1*n,0*i,!0),t.lineTo(1*n,1*i),t.lineTo(0*n,1*i),t.lineTo(0*n,.2*i),t.lineTo(.2*n,0*i),_r(t),n=t.o,n.A=new F(0,.2),n.B=fu,Yh.q(t),n},Collate:function(t,n,i){return t=Yh.s(),Zr(t,.5*n,.5*i,!0),t.lineTo(0,0),t.lineTo(1*n,0),t.lineTo(.5*n,.5*i),Zr(t,.5*n,.5*i,!0),t.lineTo(1*n,1*i),t.lineTo(0,1*i),t.lineTo(.5*n,.5*i),n=t.o,n.A=new F(.25,0),n.B=new F(.75,.25),Yh.q(t),n},CreateRequest:function(t,n,i){t=t?t.Cc:NaN,isNaN(t)&&(t=.1);var e=Yh.s();return Zr(e,0,0,!0),e.lineTo(1*n,0),e.lineTo(1*n,1*i),e.lineTo(0,1*i),_r(e),Zr(e,0,t*i,!1),e.lineTo(1*n,t*i),e.moveTo(0,(1-t)*i),e.lineTo(1*n,(1-t)*i),e.ab(!1),n=e.o,n.A=new F(0,t),n.B=new F(1,1-t),Yh.q(e),n},Database:function(t,n,i){t=Yh.s();var e=.5*Bu,o=.1*Bu;return Zr(t,1*n,.1*i,!0),t.lineTo(1*n,.9*i),ns(t,1*n,(.9+o)*i,(.5+e)*n,1*i,.5*n,1*i),ns(t,(.5-e)*n,1*i,0,(.9+o)*i,0,.9*i),t.lineTo(0,.1*i),ns(t,0,(.1-o)*i,(.5-e)*n,0,.5*n,0),ns(t,(.5+e)*n,0,1*n,(.1-o)*i,1*n,.1*i),Zr(t,1*n,.1*i,!1),ns(t,1*n,(.1+o)*i,(.5+e)*n,.2*i,.5*n,.2*i),ns(t,(.5-e)*n,.2*i,0,(.1+o)*i,0,.1*i),t.moveTo(1*n,.2*i),ns(t,1*n,(.2+o)*i,(.5+e)*n,.3*i,.5*n,.3*i),ns(t,(.5-e)*n,.3*i,0,(.2+o)*i,0,.2*i),t.moveTo(1*n,.3*i),ns(t,1*n,(.3+o)*i,(.5+e)*n,.4*i,.5*n,.4*i),ns(t,(.5-e)*n,.4*i,0,(.3+o)*i,0,.3*i),t.ab(!1),n=t.o,n.A=new F(0,.4),n.B=new F(1,.9),Yh.q(t),n},StoredData:"DataStorage",DataStorage:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!0),t.lineTo(.75*n,0),ns(t,1*n,0,1*n,1*i,.75*n,1*i),t.lineTo(0,1*i),ns(t,.25*n,.9*i,.25*n,.1*i,0,0),_r(t),n=t.o,n.A=new F(.226,0),n.B=new F(.81,1),Yh.q(t),n},DiskStorage:function(t,n,i){t=Yh.s();var e=.5*Bu,o=.1*Bu;return Zr(t,1*n,.1*i,!0),t.lineTo(1*n,.9*i),ns(t,1*n,(.9+o)*i,(.5+e)*n,1*i,.5*n,1*i),ns(t,(.5-e)*n,1*i,0,(.9+o)*i,0,.9*i),t.lineTo(0,.1*i),ns(t,0,(.1-o)*i,(.5-e)*n,0,.5*n,0),ns(t,(.5+e)*n,0,1*n,(.1-o)*i,1*n,.1*i),Zr(t,1*n,.1*i,!1),ns(t,1*n,(.1+o)*i,(.5+e)*n,.2*i,.5*n,.2*i),ns(t,(.5-e)*n,.2*i,0,(.1+o)*i,0,.1*i),t.moveTo(1*n,.2*i),ns(t,1*n,(.2+o)*i,(.5+e)*n,.3*i,.5*n,.3*i),ns(t,(.5-e)*n,.3*i,0,(.2+o)*i,0,.2*i),t.ab(!1),n=t.o,n.A=new F(0,.3),n.B=new F(1,.9),Yh.q(t),n},Display:function(t,n,i){return t=Yh.s(),Zr(t,.25*n,0,!0),t.lineTo(.75*n,0),ns(t,1*n,0,1*n,1*i,.75*n,1*i),t.lineTo(.25*n,1*i),t.lineTo(0,.5*i),_r(t),n=t.o,n.A=new F(.25,0),n.B=new F(.75,1),Yh.q(t),n},DividedEvent:function(t,n,i){t=t?t.Cc:NaN,isNaN(t)?t=.2:.15>t&&(t=.15);var e=Yh.s(),o=.2*Bu;return Zr(e,0,.2*i,!0),ns(e,0,(.2-o)*i,(.2-o)*n,0,.2*n,0),e.lineTo(.8*n,0),ns(e,(.8+o)*n,0,1*n,(.2-o)*i,1*n,.2*i),e.lineTo(1*n,.8*i),ns(e,1*n,(.8+o)*i,(.8+o)*n,1*i,.8*n,1*i),e.lineTo(.2*n,1*i),ns(e,(.2-o)*n,1*i,0,(.8+o)*i,0,.8*i),e.lineTo(0,.2*i),Zr(e,0,t*i,!1),e.lineTo(1*n,t*i),e.ab(!1),n=e.o,n.A=new F(0,t),n.B=new F(1,1-t),Yh.q(e),n},DividedProcess:function(t,n,i){t=t?t.Cc:NaN,(isNaN(t)||.1>t)&&(t=.1);var e=Yh.s();return Zr(e,0,0,!0),e.lineTo(1*n,0),e.lineTo(1*n,1*i),e.lineTo(0,1*i),_r(e),Zr(e,0,t*i,!1),e.lineTo(1*n,t*i),e.ab(!1),n=e.o,n.A=new F(0,t),n.B=fu,Yh.q(e),n},Document:function(t,n,i){return i/=.8,t=Yh.s(),Zr(t,0,.7*i,!0),t.lineTo(0,0),t.lineTo(1*n,0),t.lineTo(1*n,.7*i),ns(t,.5*n,.4*i,.5*n,1*i,0,.7*i),_r(t),n=t.o,n.A=eu,n.B=new F(1,.6),Yh.q(t),n},ExternalOrganization:function(t,n,i){t=t?t.Cc:NaN,(isNaN(t)||.2>t)&&(t=.2);var e=Yh.s();return Zr(e,0,0,!0),e.lineTo(1*n,0),e.lineTo(1*n,1*i),e.lineTo(0,1*i),_r(e),Zr(e,t*n,0,!1),e.lineTo(0,t*i),e.moveTo(1*n,t*i),e.lineTo((1-t)*n,0),e.moveTo(0,(1-t)*i),e.lineTo(t*n,1*i),e.moveTo((1-t)*n,1*i),e.lineTo(1*n,(1-t)*i),e.ab(!1),n=e.o,n.A=new F(t/2,t/2),n.B=new F(1-t/2,1-t/2),Yh.q(e),n},ExternalProcess:function(t,n,i){return t=Yh.s(),Zr(t,.5*n,0,!0),t.lineTo(1*n,.5*i),t.lineTo(.5*n,1*i),t.lineTo(0,.5*i),_r(t),Zr(t,.1*n,.4*i,!1),t.lineTo(.1*n,.6*i),t.moveTo(.9*n,.6*i),t.lineTo(.9*n,.4*i),t.moveTo(.6*n,.1*i),t.lineTo(.4*n,.1*i),t.moveTo(.4*n,.9*i),t.lineTo(.6*n,.9*i),t.ab(!1),n=t.o,n.A=new F(.25,.25),n.B=new F(.75,.75),Yh.q(t),n},File:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!0),t.lineTo(.75*n,0),t.lineTo(1*n,.25*i),t.lineTo(1*n,1*i),t.lineTo(0,1*i),_r(t),Zr(t,.75*n,0,!1),t.lineTo(.75*n,.25*i),t.lineTo(1*n,.25*i),t.ab(!1),n=t.o,n.A=new F(0,.25),n.B=fu,Yh.q(t),n},Interrupt:function(t,n,i){return t=Yh.s(),Zr(t,1*n,.5*i,!0),t.lineTo(0,1*i),t.lineTo(0,0),t.lineTo(1*n,.5*i),Zr(t,1*n,.5*i,!1),t.lineTo(1*n,1*i),Zr(t,1*n,.5*i,!1),t.lineTo(1*n,0),n=t.o,n.A=new F(0,.25),n.B=new F(.5,.75),Yh.q(t),n},InternalStorage:function(t,n,i){var e=t?t.Cc:NaN;t=t?t.xu:NaN,isNaN(e)&&(e=.1),isNaN(t)&&(t=.1);var o=Yh.s();return Zr(o,0,0,!0),o.lineTo(1*n,0),o.lineTo(1*n,1*i),o.lineTo(0,1*i),_r(o),Zr(o,e*n,0,!1),o.lineTo(e*n,1*i),o.moveTo(0,t*i),o.lineTo(1*n,t*i),o.ab(!1),n=o.o,n.A=new F(e,t),n.B=fu,Yh.q(o),n},Junction:function(t,n,i){t=Yh.s();var e=1/Math.SQRT2,o=(1-1/Math.SQRT2)/2,r=.5*Bu;return Zr(t,1*n,.5*i,!0),ns(t,1*n,(.5+r)*i,(.5+r)*n,1*i,.5*n,1*i),ns(t,(.5-r)*n,1*i,0,(.5+r)*i,0,.5*i),ns(t,0,(.5-r)*i,(.5-r)*n,0,.5*n,0),ns(t,(.5+r)*n,0,1*n,(.5-r)*i,1*n,.5*i),Zr(t,(o+e)*n,(o+e)*i,!1),t.lineTo(o*n,o*i),t.moveTo(o*n,(o+e)*i),t.lineTo((o+e)*n,o*i),t.ab(!1),n=t.o,n.Zd=Rc,Yh.q(t),n},LinedDocument:function(t,n,i){return i/=.8,t=Yh.s(),Zr(t,0,.7*i,!0),t.lineTo(0,0),t.lineTo(1*n,0),t.lineTo(1*n,.7*i),ns(t,.5*n,.4*i,.5*n,1*i,0,.7*i),_r(t),Zr(t,.1*n,0,!1),t.lineTo(.1*n,.75*i),t.ab(!1),n=t.o,n.A=new F(.1,0),n.B=new F(1,.6),Yh.q(t),n},LoopLimit:function(t,n,i){return t=Yh.s(),Zr(t,0,1*i,!0),t.lineTo(0,.25*i),t.lineTo(.25*n,0),t.lineTo(.75*n,0),t.lineTo(1*n,.25*i),t.lineTo(1*n,1*i),_r(t),n=t.o,n.A=new F(0,.25),n.B=fu,Yh.q(t),n},SequentialData:"MagneticTape",MagneticTape:function(t,n,i){t=Yh.s();var e=.5*Bu;return Zr(t,.5*n,1*i,!0),ns(t,(.5-e)*n,1*i,0,(.5+e)*i,0,.5*i),ns(t,0,(.5-e)*i,(.5-e)*n,0,.5*n,0),ns(t,(.5+e)*n,0,1*n,(.5-e)*i,1*n,.5*i),ns(t,1*n,(.5+e)*i,(.5+e)*n,.9*i,.6*n,.9*i),t.lineTo(1*n,.9*i),t.lineTo(1*n,1*i),t.lineTo(.5*n,1*i),n=t.o,n.A=new F(.15,.15),n.B=new F(.85,.8),Yh.q(t),n},ManualInput:function(t,n,i){return t=Yh.s(),Zr(t,1*n,0,!0),t.lineTo(1*n,1*i),t.lineTo(0,1*i),t.lineTo(0,.25*i),_r(t),n=t.o,n.A=new F(0,.25),n.B=fu,Yh.q(t),n},MessageFromUser:function(t,n,i){t=t?t.Cc:NaN,isNaN(t)&&(t=.7);var e=Yh.s();return Zr(e,0,0,!0),e.lineTo(1*n,0),e.lineTo(t*n,.5*i),e.lineTo(1*n,1*i),e.lineTo(0,1*i),_r(e),n=e.o,n.A=eu,n.B=new F(t,1),Yh.q(e),n},MicroformProcessing:function(t,n,i){t=t?t.Cc:NaN,isNaN(t)&&(t=.25);var e=Yh.s();return Zr(e,0,0,!0),e.lineTo(.5*n,t*i),e.lineTo(1*n,0),e.lineTo(1*n,1*i),e.lineTo(.5*n,(1-t)*i),e.lineTo(0,1*i),_r(e),n=e.o,n.A=new F(0,t),n.B=new F(1,1-t),Yh.q(e),n},MicroformRecording:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!0),t.lineTo(.75*n,.25*i),t.lineTo(1*n,.15*i),t.lineTo(1*n,.85*i),t.lineTo(.75*n,.75*i),t.lineTo(0,1*i),_r(t),n=t.o,n.A=new F(0,.25),n.B=new F(1,.75),Yh.q(t),n},MultiDocument:function(t,n,i){return i/=.8,t=Yh.s(),Zr(t,n,0,!0),t.lineTo(n,.5*i),ns(t,.96*n,.47*i,.93*n,.45*i,.9*n,.44*i),t.lineTo(.9*n,.6*i),ns(t,.86*n,.57*i,.83*n,.55*i,.8*n,.54*i),t.lineTo(.8*n,.7*i),ns(t,.4*n,.4*i,.4*n,1*i,0,.7*i),t.lineTo(0,.2*i),t.lineTo(.1*n,.2*i),t.lineTo(.1*n,.1*i),t.lineTo(.2*n,.1*i),t.lineTo(.2*n,0),_r(t),Zr(t,.1*n,.2*i,!1),t.lineTo(.8*n,.2*i),t.lineTo(.8*n,.54*i),t.moveTo(.2*n,.1*i),t.lineTo(.9*n,.1*i),t.lineTo(.9*n,.44*i),t.ab(!1),n=t.o,n.A=new F(0,.25),n.B=new F(.8,.77),Yh.q(t),n},MultiProcess:function(t,n,i){return t=Yh.s(),Zr(t,.1*n,.1*i,!0),t.lineTo(.2*n,.1*i),t.lineTo(.2*n,0),t.lineTo(1*n,0),t.lineTo(1*n,.8*i),t.lineTo(.9*n,.8*i),t.lineTo(.9*n,.9*i),t.lineTo(.8*n,.9*i),t.lineTo(.8*n,1*i),t.lineTo(0,1*i),t.lineTo(0,.2*i),t.lineTo(.1*n,.2*i),_r(t),Zr(t,.2*n,.1*i,!1),t.lineTo(.9*n,.1*i),t.lineTo(.9*n,.8*i),t.moveTo(.1*n,.2*i),t.lineTo(.8*n,.2*i),t.lineTo(.8*n,.9*i),t.ab(!1),n=t.o,n.A=new F(0,.2),n.B=new F(.8,1),Yh.q(t),n},OfflineStorage:function(t,n,i){t=t?t.Cc:NaN,isNaN(t)&&(t=.1);var e=1-t,o=Yh.s();return Zr(o,0,0,!0),o.lineTo(1*n,0),o.lineTo(.5*n,1*i),_r(o),Zr(o,.5*t*n,t*i,!1),o.lineTo((1-.5*t)*n,t*i),o.ab(!1),n=o.o,n.A=new F(e/4+.5*t,t),n.B=new F(3*e/4+.5*t,t+.5*e),Yh.q(o),n},OffPageConnector:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!0),t.lineTo(.75*n,0),t.lineTo(1*n,.5*i),t.lineTo(.75*n,1*i),t.lineTo(0,1*i),_r(t),n=t.o,n.A=eu,n.B=new F(.75,1),Yh.q(t),n},Or:function(t,n,i){t=Yh.s();var e=.5*Bu;return Zr(t,1*n,.5*i,!0),ns(t,1*n,(.5+e)*i,(.5+e)*n,1*i,.5*n,1*i),ns(t,(.5-e)*n,1*i,0,(.5+e)*i,0,.5*i),ns(t,0,(.5-e)*i,(.5-e)*n,0,.5*n,0),ns(t,(.5+e)*n,0,1*n,(.5-e)*i,1*n,.5*i),Zr(t,1*n,.5*i,!1),t.lineTo(0,.5*i),t.moveTo(.5*n,1*i),t.lineTo(.5*n,0),t.ab(!1),n=t.o,n.Zd=Rc,Yh.q(t),n},PaperTape:function(t,n,i){return i/=.8,t=Yh.s(),Zr(t,0,.7*i,!0),t.lineTo(0,.3*i),ns(t,.5*n,.6*i,.5*n,0,1*n,.3*i),t.lineTo(1*n,.7*i),ns(t,.5*n,.4*i,.5*n,1*i,0,.7*i),_r(t),n=t.o,n.A=new F(0,.49),n.B=new F(1,.75),Yh.q(t),n},PrimitiveFromCall:function(t,n,i){var e=t?t.Cc:NaN;t=t?t.xu:NaN,isNaN(e)&&(e=.1),isNaN(t)&&(t=.3);var o=Yh.s();return Zr(o,0,0,!0),o.lineTo(1*n,0),o.lineTo((1-t)*n,.5*i),o.lineTo(1*n,1*i),o.lineTo(0,1*i),_r(o),n=o.o,n.A=new F(e,0),n.B=new F(1-t,1),Yh.q(o),n},PrimitiveToCall:function(t,n,i){var e=t?t.Cc:NaN;t=t?t.xu:NaN,isNaN(e)&&(e=.1),isNaN(t)&&(t=.3);var o=Yh.s();return Zr(o,0,0,!0),o.lineTo((1-t)*n,0),o.lineTo(1*n,.5*i),o.lineTo((1-t)*n,1*i),o.lineTo(0,1*i),_r(o),n=o.o,n.A=new F(e,0),n.B=new F(1-t,1),Yh.q(o),n},Subroutine:"Procedure",Procedure:function(t,n,i){t=t?t.Cc:NaN,isNaN(t)&&(t=.1);var e=Yh.s();return Zr(e,0,0,!0),e.lineTo(1*n,0),e.lineTo(1*n,1*i),e.lineTo(0,1*i),_r(e),Zr(e,(1-t)*n,0,!1),e.lineTo((1-t)*n,1*i),e.moveTo(t*n,0),e.lineTo(t*n,1*i),e.ab(!1),n=e.o,n.A=new F(t,0),n.B=new F(1-t,1),Yh.q(e),n},Process:function(t,n,i){t=t?t.Cc:NaN,isNaN(t)&&(t=.1);var e=Yh.s();return Zr(e,0,0,!0),e.lineTo(1*n,0),e.lineTo(1*n,1*i),e.lineTo(0,1*i),_r(e),Zr(e,t*n,0,!1),e.lineTo(t*n,1*i),e.ab(!1),n=e.o,n.A=new F(t,0),n.B=fu,Yh.q(e),n},Sort:function(t,n,i){return t=Yh.s(),Zr(t,.5*n,0,!0),t.lineTo(1*n,.5*i),t.lineTo(.5*n,1*i),t.lineTo(0,.5*i),_r(t),Zr(t,0,.5*i,!1),t.lineTo(1*n,.5*i),t.ab(!1),n=t.o,n.A=new F(.25,.25),n.B=new F(.75,.5),Yh.q(t),n},Start:function(t,n,i){return t=Yh.s(),Zr(t,.25*n,0,!0),Zr(t,.25*n,0,!0),t.arcTo(270,180,.75*n,.5*i,.25*n,.5*i),t.arcTo(90,180,.25*n,.5*i,.25*n,.5*i),Zr(t,.25*n,0,!1),t.lineTo(.25*n,1*i),t.moveTo(.75*n,0),t.lineTo(.75*n,1*i),t.ab(!1),n=t.o,n.A=new F(.25,0),n.B=new F(.75,1),Yh.q(t),n},Terminator:function(t,n,i){return t=Yh.s(),Zr(t,.25*n,0,!0),t.arcTo(270,180,.75*n,.5*i,.25*n,.5*i),t.arcTo(90,180,.25*n,.5*i,.25*n,.5*i),n=t.o,n.A=new F(.23,0),n.B=new F(.77,1),Yh.q(t),n},TransmittalTape:function(t,n,i){t=t?t.Cc:NaN,isNaN(t)&&(t=.1);var e=Yh.s();return Zr(e,0,0,!0),e.lineTo(1*n,0),e.lineTo(1*n,1*i),e.lineTo(.75*n,(1-t)*i),e.lineTo(0,(1-t)*i),_r(e),n=e.o,n.A=eu,n.B=new F(1,1-t),Yh.q(e),n},AndGate:function(t,n,i){t=Yh.s();var e=.5*Bu;return Zr(t,0,0,!0),t.lineTo(.5*n,0),ns(t,(.5+e)*n,0,1*n,(.5-e)*i,1*n,.5*i),ns(t,1*n,(.5+e)*i,(.5+e)*n,1*i,.5*n,1*i),t.lineTo(0,1*i),_r(t),n=t.o,n.A=eu,n.B=new F(.55,1),Yh.q(t),n},Buffer:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!0),t.lineTo(1*n,.5*i),t.lineTo(0,1*i),_r(t),n=t.o,n.A=new F(0,.25),n.B=new F(.5,.75),Yh.q(t),n},Clock:function(t,n,i){t=Yh.s();var e=.5*Bu;return Zr(t,1*n,.5*i,!0),ns(t,1*n,(.5+e)*i,(.5+e)*n,1*i,.5*n,1*i),ns(t,(.5-e)*n,1*i,0,(.5+e)*i,0,.5*i),ns(t,0,(.5-e)*i,(.5-e)*n,0,.5*n,0),ns(t,(.5+e)*n,0,1*n,(.5-e)*i,1*n,.5*i),Zr(t,1*n,.5*i,!1),t.lineTo(1*n,.5*i),Zr(t,.8*n,.75*i,!1),t.lineTo(.8*n,.25*i),t.lineTo(.6*n,.25*i),t.lineTo(.6*n,.75*i),t.lineTo(.4*n,.75*i),t.lineTo(.4*n,.25*i),t.lineTo(.2*n,.25*i),t.lineTo(.2*n,.75*i),t.ab(!1),n=t.o,n.Zd=Rc,Yh.q(t),n},Ground:function(t,n,i){return t=Yh.s(),Zr(t,.5*n,0,!1),t.lineTo(.5*n,.4*i),t.moveTo(.2*n,.6*i),t.lineTo(.8*n,.6*i),t.moveTo(.3*n,.8*i),t.lineTo(.7*n,.8*i),t.moveTo(.4*n,1*i),t.lineTo(.6*n,1*i),n=t.o,Yh.q(t),n},Inverter:function(t,n,i){t=Yh.s();var e=.1*Bu;return Zr(t,.8*n,.5*i,!0),t.lineTo(0,1*i),t.lineTo(0,0),t.lineTo(.8*n,.5*i),Zr(t,1*n,.5*i,!0),ns(t,1*n,(.5+e)*i,(.9+e)*n,.6*i,.9*n,.6*i),ns(t,(.9-e)*n,.6*i,.8*n,(.5+e)*i,.8*n,.5*i),ns(t,.8*n,(.5-e)*i,(.9-e)*n,.4*i,.9*n,.4*i),ns(t,(.9+e)*n,.4*i,1*n,(.5-e)*i,1*n,.5*i),n=t.o,n.A=new F(0,.25),n.B=new F(.4,.75),Yh.q(t),n},NandGate:function(t,n,i){t=Yh.s();var e=.5*Bu,o=.4*Bu,r=.1*Bu;return Zr(t,.8*n,.5*i,!0),ns(t,.8*n,(.5+o)*i,(.4+e)*n,1*i,.4*n,1*i),t.lineTo(0,1*i),t.lineTo(0,0),t.lineTo(.4*n,0),ns(t,(.4+e)*n,0,.8*n,(.5-o)*i,.8*n,.5*i),Zr(t,1*n,.5*i,!0),ns(t,1*n,(.5+r)*i,(.9+r)*n,.6*i,.9*n,.6*i),ns(t,(.9-r)*n,.6*i,.8*n,(.5+r)*i,.8*n,.5*i),ns(t,.8*n,(.5-r)*i,(.9-r)*n,.4*i,.9*n,.4*i),ns(t,(.9+r)*n,.4*i,1*n,(.5-r)*i,1*n,.5*i),n=t.o,n.A=new F(0,.05),n.B=new F(.55,.95),Yh.q(t),n},NorGate:function(t,n,i){t=Yh.s();var e=.5,o=Bu*e,r=0,s=.5;return Zr(t,.8*n,.5*i,!0),ns(t,.7*n,(s+o)*i,(r+o)*n,(s+e)*i,0,1*i),ns(t,.25*n,.75*i,.25*n,.25*i,0,0),ns(t,(r+o)*n,(s-e)*i,.7*n,(s-o)*i,.8*n,.5*i),e=.1,o=.1*Bu,r=.9,s=.5,Zr(t,(r-e)*n,s*i,!0),ns(t,(r-e)*n,(s-o)*i,(r-o)*n,(s-e)*i,r*n,(s-e)*i),ns(t,(r+o)*n,(s-e)*i,(r+e)*n,(s-o)*i,(r+e)*n,s*i),ns(t,(r+e)*n,(s+o)*i,(r+o)*n,(s+e)*i,r*n,(s+e)*i),ns(t,(r-o)*n,(s+e)*i,(r-e)*n,(s+o)*i,(r-e)*n,s*i),n=t.o,n.A=new F(.2,.25),n.B=new F(.6,.75),Yh.q(t),n},OrGate:function(t,n,i){t=Yh.s();var e=.5*Bu;return Zr(t,0,0,!0),ns(t,(0+e+e)*n,0*i,.8*n,(.5-e)*i,1*n,.5*i),ns(t,.8*n,(.5+e)*i,(0+e+e)*n,1*i,0,1*i),ns(t,.25*n,.75*i,.25*n,.25*i,0,0),_r(t),n=t.o,n.A=new F(.2,.25),n.B=new F(.75,.75),Yh.q(t),n},XnorGate:function(t,n,i){t=Yh.s();var e=.5,o=Bu*e,r=.2,s=.5;return Zr(t,.1*n,0,!1),ns(t,.35*n,.25*i,.35*n,.75*i,.1*n,1*i),Zr(t,.8*n,.5*i,!0),ns(t,.7*n,(s+o)*i,(r+o)*n,(s+e)*i,.2*n,1*i),ns(t,.45*n,.75*i,.45*n,.25*i,.2*n,0),ns(t,(r+o)*n,(s-e)*i,.7*n,(s-o)*i,.8*n,.5*i),e=.1,o=.1*Bu,r=.9,s=.5,Zr(t,(r-e)*n,s*i,!0),ns(t,(r-e)*n,(s-o)*i,(r-o)*n,(s-e)*i,r*n,(s-e)*i),ns(t,(r+o)*n,(s-e)*i,(r+e)*n,(s-o)*i,(r+e)*n,s*i),ns(t,(r+e)*n,(s+o)*i,(r+o)*n,(s+e)*i,r*n,(s+e)*i),ns(t,(r-o)*n,(s+e)*i,(r-e)*n,(s+o)*i,(r-e)*n,s*i),n=t.o,n.A=new F(.4,.25),n.B=new F(.65,.75),Yh.q(t),n},XorGate:function(t,n,i){t=Yh.s();var e=.5*Bu;return Zr(t,.1*n,0,!1),ns(t,.35*n,.25*i,.35*n,.75*i,.1*n,1*i),Zr(t,.2*n,0,!0),ns(t,(.2+e)*n,0*i,.9*n,(.5-e)*i,1*n,.5*i),ns(t,.9*n,(.5+e)*i,(.2+e)*n,1*i,.2*n,1*i),ns(t,.45*n,.75*i,.45*n,.25*i,.2*n,0),_r(t),n=t.o,n.A=new F(.4,.25),n.B=new F(.8,.75),Yh.q(t),n},Capacitor:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!1),t.lineTo(0,1*i),t.moveTo(1*n,0),t.lineTo(1*n,1*i),n=t.o,Yh.q(t),n},Resistor:function(t,n,i){return t=Yh.s(),Zr(t,0,.5*i,!1),t.lineTo(.1*n,0),t.lineTo(.2*n,1*i),t.lineTo(.3*n,0),t.lineTo(.4*n,1*i),t.lineTo(.5*n,0),t.lineTo(.6*n,1*i),t.lineTo(.7*n,.5*i),n=t.o,Yh.q(t),n},Inductor:function(t,n,i){t=Yh.s();var e=.1*Bu,o=.1;return Zr(t,(o-.5*e)*n,i,!1),ns(t,(o-e)*n,i,(o-.1)*n,0,(o+.1)*n,0),o=.3,ns(t,(o+.1)*n,0,(o+e)*n,i,o*n,i),ns(t,(o-e)*n,i,(o-.1)*n,0,(o+.1)*n,0),o=.5,ns(t,(o+.1)*n,0,(o+e)*n,i,o*n,i),ns(t,(o-e)*n,i,(o-.1)*n,0,(o+.1)*n,0),o=.7,ns(t,(o+.1)*n,0,(o+e)*n,i,o*n,i),ns(t,(o-e)*n,i,(o-.1)*n,0,(o+.1)*n,0),o=.9,ns(t,(o+.1)*n,0,(o+e)*n,i,(o+.5*e)*n,i),n=t.o,Yh.q(t),n},ACvoltageSource:function(t,n,i){t=Yh.s();var e=.5*Bu;return Zr(t,0*n,.5*i,!1),ns(t,0*n,(.5-e)*i,(.5-e)*n,0*i,.5*n,0*i),ns(t,(.5+e)*n,0*i,1*n,(.5-e)*i,1*n,.5*i),ns(t,1*n,(.5+e)*i,(.5+e)*n,1*i,.5*n,1*i),ns(t,(.5-e)*n,1*i,0*n,(.5+e)*i,0*n,.5*i),t.moveTo(.1*n,.5*i),ns(t,.5*n,0*i,.5*n,1*i,.9*n,.5*i),n=t.o,n.Zd=Rc,Yh.q(t),n},DCvoltageSource:function(t,n,i){return t=Yh.s(),Zr(t,0,.75*i,!1),t.lineTo(0,.25*i),t.moveTo(1*n,0),t.lineTo(1*n,1*i),n=t.o,Yh.q(t),n},Diode:function(t,n,i){return t=Yh.s(),Zr(t,1*n,0,!1),t.lineTo(1*n,.5*i),t.lineTo(0,1*i),t.lineTo(0,0),t.lineTo(1*n,.5*i),t.lineTo(1*n,1*i),n=t.o,n.A=new F(0,.25),n.B=new F(.5,.75),Yh.q(t),n},Wifi:function(t,n,i){var e=n,o=i;n*=.38,i*=.6,t=Yh.s();var r=.8*Bu,s=.8,l=0,a=.5,e=(e-n)/2,o=(o-i)/2;return Zr(t,l*n+e,(a+s)*i+o,!0),ns(t,(l-r)*n+e,(a+s)*i+o,(l-s)*n+e,(a+r)*i+o,(l-s)*n+e,a*i+o),ns(t,(l-s)*n+e,(a-r)*i+o,(l-r)*n+e,(a-s)*i+o,l*n+e,(a-s)*i+o),ns(t,l*n+e,(a-s)*i+o,(l-s+.5*r)*n+e,(a-r)*i+o,(l-s+.5*r)*n+e,a*i+o),ns(t,(l-s+.5*r)*n+e,(a+r)*i+o,l*n+e,(a+s)*i+o,l*n+e,(a+s)*i+o),_r(t),r=.4*Bu,s=.4,l=.2,a=.5,Zr(t,l*n+e,(a+s)*i+o,!0),ns(t,(l-r)*n+e,(a+s)*i+o,(l-s)*n+e,(a+r)*i+o,(l-s)*n+e,a*i+o),ns(t,(l-s)*n+e,(a-r)*i+o,(l-r)*n+e,(a-s)*i+o,l*n+e,(a-s)*i+o),ns(t,l*n+e,(a-s)*i+o,(l-s+.5*r)*n+e,(a-r)*i+o,(l-s+.5*r)*n+e,a*i+o),ns(t,(l-s+.5*r)*n+e,(a+r)*i+o,l*n+e,(a+s)*i+o,l*n+e,(a+s)*i+o),_r(t),r=.2*Bu,s=.2,a=l=.5,Zr(t,(l-s)*n+e,a*i+o,!0),ns(t,(l-s)*n+e,(a-r)*i+o,(l-r)*n+e,(a-s)*i+o,l*n+e,(a-s)*i+o),ns(t,(l+r)*n+e,(a-s)*i+o,(l+s)*n+e,(a-r)*i+o,(l+s)*n+e,a*i+o),ns(t,(l+s)*n+e,(a+r)*i+o,(l+r)*n+e,(a+s)*i+o,l*n+e,(a+s)*i+o),ns(t,(l-r)*n+e,(a+s)*i+o,(l-s)*n+e,(a+r)*i+o,(l-s)*n+e,a*i+o),r=.4*Bu,s=.4,l=.8,a=.5,Zr(t,l*n+e,(a-s)*i+o,!0),ns(t,(l+r)*n+e,(a-s)*i+o,(l+s)*n+e,(a-r)*i+o,(l+s)*n+e,a*i+o),ns(t,(l+s)*n+e,(a+r)*i+o,(l+r)*n+e,(a+s)*i+o,l*n+e,(a+s)*i+o),ns(t,l*n+e,(a+s)*i+o,(l+s-.5*r)*n+e,(a+r)*i+o,(l+s-.5*r)*n+e,a*i+o),ns(t,(l+s-.5*r)*n+e,(a-r)*i+o,l*n+e,(a-s)*i+o,l*n+e,(a-s)*i+o),_r(t),r=.8*Bu,s=.8,l=1,a=.5,Zr(t,l*n+e,(a-s)*i+o,!0),ns(t,(l+r)*n+e,(a-s)*i+o,(l+s)*n+e,(a-r)*i+o,(l+s)*n+e,a*i+o),ns(t,(l+s)*n+e,(a+r)*i+o,(l+r)*n+e,(a+s)*i+o,l*n+e,(a+s)*i+o),ns(t,l*n+e,(a+s)*i+o,(l+s-.5*r)*n+e,(a+r)*i+o,(l+s-.5*r)*n+e,a*i+o),ns(t,(l+s-.5*r)*n+e,(a-r)*i+o,l*n+e,(a-s)*i+o,l*n+e,(a-s)*i+o),_r(t),n=t.o,Yh.q(t),n},Email:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!0),t.lineTo(1*n,0),t.lineTo(1*n,1*i),t.lineTo(0,1*i),t.lineTo(0,0),_r(t),Zr(t,0,0,!1),t.lineTo(.5*n,.6*i),t.lineTo(1*n,0),t.moveTo(0,1*i),t.lineTo(.45*n,.54*i),t.moveTo(1*n,1*i),t.lineTo(.55*n,.54*i),t.ab(!1),n=t.o,Yh.q(t),n},Ethernet:function(t,n,i){return t=Yh.s(),Zr(t,.35*n,0,!0),t.lineTo(.65*n,0),t.lineTo(.65*n,.4*i),t.lineTo(.35*n,.4*i),t.lineTo(.35*n,0),_r(t),Zr(t,.1*n,1*i,!0,!0),t.lineTo(.4*n,1*i),t.lineTo(.4*n,.6*i),t.lineTo(.1*n,.6*i),t.lineTo(.1*n,1*i),_r(t),Zr(t,.6*n,1*i,!0,!0),t.lineTo(.9*n,1*i),t.lineTo(.9*n,.6*i),t.lineTo(.6*n,.6*i),t.lineTo(.6*n,1*i),_r(t),Zr(t,0,.5*i,!1),t.lineTo(1*n,.5*i),t.moveTo(.5*n,.5*i),t.lineTo(.5*n,.4*i),t.moveTo(.75*n,.5*i),t.lineTo(.75*n,.6*i),t.moveTo(.25*n,.5*i),t.lineTo(.25*n,.6*i),t.ab(!1),n=t.o,Yh.q(t),n},Power:function(t,n,i){t=Yh.s();var e=.4*Bu,o=.4,r=Yh.K(),s=Yh.K(),l=Yh.K(),a=Yh.K();tt(.5,.5-o,.5+e,.5-o,.5+o,.5-e,.5+o,.5,.5,r,r,s,l,a);var h=Yh.xb(s.x,s.y);return Zr(t,s.x*n,s.y*i,!0),ns(t,l.x*n,l.y*i,a.x*n,a.y*i,(.5+o)*n,.5*i),ns(t,(.5+o)*n,(.5+e)*i,(.5+e)*n,(.5+o)*i,.5*n,(.5+o)*i),ns(t,(.5-e)*n,(.5+o)*i,(.5-o)*n,(.5+e)*i,(.5-o)*n,.5*i),tt(.5-o,.5,.5-o,.5-e,.5-e,.5-o,.5,.5-o,.5,l,a,s,r,r),ns(t,l.x*n,l.y*i,a.x*n,a.y*i,s.x*n,s.y*i),e=.3*Bu,o=.3,tt(.5-o,.5,.5-o,.5-e,.5-e,.5-o,.5,.5-o,.5,l,a,s,r,r),t.lineTo(s.x*n,s.y*i),ns(t,a.x*n,a.y*i,l.x*n,l.y*i,(.5-o)*n,.5*i),ns(t,(.5-o)*n,(.5+e)*i,(.5-e)*n,(.5+o)*i,.5*n,(.5+o)*i),ns(t,(.5+e)*n,(.5+o)*i,(.5+o)*n,(.5+e)*i,(.5+o)*n,.5*i),tt(.5,.5-o,.5+e,.5-o,.5+o,.5-e,.5+o,.5,.5,r,r,s,l,a),ns(t,a.x*n,a.y*i,l.x*n,l.y*i,s.x*n,s.y*i),_r(t),Zr(t,.45*n,0,!0),t.lineTo(.45*n,.5*i),t.lineTo(.55*n,.5*i),t.lineTo(.55*n,0),_r(t),Yh.v(r),Yh.v(s),Yh.v(l),Yh.v(a),Yh.v(h),n=t.o,n.A=new F(.25,.55),n.B=new F(.75,.8),Yh.q(t),n},Fallout:function(t,n,i){t=Yh.s();var e=.5*Bu;Zr(t,0*n,.5*i,!0),ns(t,0*n,(.5-e)*i,(.5-e)*n,0*i,.5*n,0*i),ns(t,(.5+e)*n,0*i,1*n,(.5-e)*i,1*n,.5*i),ns(t,1*n,(.5+e)*i,(.5+e)*n,1*i,.5*n,1*i),ns(t,(.5-e)*n,1*i,0*n,(.5+e)*i,0*n,.5*i);var o=e=0;return Zr(t,(.3+e)*n,(.8+o)*i,!0,!0),t.lineTo((.5+e)*n,(.5+o)*i),t.lineTo((.1+e)*n,(.5+o)*i),t.lineTo((.3+e)*n,(.8+o)*i),e=.4,o=0,_r(t),Zr(t,(.3+e)*n,(.8+o)*i,!0,!0),t.lineTo((.5+e)*n,(.5+o)*i),t.lineTo((.1+e)*n,(.5+o)*i),t.lineTo((.3+e)*n,(.8+o)*i),e=.2,o=-.3,_r(t),Zr(t,(.3+e)*n,(.8+o)*i,!0,!0),t.lineTo((.5+e)*n,(.5+o)*i),t.lineTo((.1+e)*n,(.5+o)*i),t.lineTo((.3+e)*n,(.8+o)*i),_r(t),n=t.o,n.Zd=Rc,Yh.q(t),n},IrritationHazard:function(t,n,i){return t=Yh.s(),Zr(t,.2*n,0*i,!0),t.lineTo(.5*n,.3*i),t.lineTo(.8*n,0*i),t.lineTo(1*n,.2*i),t.lineTo(.7*n,.5*i),t.lineTo(1*n,.8*i),t.lineTo(.8*n,1*i),t.lineTo(.5*n,.7*i),t.lineTo(.2*n,1*i),t.lineTo(0*n,.8*i),t.lineTo(.3*n,.5*i),t.lineTo(0*n,.2*i),_r(t),n=t.o,n.A=new F(.3,.3),n.B=new F(.7,.7),Yh.q(t),n},ElectricalHazard:function(t,n,i){return t=Yh.s(),Zr(t,.37*n,0*i,!0),t.lineTo(.5*n,.11*i),t.lineTo(.77*n,.04*i),t.lineTo(.33*n,.49*i),t.lineTo(1*n,.37*i),t.lineTo(.63*n,.86*i),t.lineTo(.77*n,.91*i),t.lineTo(.34*n,1*i),t.lineTo(.34*n,.78*i),t.lineTo(.44*n,.8*i),t.lineTo(.65*n,.56*i),t.lineTo(0*n,.68*i),_r(t),n=t.o,Yh.q(t),n},FireHazard:function(t,n,i){return t=Yh.s(),Zr(t,.1*n,1*i,!0),ns(t,-.25*n,.63*i,.45*n,.44*i,.29*n,0*i),ns(t,.48*n,.17*i,.54*n,.35*i,.51*n,.42*i),ns(t,.59*n,.29*i,.58*n,.28*i,.59*n,.18*i),ns(t,.8*n,.34*i,.88*n,.43*i,.75*n,.6*i),ns(t,.87*n,.48*i,.88*n,.43*i,.88*n,.31*i),ns(t,1.17*n,.76*i,.82*n,.8*i,.9*n,1*i),_r(t),n=t.o,n.A=new F(.05,.645),n.B=new F(.884,.908),Yh.q(t),n},BpmnActivityLoop:function(t,n,i){t=Yh.s();var e=4*(Math.SQRT2-1)/3*.5;return Zr(t,.65*n,1*i,!1),ns(t,(1-e+0)*n,1*i,1*n,(.5+e+0)*i,1*n,.5*i),ns(t,1*n,(.5-e+0)*i,(.5+e+0)*n,0*i,.5*n,0*i),ns(t,(.5-e+0)*n,0*i,0*n,(.5-e+0)*i,0*n,.5*i),ns(t,0*n,(.5+e+0)*i,(.5-e+0)*n,1*i,.35*n,.98*i),t.moveTo(.25*n,.8*i),t.lineTo(.35*n,1*i),t.lineTo(.1*n,1*i),n=t.o,Yh.q(t),n},BpmnActivityParallel:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!1),t.lineTo(0,1*i),t.moveTo(.5*n,0),t.lineTo(.5*n,1*i),t.moveTo(1*n,0),t.lineTo(1*n,1*i),n=t.o,Yh.q(t),n},BpmnActivitySequential:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!1),t.lineTo(1*n,0),t.moveTo(0,.5*i),t.lineTo(1*n,.5*i),t.moveTo(0,1*i),t.lineTo(1*n,1*i),n=t.o,Yh.q(t),n},BpmnActivityAdHoc:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!1),Zr(t,1*n,1*i,!1),Zr(t,0,.5*i,!1),ns(t,.2*n,.35*i,.3*n,.35*i,.5*n,.5*i),ns(t,.7*n,.65*i,.8*n,.65*i,1*n,.5*i),n=t.o,Yh.q(t),n},BpmnActivityCompensation:function(t,n,i){return t=Yh.s(),Zr(t,0,.5*i,!0),t.lineTo(.5*n,0),t.lineTo(.5*n,.5*i),t.lineTo(1*n,1*i),t.lineTo(1*n,0),t.lineTo(.5*n,.5*i),t.lineTo(.5*n,1*i),_r(t),n=t.o,Yh.q(t),n},BpmnTaskMessage:function(t,n,i){return t=Yh.s(),Zr(t,0,.2*i,!0),t.lineTo(1*n,.2*i),t.lineTo(1*n,.8*i),t.lineTo(0,.8*i),t.lineTo(0,.8*i),_r(t),Zr(t,0,.2*i,!1),t.lineTo(.5*n,.5*i),t.lineTo(1*n,.2*i),t.ab(!1),n=t.o,Yh.q(t),n},BpmnTaskScript:function(t,n,i){return t=Yh.s(),Zr(t,.7*n,1*i,!0),t.lineTo(.3*n,1*i),ns(t,.6*n,.5*i,0,.5*i,.3*n,0),t.lineTo(.7*n,0),ns(t,.4*n,.5*i,1*n,.5*i,.7*n,1*i),_r(t),Zr(t,.45*n,.73*i,!1),t.lineTo(.7*n,.73*i),t.moveTo(.38*n,.5*i),t.lineTo(.63*n,.5*i),t.moveTo(.31*n,.27*i),t.lineTo(.56*n,.27*i),t.ab(!1),n=t.o,Yh.q(t),n},BpmnTaskUser:function(t,n,i){t=Yh.s(),Zr(t,0,0,!1),Zr(t,.335*n,(1-.555)*i,!0),t.lineTo(.335*n,.595*i),t.lineTo(.665*n,.595*i),t.lineTo(.665*n,(1-.555)*i),ns(t,.88*n,.46*i,.98*n,.54*i,1*n,.68*i),t.lineTo(1*n,1*i),t.lineTo(0,1*i),t.lineTo(0,.68*i),ns(t,.02*n,.54*i,.12*n,.46*i,.335*n,(1-.555)*i),t.lineTo(.365*n,.405*i);var e=.5-.285,o=Math.PI/4,r=4*(1-Math.cos(o))/(3*Math.sin(o)),o=r*e,r=r*e;return ns(t,(.5-(o+e)/2)*n,(e+(e+r)/2)*i,(.5-e)*n,(e+r)*i,(.5-e)*n,e*i),ns(t,(.5-e)*n,(e-r)*i,(.5-o)*n,(e-e)*i,.5*n,(e-e)*i),ns(t,(.5+o)*n,(e-e)*i,(.5+e)*n,(e-r)*i,(.5+e)*n,e*i),ns(t,(.5+e)*n,(e+r)*i,(.5+(o+e)/2)*n,(e+(e+r)/2)*i,.635*n,.405*i),t.lineTo(.635*n,.405*i),t.lineTo(.665*n,(1-.555)*i),t.lineTo(.665*n,.595*i),t.lineTo(.335*n,.595*i),Zr(t,.2*n,1*i,!1),t.lineTo(.2*n,.8*i),Zr(t,.8*n,1*i,!1),t.lineTo(.8*n,.8*i),n=t.o,Yh.q(t),n},BpmnEventConditional:function(t,n,i){return t=Yh.s(),Zr(t,.1*n,0,!0),t.lineTo(.9*n,0),t.lineTo(.9*n,1*i),t.lineTo(.1*n,1*i),_r(t),Zr(t,.2*n,.2*i,!1),t.lineTo(.8*n,.2*i),t.moveTo(.2*n,.4*i),t.lineTo(.8*n,.4*i),t.moveTo(.2*n,.6*i),t.lineTo(.8*n,.6*i),t.moveTo(.2*n,.8*i),t.lineTo(.8*n,.8*i),t.ab(!1),n=t.o,Yh.q(t),n},BpmnEventError:function(t,n,i){return t=Yh.s(),Zr(t,0,1*i,!0),t.lineTo(.33*n,0),t.lineTo(.66*n,.5*i),t.lineTo(1*n,0),t.lineTo(.66*n,1*i),t.lineTo(.33*n,.5*i),_r(t),n=t.o,Yh.q(t),n},BpmnEventEscalation:function(t,n,i){return t=Yh.s(),Zr(t,0,0,!1),Zr(t,1*n,1*i,!1),Zr(t,.1*n,1*i,!0),t.lineTo(.5*n,0),t.lineTo(.9*n,1*i),t.lineTo(.5*n,.5*i),_r(t),n=t.o,Yh.q(t),n},BpmnEventTimer:function(t,n,i){t=Yh.s();var e=.5*Bu;return Zr(t,1*n,.5*i,!0),ns(t,1*n,(.5+e)*i,(.5+e)*n,1*i,.5*n,1*i),ns(t,(.5-e)*n,1*i,0,(.5+e)*i,0,.5*i),ns(t,0,(.5-e)*i,(.5-e)*n,0,.5*n,0),ns(t,(.5+e)*n,0,1*n,(.5-e)*i,1*n,.5*i),Zr(t,.5*n,0,!1),t.lineTo(.5*n,.15*i),t.moveTo(.5*n,1*i),t.lineTo(.5*n,.85*i),t.moveTo(0,.5*i),t.lineTo(.15*n,.5*i),t.moveTo(1*n,.5*i),t.lineTo(.85*n,.5*i),t.moveTo(.5*n,.5*i),t.lineTo(.58*n,.1*i),t.moveTo(.5*n,.5*i),t.lineTo(.78*n,.54*i),t.ab(!1),n=t.o,n.Zd=Rc,Yh.q(t),n}};for(Cd in Nd)Nd[Cd.toLowerCase()]=Cd;var jd={"":"",Standard:"F1 m 0,0 l 8,4 -8,4 2,-4 z",Backward:"F1 m 8,0 l -2,4 2,4 -8,-4 z",Triangle:"F1 m 0,0 l 8,4.62 -8,4.62 z",BackwardTriangle:"F1 m 8,4 l 0,4 -8,-4 8,-4 0,4 z",Boomerang:"F1 m 0,0 l 8,4 -8,4 4,-4 -4,-4 z",BackwardBoomerang:"F1 m 8,0 l -8,4 8,4 -4,-4 4,-4 z",SidewaysV:"m 0,0 l 8,4 -8,4 0,-1 6,-3 -6,-3 0,-1 z",BackwardV:"m 8,0 l -8,4 8,4 0,-1 -6,-3 6,-3 0,-1 z",OpenTriangle:"m 0,0 l 8,4 -8,4",BackwardOpenTriangle:"m 8,0 l -8,4 8,4",OpenTriangleLine:"m 0,0 l 8,4 -8,4 m 8.5,0 l 0,-8",BackwardOpenTriangleLine:"m 8,0 l  -8,4 8,4 m -8.5,0 l 0,-8",OpenTriangleTop:"m 0,0 l 8,4 m 0,4",BackwardOpenTriangleTop:"m 8,0 l -8,4 m 0,4",OpenTriangleBottom:"m 0,8 l 8,-4",BackwardOpenTriangleBottom:"m 0,4 l 8,4",HalfTriangleTop:"F1 m 0,0 l 0,4 8,0 z m 0,8",BackwardHalfTriangleTop:"F1 m 8,0 l 0,4 -8,0 z m 0,8",HalfTriangleBottom:"F1 m 0,4 l 0,4 8,-4 z",BackwardHalfTriangleBottom:"F1 m 8,4 l 0,4 -8,-4 z",ForwardSemiCircle:"m 4,0 b 270 180 0 4 4",BackwardSemiCircle:"m 4,8 b 90 180 0 -4 4",Feather:"m 0,0 l 3,4 -3,4",BackwardFeather:"m 3,0 l -3,4 3,4",DoubleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardDoubleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4",TripleFeathers:"m 0,0 l 3,4 -3,4 m 3,-8 l 3,4 -3,4 m 3,-8 l 3,4 -3,4",BackwardTripleFeathers:"m 3,0 l -3,4 3,4 m 3,-8 l -3,4 3,4 m 3,-8 l -3,4 3,4",ForwardSlash:"m 0,8 l 5,-8",BackSlash:"m 0,0 l 5,8",DoubleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8",DoubleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8",TripleForwardSlash:"m 0,8 l 4,-8 m -2,8 l 4,-8 m -2,8 l 4,-8",TripleBackSlash:"m 0,0 l 4,8 m -2,-8 l 4,8 m -2,-8 l 4,8",Fork:"m 0,4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4",LineFork:"m 0,0 l 0,8 m 0,-4 l 8,0 m -8,0 l 8,-4 m -8,4 l 8,4",BackwardLineFork:"m 8,4 l -8,0 m 8,0 l -8,-4 m 8,4 l -8,4 m 8,-8 l 0,8",CircleFork:"F1 m 6,4 b 0 360 -3 0 3 z m 0,0 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 6,0 b 0 360 -3 0 3",CircleLineFork:"F1 m 6,4 b 0 360 -3 0 3 z m 1,-4 l 0,8 m 0,-4 l 6,0 m -6,0 l 6,-4 m -6,4 l 6,4",BackwardCircleLineFork:"F1 m 0,4 l 6,0 m -6,-4 l 6,4 m -6,4 l 6,-4 m 0,-4 l 0,8 m 7,-4 b 0 360 -3 0 3",Circle:"F1 m 8,4 b 0 360 -4 0 4 z",Block:"F1 m 0,0 l 0,8 8,0 0,-8 z",StretchedDiamond:"F1 m 0,3 l 5,-3 5,3 -5,3 -5,-3 z",Diamond:"F1 m 0,4 l 4,-4 4,4 -4,4 -4,-4 z",Chevron:"F1 m 0,0 l 5,0 3,4 -3,4 -5,0 3,-4 -3,-4 z",StretchedChevron:"F1 m 0,0 l 8,0 3,4 -3,4 -8,0 3,-4 -3,-4 z",NormalArrow:"F1 m 0,2 l 4,0 0,-2 4,4 -4,4 0,-2 -4,0 z",X:"m 0,0 l 8,8 m 0,-8 l -8,8",TailedNormalArrow:"F1 m 0,0 l 2,0 1,2 3,0 0,-2 2,4 -2,4 0,-2 -3,0 -1,2 -2,0 1,-4 -1,-4 z",DoubleTriangle:"F1 m 0,0 l 4,4 -4,4 0,-8 z  m 4,0 l 4,4 -4,4 0,-8 z",BigEndArrow:"F1 m 0,0 l 5,2 0,-2 3,4 -3,4 0,-2 -5,2 0,-8 z",ConcaveTailArrow:"F1 m 0,2 h 4 v -2 l 4,4 -4,4 v -2 h -4 l 2,-2 -2,-2 z",RoundedTriangle:"F1 m 0,1 a 1,1 0 0 1 1,-1 l 7,3 a 0.5,1 0 0 1 0,2 l -7,3 a 1,1 0 0 1 -1,-1 l 0,-6 z",SimpleArrow:"F1 m 1,2 l -1,-2 2,0 1,2 -1,2 -2,0 1,-2 5,0 0,-2 2,2 -2,2 0,-2 z",AccelerationArrow:"F1 m 0,0 l 0,8 0.2,0 0,-8 -0.2,0 z m 2,0 l 0,8 1,0 0,-8 -1,0 z m 3,0 l 2,0 2,4 -2,4 -2,0 0,-8 z",BoxArrow:"F1 m 0,0 l 4,0 0,2 2,0 0,-2 2,4 -2,4 0,-2 -2,0 0,2 -4,0 0,-8 z",TriangleLine:"F1 m 8,4 l -8,-4 0,8 8,-4 z m 0.5,4 l 0,-8",CircleEndedArrow:"F1 m 10,4 l -2,-3 0,2 -2,0 0,2 2,0 0,2 2,-3 z m -4,0 b 0 360 -3 0 3 z",DynamicWidthArrow:"F1 m 0,3 l 2,0 2,-1 2,-2 2,4 -2,4 -2,-2 -2,-1 -2,0 0,-2 z",EquilibriumArrow:"m 0,3 l 8,0 -3,-3 m 3,5 l -8,0 3,3",FastForward:"F1 m 0,0 l 3.5,4 0,-4 3.5,4 0,-4 1,0 0,8 -1,0 0,-4 -3.5,4 0,-4 -3.5,4 0,-8 z",Kite:"F1 m 0,4 l 2,-4 6,4 -6,4 -2,-4 z",HalfArrowTop:"F1 m 0,0 l 4,4 4,0 -8,-4 z m 0,8",HalfArrowBottom:"F1 m 0,8 l 4,-4 4,0 -8,4 z",OpposingDirectionDoubleArrow:"F1 m 0,4 l 2,-4 0,2 4,0 0,-2 2,4 -2,4 0,-2 -4,0 0,2 -2,-4 z",PartialDoubleTriangle:"F1 m 0,0 4,3 0,-3 4,4 -4,4 0,-3 -4,3 0,-8 z",LineCircle:"F1 m 0,0 l 0,8 m 7 -4 b 0 360 -3 0 3 z",DoubleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",TripleLineCircle:"F1 m 0,0 l 0,8 m 2,-8 l 0,8 m 2,-8 l 0,8 m 7 -4 b 0 360 -3 0 3 z",CircleLine:"F1 m 6 4 b 0 360 -3 0 3 z m 1,-4 l 0,8",DiamondCircle:"F1 m 8,4 l -4,4 -4,-4 4,-4 4,4 m 8,0 b 0 360 -4 0 4 z",PlusCircle:"F1 m 8,4 b 0 360 -4 0 4 l -8 0 z m -4 -4 l 0 8",OpenRightTriangleTop:"m 8,0 l 0,4 -8,0 m 0,4",OpenRightTriangleBottom:"m 8,8 l 0,-4 -8,0",Line:"m 0,0 l 0,8",DoubleLine:"m 0,0 l 0,8 m 2,0 l 0,-8",TripleLine:"m 0,0 l 0,8 m 2,0 l 0,-8 m 2,0 l 0,8",PentagonArrow:"F1 m 8,4 l -4,-4 -4,0 0,8 4,0 4,-4 z"};Yh.Ka(as,tr),Yh.ga("Part",as),as.prototype.cloneProtected=function(t){tr.prototype.cloneProtected.call(this,t),t.N=-4097&this.N|49152,t.vi=this.vi,t.ml=this.ml,t.Sr=this.Sr,t.Ss=this.Ss,t.Gs=this.Gs,t.Js=this.Js,t.Us=this.Us,t.Ts=this.Ts,t.Fr=this.Fr,t.ti=null,t.Is=this.Is,t.Hs=this.Hs.S(),t.Ks=this.Ks,t.Ed=this.Ed,t.Uq=this.Uq,t.Ri.assign(this.Ri),t.Xr=this.Xr,t.Yr=this.Yr.S(),t.fs=this.fs.S(),t.Zr=this.Zr.S(),t.nr=this.nr,t.Tr=this.Tr,t.an=this.an.S(),t.$m=this.$m,t.Cg=this.Cg,t.st=this.st},as.prototype.li=function(t){tr.prototype.li.call(this,t),t.Ek(),t.Zm=null,t.jp=null,t.kp=null,t.pl=null,t.Nm=null},as.prototype.toString=function(){var t=Yh.jf(Object.getPrototypeOf(this))+"#"+Yh.Kd(this);return null!==this.data&&(t+="("+Mf(this.data)+")"),t},as.LayoutNone=0;var Ld;as.LayoutAdded=Ld=1;var Dd;as.LayoutRemoved=Dd=2,as.LayoutShown=4,as.LayoutHidden=8,as.LayoutNodeSized=16;var Ad;as.LayoutGroupLayout=Ad=32,as.LayoutNodeReplaced=64;var Fd;as.LayoutStandard=Fd=Ld|Dd|28|Ad|64,as.LayoutAll=16777215,as.prototype.Un=function(t,n,i,e,o,r,s){var l=this.g;null!==l&&(t===mf&&"elements"===n?o instanceof tr?hr(o,function(t){Ne(l,t),Le(l,t)}):o instanceof Kr&&De(l,o):t===bf&&"elements"===n&&(o instanceof tr?hr(o,function(t){je(l,t),Ae(l,t)}):o instanceof Kr&&Fe(l,o)),l.Xc(t,n,i,e,o,r,s))},as.prototype.updateTargetBindings=as.prototype.Hb=function(t){if(tr.prototype.Hb.call(this,t),null!==this.data){t=this.xa.n;for(var n=t.length,i=0;i<n;i++){var e=t[i];e instanceof tr&&hr(e,function(t){null!==t.data&&t.Hb()})}}},as.prototype.updateRelationshipsFromData=function(){var t=this.data;if(null!==t){var n=this.g;if(null!==n){var i=n.ba;i instanceof Zt&&(t=i.zn(t),null===(n=n.SH(t))||n instanceof Ll)&&(this.Pa=n)}}},Yh.u(as,{Ow:"adornments"},function(){return null===this.ti?Xh:this.ti.uF}),as.prototype.findAdornment=as.prototype.Rp=function(t){var n=this.ti;return null===n?null:n.ja(t)},as.prototype.addAdornment=as.prototype.Bl=function(t,n){if(null!==n){var i=null,e=this.ti;if(null!==e&&(i=e.ja(t)),i!==n){if(null!==i){var o=i.g;null!==o&&o.remove(i)}null===e&&(this.ti=e=new b("string",Ds)),n.vi!==t&&(n.td=t),e.add(t,n),i=this.g,null!==i&&(i.add(n),n.data=this.data)}}},as.prototype.removeAdornment=as.prototype.Bj=function(t){var n=this.ti;if(null!==n){var i=n.ja(t);if(null!==i){var e=i.g;null!==e&&e.remove(i)}n.remove(t),0===n.count&&(this.ti=null)}},as.prototype.clearAdornments=as.prototype.Bt=function(){var t=this.ti;if(null!==t){for(var n=Yh.lb(),t=t.i;t.next();)n.push(t.key);for(var t=n.length,i=0;i<t;i++)this.Bj(n[i]);Yh.wa(n)}},as.prototype.updateAdornments=function(){var t=this.g;if(null!==t){t:{if(this.gb&&this.yJ){var n=this.Gu;if(!(null!==n&&this.W.I()&&this.isVisible()&&n.wj()&&n.W.I()))break t;var i=this.Rp("Selection");if(null===i){if(i=this.zJ,null===i&&(i=this instanceof Js?t.KI:this instanceof Ll?t.fI:t.cJ),!(i instanceof Ds))break t;br(i),i=i.copy(),null!==i&&(i.rb=n)}if(null!==i){var e=i.placeholder;if(null!==e){var o=n.oj(),r=0;n instanceof Cr&&(r=n.kb);var s=Yh.jm();s.m((n.Ia.width+r)*o,(n.Ia.height+r)*o),e.Ba=s,Yh.Ak(s)}i.angle=n.Tl(),i.type!==id&&(e=Yh.K(),i.location=n.Xa(eu,e),Yh.v(e)),this.Bl("Selection",i);break t}}this.Bj("Selection")}for(hs(this,t),t=this.Ow;t.next();)n=t.value,n.Hb(),n.H()}},Yh.u(as,{layer:"layer"},function(){return this.Uv}),Yh.u(as,{g:"diagram"},function(){var t=this.Uv;return null!==t?t.g:null}),Yh.defineProperty(as,{Yf:"layerName"},function(){return this.ml},function(t){var n=this.ml;if(n!==t){Yh.j(t,"string",as,"layerName");var i=this.g;if((null===i||null!==i.Kt(t)&&!i.Eq)&&(this.ml=t,null!==i&&i.rc(),this.h("layerName",n,t),null!==(n=this.layer)&&n.name!==t&&null!==(i=n.g)&&null!==(t=i.Kt(t))&&t!==n)){var e=n.kf(-1,this,!0);if(0<=e&&i.Xc(bf,"parts",n,this,null,e,!0),n.visible!==t.visible&&this.vd(t.visible),e=t.Yp(99999999,this,!0),0<=e&&i.Xc(mf,"parts",t,null,this,!0,e),null!==(e=this.Gx)){var o=i.Ua;i.Ua=!0,e(this,n,t),i.Ua=o}}}}),Yh.defineProperty(as,{Gx:"layerChanged"},function(){return this.Sr},function(t){var n=this.Sr;n!==t&&(null!==t&&Yh.j(t,"function",as,"layerChanged"),this.Sr=t,this.h("layerChanged",n,t))}),Yh.defineProperty(as,{fo:"zOrder"},function(){return this.st},function(t){var n=this.st;if(n!==t){Yh.j(t,"number",as,"zOrder"),this.st=t;var i=this.layer;null!==i&&qi(i,-1,this),this.h("zOrder",n,t),t=this.g,null!==t&&t.na()}}),as.prototype.invalidateAdornments=as.prototype.ce=function(){var t=this.g;null!==t&&(ye(t),0!=(16384&this.N)!=!0&&(this.N|=16384,t.Le()))},Yh.u(as,{Zf:"locationObject"},function(){if(null===this.pl){var t=this.EA;""!==t?(t=this.ud(t),this.pl=null!==t?t:this):this.pl=this instanceof Ds&&this.type!==id&&null!==this.placeholder?this.placeholder:this}return this.pl.visible?this.pl:this}),Yh.defineProperty(as,{WI:"minLocation"},function(){return this.fs},function(t){var n=this.fs;n.L(t)||(this.fs=t=t.S(),this.h("minLocation",n,t))}),Yh.defineProperty(as,{QI:"maxLocation"},function(){return this.Zr},function(t){var n=this.Zr;n.L(t)||(this.Zr=t=t.S(),this.h("maxLocation",n,t))}),Yh.defineProperty(as,{EA:"locationObjectName"},function(){return this.Xr},function(t){var n=this.Xr;n!==t&&(this.Xr=t,this.pl=null,this.H(),this.h("locationObjectName",n,t))}),Yh.defineProperty(as,{Bf:"locationSpot"},function(){return this.Yr},function(t){var n=this.Yr;n.L(t)||(this.Yr=t=t.S(),this.H(),this.h("locationSpot",n,t))}),as.prototype.move=function(t){this.position=t},as.prototype.moveTo=as.prototype.moveTo=function(t,n){var i=Yh.xb(t,n);this.move(i),Yh.v(i)},as.prototype.isVisible=function(){if(!this.visible)return!1;var t=this.layer;return!(null!==t&&!t.visible)&&(!(null===(t=this.g)||(t=t.Oa,!t.lf||null===(t=t.Pm.ja(this))||!t.Xx))||!!(null===(t=this.Pa)||t.we&&t.isVisible()))},as.prototype.vd=function(t){var n=this.g;t?(this.J(4),this.ce(),null!==n&&n.tg.add(this)):(this.J(8),this.Bt()),this.Ek(),null!==n&&(n.rc(),n.na())},as.prototype.findObject=as.prototype.ud=function(t){if(this.name===t)return this;var n=this.Nm;if(null===n&&(this.Nm=n=new o),void 0!==n[t])return n[t];for(var i=this.xa.n,e=i.length,r=0;r<e;r++){var s=i[r];if(s.name===t)return n[t]=s;if(s instanceof tr)if(null===s.$j&&null===s.vg){if(null!==(s=s.ud(t)))return n[t]=s}else if(xr(s)&&null!==(s=s.xa.first())&&s.name===t)return n[t]=s}return n[t]=null},as.prototype.ensureBounds=as.prototype.$e=function(){Do(this,1/0,1/0),this.ic()},as.prototype.ic=function(){if(this.Ji(),!1===Wo(this))cs(this);else{var t=this.nc,n=Yh.Ff();n.assign(t),t.Ra();var i=Ts(this);this.ij(0,0,this.qd.width,this.qd.height);var e=this.position;vs(this,e,this.location),t.x=e.x,t.y=e.y,t.freeze(),this.Ox(n,t),Xo(this,!1),n.L(t)?this.Df(i):!this.de()||W(n.width,t.width)&&W(n.height,t.height)||0<=this.YC&&this.J(16),Yh.Db(n),Ms(this,!1)}},as.prototype.Ox=function(t,n){var i=this.g;if(null!==i){var e=!1;if(!1===i.Vj&&t.I()){var o=i.qe,r=i.padding,s=o.x+r.left,l=o.y+r.top,a=o.width-2*r.right,o=o.height-2*r.bottom;t.x>s&&t.y>l&&t.right<a&&t.bottom<o&&n.x>s&&n.y>l&&n.right<a&&n.bottom<o&&(e=!0)}0!=(65536&this.N)!=!0&&t.L(n)||bs(this,e,i),i.na(),S(t,n)||(this instanceof As&&!i.oa.hb&&this.Vf(),this.Ek())}},Yh.defineProperty(as,{location:"location"},function(){return this.Ri},function(t){var n=t.x,i=t.y,e=this.Ri,o=e.x,r=e.y;(o===n||isNaN(o)&&isNaN(n))&&(r===i||isNaN(r)&&isNaN(i))||(t=t.S(),n=t,this instanceof Js?n=!1:(this.Ri=n,this.N|=2097152,!1===Wo(this)&&(fs(this),i=this.ib,i.I()&&(o=i.copy(),i.m(i.x+(n.x-e.x),i.y+(n.y-e.y)),ys(this,this.g,i,o),this.h("position",o,i))),n=!0),n&&this.h("location",e,t))}),Uh=as.prototype,Uh.hB=function(t,n){if(this instanceof Js||!t.I())return!1;var i=this.g;if(null!==i&&(ys(this,i,t,n),!0===i.oa.hb))return!0;if(this.ib=t,this.N&=-2097153,i=this.Ri,i.I()){var e=i.copy();i.m(i.x+(t.x-n.x),i.y+(t.y-n.y)),this.h("location",e,i)}return!1===ks(this)&&!1===Wo(this)&&(fs(this),cs(this)),!0},Uh.ky=function(t,n){var i=this.Ri,e=this.ib;ks(this)||Wo(this)?i.m(NaN,NaN):i.m(i.x+t-e.x,i.y+n-e.y),e.m(t,n),fs(this)},Uh.iB=function(){this.N&=-2097153,fs(this)},Uh.$l=function(){return!0},Uh.de=function(){return!0},Uh.sj=function(){return!0},Yh.defineProperty(as,{td:"category"},function(){return this.vi},function(t){var n=this.vi;if(n!==t){Yh.j(t,"string",as,"category");var i=this.g,e=this.data,o=null;if(null!==i&&null!==e&&!(this instanceof Ds)){var r=i.ba.oa;r.isEnabled&&!r.hb&&(o=this.clone(),o.xa.Hc(this.xa))}this.vi=t,this.h("category",n,t),null===i||null===e||this instanceof Ds?null!==(o=this.Pf)&&(t=o.ti,null!==t&&t.remove(n),o.Bl(this.td,this)):(r=i.ba,r.oa.hb||(this instanceof Js?(r instanceof Zt?r.fG(e,t):r instanceof en&&r.BJ(e,t),null!==(i=Ge(i,t))&&(br(i),null!==(i=i.copy())&&ws(this,i,n,t))):(null!==r&&r.hy(e,t),null!==(i=qe(i,e,t))&&(br(i),null===(i=i.copy())||i instanceof Js||(i.location=this.location,ws(this,i,n,t)))),null!==o&&(n=this.clone(),n.xa.Hc(this.xa),this.h("self",o,n))))}}),Yh.defineProperty(as,{self:"self"},function(){return this},function(t){ws(this,t,this.td,t.td)});var Od=!1;as.prototype.canCopy=function(){if(!this.DH)return!1;var t=this.layer;return null===t||!!t.tk&&(null===(t=t.g)||!!t.tk)},as.prototype.canDelete=function(){if(!this.IH)return!1;var t=this.layer;return null===t||!!t.gn&&(null===(t=t.g)||!!t.gn)},as.prototype.canEdit=function(){if(!this.KJ)return!1;var t=this.layer;return null===t||!!t.Sw&&(null===(t=t.g)||!!t.Sw)},as.prototype.canGroup=function(){if(!this.gI)return!1;var t=this.layer;return null===t||!!t.Pw&&(null===(t=t.g)||!!t.Pw)},as.prototype.canMove=function(){if(!this.aJ)return!1;var t=this.layer;return null===t||!!t.El&&(null===(t=t.g)||!!t.El)},as.prototype.canReshape=function(){if(!this.nJ)return!1;var t=this.layer;return null===t||!!t.Qw&&(null===(t=t.g)||!!t.Qw)},as.prototype.canResize=function(){if(!this.oJ)return!1;var t=this.layer;return null===t||!!t.At&&(null===(t=t.g)||!!t.At)},as.prototype.canRotate=function(){if(!this.rJ)return!1;var t=this.layer;return null===t||!!t.Rw&&(null===(t=t.g)||!!t.Rw)},as.prototype.canSelect=function(){if(!this.dm)return!1;var t=this.layer;return null===t||!!t.vf&&(null===(t=t.g)||!!t.vf)},Yh.defineProperty(as,{DH:"copyable"},function(){return 0!=(1&this.N)},function(t){var n=0!=(1&this.N);n!==t&&(this.N^=1,this.h("copyable",n,t))}),Yh.defineProperty(as,{IH:"deletable"},function(){return 0!=(2&this.N)},function(t){var n=0!=(2&this.N);n!==t&&(this.N^=2,this.h("deletable",n,t))}),Yh.defineProperty(as,{KJ:"textEditable"},function(){return 0!=(4&this.N)},function(t){var n=0!=(4&this.N);n!==t&&(this.N^=4,this.h("textEditable",n,t),this.ce())}),Yh.defineProperty(as,{gI:"groupable"},function(){return 0!=(8&this.N)},function(t){var n=0!=(8&this.N);n!==t&&(this.N^=8,this.h("groupable",n,t))}),Yh.defineProperty(as,{aJ:"movable"},function(){return 0!=(16&this.N)},function(t){var n=0!=(16&this.N);n!==t&&(this.N^=16,this.h("movable",n,t))}),Yh.defineProperty(as,{yJ:"selectionAdorned"},function(){return 0!=(32&this.N)},function(t){var n=0!=(32&this.N);n!==t&&(this.N^=32,this.h("selectionAdorned",n,t),this.ce())}),Yh.defineProperty(as,{AA:"isInDocumentBounds"},function(){return 0!=(64&this.N)},function(t){var n=0!=(64&this.N);if(n!==t){this.N^=64;var i=this.g;null!==i&&i.rc(),this.h("isInDocumentBounds",n,t)}}),Yh.defineProperty(as,{pF:"isLayoutPositioned"},function(){return 0!=(128&this.N)},function(t){var n=0!=(128&this.N);n!==t&&(this.N^=128,this.h("isLayoutPositioned",n,t),this.J(t?4:8))}),Yh.defineProperty(as,{dm:"selectable"},function(){return 0!=(256&this.N)},function(t){var n=0!=(256&this.N);n!==t&&(this.N^=256,this.h("selectable",n,t),this.ce())}),Yh.defineProperty(as,{nJ:"reshapable"},function(){return 0!=(512&this.N)},function(t){var n=0!=(512&this.N);n!==t&&(this.N^=512,this.h("reshapable",n,t),this.ce())}),Yh.defineProperty(as,{oJ:"resizable"},function(){return 0!=(1024&this.N)},function(t){var n=0!=(1024&this.N);n!==t&&(this.N^=1024,this.h("resizable",n,t),this.ce())}),Yh.defineProperty(as,{rJ:"rotatable"},function(){return 0!=(2048&this.N)},function(t){var n=0!=(2048&this.N);n!==t&&(this.N^=2048,this.h("rotatable",n,t),this.ce())}),Yh.defineProperty(as,{gb:"isSelected"},function(){return 0!=(4096&this.N)},function(t){var n=0!=(4096&this.N);if(n!==t){var i=this.g;if(!t||this.canSelect()&&!(null!==i&&i.selection.count>=i.RI)){this.N^=4096;var e=!1;if(null!==i){e=i.wb,i.wb=!0;var o=i.selection;o.Ra(),t?o.add(this):o.remove(this),o.freeze()}this.h("isSelected",n,t),this.ce(),t=this.AJ,null!==t&&t(this),null!==i&&(i.Le(),i.wb=e)}}}),Yh.defineProperty(as,{Ng:"isHighlighted"},function(){return 0!=(524288&this.N)},function(t){var n=0!=(524288&this.N);if(n!==t){this.N^=524288;var i=this.g;null!==i&&(i=i.Wl,i.Ra(),t?i.add(this):i.remove(this),i.freeze()),this.h("isHighlighted",n,t),this.na(),t=this.jI,null!==t&&t(this)}}),Yh.defineProperty(as,{am:"isShadowed"},function(){return 0!=(8192&this.N)},function(t){var n=0!=(8192&this.N);n!==t&&(this.N^=8192,this.h("isShadowed",n,t),this.na())}),as.prototype.Df=function(t){this.N=t?131072|this.N:-131073&this.N},Yh.defineProperty(as,{gF:"isAnimated"},function(){return 0!=(262144&this.N)},function(t){var n=0!=(262144&this.N);n!==t&&(this.N^=262144,this.h("isAnimated",n,t))}),Yh.defineProperty(as,{jI:"highlightedChanged"},function(){return this.Fr},function(t){var n=this.Fr;n!==t&&(null!==t&&Yh.j(t,"function",as,"highlightedChanged"),this.Fr=t,this.h("highlightedChanged",n,t))}),Yh.defineProperty(as,{cB:"selectionObjectName"},function(){return this.Us},function(t){var n=this.Us;n!==t&&(this.Us=t,this.Zm=null,this.h("selectionObjectName",n,t))}),Yh.defineProperty(as,{zJ:"selectionAdornmentTemplate"},function(){return this.Ss},function(t){var n=this.Ss;n!==t&&(this instanceof Js&&(t.type=id),this.Ss=t,this.h("selectionAdornmentTemplate",n,t))}),Yh.u(as,{Gu:"selectionObject"},function(){if(null===this.Zm){var t=this.cB;null!==t&&""!==t?(t=this.ud(t),this.Zm=null!==t?t:this):this instanceof Js?(t=this.path,this.Zm=null!==t?t:this):this.Zm=this}return this.Zm}),Yh.defineProperty(as,{AJ:"selectionChanged"},function(){return this.Ts},function(t){var n=this.Ts;n!==t&&(null!==t&&Yh.j(t,"function",as,"selectionChanged"),this.Ts=t,this.h("selectionChanged",n,t))}),Yh.defineProperty(as,{VF:"resizeAdornmentTemplate"},function(){return this.Gs},function(t){var n=this.Gs;n!==t&&(this.Gs=t,this.h("resizeAdornmentTemplate",n,t))}),Yh.defineProperty(as,{XF:"resizeObjectName"},function(){return this.Is},function(t){var n=this.Is;n!==t&&(this.Is=t,this.jp=null,this.h("resizeObjectName",n,t))}),Yh.u(as,{WF:"resizeObject"},function(){if(null===this.jp){var t=this.XF;null!==t&&""!==t?(t=this.ud(t),this.jp=null!==t?t:this):this.jp=this}return this.jp}),Yh.defineProperty(as,{pJ:"resizeCellSize"},function(){return this.Hs},function(t){var n=this.Hs;n.L(t)||(this.Hs=t=t.S(),this.h("resizeCellSize",n,t))}),Yh.defineProperty(as,{sJ:"rotateAdornmentTemplate"},function(){return this.Js},function(t){var n=this.Js;n!==t&&(this.Js=t,this.h("rotateAdornmentTemplate",n,t))}),Yh.defineProperty(as,{tJ:"rotateObjectName"},function(){return this.Ks},function(t){var n=this.Ks;n!==t&&(this.Ks=t,this.kp=null,this.h("rotateObjectName",n,t))}),Yh.u(as,{ZF:"rotateObject"},function(){if(null===this.kp){var t=this.tJ;null!==t&&""!==t?(t=this.ud(t),this.kp=null!==t?t:this):this.kp=this}return this.kp}),Yh.defineProperty(as,{text:"text"},function(){return this.Ed},function(t){var n=this.Ed;n!==t&&(this.Ed=t,this.h("text",n,t))}),Yh.defineProperty(as,{Pa:"containingGroup"},function(){return this.Zk},function(t){if(this.de()){var n=this.Zk;if(n!==t){null===t||this!==t&&!t.ni(this)||(this===t&&Yh.k("Cannot make a Group a member of itself: "+this.toString()),Yh.k("Cannot make a Group indirectly contain itself: "+this.toString()+" already contains "+t.toString())),this.J(Dd);var i=this.g;if(null!==n?Al(n,this):this instanceof Ll&&null!==i&&i.yl.remove(this),this.Zk=t,null!==t?Dl(t,this):this instanceof Ll&&null!==i&&i.yl.add(this),this.J(Ld),null!==i){var e=this.data,o=i.ba;null!==e&&o instanceof Zt&&o.fB(e,o.ub(null!==t?t.data:null))}if(e=this.sE,null!==e&&(o=!0,null!==i&&(o=i.Ua,i.Ua=!0),e(this,n,t),null!==i&&(i.Ua=o)),this instanceof Ll)for(i=new d(as),un(i,this,!0,0,!0),i=i.i;i.next();)if((e=i.value)instanceof As)for(e=e.fe;e.next();)Ys(e.value);if(this instanceof As)for(e=this.fe;e.next();)Ys(e.value);this.h("containingGroup",n,t),null!==t&&null!==(n=t.layer)&&qi(n,-1,t)}}else Yh.k("cannot set the Part.containingGroup of a Link or Adornment")}),Uh=as.prototype,Uh.Ek=function(){var t=this.Pa;null!==t&&(t.H(),null!==t.Kb&&t.Kb.H(),t.Vf())},Uh.na=function(){var t=this.g;null!==t&&!Wo(this)&&!ks(this)&&this.isVisible()&&this.nc.I()&&t.na(ps(this,this.nc))},Uh.H=function(){tr.prototype.H.call(this);var t=this.g;null!==t&&(t.tg.add(this),this instanceof As&&null!==this.Mc&&zo(this.Mc),t.Le(!0))},Uh.Yt=function(t){t||null!==(t=this.Zk)&&Dl(t,this)},Uh.Zt=function(t){t||null!==(t=this.Zk)&&Al(t,this)},Uh.vn=function(){var t=this.data;if(null!==t){var n=this.g;null!==n&&null!==(n=n.ba)&&n.$x(t)}},Yh.defineProperty(as,{sE:"containingGroupChanged"},function(){return this.Uq},function(t){var n=this.Uq;n!==t&&(null!==t&&Yh.j(t,"function",as,"containingGroupChanged"),this.Uq=t,this.h("containingGroupChanged",n,t))}),as.prototype.findSubGraphLevel=function(){return Cs(this,this)},as.prototype.findTopLevelPart=function(){return Ns(this,this)},Yh.u(as,{aq:"isTopLevel"},function(){return!(null!==this.Pa||this instanceof As&&this.mf)}),as.prototype.isMemberOf=as.prototype.ni=function(t){return t instanceof Ll&&js(this,this,t)},as.prototype.findCommonContainingGroup=as.prototype.QH=function(t){if(null===t)return null;if(this===t)return this.Pa;for(var n=this;null!==n;)n instanceof Ll&&Ss(n,!0),n=n.Pa;for(var i=null,n=t;null!==n;){if(0!=(1048576&n.N)){i=n;break}n=n.Pa}for(n=this;null!==n;)n instanceof Ll&&Ss(n,!1),n=n.Pa;return i},Yh.defineProperty(as,{FI:"layoutConditions"},function(){return this.Tr},function(t){var n=this.Tr;n!==t&&(this.Tr=t,this.h("layoutConditions",n,t))}),as.prototype.canLayout=function(){if(!this.pF||!this.isVisible())return!1;var t=this.layer;return!(null!==t&&t.Kc||this instanceof As&&this.mf)},as.prototype.invalidateLayout=as.prototype.J=function(t){void 0===t&&(t=16777215);var n;if(this.pF&&0!=(t&this.FI)?(n=this.layer,null!==n&&n.Kc||this instanceof As&&this.mf?n=!1:(n=this.g,n=null===n||!n.oa.hb)):n=!1,n)if(null!==(n=this.Zk)){var i=n.Sb;null!==i?i.J():n.J(t)}else null!==(t=this.g)&&null!==(i=t.Sb)&&i.J()},Yh.defineProperty(as,{DE:"dragComputation"},function(){return this.nr},function(t){var n=this.nr;n!==t&&(null!==t&&Yh.j(t,"function",as,"dragComputation"),this.nr=t,this.h("dragComputation",n,t))}),Yh.defineProperty(as,{DJ:"shadowOffset"},function(){return this.an},function(t){var n=this.an;n.L(t)||(this.an=t=t.S(),this.na(),this.h("shadowOffset",n,t))}),Yh.defineProperty(as,{shadowColor:"shadowColor"},function(){return this.$m},function(t){var n=this.$m;n!==t&&(this.$m=t,this.na(),this.h("shadowColor",n,t))}),Yh.defineProperty(as,{shadowBlur:"shadowBlur"},function(){return this.Cg},function(t){var n=this.Cg;n!==t&&(this.Cg=t,this.na(),this.h("shadowBlur",n,t))}),Yh.Ka(Ds,as),Yh.ga("Adornment",Ds),Ds.prototype.toString=function(){var t=this.Pf;return"Adornment("+this.td+")"+(null!==t?t.toString():"")},Ds.prototype.updateRelationshipsFromData=function(){},Ds.prototype.nu=function(t){var n=this.rb.U,i=this.rb;if(n instanceof Js&&i instanceof Cr){var e=n.path,i=e.hf;for(n.nu(t),i=e.hf,t=this.xa.n,n=t.length,e=0;e<n;e++){var o=t[e];o.Wf&&o instanceof Cr&&(o.Va=i)}}},Yh.u(Ds,{placeholder:"placeholder"},function(){return this.Kb}),Yh.defineProperty(Ds,{rb:"adornedObject"},function(){return this.Dc},function(t){var n=this.Pf,i=null;null!==t&&(i=t.U),null===n||null!==t&&n===i||n.Bj(this.td),this.Dc=t,null!==i&&i.Bl(this.td,this)}),Yh.u(Ds,{Pf:"adornedPart"},function(){var t=this.Dc;return null!==t?t.U:null}),Ds.prototype.$l=function(){var t=this.Dc;return null===t||(null===(t=t.U)||!Wo(t))},Ds.prototype.de=function(){return!1},Yh.u(Ds,{Pa:"containingGroup"},function(){return null}),Ds.prototype.Un=function(t,n,i,e,o,r,s){if(t===mf&&"elements"===n)if(o instanceof Bl){var l=o;null===this.Kb?this.Kb=l:this.Kb!==l&&Yh.k("Cannot insert a second Placeholder into the visual tree of an Adornment.")}else o instanceof tr&&(l=o.Jt(function(t){return t instanceof Bl}))instanceof Bl&&(null===this.Kb?this.Kb=l:this.Kb!==l&&Yh.k("Cannot insert a second Placeholder into the visual tree of an Adornment."));else t===bf&&"elements"===n&&null!==this.Kb&&(e===this.Kb?this.Kb=null:e instanceof tr&&this.Kb.Zl(e)&&(this.Kb=null));as.prototype.Un.call(this,t,n,i,e,o,r,s)},Ds.prototype.updateAdornments=function(){},Ds.prototype.vn=function(){},Yh.Ka(As,as),Yh.ga("Node",As),As.prototype.cloneProtected=function(t){as.prototype.cloneProtected.call(this,t),t.ya=this.ya,t.ya=-17&this.ya,t.Ur=this.Ur,t.Vr=this.Vr,t.ol=this.ol,t.nt=this.nt,t.Nq=this.Nq.S(),t.Cs=this.Cs},As.prototype.li=function(t){as.prototype.li.call(this,t),t.Vf(),t.Ih=this.Ih,t.le=null};var Bd;As.DirectionDefault=Bd=Yh.p(As,"DirectionDefault",0),As.DirectionAbsolute=Yh.p(As,"DirectionAbsolute",1);var qd;As.DirectionRotatedNode=qd=Yh.p(As,"DirectionRotatedNode",2);var zd;As.DirectionRotatedNodeOrthogonal=zd=Yh.p(As,"DirectionRotatedNodeOrthogonal",3),As.SpreadingNone=Yh.p(As,"SpreadingNone",10);var Ed;As.SpreadingEvenly=Ed=Yh.p(As,"SpreadingEvenly",11);var Id;As.SpreadingPacked=Id=Yh.p(As,"SpreadingPacked",12),As.prototype.invalidateLinkBundle=function(t,n,i){void 0!==n&&null!==n||(n=""),void 0!==i&&null!==i||(i=""),null!==(t=Os(this,t,n,i))&&t.Zp()},As.prototype.Un=function(t,n,i,e,o,r,s){t===mf&&"elements"===n?this.le=null:t===bf&&"elements"===n&&(null===this.g?this.le=null:e instanceof To&&ar(this,e,function(t,n){Gs(t,n,!0)})),as.prototype.Un.call(this,t,n,i,e,o,r,s)},As.prototype.invalidateConnectedLinks=As.prototype.Vf=function(t){void 0===t&&(t=null);for(var n=this.fe;n.next();){var i=n.value;null!==t&&t.contains(i)||(qs(this,i.Jc),qs(this,i.jd),i.Yb())}},As.prototype.$l=function(){return!0},Yh.defineProperty(As,{gJ:"portSpreading"},function(){return this.Cs},function(t){var n=this.Cs;n!==t&&(this.Cs=t,this.h("portSpreading",n,t),null!==(t=this.g)&&t.oa.hb||this.Vf())}),Yh.defineProperty(As,{Tz:"avoidable"},function(){return 0!=(8&this.ya)},function(t){var n=0!=(8&this.ya);if(n!==t){this.ya^=8;var i=this.g;null!==i&&i.xA(this),this.h("avoidable",n,t)}}),Yh.defineProperty(As,{kH:"avoidableMargin"},function(){return this.Nq},function(t){"number"==typeof t?t=new D(t):Yh.G(t,D,As,"avoidableMargin");var n=this.Nq;if(!n.L(t)){this.Nq=t=t.S();var i=this.g;null!==i&&i.xA(this),this.h("avoidableMargin",n,t)}}),As.prototype.getAvoidableRect=function(t){return t.set(this.W),t.Nw(this.kH),t},As.prototype.findVisibleNode=function(){for(var t=this;null!==t&&!t.isVisible();)t=t.Pa;return t},As.prototype.isVisible=function(){if(!as.prototype.isVisible.call(this))return!1;var t=!0,n=fc,i=this.g;if(null!==i){if(t=i.Oa,t.lf&&null!==(t=t.Pm.ja(this))&&t.Xx)return!0;t=i.Pd,n=i.wB}if(n===fc){if(null!==(i=this.Rl())&&!i.gd)return!1}else if(n===cc){if(i=t?this.KE():this.LE(),0<i.count&&i.all(function(t){return!t.gd}))return!1}else if(n===dc&&(i=t?this.KE():this.LE(),0<i.count&&i.any(function(t){return!t.gd})))return!1;return null===(i=this.Mc)||i.isVisible()},As.prototype.vd=function(t){as.prototype.vd.call(this,t);for(var n=this.fe;n.next();)n.value.vd(t)},Yh.u(As,{fe:"linksConnected"},function(){return this.oc.i}),As.prototype.findLinksConnected=As.prototype.IE=function(t){if(void 0===t&&(t=null),null===t)return this.oc.i;var n=new h(this.oc),i=this;return n.iq=function(n){return n.Y===i&&n.Mg===t||n.$===i&&n.Fh===t},n},As.prototype.findLinksOutOf=As.prototype.mx=function(t){void 0===t&&(t=null);var n=new h(this.oc),i=this;return n.iq=function(n){return n.Y===i&&(null===t||n.Mg===t)},n},As.prototype.findLinksInto=As.prototype.Lg=function(t){void 0===t&&(t=null);var n=new h(this.oc),i=this;return n.iq=function(n){return n.$===i&&(null===t||n.Fh===t)},n},As.prototype.findNodesConnected=As.prototype.JE=function(t){void 0===t&&(t=null);for(var n=null,i=null,e=this.oc.i;e.next();){var o=e.value;o.Y===this?null!==t&&o.Mg!==t||(o=o.$,null!==n?n.add(o):null!==i&&i!==o?(n=new d(As),n.add(i),n.add(o)):i=o):o.$!==this||null!==t&&o.Fh!==t||(o=o.Y,null!==n?n.add(o):null!==i&&i!==o?(n=new d(As),n.add(i),n.add(o)):i=o)}return null!==n?n.i:null!==i?new l(i):Xh},As.prototype.findNodesOutOf=As.prototype.LE=function(t){void 0===t&&(t=null);for(var n=null,i=null,e=this.oc.i;e.next();){var o=e.value;o.Y!==this||null!==t&&o.Mg!==t||(o=o.$,null!==n?n.add(o):null!==i&&i!==o?(n=new d(As),n.add(i),n.add(o)):i=o)}return null!==n?n.i:null!==i?new l(i):Xh},As.prototype.findNodesInto=As.prototype.KE=function(t){void 0===t&&(t=null);for(var n=null,i=null,e=this.oc.i;e.next();){var o=e.value;o.$!==this||null!==t&&o.Fh!==t||(o=o.Y,null!==n?n.add(o):null!==i&&i!==o?(n=new d(As),n.add(i),n.add(o)):i=o)}return null!==n?n.i:null!==i?new l(i):Xh},As.prototype.findLinksBetween=function(t,n,i){void 0===n&&(n=null),void 0===i&&(i=null);var e=new h(this.oc),o=this;return e.iq=function(e){return!(e.Y!==o||e.$!==t||null!==n&&e.Mg!==n||null!==i&&e.Fh!==i)||!(e.Y!==t||e.$!==o||null!==i&&e.Mg!==i||null!==n&&e.Fh!==n)},e},As.prototype.findLinksTo=function(t,n,i){void 0===n&&(n=null),void 0===i&&(i=null);var e=new h(this.oc),o=this;return e.iq=function(e){return!(e.Y!==o||e.$!==t||null!==n&&e.Mg!==n||null!==i&&e.Fh===i)},e},Yh.defineProperty(As,{HI:"linkConnected"},function(){return this.Ur},function(t){var n=this.Ur;n!==t&&(null!==t&&Yh.j(t,"function",As,"linkConnected"),this.Ur=t,this.h("linkConnected",n,t))}),Yh.defineProperty(As,{II:"linkDisconnected"},function(){return this.Vr},function(t){var n=this.Vr;n!==t&&(null!==t&&Yh.j(t,"function",As,"linkDisconnected"),this.Vr=t,this.h("linkDisconnected",n,t))}),Yh.defineProperty(As,{Jx:"linkValidation"},function(){return this.ol},function(t){var n=this.ol;n!==t&&(null!==t&&Yh.j(t,"function",As,"linkValidation"),this.ol=t,this.h("linkValidation",n,t))}),As.prototype.updateRelationshipsFromData=function(){as.prototype.updateRelationshipsFromData.call(this);var t=this.data;if(null!==t){var n=this.g;if(null!==n){var i=n.ba;i instanceof en&&(t=i.Bn(t),t=n.Ie(t),i=this.Rl(),t!==i&&(i=this.xn(),null!==t?null!==i?n.Pd?i.Y=t:i.$=t:Ee(n,t,this):null!==i&&be(n,i,!1)))}}},As.prototype.Yt=function(t){as.prototype.Yt.call(this,t),t||(Is(this),null!==(t=this.Vo)&&Xs(t,this))},As.prototype.Zt=function(t){as.prototype.Zt.call(this,t),t||null!==(t=this.Vo)&&null!==t.sf&&(t.sf.remove(this),t.H())},As.prototype.vn=function(){if(0<this.oc.count){var t=this.g;if(null!==t)for(var n=t.ob.CE,i=this.oc.copy().i;i.next();){var e=i.value;n?t.remove(e):(e.Y===this&&(e.Y=null),e.$===this&&(e.$=null))}}this.Mc=null,as.prototype.vn.call(this)},Yh.u(As,{mf:"isLinkLabel"},function(){return null!==this.Vo}),Yh.defineProperty(As,{Mc:"labeledLink"},function(){return this.Vo},function(t){var n=this.Vo;if(n!==t){var i=this.g,e=this.data;if(null!==n&&(null!==n.sf&&(n.sf.remove(this),n.H()),null!==i&&null!==e&&!i.oa.hb)){var o=n.data,r=i.ba;if(null!==o&&r instanceof Zt){var s=r.ub(e);void 0!==s&&r.lJ(o,s)}}this.Vo=t,null!==t&&(Xs(t,this),null===i||null===e||i.oa.hb||(o=t.data,r=i.ba,null!==o&&r instanceof Zt&&void 0!==(s=r.ub(e))&&r.fE(o,s))),zo(this),this.h("labeledLink",n,t)}}),As.prototype.findPort=As.prototype.Pl=function(t){if(null===this.le){if(""===t&&!1===this.Dk)return this;Rs(this)}var n=this.le.ja(t);return null!==n||""!==t&&null!==(n=this.le.ja(""))?n:this},Yh.u(As,{port:"port"},function(){return this.Pl("")}),Yh.u(As,{ports:"ports"},function(){return null===this.le&&Rs(this),this.le.uF}),As.prototype.isInTreeOf=function(t){if(null===t||t===this)return!1;var n=!0,i=this.g;if(null!==i&&(n=i.Pd),i=this,n)for(;i!==t;){for(var n=null,e=i.oc.i;e.next();){var o=e.value;if(o.Lc&&(n=o.Y)!==i&&n!==this)break}if(n===this||null===n||n===i)return!1;i=n}else for(;i!==t;){for(n=null,e=i.oc.i;e.next()&&(o=e.value,!o.Lc||(n=o.$)===i||n===this););if(n===this||null===n||n===i)return!1;i=n}return!0},As.prototype.findTreeRoot=function(){var t=!0,n=this.g;if(null!==n&&(t=n.Pd),n=this,t)for(;;){for(var t=null,i=n.oc.i;i.next();){var e=i.value;if(e.Lc&&(t=e.Y)!==n&&t!==this)break}if(t===this)return this;if(null===t||t===n)return n;n=t}else for(;;){for(t=null,i=n.oc.i;i.next()&&(e=i.value,!e.Lc||(t=e.$)===n||t===this););if(t===this)return this;if(null===t||t===n)return n;n=t}},As.prototype.findCommonTreeParent=function(t){if(null===t)return null;if(this===t)return this;for(var n=this;null!==n;)Ss(n,!0),n=n.Rl();for(var i=null,n=t;null!==n;){if(0!=(1048576&n.N)){i=n;break}n=n.Rl()}for(n=this;null!==n;)Ss(n,!1),n=n.Rl();return i},As.prototype.findTreeParentLink=As.prototype.xn=function(){var t=!0,n=this.g;if(null!==n&&(t=n.Pd),n=this.oc.i,t){for(;n.next();)if(t=n.value,t.Lc&&t.Y!==this)return t}else for(;n.next();)if(t=n.value,t.Lc&&t.$!==this)return t;return null},As.prototype.findTreeParentNode=As.prototype.Rl=function(){var t=this.qk;if(null===t)return null;if(t instanceof As)return t;var n=!0,t=this.g;if(null!==t&&(n=t.Pd),t=this.oc.i,n){for(;t.next();)if(n=t.value,n.Lc&&(n=n.Y)!==this)return this.qk=n}else for(;t.next();)if(n=t.value,n.Lc&&(n=n.$)!==this)return this.qk=n;return this.qk=null},As.prototype.findTreeParentChain=function(){function t(n,i){if(null!==n){i.add(n);var e=n.xn();null!==e&&(i.add(e),t(n.Rl(),i))}}var n=new d(as);return t(this,n),n},As.prototype.findTreeLevel=function(){return Vs(this,this)},As.prototype.findTreeChildrenLinks=As.prototype.ox=function(){var t=!0,n=this.g;null!==n&&(t=n.Pd);var n=new h(this.oc),i=this;return n.iq=t?function(t){return!(!t.Lc||t.Y!==i)}:function(t){return!(!t.Lc||t.$!==i)},n},As.prototype.findTreeChildrenNodes=As.prototype.NE=function(){var t=!0,n=this.g;null!==n&&(t=n.Pd);var i=n=null,e=this.oc.i;if(t)for(;e.next();)t=e.value,t.Lc&&t.Y===this&&(t=t.$,null!==n?n.add(t):null!==i&&i!==t?(n=new f(As),n.add(i),n.add(t)):i=t);else for(;e.next();)t=e.value,t.Lc&&t.$===this&&(t=t.Y,null!==n?n.add(t):null!==i&&i!==t?(n=new f(As),n.add(i),n.add(t)):i=t);return null!==n?n.i:null!==i?new l(i):Xh},As.prototype.findTreeParts=function(t){void 0===t&&(t=1/0),Yh.j(t,"number",As,"findTreeParts:level");var n=new d(as);return un(n,this,!1,t,!0),n},As.prototype.collapseTree=As.prototype.collapseTree=function(t){void 0===t&&(t=1),Yh.Fd(t,As,"collapseTree:level"),1>t&&(t=1);var n=this.g;if(null!==n&&!n.xh){n.xh=!0;var i=new d(As);i.add(this),Hs(this,i,n.Pd,t,n.Oa,this,n.wB===fc),n.xh=!1}},As.prototype.expandTree=As.prototype.expandTree=function(t){void 0===t&&(t=2),Yh.Fd(t,As,"expandTree:level"),2>t&&(t=2);var n=this.g;if(null!==n&&!n.xh){n.xh=!0;var i=new d(As);i.add(this),Us(this,i,n.Pd,t,n.Oa,this,n.wB===fc),n.xh=!1}},Yh.defineProperty(As,{gd:"isTreeExpanded"},function(){return 0!=(1&this.ya)},function(t){var n=0!=(1&this.ya);if(n!==t){this.ya^=1;var i=this.g;if(this.h("isTreeExpanded",n,t),null!==(n=this.RJ)){var e=!0;null!==i&&(e=i.Ua,i.Ua=!0),n(this),null!==i&&(i.Ua=e)}null!==i&&i.oa.hb?this.vd(t):t?this.expandTree():this.collapseTree()}}),Yh.defineProperty(As,{Qu:"wasTreeExpanded"},function(){return 0!=(2&this.ya)},function(t){var n=0!=(2&this.ya);n!==t&&(this.ya^=2,this.h("wasTreeExpanded",n,t))}),Yh.defineProperty(As,{RJ:"treeExpandedChanged"},function(){return this.nt},function(t){var n=this.nt;n!==t&&(null!==t&&Yh.j(t,"function",As,"treeExpandedChanged"),this.nt=t,this.h("treeExpandedChanged",n,t))}),Yh.defineProperty(As,{vj:"isTreeLeaf"},function(){return 0!=(4&this.ya)},function(t){var n=0!=(4&this.ya);n!==t&&(this.ya^=4,this.h("isTreeLeaf",n,t))}),Yh.Ka(Js,as),Yh.ga("Link",Js),Js.prototype.cloneProtected=function(t){as.prototype.cloneProtected.call(this,t),t.Wb=-113&this.Wb,t.Oh=this.Oh,t.wr=this.wr,t.ii=this.ii,t.mt=this.mt,t.Fq=this.Fq,t.$q=this.$q,t.cr=this.cr,t.dr=this.dr,t.Um=this.Um,t.at=this.at,null!==this.V&&(t.V=this.V.copy())},Js.prototype.li=function(t){as.prototype.li.call(this,t),this.Oh=t.Oh,this.ii=t.ii,t.Ve=null,t.Yb(),t.ui=this.ui},Js.prototype.hc=function(t){t.De===Js?2==(2&t.value)?this.by=t:t===Hd||t===Kd||t===Ud?this.Ze=t:t===Jd||t===Yd||t===Wd?this.wt=t:t!==Rd&&t!==Vd&&Yh.k("Unknown Link enum value for a Link property: "+t):as.prototype.hc.call(this,t)};var Rd;Js.Normal=Rd=Yh.p(Js,"Normal",1),Js.Orthogonal=Yh.p(Js,"Orthogonal",2),Js.AvoidsNodes=Yh.p(Js,"AvoidsNodes",6);var Gd;Js.AvoidsNodesStraight=Gd=Yh.p(Js,"AvoidsNodesStraight",7);var Vd;Js.None=Vd=Yh.p(Js,"None",0);var Hd;Js.Bezier=Hd=Yh.p(Js,"Bezier",9);var Kd;Js.JumpGap=Kd=Yh.p(Js,"JumpGap",10);var Ud;Js.JumpOver=Ud=Yh.p(Js,"JumpOver",11);var Jd;Js.End=Jd=Yh.p(Js,"End",17);var Yd;Js.Scale=Yd=Yh.p(Js,"Scale",18);var Wd;Js.Stretch=Wd=Yh.p(Js,"Stretch",19);var Xd;Js.OrientAlong=Xd=Yh.p(Js,"OrientAlong",21);var $d;Js.OrientPlus90=$d=Yh.p(Js,"OrientPlus90",22);var Qd;Js.OrientMinus90=Qd=Yh.p(Js,"OrientMinus90",23);var Zd;Js.OrientOpposite=Zd=Yh.p(Js,"OrientOpposite",24);var _d;Js.OrientUpright=_d=Yh.p(Js,"OrientUpright",25);var tp;Js.OrientPlus90Upright=tp=Yh.p(Js,"OrientPlus90Upright",26);var np;Js.OrientMinus90Upright=np=Yh.p(Js,"OrientMinus90Upright",27);var ip;Js.OrientUpright45=ip=Yh.p(Js,"OrientUpright45",28),Uh=Js.prototype,Uh.Ld=function(){null===this.V&&(this.V=new jl)},Uh.$l=function(){var t=this.Y;if(null!==t){var n=t.findVisibleNode();if(null!==n&&(t=n),Wo(t)||ks(t))return!1}return null===(t=this.$)||(n=t.findVisibleNode(),null!==n&&(t=n),!Wo(t)&&!ks(t))},Uh.hB=function(){return!1},Uh.iB=function(){},Uh.de=function(){return!1},Js.prototype.computeAngle=function(t,n,i){return Js.computeAngle(n,i)},Js.computeAngle=function(t,n){var i=0;switch(t){default:case Vd:i=0;break;case Xd:i=n;break;case $d:i=n+90;break;case Qd:i=n-90;break;case Zd:i=n+180;break;case _d:i=dt(n),90<i&&270>i&&(i-=180);break;case tp:i=dt(n+90),90<i&&270>i&&(i-=180);break;case np:i=dt(n-90),90<i&&270>i&&(i-=180);break;case ip:if(45<(i=dt(n))&&135>i||225<i&&315>i)return 0;90<i&&270>i&&(i-=180)}return dt(i)},Yh.defineProperty(Js,{Y:"fromNode"},function(){return this.pg},function(t){var n=this.pg;if(n!==t){var i=this.Jc;null!==n&&(this.Fg!==n&&Es(n,this,i),pl(this),this.J(Dd)),this.pg=t,null!==t&&this.vd(t.isVisible()),this.Hi=null,this.Yb();var e=this.g;if(null!==e){var o=this.data,r=e.ba;if(null!==o)if(r instanceof Zt){var s=null!==t?t.data:null;r.dB(o,r.ub(s))}else r instanceof en&&(s=null!==t?t.data:null,e.Pd?r.pi(o,r.ub(s)):(null!==n&&r.pi(n.data,void 0),r.pi(s,r.ub(null!==this.Fg?this.Fg.data:null))))}o=this.Jc,r=this.QE,null!==r&&(s=!0,null!==e&&(s=e.Ua,e.Ua=!0),r(this,i,o),null!==e&&(e.Ua=s)),null!==t&&(this.Fg!==t&&zs(t,this,o),dl(this),this.J(Ld)),this.h("fromNode",n,t),Ys(this)}}),Yh.defineProperty(Js,{Mg:"fromPortId"},function(){return this.Oh},function(t){var n=this.Oh;if(n!==t){var i=this.Jc;null!==i&&qs(this.Y,i),pl(this),this.Oh=t;var e=this.Jc;null!==e&&qs(this.Y,e);var o=this.g;if(null!==o){var r=this.data,s=o.ba;null!==r&&s instanceof Zt&&s.eB(r,t)}i!==e&&(this.Hi=null,this.Yb(),null!==(r=this.QE)&&(s=!0,null!==o&&(s=o.Ua,o.Ua=!0),r(this,i,e),null!==o&&(o.Ua=s))),dl(this),this.h("fromPortId",n,t)}}),Yh.u(Js,{Jc:"fromPort"},function(){var t=this.pg;return null===t?null:t.Pl(this.Oh)}),Yh.defineProperty(Js,{QE:"fromPortChanged"},function(){return this.wr},function(t){var n=this.wr;n!==t&&(null!==t&&Yh.j(t,"function",Js,"fromPortChanged"),this.wr=t,this.h("fromPortChanged",n,t))}),Yh.defineProperty(Js,{$:"toNode"},function(){return this.Fg},function(t){var n=this.Fg;if(n!==t){var i=this.jd;null!==n&&(this.pg!==n&&Es(n,this,i),pl(this),this.J(Dd)),this.Fg=t,null!==t&&this.vd(t.isVisible()),this.Hi=null,this.Yb();var e=this.g;if(null!==e){var o=this.data,r=e.ba;if(null!==o)if(r instanceof Zt){var s=null!==t?t.data:null;r.jB(o,r.ub(s))}else r instanceof en&&(s=null!==t?t.data:null,e.Pd?(null!==n&&r.pi(n.data,void 0),r.pi(s,r.ub(null!==this.pg?this.pg.data:null))):r.pi(o,r.ub(s)))}o=this.jd,r=this.rG,null!==r&&(s=!0,null!==e&&(s=e.Ua,e.Ua=!0),r(this,i,o),null!==e&&(e.Ua=s)),null!==t&&(this.pg!==t&&zs(t,this,o),dl(this),this.J(Ld)),this.h("toNode",n,t),Ys(this)}}),Yh.defineProperty(Js,{Fh:"toPortId"},function(){return this.ii},function(t){var n=this.ii;if(n!==t){var i=this.jd;null!==i&&qs(this.$,i),pl(this),this.ii=t;var e=this.jd;null!==e&&qs(this.$,e);var o=this.g;if(null!==o){var r=this.data,s=o.ba;null!==r&&s instanceof Zt&&s.kB(r,t)}i!==e&&(this.Hi=null,this.Yb(),null!==(r=this.rG)&&(s=!0,null!==o&&(s=o.Ua,o.Ua=!0),r(this,i,e),null!==o&&(o.Ua=s))),dl(this),this.h("toPortId",n,t)}}),Yh.u(Js,{jd:"toPort"},function(){var t=this.Fg;return null===t?null:t.Pl(this.ii)}),Yh.defineProperty(Js,{rG:"toPortChanged"},function(){return this.mt},function(t){var n=this.mt;n!==t&&(null!==t&&Yh.j(t,"function",Js,"toPortChanged"),this.mt=t,this.h("toPortChanged",n,t))}),Yh.defineProperty(Js,{Ab:"fromSpot"},function(){return null!==this.V?this.V.Sj:iu},function(t){this.Ld();var n=this.V.Sj;n.L(t)||(t=t.S(),this.V.Sj=t,this.h("fromSpot",n,t),this.Yb())}),Yh.defineProperty(Js,{Sl:"fromEndSegmentLength"},function(){return null!==this.V?this.V.Qj:NaN},function(t){this.Ld();var n=this.V.Qj;n!==t&&(0>t&&Yh.Ea(t,">= 0",Js,"fromEndSegmentLength"),this.V.Qj=t,this.h("fromEndSegmentLength",n,t),this.Yb())}),Yh.defineProperty(Js,{Tt:"fromEndSegmentDirection"},function(){return null!==this.V?this.V.Pj:Bd},function(t){this.Ld();var n=this.V.Pj;n!==t&&(Yh.Ft("Link.fromEndSegmentDirection","2.0"),this.V.Pj=t,this.h("fromEndSegmentDirection",n,t),this.Yb())}),Yh.defineProperty(Js,{Ut:"fromShortLength"},function(){return null!==this.V?this.V.Rj:NaN},function(t){this.Ld();var n=this.V.Rj;n!==t&&(this.V.Rj=t,this.h("fromShortLength",n,t),this.Yb())}),Yh.defineProperty(Js,{Bb:"toSpot"},function(){return null!==this.V?this.V.pk:iu},function(t){this.Ld();var n=this.V.pk;n.L(t)||(t=t.S(),this.V.pk=t,this.h("toSpot",n,t),this.Yb())}),Yh.defineProperty(Js,{km:"toEndSegmentLength"},function(){return null!==this.V?this.V.nk:NaN},function(t){this.Ld();var n=this.V.nk;n!==t&&(0>t&&Yh.Ea(t,">= 0",Js,"toEndSegmentLength"),this.V.nk=t,this.h("toEndSegmentLength",n,t),this.Yb())}),Yh.defineProperty(Js,{Nu:"toEndSegmentDirection"},function(){return null!==this.V?this.V.mk:Bd},function(t){this.Ld();var n=this.V.mk;n!==t&&(Yh.Ft("Link.toEndSegmentDirection","2.0"),this.V.mk=t,this.h("toEndSegmentDirection",n,t),this.Yb())}),Yh.defineProperty(Js,{Ou:"toShortLength"},function(){return null!==this.V?this.V.ok:NaN},function(t){this.Ld();var n=this.V.ok;n!==t&&(this.V.ok=t,this.h("toShortLength",n,t),this.Yb())}),Js.prototype.Ek=function(){var t=this.Pa;null!==t&&this.Y!==t&&this.$!==t&&t.Xw&&as.prototype.Ek.call(this)},Js.prototype.getOtherNode=Js.prototype.oA=function(t){var n=this.Y;return t===n?this.$:n},Js.prototype.getOtherPort=function(t){var n=this.Jc;return t===n?this.jd:n},Yh.u(Js,{aL:"isLabeledLink"},function(){return null!==this.sf&&0<this.sf.count}),Yh.u(Js,{Xf:"labelNodes"},function(){return null===this.sf?Xh:this.sf.i}),Js.prototype.Yt=function(t){as.prototype.Yt.call(this,t),hl(this)&&fl(this,this.W),t||(t=this.pg,null!==t&&zs(t,this,this.Jc),t=this.Fg,null!==t&&zs(t,this,this.jd),dl(this))},Js.prototype.Zt=function(t){as.prototype.Zt.call(this,t),hl(this)&&fl(this,this.W),t||(t=this.pg,null!==t&&Es(t,this,this.Jc),t=this.Fg,null!==t&&Es(t,this,this.jd),pl(this))},Js.prototype.vn=function(){if(this.$g=!0,null!==this.sf){var t=this.g;if(null!==t)for(var n=this.sf.copy().i;n.next();)t.remove(n.value)}null!==(n=this.data)&&null!==(t=this.g)&&(t=t.ba,t instanceof Zt?t.Zx(n):t instanceof en&&t.pi(n,void 0))},Js.prototype.updateRelationshipsFromData=function(){var t=this.data;if(null!==t){var n=this.g;if(null!==n){var i=n.ba;if(i instanceof Zt){var e=i.Ul(t);if(this.Y=e=n.Ie(e),e=i.Vl(t),this.$=e=n.Ie(e),t=i.Bk(t),0<t.length||0<this.Xf.count){if(1===t.length&&1===this.Xf.count){var e=t[0],o=this.Xf.first();if(i.ub(o.data)===e)return}var e=(new d).Hc(t),r=new d;if(this.Xf.each(function(t){null!==t.data&&void 0!==(t=i.ub(t.data))&&r.add(t)}),t=r.copy(),t.Yx(e),e=e.copy(),e.Yx(r),0<t.count||0<e.count){var s=this;t.each(function(t){null!==(t=n.Ie(t))&&t.Mc===s&&(t.Mc=null)}),e.each(function(t){null!==(t=n.Ie(t))&&t.Mc!==s&&(t.Mc=s)})}}}}}},Js.prototype.move=function(t){var n=this.position,i=n.x;for(isNaN(i)&&(i=0),n=n.y,isNaN(n)&&(n=0),i=t.x-i,n=t.y-n,as.prototype.move.call(this,t),this.Hk(i,n),t=this.Xf;t.next();){var e=t.value,o=e.position;e.moveTo(o.x+i,o.y+n)}},Yh.defineProperty(Js,{jJ:"relinkableFrom"},function(){return 0!=(1&this.Wb)},function(t){var n=0!=(1&this.Wb);n!==t&&(this.Wb^=1,this.h("relinkableFrom",n,t),this.ce())}),Yh.defineProperty(Js,{kJ:"relinkableTo"},function(){return 0!=(2&this.Wb)},function(t){var n=0!=(2&this.Wb);n!==t&&(this.Wb^=2,this.h("relinkableTo",n,t),this.ce())}),Js.prototype.canRelinkFrom=function(){if(!this.jJ)return!1;var t=this.layer;return null===t||!!t.hn&&!(null!==(t=t.g)&&!t.hn)},Js.prototype.canRelinkTo=function(){if(!this.kJ)return!1;var t=this.layer;return null===t||!!t.hn&&!(null!==(t=t.g)&&!t.hn)},Yh.defineProperty(Js,{Cu:"resegmentable"},function(){return 0!=(4&this.Wb)},function(t){var n=0!=(4&this.Wb);n!==t&&(this.Wb^=4,this.h("resegmentable",n,t),this.ce())}),Yh.defineProperty(Js,{Lc:"isTreeLink"},function(){return 0!=(8&this.Wb)},function(t){var n=0!=(8&this.Wb);n!==t&&(this.Wb^=8,this.h("isTreeLink",n,t),null!==this.Y&&Is(this.Y),null!==this.$&&Is(this.$))}),Yh.u(Js,{path:"path"},function(){var t=this.Jd();return t instanceof Cr?t:null}),Yh.u(Js,{Vn:"routeBounds"},function(){this.bo();var t=new P,n=1/0,i=1/0,e=this.qa;if(0===e)t.m(NaN,NaN,0,0);else{if(1===e)e=this.l(0),n=Math.min(e.x,n),i=Math.min(e.y,i),t.m(e.x,e.y,0,0);else if(2===e){var o=this.l(0),r=this.l(1),n=Math.min(o.x,r.x),i=Math.min(o.y,r.y);t.m(o.x,o.y,0,0),t.si(r)}else if(this.computeCurve()===Hd&&3<=e&&!this.Zb)if(o=this.l(0),n=o.x,i=o.y,t.m(n,i,0,0),3===e)e=this.l(1),n=Math.min(e.x,n),i=Math.min(e.y,i),r=this.l(2),n=Math.min(r.x,n),i=Math.min(r.y,i),Z(o.x,o.y,e.x,e.y,e.x,e.y,r.x,r.y,.5,t);else for(var s=3;s<e;s+=3){var l=this.l(s-2);s+3>=e&&(s=e-1);var a=this.l(s-1),r=this.l(s);Z(o.x,o.y,l.x,l.y,a.x,a.y,r.x,r.y,.5,t),n=Math.min(r.x,n),i=Math.min(r.y,i),o=r}else for(o=this.l(0),r=this.l(1),n=Math.min(o.x,r.x),i=Math.min(o.y,r.y),t.m(o.x,o.y,0,0),t.si(r),s=2;s<e;s++)o=this.l(s),n=Math.min(o.x,n),i=Math.min(o.y,i),t.si(o);this.Gz.m(n-t.x,i-t.y)}return this.qw=t}),Yh.u(Js,{AF:"midPoint"},function(){return this.bo(),this.computeMidPoint(new x)}),Js.prototype.computeMidPoint=function(t){var n=this.qa;if(0===n)return t.assign(Xu),t;if(1===n)return t.assign(this.l(0)),t;if(2===n){var i=this.l(0),e=this.l(1);return t.m((i.x+e.x)/2,(i.y+e.y)/2),t}if(this.computeCurve()===Hd&&3<=n&&!this.Zb){if(3===n)return this.l(1);var i=(n-1)/3|0,o=3*(i/2|0);if(1==i%2){var i=this.l(o),e=this.l(o+1),r=this.l(o+2),o=this.l(o+3),n=e.x,s=e.y,e=r.x,l=r.y,r=(n+e)/2,a=(s+l)/2,s=((i.y+s)/2+a)/2,l=(a+(l+o.y)/2)/2;t.x=(((i.x+n)/2+r)/2+(r+(e+o.x)/2)/2)/2,t.y=(s+l)/2}else t.assign(this.l(o));return t}for(o=0,r=Yh.lb(),s=0;s<n-1;s++)i=0,i=this.l(s),e=this.l(s+1),X(i.x,e.x)?0>(i=e.y-i.y)&&(i=-i):X(i.y,e.y)?0>(i=e.x-i.x)&&(i=-i):i=Math.sqrt(i.wf(e)),r.push(i),o+=i;for(e=s=i=0;i<o/2&&s<n&&(e=r[s],!(i+e>o/2));)i+=e,s++;return Yh.wa(r),n=this.l(s),r=this.l(s+1),n.x===r.x?n.y>r.y?t.m(n.x,n.y-(o/2-i)):t.m(n.x,n.y+(o/2-i)):n.y===r.y?n.x>r.x?t.m(n.x-(o/2-i),n.y):t.m(n.x+(o/2-i),n.y):(i=(o/2-i)/e,t.m(n.x+i*(r.x-n.x),n.y+i*(r.y-n.y))),t},Yh.u(Js,{zF:"midAngle"},function(){return this.bo(),this.computeMidAngle()}),Js.prototype.computeMidAngle=function(){var t=this.qa;if(2>t)return NaN;if(this.computeCurve()===Hd&&4<=t&&!this.Zb){var n=(t-1)/3|0,i=3*(n/2|0);if(1==n%2){var i=Math.floor(i),n=this.l(i),e=this.l(i+1),t=this.l(i+2),i=this.l(i+3),o=e.x,e=e.y,r=t.x,t=t.y,s=(o+r)/2,l=(e+t)/2;return Zh(((n.x+o)/2+s)/2,((n.y+e)/2+l)/2,(s+(r+i.x)/2)/2,(l+(t+i.y)/2)/2)}if(0<i&&i+1<t)return n=this.l(i-1),e=this.l(i+1),n.Ob(e)}return i=t/2|0,0==t%2?(n=this.l(i-1),e=this.l(i),4<=t&&n.Ic(e)?(n=this.l(i-2),t=this.l(i+1),i=n.wf(e),o=e.wf(t),i>o+10?n.Ob(e):o>i+10?e.Ob(t):n.Ob(t)):null===this.Va||this.Zb?n.Ob(e):this.Va.RE(.5)):null===this.Va||this.Zb?(n=this.l(i-1),e=this.l(i),t=this.l(i+1),i=n.wf(e),o=e.wf(t),i>o+10?n.Ob(e):o>i+10?e.Ob(t):n.Ob(t)):this.Va.RE(.5)},Yh.defineProperty(Js,{points:"points"},function(){return this.bd},function(t){var n=this.bd;if(n!==t){var i=null;if(Array.isArray(t)){var e=0==t.length%2;if(e)for(var o=0;o<t.length;o++)if("number"!=typeof t[o]||isNaN(t[o])){e=!1;break}if(e)for(i=new f(x),e=0;e<t.length/2;e++){var r=new x(t[2*e],t[2*e+1]).freeze();i.add(r)}else{for(o=!0,e=0;e<t.length;e++){var s=t[e];if(!Yh.Qa(r)||"number"!=typeof s.x||isNaN(s.x)||"number"!=typeof s.y||isNaN(s.y)){o=!1;break}}if(o)for(i=new f(x),e=0;e<t.length;e++)r=t[e],i.add(new x(r.x,r.y).freeze());else Yh.k("Link.points array must contain only an even number of numbers or objects with x and y properties, not: "+t)}}else if(t instanceof f)for(i=t.copy(),t=i.i;t.next();)t.value.freeze();else Yh.k("Link.points value is not an instance of List or Array: "+t);i.freeze(),this.bd=i,this.Ke(),this.H(),$s(this),t=this.g,null!==t&&(t.Gn||t.oa.hb||t.Kx.add(this),t.Oa.pc&&(this.lp=i)),this.h("points",n,i)}}),Yh.u(Js,{qa:"pointsCount"},function(){return this.bd.count}),Js.prototype.getPoint=Js.prototype.l=function(t){return this.bd.n[t]},Js.prototype.setPoint=Js.prototype.Vg=function(t,n){null===this.Ve&&Yh.k("Call Link.startRoute before modifying the points of the route."),this.bd.hg(t,n)},Js.prototype.setPointAt=Js.prototype.ca=function(t,n,i){null===this.Ve&&Yh.k("Call Link.startRoute before modifying the points of the route."),this.bd.hg(t,new x(n,i))},Js.prototype.insertPoint=function(t,n){null===this.Ve&&Yh.k("Call Link.startRoute before modifying the points of the route."),this.bd.Md(t,n)},Js.prototype.insertPointAt=Js.prototype.w=function(t,n,i){null===this.Ve&&Yh.k("Call Link.startRoute before modifying the points of the route."),this.bd.Md(t,new x(n,i))},Js.prototype.addPoint=Js.prototype.ji=function(t){null===this.Ve&&Yh.k("Call Link.startRoute before modifying the points of the route."),this.bd.add(t)},Js.prototype.addPointAt=Js.prototype.hj=function(t,n){null===this.Ve&&Yh.k("Call Link.startRoute before modifying the points of the route."),this.bd.add(new x(t,n))},Js.prototype.removePoint=Js.prototype.RF=function(t){null===this.Ve&&Yh.k("Call Link.startRoute before modifying the points of the route."),this.bd.Yc(t)},Js.prototype.clearPoints=Js.prototype.Hp=function(){null===this.Ve&&Yh.k("Call Link.startRoute before modifying the points of the route."),this.bd.clear()},Js.prototype.movePoints=Js.prototype.Hk=function(t,n){for(var i=new f(x),e=this.bd.i;e.next();){var o=e.value;i.add(new x(o.x+t,o.y+n).freeze())}i.freeze(),e=this.bd,this.bd=i,this.H(),$s(this),o=this.g,null!==o&&o.Oa.pc&&(this.lp=i),this.h("points",e,i)},Js.prototype.startRoute=Js.prototype.fm=function(){null===this.Ve&&(this.Ve=this.bd,this.bd=this.bd.copy())},Js.prototype.commitRoute=Js.prototype.jj=function(){if(null!==this.Ve){for(var t=this.Ve,n=this.bd,i=1/0,e=1/0,o=t.n,r=o.length,s=0;s<r;s++)var l=o[s],i=Math.min(l.x,i),e=Math.min(l.y,e);for(var a=1/0,h=1/0,u=n.n,f=u.length,s=0;s<f;s++)l=u[s],a=Math.min(l.x,a),h=Math.min(l.y,h),l.freeze();if(n.freeze(),f===r){for(s=0;s<f;s++)if(r=o[s],l=u[s],r.x-i!=l.x-a||r.y-e!=l.y-h){this.H(),this.Ke();break}}else this.H(),this.Ke();this.Ve=null,i=this.g,null!==i&&i.Oa.pc&&(this.lp=n),$s(this),this.h("points",t,n)}},Js.prototype.rollbackRoute=Js.prototype.qJ=function(){null!==this.Ve&&(this.bd=this.Ve,this.Ve=null)},Js.prototype.invalidateRoute=Js.prototype.Yb=function(){if(!this.gm){var t=this.g;t&&(t.Kx.contains(this)||t.oa.hb||t.Oa.AI&&!t.Oa.lf)||null!==(t=this.path)&&(this.$g=!1,this.H(),t.H())}},Yh.defineProperty(Js,{$g:null},function(){return 0!=(16&this.Wb)},function(t){0!=(16&this.Wb)!==t&&(this.Wb^=16)}),Yh.defineProperty(Js,{gm:"suspendsRouting"},function(){return 0!=(32&this.Wb)},function(t){0!=(32&this.Wb)!==t&&(this.Wb^=32)}),Yh.defineProperty(Js,{Xz:null},function(){return 0!=(64&this.Wb)},function(t){0!=(64&this.Wb)!==t&&(this.Wb^=64)}),Yh.defineProperty(Js,{Mp:"defaultFromPoint"},function(){return this.mC},function(t){this.mC=t.copy()}),Yh.defineProperty(Js,{Np:"defaultToPoint"},function(){return this.sC},function(t){this.sC=t.copy()}),Js.prototype.updateRoute=Js.prototype.bo=function(){if(!this.$g&&!this.Xz){var t=!0;try{this.Xz=!0,this.fm(),t=this.computePoints()}finally{this.Xz=!1,t?this.jj():this.qJ()}}},Js.prototype.computePoints=function(){var t=this.g;if(null===t)return!1;var n=this.Y,i=null;if(null===n?(t.ul||(t.Ls=new Cr,t.Ls.Ba=Hu,t.Ls.kb=0,t.ul=new As,t.ul.add(t.Ls),t.ul.$e()),this.Mp&&(t.ul.position=t.ul.location=this.Mp,t.ul.$e(),n=t.ul,i=t.Ls)):i=this.Jc,null!==i&&!n.isVisible()){var e=n.findVisibleNode();null!==e&&e!==n?(n=e,i=e.Pl("")):n=e}if(this.JD=n,null===n||!n.location.I())return!1;for(;!(null===i||i.W.I()&&i.wj());)i=i.O;if(null===i)return!1;var o=this.$,r=null;if(null===o?(t.vl||(t.Ms=new Cr,t.Ms.Ba=Hu,t.Ms.kb=0,t.vl=new As,t.vl.add(t.Ms),t.vl.$e()),this.Np&&(t.vl.position=t.vl.location=this.Np,t.vl.$e(),o=t.vl,r=t.Ms)):r=this.jd,null===r||o.isVisible()||(t=o.findVisibleNode(),null!==t&&t!==o?(o=t,r=t.Pl("")):o=t),this.KD=o,null===o||!o.location.I())return!1;for(;!(null===r||r.W.I()&&r.wj());)r=r.O;if(null===r)return!1;var s=this.qa,e=_s(this,i),t=tl(this,r),l=e===nu,a=t===nu,h=i===r&&null!==i,u=this.Zb,f=this.Ze===Hd;this.Hi=!(!h||u)&&(f=!0);var c=this.wt===Vd||h;if(!u&&!h&&l&&a){if(l=!1,!c&&3<=s&&(c=this.getLinkPoint(n,i,e,!0,!1,o,r),a=this.getLinkPoint(o,r,t,!1,!1,n,i),l=this.adjustPoints(0,c,s-1,a))&&(c=this.getLinkPoint(n,i,e,!0,!1,o,r),a=this.getLinkPoint(o,r,t,!1,!1,n,i),this.adjustPoints(0,c,s-1,a)),!l)if(this.Hp(),f){var s=this.getLinkPoint(n,i,e,!0,!1,o,r),c=this.getLinkPoint(o,r,t,!1,!1,n,i),l=c.x-s.x,a=c.y-s.y,h=this.computeCurviness(),f=u=0,d=s.x+l/3,p=s.y+a/3,y=d,v=p;W(a,0)?v=0<l?v-h:v+h:(u=-l/a,f=Math.sqrt(h*h/(u*u+1)),0>h&&(f=-f),y=(0>a?-1:1)*f+d,v=u*(y-d)+p);var d=s.x+2*l/3,p=s.y+2*a/3,g=d,m=p;W(a,0)?m=0<l?m-h:m+h:(g=(0>a?-1:1)*f+d,m=u*(g-d)+p),this.Hp(),this.ji(s),this.hj(y,v),this.hj(g,m),this.ji(c),this.Vg(0,this.getLinkPoint(n,i,e,!0,!1,o,r)),this.Vg(3,this.getLinkPoint(o,r,t,!1,!1,n,i))}else e=this.getLinkPoint(n,i,e,!0,!1,o,r),t=this.getLinkPoint(o,r,t,!1,!1,n,i),this.hasCurviness()?(c=t.x-e.x,o=t.y-e.y,r=this.computeCurviness(),n=e.x+c/2,i=e.y+o/2,s=n,l=i,W(o,0)?l=0<c?l-r:l+r:(c=-c/o,s=Math.sqrt(r*r/(c*c+1)),0>r&&(s=-s),s=(0>o?-1:1)*s+n,l=c*(s-n)+i),this.ji(e),this.hj(s,l)):this.ji(e),this.ji(t)}else{f=this.Xl,c&&(u&&f||h)&&this.Hp();var b=h?this.computeCurviness():0,f=this.getLinkPoint(n,i,e,!0,u,o,r),d=y=p=0;if((u||!l||h)&&(v=this.computeEndSegmentLength(n,i,e,!0),d=this.getLinkDirection(n,i,f,e,!0,u,o,r),h&&(l||e.L(t)||!u&&1===e.x+t.x&&1===e.y+t.y)&&(d-=u?90:30,0>b&&(d-=180)),0>d?d+=360:360<=d&&(d-=360),h&&(v+=Math.abs(b)*(u?1:2)),0===d?p=v:90===d?y=v:180===d?p=-v:270===d?y=-v:(p=v*Math.cos(d*Math.PI/180),y=v*Math.sin(d*Math.PI/180)),e.Od()&&h)){var w=i.Xa(lu,Yh.K()),k=Yh.xb(w.x+1e3*p,w.y+1e3*y);this.getLinkPointFromPoint(n,i,w,k,!0,f),Yh.v(w),Yh.v(k)}var v=this.getLinkPoint(o,r,t,!1,u,n,i),M=m=g=0;(u||!a||h)&&(w=this.computeEndSegmentLength(o,r,t,!1),M=this.getLinkDirection(o,r,v,t,!1,u,n,i),h&&(a||e.L(t)||!u&&1===e.x+t.x&&1===e.y+t.y)&&(M+=u?0:30,0>b&&(M+=180)),0>M?M+=360:360<=M&&(M-=360),h&&(w+=Math.abs(b)*(u?1:2)),0===M?g=w:90===M?m=w:180===M?g=-w:270===M?m=-w:(g=w*Math.cos(M*Math.PI/180),m=w*Math.sin(M*Math.PI/180)),t.Od()&&h&&(w=r.Xa(lu,Yh.K()),k=Yh.xb(w.x+1e3*g,w.y+1e3*m),this.getLinkPointFromPoint(o,r,w,k,!1,v),Yh.v(w),Yh.v(k))),t=f,(u||!l||h)&&(t=new x(f.x+p,f.y+y)),e=v,(u||!a||h)&&(e=new x(v.x+g,v.y+m)),!c&&!u&&l&&3<s&&this.adjustPoints(0,f,s-2,e)?this.Vg(s-1,v):!c&&!u&&a&&3<s&&this.adjustPoints(1,t,s-1,v)?this.Vg(0,f):!c&&(u?6<=s:4<s)&&this.adjustPoints(1,t,s-2,e)?(this.Vg(0,f),this.Vg(s-1,v)):(this.Hp(),this.ji(f),(u||!l||h)&&this.ji(t),u&&this.addOrthoPoints(t,d,e,M,n,o),(u||!a||h)&&this.ji(e),this.ji(v))}return!0},Js.prototype.getLinkPointFromPoint=function(t,n,i,e,o,r){if(void 0===r&&(r=new x),null===t||null===n)return r.assign(i),r;t.isVisible()||null!==(o=t.findVisibleNode())&&o!==t&&(n=o.port);var s=o=0,l=0,a=0;if(t=null,o=n.O,null===o||o.Zg()||(o=o.O),null===o)o=e.x,s=e.y,l=i.x,a=i.y;else{t=o.qh,o=1/(t.m11*t.m22-t.m12*t.m21);var l=t.m22*o,a=-t.m12*o,h=-t.m21*o,u=t.m11*o,f=o*(t.m21*t.dy-t.m22*t.dx),c=o*(t.m12*t.dx-t.m11*t.dy);o=e.x*l+e.y*h+f,s=e.x*a+e.y*u+c,l=i.x*l+i.y*h+f,a=i.x*a+i.y*u+c}return n.An(o,s,l,a,r),null!==t&&r.transform(t),r},Js.prototype.getLinkPoint=function(t,n,i,e,o,r,s,l){if(void 0===l&&(l=new x),i.fd())return n.Xa(i,l),l;if(i.tj()){var a=Zs(this,n);if(null!==a){if(l.assign(a.eq),o&&this.by===Gd){var h=Zs(this,s);if(null!==h&&a.tn<h.tn){var a=Yh.K(),h=Yh.K(),u=new P(n.Xa(eu,a),n.Xa(fu,h)),f=this.computeSpot(!e);t=this.getLinkPoint(r,s,f,!e,o,t,n,h),(i.rj(wu)||i.rj(ku))&&t.y>=u.y&&t.y<=u.y+u.height?l.y=t.y:(i.rj(xu)||i.rj(Mu))&&t.x>=u.x&&t.x<=u.x+u.width&&(l.x=t.x),Yh.v(a),Yh.v(h)}}return l}}return i=n.Xa(lu,Yh.K()),a=r=null,this.qa>(o?6:2)?(a=e?this.l(1):this.l(this.qa-2),o&&(a=Qs(i,a.copy()))):(r=Yh.K(),a=s.Xa(lu,r),o&&(a=Qs(i,a)),Yh.v(r)),this.getLinkPointFromPoint(t,n,i,a,e,l),Yh.v(i),l},Js.prototype.getLinkDirection=function(t,n,i,e,o,r,s,l){t:if(e.fd())i=e.x>e.y?e.x>1-e.y?0:e.x<1-e.y?270:315:e.x<e.y?e.x>1-e.y?90:e.x<1-e.y?180:135:.5>e.x?225:.5<e.x?45:0;else{if(e.tj()){var a=Zs(this,n);if(null!==a)switch(a.xe){case Yh.kd:i=270;break t;case Yh.Rc:i=180;break t;default:case Yh.$c:i=0;break t;case Yh.Zc:i=90;break t}}var a=n.Xa(lu,Yh.K()),h=null,u=null;this.qa>(r?6:2)?(u=o?this.l(1):this.l(this.qa-2),u=r?Qs(a,u.copy()):i):(h=Yh.K(),u=l.Xa(lu,h),Yh.v(h)),i=0,i=Math.abs(u.x-a.x)>Math.abs(u.y-a.y)?u.x>=a.x?0:180:u.y>=a.y?90:270,Yh.v(a)}switch(e.Od()&&s.ni(t)&&360<=(i+=180)&&(i-=360),t=Bd,t=o?this.Tt:this.Nu,t===Bd&&(t=o?n.Tt:n.Nu),t){case qd:n=n.Tl(),i+=n,360<=i&&(i-=360);break;case Bd:case zd:if(e.xI())break;if(0===(n=n.Tl()))break;45<=n&&135>n?i+=90:135<=n&&225>n?i+=180:225<=n&&315>n&&(i+=270),360<=i&&(i-=360)}return i},Js.prototype.computeEndSegmentLength=function(t,n,i,e){return null!==n&&i.tj()&&null!==(t=Zs(this,n))?t.ix:(t=NaN,t=e?this.Sl:this.km,null!==n&&isNaN(t)&&(t=e?n.Sl:n.km),isNaN(t)&&(t=10),t)},Js.prototype.computeSpot=function(t){return t?_s(this,this.Jc):tl(this,this.jd)},Js.prototype.computeOtherPoint=function(t,n){var i,e=n.Xa(lu);return i=n.Bs,i=null!==i?Cl(i,this):null,null!==i&&(e=i.eq),e},Js.prototype.computeShortLength=function(t){if(t){if(t=this.Ut,isNaN(t)){var n=this.Jc;null!==n&&(t=n.Ut)}}else t=this.Ou,isNaN(t)&&null!==(n=this.jd)&&(t=n.Ou);return isNaN(t)?0:t},Js.prototype.zk=function(t,n,i,e,o,r){if(!1===this.Ug)return!1;void 0===n&&(n=null),void 0===i&&(i=null);var s=r;if(void 0===r&&(s=Yh.Gf(),s.reset()),s.multiply(this.transform),this.qn(t,s))return pr(this,n,i,o),void 0===r&&Yh.ue(s),!0;if(this.Uf(t,s)){var l=!1;if(!this.Fn)for(var a=this.xa.n,h=a.length;h--;){var u=a[h];if(u.visible||u===this.Zf){var c=u.W,p=this.Ia;if(!(c.x>p.width||c.y>p.height||0>c.x+c.width||0>c.y+c.height)){if(c=Yh.Gf(),c.set(s),u instanceof tr)l=u.zk(t,n,i,e,o,c);else if(this.path===u){if(u instanceof Cr){var l=u,y=t,v=e,p=c;if(!1===l.Ug)l=!1;else if(p.multiply(l.transform),v)t:{var g=y,m=p;if(l.qn(g,m))l=!0;else{if(void 0===m&&(m=l.transform,g.wk(l.W))){l=!0;break t}var p=g.left,y=g.right,v=g.top,g=g.bottom,b=Yh.K(),x=Yh.K(),w=Yh.K(),k=Yh.Gf();k.set(m),k.CF(l.transform),k.ux(),x.x=y,x.y=v,x.transform(k),b.x=p,b.y=v,b.transform(k),m=!1,Or(l,b,x,w)?m=!0:(b.x=y,b.y=g,b.transform(k),Or(l,b,x,w)?m=!0:(x.x=p,x.y=g,x.transform(k),Or(l,b,x,w)?m=!0:(b.x=p,b.y=v,b.transform(k),Or(l,b,x,w)&&(m=!0)))),Yh.ue(k),Yh.v(b),Yh.v(x),Yh.v(w),l=m}}else l=l.qn(y,p)}}else l=Lo(u,t,e,c);l&&(null!==n&&(u=n(u)),u&&(null===i||i(u))&&(o instanceof d&&o.add(u),o instanceof f&&o.add(u))),Yh.ue(c)}}}return void 0===r&&Yh.ue(s),l||null!==this.background||null!==this.jn}return void 0===r&&Yh.ue(s),!1},Yh.u(Js,{Zb:"isOrthogonal"},function(){return 2==(2&this.Um.value)}),Yh.u(Js,{Xl:"isAvoiding"},function(){return 4==(4&this.Um.value)}),Js.prototype.computeCurve=function(){if(null===this.Hi){var t=this.Jc,n=this.Zb;this.Hi=null!==t&&t===this.jd&&!n}return this.Hi?Hd:this.Ze},Js.prototype.computeCorner=function(){if(this.Ze===Hd)return 0;var t=this.bA;return(isNaN(t)||0>t)&&(t=10),t},Js.prototype.findMidLabel=function(){for(var t=this.path,n=this.xa.n,i=n.length,e=0;e<i;e++){var o=n[e];if(o!==t&&!o.Wf&&(-1/0===o.Me||isNaN(o.Me)))return o}for(t=this.Xf;t.next();)if(n=t.value,-1/0===n.Me||isNaN(n.Me))return n;return null},Js.prototype.computeSpacing=function(){if(!this.isVisible())return 0;var t;t=Math.max(14,this.computeThickness());var n=this.Jc,i=this.jd;if(null!==n&&null!==i){var e=this.findMidLabel();if(null!==e){var o=e.Ia,r=e.margin,s=isNaN(o.width)?30:o.width*e.scale+r.left+r.right,o=isNaN(o.height)?14:o.height*e.scale+r.top+r.bottom,e=e.qq;e===Xd||e===_d||e===Zd?t=Math.max(t,o):e===Qd||e===np||e===$d||e===tp?t=Math.max(t,s):(n=n.Xa(lu).Ob(i.Xa(lu))/180*Math.PI,t=Math.max(t,Math.abs(Math.sin(n)*s)+Math.abs(Math.cos(n)*o)+1)),this.Ze===Hd&&(t*=1.333)}}return t},Js.prototype.arrangeBundledLinks=function(t,n){if(n)for(var i=0;i<t.length;i++)t[i].Yb()},Js.prototype.computeCurviness=function(){var t=this.ax;if(isNaN(t)){var t=16,n=this.ui;if(null!==n){for(var i=Yh.lb(),e=0,o=n.links,r=0;r<o.length;r++){var s=o[r],s=s.computeSpacing();i.push(s),e+=s}for(e=-e/2,r=0;r<o.length;r++){if((s=o[r])===this){t=e+i[r]/2;break}e+=i[r]}n.hq===this.Y&&(t=-t),Yh.wa(i)}}return t},Js.prototype.computeThickness=function(){if(!this.isVisible())return 0;var t=this.path;return null!==t?Math.max(t.kb,1):1},Js.prototype.hasCurviness=function(){return!isNaN(this.ax)||null!==this.ui},Js.prototype.adjustPoints=function(t,n,i,e){var o=this.wt;if(this.Zb){if(o===Yd)return!1;o===Wd&&(o=Jd)}switch(o){case Yd:var r=this.l(t),s=this.l(i);if(!r.Ic(n)||!s.Ic(e)){var o=r.x,r=r.y,l=s.x-o,a=s.y-r,h=Math.sqrt(l*l+a*a);if(!X(h,0)){var u=0;X(l,0)?u=0>a?-Math.PI/2:Math.PI/2:(u=Math.atan(a/Math.abs(l)),0>l&&(u=Math.PI-u));var s=n.x,f=n.y,a=e.x-s,c=e.y-f,d=Math.sqrt(a*a+c*c),l=0;for(X(a,0)?l=0>c?-Math.PI/2:Math.PI/2:(l=Math.atan(c/Math.abs(a)),0>a&&(l=Math.PI-l)),h=d/h,u=l-u,this.Vg(t,n),t+=1;t<i;t++)n=this.l(t),l=n.x-o,a=n.y-r,n=Math.sqrt(l*l+a*a),X(n,0)||(c=0,X(l,0)?c=0>a?-Math.PI/2:Math.PI/2:(c=Math.atan(a/Math.abs(l)),0>l&&(c=Math.PI-c)),l=c+u,n*=h,this.ca(t,s+n*Math.cos(l),f+n*Math.sin(l)));this.Vg(i,e)}}return!0;case Wd:if(r=this.l(t),f=this.l(i),!r.Ic(n)||!f.Ic(e)){var o=r.x,r=r.y,s=f.x,f=f.y,h=(s-o)*(s-o)+(f-r)*(f-r),l=n.x,u=n.y,a=e.x,c=e.y,d=0,p=1;for(0!=a-l?(d=(c-u)/(a-l),p=Math.sqrt(1+1/(d*d))):d=9e9,this.Vg(t,n),t+=1;t<i;t++){n=this.l(t);var y=n.x,v=n.y,g=.5;0!==h&&(g=((o-y)*(o-s)+(r-v)*(r-f))/h);var m=o+g*(s-o),b=r+g*(f-r);n=Math.sqrt((y-m)*(y-m)+(v-b)*(v-b)),v<d*(y-m)+b&&(n=-n),0<d&&(n=-n),y=l+g*(a-l),g=u+g*(c-u),0!==d?(n=y+n/p,this.ca(t,n,g-(n-y)/d)):this.ca(t,y,g+n)}this.Vg(i,e)}return!0;case Jd:return this.Zb&&(o=this.l(t),r=this.l(t+1),s=this.l(t+2),l=r.x,u=r.y,f=l,h=u,W(o.y,r.y)?W(r.x,s.x)?u=n.y:W(r.y,s.y)&&(l=n.x):W(o.x,r.x)&&(W(r.y,s.y)?l=n.x:W(r.x,s.x)&&(u=n.y)),this.ca(t+1,l,u),o=this.l(i),r=this.l(i-1),s=this.l(i-2),l=r.x,u=r.y,a=l,c=u,W(o.y,r.y)?W(r.x,s.x)?u=e.y:W(r.y,s.y)&&(l=e.x):W(o.x,r.x)&&(W(r.y,s.y)?l=e.x:W(r.x,s.x)&&(u=e.y)),this.ca(i-1,l,u),nl(this))?(this.ca(t+1,f,h),this.ca(i-1,a,c),i=!1):(this.Vg(t,n),this.Vg(i,e),i=!0),i;default:return!1}},Js.prototype.addOrthoPoints=function(t,n,i,e,o,r){n=-45<=n&&45>n?0:45<=n&&135>n?90:135<=n&&225>n?180:270,e=-45<=e&&45>e?0:45<=e&&135>e?90:135<=e&&225>e?180:270;var s=o.W.copy(),l=r.W.copy();if(s.I()&&l.I()){s.yf(8,8),l.yf(8,8),s.si(t),l.si(i);var a,h;0===n?i.x>t.x||270===e&&i.y<t.y&&l.right>t.x||90===e&&i.y>t.y&&l.right>t.x?(a=new x(i.x,t.y),h=new x(i.x,(t.y+i.y)/2),180===e?(a.x=this.computeMidOrthoPosition(t.x,i.x,!1),h.x=a.x,h.y=i.y):270===e&&i.y<t.y||90===e&&i.y>t.y?(a.x=t.x<l.left?this.computeMidOrthoPosition(t.x,l.left,!1):t.x<l.right&&(270===e&&t.y<l.top||90===e&&t.y>l.bottom)?this.computeMidOrthoPosition(t.x,i.x,!1):l.right,h.x=a.x,h.y=i.y):0===e&&t.x<l.left&&t.y>l.top&&t.y<l.bottom&&(a.x=t.x,a.y=t.y<i.y?Math.min(i.y,l.top):Math.max(i.y,l.bottom),h.y=a.y)):(a=new x(t.x,i.y),h=new x((t.x+i.x)/2,i.y),(180===e||90===e&&i.y<s.top||270===e&&i.y>s.bottom)&&(180===e&&(l.Ha(t)||s.Ha(i))?a.y=this.computeMidOrthoPosition(t.y,i.y,!0):i.y<t.y&&(180===e||90===e)?a.y=this.computeMidOrthoPosition(s.top,Math.max(i.y,l.bottom),!0):i.y>t.y&&(180===e||270===e)&&(a.y=this.computeMidOrthoPosition(s.bottom,Math.min(i.y,l.top),!0)),h.x=i.x,h.y=a.y),a.y>s.top&&a.y<s.bottom&&(i.x>=s.left&&i.x<=t.x||t.x<=l.right&&t.x>=i.x?90!==e&&270!==e||(a=new x(Math.max((t.x+i.x)/2,t.x),t.y),h=new x(a.x,i.y)):(a.y=270===e||(0===e||180===e)&&i.y<t.y?Math.min(i.y,0===e?s.top:Math.min(s.top,l.top)):Math.max(i.y,0===e?s.bottom:Math.max(s.bottom,l.bottom)),h.x=i.x,h.y=a.y))):180===n?i.x<t.x||270===e&&i.y<t.y&&l.left<t.x||90===e&&i.y>t.y&&l.left<t.x?(a=new x(i.x,t.y),h=new x(i.x,(t.y+i.y)/2),0===e?(a.x=this.computeMidOrthoPosition(t.x,i.x,!1),h.x=a.x,h.y=i.y):270===e&&i.y<t.y||90===e&&i.y>t.y?(a.x=t.x>l.right?this.computeMidOrthoPosition(t.x,l.right,!1):t.x>l.left&&(270===e&&t.y<l.top||90===e&&t.y>l.bottom)?this.computeMidOrthoPosition(t.x,i.x,!1):l.left,h.x=a.x,h.y=i.y):180===e&&t.x>l.right&&t.y>l.top&&t.y<l.bottom&&(a.x=t.x,a.y=t.y<i.y?Math.min(i.y,l.top):Math.max(i.y,l.bottom),h.y=a.y)):(a=new x(t.x,i.y),h=new x((t.x+i.x)/2,i.y),(0===e||90===e&&i.y<s.top||270===e&&i.y>s.bottom)&&(0===e&&(l.Ha(t)||s.Ha(i))?a.y=this.computeMidOrthoPosition(t.y,i.y,!0):i.y<t.y&&(0===e||90===e)?a.y=this.computeMidOrthoPosition(s.top,Math.max(i.y,l.bottom),!0):i.y>t.y&&(0===e||270===e)&&(a.y=this.computeMidOrthoPosition(s.bottom,Math.min(i.y,l.top),!0)),h.x=i.x,h.y=a.y),a.y>s.top&&a.y<s.bottom&&(i.x<=s.right&&i.x>=t.x||t.x>=l.left&&t.x<=i.x?90!==e&&270!==e||(a=new x(Math.min((t.x+i.x)/2,t.x),t.y),h=new x(a.x,i.y)):(a.y=270===e||(0===e||180===e)&&i.y<t.y?Math.min(i.y,180===e?s.top:Math.min(s.top,l.top)):Math.max(i.y,180===e?s.bottom:Math.max(s.bottom,l.bottom)),h.x=i.x,h.y=a.y))):90===n?i.y>t.y||180===e&&i.x<t.x&&l.bottom>t.y||0===e&&i.x>t.x&&l.bottom>t.y?(a=new x(t.x,i.y),h=new x((t.x+i.x)/2,i.y),270===e?(a.y=this.computeMidOrthoPosition(t.y,i.y,!0),h.x=i.x,h.y=a.y):180===e&&i.x<t.x||0===e&&i.x>t.x?(a.y=t.y<l.top?this.computeMidOrthoPosition(t.y,l.top,!0):t.y<l.bottom&&(180===e&&t.x<l.left||0===e&&t.x>l.right)?this.computeMidOrthoPosition(t.y,i.y,!0):l.bottom,h.x=i.x,h.y=a.y):90===e&&t.y<l.top&&t.x>l.left&&t.x<l.right&&(a.x=t.x<i.x?Math.min(i.x,l.left):Math.max(i.x,l.right),a.y=t.y,h.x=a.x)):(a=new x(i.x,t.y),h=new x(i.x,(t.y+i.y)/2),(270===e||0===e&&i.x<s.left||180===e&&i.x>s.right)&&(270===e&&(l.Ha(t)||s.Ha(i))?a.x=this.computeMidOrthoPosition(t.x,i.x,!1):i.x<t.x&&(270===e||0===e)?a.x=this.computeMidOrthoPosition(s.left,Math.max(i.x,l.right),!1):i.x>t.x&&(270===e||180===e)&&(a.x=this.computeMidOrthoPosition(s.right,Math.min(i.x,l.left),!1)),h.x=a.x,h.y=i.y),a.x>s.left&&a.x<s.right&&(i.y>=s.top&&i.y<=t.y||t.y<=l.bottom&&t.y>=i.y?0!==e&&180!==e||(a=new x(t.x,Math.max((t.y+i.y)/2,t.y)),h=new x(i.x,a.y)):(a.x=180===e||(90===e||270===e)&&i.x<t.x?Math.min(i.x,90===e?s.left:Math.min(s.left,l.left)):Math.max(i.x,90===e?s.right:Math.max(s.right,l.right)),h.x=a.x,h.y=i.y))):i.y<t.y||180===e&&i.x<t.x&&l.top<t.y||0===e&&i.x>t.x&&l.top<t.y?(a=new x(t.x,i.y),h=new x((t.x+i.x)/2,i.y),90===e?(a.y=this.computeMidOrthoPosition(t.y,i.y,!0),h.x=i.x,h.y=a.y):180===e&&i.x<t.x||0===e&&i.x>=t.x?(a.y=t.y>l.bottom?this.computeMidOrthoPosition(t.y,l.bottom,!0):t.y>l.top&&(180===e&&t.x<l.left||0===e&&t.x>l.right)?this.computeMidOrthoPosition(t.y,i.y,!0):l.top,h.x=i.x,h.y=a.y):270===e&&t.y>l.bottom&&t.x>l.left&&t.x<l.right&&(a.x=t.x<i.x?Math.min(i.x,l.left):Math.max(i.x,l.right),a.y=t.y,h.x=a.x)):(a=new x(i.x,t.y),h=new x(i.x,(t.y+i.y)/2),(90===e||0===e&&i.x<s.left||180===e&&i.x>s.right)&&(90===e&&(l.Ha(t)||s.Ha(i))?a.x=this.computeMidOrthoPosition(t.x,i.x,!1):i.x<t.x&&(90===e||0===e)?a.x=this.computeMidOrthoPosition(s.left,Math.max(i.x,l.right),!1):i.x>t.x&&(90===e||180===e)&&(a.x=this.computeMidOrthoPosition(s.right,Math.min(i.x,l.left),!1)),h.x=a.x,h.y=i.y),a.x>s.left&&a.x<s.right&&(i.y<=s.bottom&&i.y>=t.y||t.y>=l.top&&t.y<=i.y?0!==e&&180!==e||(a=new x(t.x,Math.min((t.y+i.y)/2,t.y)),h=new x(i.x,a.y)):(a.x=180===e||(90===e||270===e)&&i.x<t.x?Math.min(i.x,270===e?s.left:Math.min(s.left,l.left)):Math.max(i.x,270===e?s.right:Math.max(s.right,l.right)),h.x=a.x,h.y=i.y)));var u=a,f=h;if(this.Xl){var c,d=this.g;if((c=null===d)||(d.Oa.lf?c=!1:(c=d.$a,c=!(c instanceof yn)||(!c.Ew||c.rI)),c=!c),c||s.Ha(i)&&!r.ni(o)||l.Ha(t)&&!o.ni(r)||o===r||this.layer.Kc)n=!1;else{var p=no(d,!0,this.Pa,null);if(p.cq(Math.min(t.x,u.x),Math.min(t.y,u.y),Math.abs(t.x-u.x),Math.abs(t.y-u.y))&&p.cq(Math.min(u.x,f.x),Math.min(u.y,f.y),Math.abs(u.x-f.x),Math.abs(u.y-f.y))&&p.cq(Math.min(f.x,i.x),Math.min(f.y,i.y),Math.abs(f.x-i.x),Math.abs(f.y-i.y)))n=!1;else{o=t,r=i;var y=c=null;if(d.BA){d=p.eb.copy(),d.yf(-p.mn,-p.ln);var v=Yh.K();gl(p,t.x,t.y)||(at(d.x,d.y,d.x+d.width,d.y+d.height,t.x,t.y,u.x,u.y,v)?(c=t=v.copy(),n=v.Ob(u)):at(d.x,d.y,d.x+d.width,d.y+d.height,u.x,u.y,f.x,f.y,v)?(c=t=v.copy(),n=v.Ob(f)):at(d.x,d.y,d.x+d.width,d.y+d.height,f.x,f.y,i.x,i.y,v)&&(c=t=v.copy(),n=v.Ob(i))),gl(p,i.x,i.y)||(at(d.x,d.y,d.x+d.width,d.y+d.height,i.x,i.y,f.x,f.y,v)?(y=i=v.copy(),e=f.Ob(v)):at(d.x,d.y,d.x+d.width,d.y+d.height,f.x,f.y,u.x,u.y,v)?(y=i=v.copy(),e=u.Ob(v)):at(d.x,d.y,d.x+d.width,d.y+d.height,u.x,u.y,t.x,t.y,v)&&(y=i=v.copy(),e=t.Ob(v))),Yh.v(v)}s=s.copy().Hh(l),s.yf(2*p.mn,2*p.ln),Pl(p,t,n,i,e,s),l=ml(p,i.x,i.y),!p.abort&&999999<=l&&(xl(p),l=p.jG,s.yf(p.mn*l,p.ln*l),Pl(p,t,n,i,e,s),l=ml(p,i.x,i.y)),!p.abort&&999999<=l&&(xl(p),l=p.vF,s.yf(p.mn*l,p.ln*l),Pl(p,t,n,i,e,s),l=ml(p,i.x,i.y)),!p.abort&&999999<=l&&p.AG&&(xl(p),Pl(p,t,n,i,e,p.eb),l=ml(p,i.x,i.y)),!p.abort&&999999>l&&0!==ml(p,i.x,i.y)?(il(this,p,i.x,i.y,e,!0),s=this.l(2),4>this.qa?(0===n||180===n?(s.x=t.x,s.y=i.y):(s.x=i.x,s.y=t.y),this.ca(2,s.x,s.y),this.w(3,s.x,s.y)):(i=this.l(3),0===n||180===n?W(s.x,i.x)?(s=0===n?Math.max(s.x,t.x):Math.min(s.x,t.x),this.ca(2,s,t.y),this.ca(3,s,i.y)):W(s.y,i.y)?(Math.abs(t.y-s.y)<=p.ln/2&&(this.ca(2,s.x,t.y),this.ca(3,i.x,t.y)),this.w(2,s.x,t.y)):this.ca(2,t.x,s.y):90!==n&&270!==n||(W(s.y,i.y)?(s=90===n?Math.max(s.y,t.y):Math.min(s.y,t.y),this.ca(2,t.x,s),this.ca(3,i.x,s)):W(s.x,i.x)?(Math.abs(t.x-s.x)<=p.mn/2&&(this.ca(2,t.x,s.y),this.ca(3,t.x,i.y)),this.w(2,t.x,s.y)):this.ca(2,s.x,t.y))),null!==c&&(t=this.l(1),i=this.l(2),t.x!==i.x&&t.y!==i.y?0===n||180===n?this.w(2,t.x,i.y):this.w(2,i.x,t.y):0===n||180===n?this.w(2,o.x,c.y):this.w(2,c.x,o.y)),null!==y&&(0===e||180===e?this.hj(r.x,y.y):this.hj(y.x,r.y)),n=!0):n=!1}}}else n=!1;n||(this.ji(a),this.ji(h))}},Js.prototype.computeMidOrthoPosition=function(t,n){if(this.hasCurviness()){return(t+n)/2+this.computeCurviness()}return(t+n)/2},Js.prototype.findClosestSegment=function(t){var n=t.x;t=t.y;for(var i=this.l(0),e=this.l(1),o=$h(n,t,i.x,i.y,e.x,e.y),r=0,s=1;s<this.qa-1;s++){var i=this.l(s+1),l=$h(n,t,e.x,e.y,i.x,i.y),e=i;l<o&&(r=s,o=l)}return r},Js.prototype.Ke=function(){this.Va=null},Yh.u(Js,{hf:"geometry"},function(){return null===this.Va&&(this.bo(),this.Va=this.makeGeometry()),this.Va}),Js.prototype.nu=function(t){if(!t){if(!1===this.$g)return;if(t=this.Jd(),null!==this.Va&&(null===t||null!==t.hf))return}if(this.Va=this.makeGeometry(),null!==(t=this.path)){t.Va=this.Va;for(var n=this.xa.n,i=n.length,e=0;e<i;e++){var o=n[e];o!==t&&o.Wf&&o instanceof Cr&&(o.Va=this.Va)}}},Js.prototype.makeGeometry=function(){var t=this.qa;if(2>t)return new mt(of);var n=!1,i=this.g;null!==i&&hl(this)&&i.al.contains(this)&&null!==this.qw&&(n=!0);var e=i=0,o=this.l(0).copy(),r=o.copy(),i=this.bd.n,s=this.computeCurve();if(s===Hd&&3<=t&&!X(this.vq,0))if(3===t)var l=this.l(1),i=Math.min(o.x,l.x),e=Math.min(o.y,l.y),l=this.l(2),i=Math.min(i,l.x),e=Math.min(e,l.y);else{if(this.Zb)for(l=0;l<t;l++)e=i[l],r.x=Math.min(e.x,r.x),r.y=Math.min(e.y,r.y);else for(l=3;l<t;l+=3)l+3>=t&&(l=t-1),i=this.l(l),r.x=Math.min(i.x,r.x),r.y=Math.min(i.y,r.y);i=r.x,e=r.y}else{for(l=0;l<t;l++)e=i[l],r.x=Math.min(e.x,r.x),r.y=Math.min(e.y,r.y);i=r.x,e=r.y}if(i-=this.Gz.x,e-=this.Gz.y,o.x-=i,o.y-=e,2!==t||hl(this)){var a=Yh.s();if(0!==this.computeShortLength(!0)&&(o=ol(this,o,!0,r)),Zr(a,o.x,o.y,!1,!1),s===Hd&&3<=t&&!X(this.vq,0))if(3===t)l=this.l(1),t=l.x-i,n=l.y-e,l=this.l(2).copy(),l.x-=i,l.y-=e,0!==this.computeShortLength(!1)&&(l=ol(this,l,!1,r)),ns(a,t,n,t,n,l.x,l.y);else if(this.Zb){for(var r=new x(i,e),o=this.l(1).copy(),s=new x(i,e),t=new x(i,e),n=this.l(0),h=null,u=this.vq/3,l=1;l<this.qa-1;l++){var h=this.l(l),f=n,c=h,d=this.l(rl(this,h,l,!1));if(!(X(f.x,c.x)&&X(c.x,d.x)||X(f.y,c.y)&&X(c.y,d.y))){var p=u,y=s,v=t;isNaN(p)&&(p=this.vq/3);var g=f.x,f=f.y,m=c.x,c=c.y,b=d.x,d=d.y,w=p*el(g,f,m,c),p=p*el(m,c,b,d);X(f,c)&&X(m,b)&&(m>g?d>c?(y.x=m-w,y.y=c-w,v.x=m+p,v.y=c+p):(y.x=m-w,y.y=c+w,v.x=m+p,v.y=c-p):d>c?(y.x=m+w,y.y=c-w,v.x=m-p,v.y=c+p):(y.x=m+w,y.y=c+w,v.x=m-p,v.y=c-p)),X(g,m)&&X(c,d)&&(c>f?(b>m?(y.x=m-w,y.y=c-w,v.x=m+p):(y.x=m+w,y.y=c-w,v.x=m-p),v.y=c+p):(b>m?(y.x=m-w,y.y=c+w,v.x=m+p):(y.x=m+w,y.y=c+w,v.x=m-p),v.y=c-p)),(X(g,m)&&X(m,b)||X(f,c)&&X(c,d))&&(g=.5*(g+b),f=.5*(f+d),y.x=g,y.y=f,v.x=g,v.y=f),1===l?(o.x=.5*(n.x+h.x),o.y=.5*(n.y+h.y)):2===l&&X(n.x,this.l(0).x)&&X(n.y,this.l(0).y)&&(o.x=.5*(n.x+h.x),o.y=.5*(n.y+h.y)),ns(a,o.x-i,o.y-e,s.x-i,s.y-e,h.x-i,h.y-e),r.set(s),o.set(t),n=h}}l=n.x,n=n.y,r=this.l(this.qa-1),0!==this.computeShortLength(!1)&&(r=ol(this,r.copy(),!1,qu)),l=.5*(l+r.x),n=.5*(n+r.y),ns(a,t.x-i,t.y-e,l-i,n-e,r.x-i,r.y-e)}else for(l=3;l<t;l+=3)n=this.l(l-2),l+3>=t&&(l=t-1),r=this.l(l-1),o=this.l(l),l===t-1&&0!==this.computeShortLength(!1)&&(o=ol(this,o.copy(),!1,qu)),ns(a,n.x-i,n.y-e,r.x-i,r.y-e,o.x-i,o.y-e);else{for(r=Yh.K(),r.assign(this.l(0)),l=1;l<t;){if(l=rl(this,r,l,1<l),y=this.l(l),l>=t-1){r!==y&&(0!==this.computeShortLength(!1)&&(y=ol(this,y.copy(),!1,qu)),sl(this,a,-i,-e,r,y,n));break}l=rl(this,y,l+1,l<t-3),o=a,s=-i,h=-e,u=r,v=this.l(l),g=r,f=n,W(u.y,y.y)&&W(y.x,v.x)?(p=this.computeCorner(),p=Math.min(p,Math.abs(y.x-u.x)/2),p=m=Math.min(p,Math.abs(v.y-y.y)/2),W(p,0)?(sl(this,o,s,h,u,y,f),g.assign(y)):(c=y.x,b=y.y,d=c,w=b,c=y.x>u.x?y.x-p:y.x+p,w=v.y>y.y?y.y+m:y.y-m,sl(this,o,s,h,u,new x(c,b),f),is(o,y.x+s,y.y+h,d+s,w+h),g.m(d,w))):W(u.x,y.x)&&W(y.y,v.y)?(p=this.computeCorner(),m=Math.min(p,Math.abs(y.y-u.y)/2),m=p=Math.min(m,Math.abs(v.x-y.x)/2),W(p,0)?(sl(this,o,s,h,u,y,f),g.assign(y)):(c=y.x,w=b=y.y,b=y.y>u.y?y.y-m:y.y+m,d=v.x>y.x?y.x+p:y.x-p,sl(this,o,s,h,u,new x(c,b),f),is(o,y.x+s,y.y+h,d+s,w+h),g.m(d,w))):(sl(this,o,s,h,u,y,f),g.assign(y))}Yh.v(r)}i=a.o,Yh.q(a)}else a=this.l(1).copy(),a.x-=i,a.y-=e,0!==this.computeShortLength(!0)&&(o=ol(this,o,!0,r)),0!==this.computeShortLength(!1)&&(a=ol(this,a,!1,r)),i=new mt(of),i.ha=o.x,i.fa=o.y,i.C=a.x,i.D=a.y;return i},Yh.u(Js,{Nt:"firstPickIndex"},function(){var t;return 2>=this.qa?t=0:((t=this.Zb)||(t=this.computeSpot(!0)!==nu),t=t?1:0),t}),Yh.u(Js,{Fx:"lastPickIndex"},function(){var t=this.qa;if(0===t)t=0;else if(2>=t)t-=1;else{var n;(n=this.Zb)||(n=this.computeSpot(!1)!==nu),t=n?t-2:t-1}return t}),Js.prototype.usesSamePort=function(t){var n=this.qa,i=t.qa;if(0<n&&0<i){var e=this.l(0),o=t.l(0);if(e.Ic(o))return!0;if(n=this.l(n-1),t=t.l(i-1),n.Ic(t)||e.Ic(t)||n.Ic(o))return!0}else if(this.Y===t.Y||this.$===t.$||this.Y===t.$||this.$===t.Y)return!0;return!1},Js.prototype.isVisible=function(){if(!as.prototype.isVisible.call(this))return!1;var t=this.Pa,n=!0,i=this.g;null!==i&&(n=i.Pd);var e=this.Y;if(null!==e){if(this.Lc&&n&&!e.gd)return!1;if(e===t)return!0;for(i=e;null!==i;){if(i.Mc===this)return!0;i=i.Pa}if(null===(i=e.findVisibleNode())||i===t)return!1}if(null!==(e=this.$)){if(this.Lc&&!n&&!e.gd)return!1;if(e===t)return!0;for(i=e;null!==i;){if(i.Mc===this)return!0;i=i.Pa}if(null===(n=e.findVisibleNode())||n===t)return!1}return!0},Js.prototype.vd=function(t){if(as.prototype.vd.call(this,t),null!==this.ui&&this.ui.Zp(),null!==this.sf)for(var n=this.sf.i;n.next();)n.value.vd(t)},Yh.defineProperty(Js,{wt:"adjusting"},function(){return this.Fq},function(t){var n=this.Fq;n!==t&&(this.Fq=t,this.h("adjusting",n,t))}),Yh.defineProperty(Js,{bA:"corner"},function(){return this.$q},function(t){var n=this.$q;n!==t&&(this.$q=t,this.Ke(),this.h("corner",n,t))}),Yh.defineProperty(Js,{Ze:"curve"},function(){return this.cr},function(t){var n=this.cr;n!==t&&(this.cr=t,this.Yb(),this.Ke(),ul(this,n===Kd||n===Ud||t===Kd||t===Ud),this.h("curve",n,t))}),Yh.defineProperty(Js,{ax:"curviness"},function(){return this.dr},function(t){var n=this.dr;n!==t&&(this.dr=t,this.Yb(),this.Ke(),this.h("curviness",n,t))}),Yh.defineProperty(Js,{by:"routing"},function(){return this.Um},function(t){var n=this.Um;n!==t&&(this.Um=t,this.Hi=null,this.Yb(),ul(this,2==(2&n.value)||2==(2&t.value)),this.h("routing",n,t))}),Yh.defineProperty(Js,{vq:"smoothness"},function(){return this.at},function(t){var n=this.at;n!==t&&(this.at=t,this.Ke(),this.h("smoothness",n,t))}),yl.prototype.Zp=function(){if(!this.Mv){var t=this.links;0<t.length&&null!==(t=t[0].g)&&t.IC.add(this)}this.Mv=!0},yl.prototype.yB=function(){if(this.Mv){this.Mv=!1;var t=this.links;if(0<t.length){var n=t[0],i=n.g;n.arrangeBundledLinks(t,null===i||i.Gn),1===t.length&&(n.ui=null,t.length=0)}0===t.length&&(t=this.hq,null!==this&&null!==t.Ih&&t.Ih.remove(this),t=this.su,null!==this&&null!==t.Ih&&t.Ih.remove(this))}},Yh.$d(yl,{hq:!0,Rx:!0,su:!0,Sx:!0,links:!0,spacing:!0}),Yh.$d(vl,{group:!0,mB:!0,$t:!0,abort:!0,AG:!0,jG:!0,vF:!0}),vl.prototype.initialize=function(t){if(!(0>=t.width||0>=t.height)){var n=t.y,i=t.x+t.width,e=t.y+t.height;if(this.yg=Math.floor((t.x-this.ze)/this.ze)*this.ze,this.zg=Math.floor((n-this.Ae)/this.Ae)*this.Ae,this.$r=Math.ceil((i+2*this.ze)/this.ze)*this.ze,this.as=Math.ceil((e+2*this.Ae)/this.Ae)*this.Ae,t=1+(0|Math.ceil((this.$r-this.yg)/this.ze)),n=1+(0|Math.ceil((this.as-this.zg)/this.Ae)),null===this.md||this.Ap<t-1||this.Bp<n-1){for(i=[],e=0;e<=t;e++)i[e]=[];this.md=i,this.Ap=t-1,this.Bp=n-1}if(null!==this.md)for(t=0;t<=this.Ap;t++)for(n=0;n<=this.Bp;n++)this.md[t][n]=1e6}},Yh.u(vl,{eb:null},function(){return new P(this.yg,this.zg,this.$r-this.yg,this.as-this.zg)}),Yh.defineProperty(vl,{mn:null},function(){return this.ze},function(t){0<t&&t!==this.ze&&(this.ze=t,this.initialize(this.eb))}),Yh.defineProperty(vl,{ln:null},function(){return this.Ae},function(t){0<t&&t!==this.Ae&&(this.Ae=t,this.initialize(this.eb))}),vl.prototype.cq=function(t,n,i,e){if(t>this.$r||t+i<this.yg||n>this.as||n+e<this.zg)return!0;t=(t-this.yg)/this.ze|0,n=(n-this.zg)/this.Ae|0,i=Math.max(0,i)/this.ze+1|0;var o=Math.max(0,e)/this.Ae+1|0;if(0>t&&(i+=t,t=0),0>n&&(o+=n,n=0),0>i||0>o)return!0;for(e=0|Math.min(t+i-1,this.Ap),i=0|Math.min(n+o-1,this.Bp);t<=e;t++)for(o=n;o<=i;o++)if(0===this.md[t][o])return!1;return!0},Yh.$d(Tl,{Oc:!0,port:!0,cg:!0,gq:!0}),Tl.prototype.toString=function(){for(var t=this.cg,n=this.Oc.toString()+" "+t.length.toString()+":",i=0;i<t.length;i++){var e=t[i];null!==e&&(n+="\n  "+e.toString())}return n},Tl.prototype.Zp=function(){this.cg.length=0},Tl.prototype.bJ=function(t,n){return t===n?0:null===t?-1:null===n?1:t.xe<n.xe?-1:t.xe>n.xe?1:t.angle<n.angle?-1:t.angle>n.angle?1:0},Tl.prototype.computeEndSegmentLength=function(t){var n=t.link,i=n.computeEndSegmentLength(this.Oc,this.port,nu,n.Jc===this.port),e=t.Xp;if(0>e)return i;var o=t.tn;if(1>=o||!n.Zb)return i;var n=t.Px,r=t.eq;return t.xe!==Yh.Rc&&t.xe!==Yh.Zc||(e=o-1-e),((t=t.xe===Yh.Rc||t.xe===Yh.$c)?n.y<r.y:n.x<r.x)?i+8*e:(t?n.y===r.y:n.x===r.x)?i:i+8*(o-1-e)},Yh.$d(Nl,{link:!0,angle:!0,xe:!0,Px:!0,Xp:!0,tn:!0,eq:!0,ix:!0}),Nl.prototype.toString=function(){return this.link.toString()+" "+this.angle.toString()+" "+this.xe.toString()+":"+this.Xp.toString()+"/"+this.tn.toString()+" "+this.eq.toString()+" "+this.ix.toString()+" "+this.Px.toString()},jl.prototype.copy=function(){var t=new jl;return t.Sj=this.Sj.S(),t.pk=this.pk.S(),t.Qj=this.Qj,t.nk=this.nk,t.Pj=this.Pj,t.mk=this.mk,t.Rj=this.Rj,t.ok=this.ok,t.ur=this.ur,t.kt=this.kt,t.vr=this.vr,t.lt=this.lt,t},Yh.Ka(Ll,As),Yh.ga("Group",Ll),Ll.prototype.cloneProtected=function(t){As.prototype.cloneProtected.call(this,t),this.ya&=-32769,t.bs=this.bs,t.ds=this.ds,t.ql=this.ql,t.et=this.et;var n=t.Jt(function(t){return t instanceof Bl});t.Kb=n instanceof Bl?n:null,null!==this.ie?(t.ie=this.ie.copy(),t.ie.group=t):(null!==t.ie&&(t.ie.group=null),t.ie=null)},Ll.prototype.li=function(t){As.prototype.li.call(this,t);var n=t.Tp();for(t=t.Nc;t.next();){var i=t.value;if(i.H(),i.J(8),i.Bt(),i instanceof As)i.Vf(n);else if(i instanceof Js)for(i=i.Xf;i.next();)i.value.Vf(n)}},Ll.prototype.Un=function(t,n,i,e,o,r,s){if(t===mf&&"elements"===n)if(o instanceof Bl){var l=o;null===this.Kb?this.Kb=l:this.Kb!==l&&Yh.k("Cannot insert a second Placeholder into the visual tree of a Group.")}else o instanceof tr&&(l=o.Jt(function(t){return t instanceof Bl}))instanceof Bl&&(null===this.Kb?this.Kb=l:this.Kb!==l&&Yh.k("Cannot insert a second Placeholder into the visual tree of a Group."));else t===bf&&"elements"===n&&null!==this.Kb&&(e===this.Kb?this.Kb=null:e instanceof tr&&this.Kb.Zl(e)&&(this.Kb=null));As.prototype.Un.call(this,t,n,i,e,o,r,s)},Ll.prototype.ij=function(t,n,i,e){this.pl=this.Kb,tr.prototype.ij.call(this,t,n,i,e)},Ll.prototype.$l=function(){if(!As.prototype.$l.call(this))return!1;for(var t=this.Nc;t.next();){var n=t.value;if(n instanceof As){if(n.isVisible()&&Wo(n))return!1}else if(n instanceof Js&&n.isVisible()&&Wo(n)&&n.Y!==this&&n.$!==this)return!1}return!0},Yh.u(Ll,{placeholder:"placeholder"},function(){return this.Kb}),Yh.defineProperty(Ll,{wH:"computesBoundsAfterDrag"},function(){return 0!=(2048&this.ya)},function(t){var n=0!=(2048&this.ya);n!==t&&(Yh.j(t,"boolean",Ll,"computesBoundsAfterDrag"),this.ya^=2048,this.h("computesBoundsAfterDrag",n,t))}),Yh.defineProperty(Ll,{Xw:"computesBoundsIncludingLinks"},function(){return 0!=(4096&this.ya)},function(t){Yh.j(t,"boolean",Ll,"computesBoundsIncludingLinks");var n=0!=(4096&this.ya);n!==t&&(this.ya^=4096,this.h("computesBoundsIncludingLinks",n,t))}),Yh.defineProperty(Ll,{xH:"computesBoundsIncludingLocation"},function(){return 0!=(8192&this.ya)},function(t){Yh.j(t,"boolean",Ll,"computesBoundsIncludingLocation");var n=0!=(8192&this.ya);n!==t&&(this.ya^=8192,this.h("computesBoundsIncludingLocation",n,t))}),Yh.defineProperty(Ll,{hI:"handlesDragDropForMembers"},function(){return 0!=(16384&this.ya)},function(t){Yh.j(t,"boolean",Ll,"handlesDragDropForMembers");var n=0!=(16384&this.ya);n!==t&&(this.ya^=16384,this.h("handlesDragDropForMembers",n,t))}),Yh.u(Ll,{Nc:"memberParts"},function(){return this.cs.i}),Ll.prototype.vn=function(){if(0<this.cs.count){var t=this.g;if(null!==t)for(var n=this.cs.copy().i;n.next();)t.remove(n.value)}As.prototype.vn.call(this)},Yh.defineProperty(Ll,{Sb:"layout"},function(){return this.ie},function(t){var n=this.ie;n!==t&&(null!==t&&Yh.G(t,ql,Ll,"layout"),null!==n&&(n.g=null,n.group=null),this.ie=t,null!==t&&(t.g=this.g,t.group=this),this.h("layout",n,t))}),Yh.defineProperty(Ll,{TI:"memberAdded"},function(){return this.bs},function(t){var n=this.bs;n!==t&&(null!==t&&Yh.j(t,"function",Ll,"memberAdded"),this.bs=t,this.h("memberAdded",n,t))}),Yh.defineProperty(Ll,{UI:"memberRemoved"},function(){return this.ds},function(t){var n=this.ds;n!==t&&(null!==t&&Yh.j(t,"function",Ll,"memberRemoved"),this.ds=t,this.h("memberRemoved",n,t))}),Yh.defineProperty(Ll,{JA:"memberValidation"},function(){return this.ql},function(t){var n=this.ql;n!==t&&(null!==t&&Yh.j(t,"function",Ll,"memberValidation"),this.ql=t,this.h("memberValidation",n,t))}),Ll.prototype.canAddMembers=function(t){var n=this.g;if(null===n)return!1;for(n=n.ob,t=cn(t).i;t.next();)if(!n.isValidMember(this,t.value))return!1;return!0},Ll.prototype.addMembers=function(t,n){var i=this.g;if(null===i)return!1;for(var i=i.ob,e=!0,o=cn(t).i;o.next();){var r=o.value;!n||i.isValidMember(this,r)?r.Pa=this:e=!1}return e},Yh.defineProperty(Ll,{TJ:"ungroupable"},function(){return 0!=(256&this.ya)},function(t){var n=0!=(256&this.ya);n!==t&&(Yh.j(t,"boolean",Ll,"ungroupable"),this.ya^=256,this.h("ungroupable",n,t))}),Ll.prototype.canUngroup=function(){if(!this.TJ)return!1;var t=this.layer;return!(null!==t&&!t.Tw)&&!(null!==(t=t.g)&&!t.Tw)},Ll.prototype.Vf=function(t){void 0===t&&(t=null);var n=0!=(65536&this.ya);if(As.prototype.Vf.call(this,t),!n)for(0!=(65536&this.ya)!=!0&&(this.ya^=65536),n=this.HE();n.next();){var i=n.value;if(null===t||!t.contains(i)){var e=i.Y;null!==e&&e!==this&&e.ni(this)&&!e.isVisible()?i.Yb():null!==(e=i.$)&&e!==this&&e.ni(this)&&!e.isVisible()&&i.Yb()}}},Ll.prototype.findExternalLinksConnected=Ll.prototype.HE=function(){var t=this.Tp();t.add(this);for(var n=new d(Js),i=t.i;i.next();){var e=i.value;if(e instanceof As)for(e=e.fe;e.next();){var o=e.value;t.contains(o)||n.add(o)}}return n.i},Ll.prototype.findExternalNodesConnected=function(){var t=this.Tp();t.add(this);for(var n=new d(As),i=t.i;i.next();){var e=i.value;if(e instanceof As)for(e=e.fe;e.next();){var o=e.value,r=o.Y;t.contains(r)&&r!==this||n.add(r),o=o.$,t.contains(o)&&o!==this||n.add(o)}}return n.i},Ll.prototype.findContainingGroupChain=function(){function t(n,i){null!==n&&(i.add(n),t(n.Pa,i))}var n=new d(Ll);return t(this,n),n},Ll.prototype.findSubGraphParts=Ll.prototype.Tp=function(){var t=new d(as);return un(t,this,!0,0,!0),t.remove(this),t},Ll.prototype.vd=function(t){As.prototype.vd.call(this,t);for(var n=this.Nc;n.next();)n.value.vd(t)},Ll.prototype.collapseSubGraph=Ll.prototype.collapseSubGraph=function(){var t=this.g;if(null!==t&&!t.xh){t.xh=!0;Fl(this,this.Tp(),t.Oa,this),t.xh=!1}},Ll.prototype.expandSubGraph=Ll.prototype.expandSubGraph=function(){var t=this.g;if(null!==t&&!t.xh){t.xh=!0;Ol(this,this.Tp(),t.Oa,this),t.xh=!1}},Yh.defineProperty(Ll,{we:"isSubGraphExpanded"},function(){return 0!=(512&this.ya)},function(t){var n=0!=(512&this.ya);if(n!==t){Yh.j(t,"boolean",Ll,"isSubGraphExpanded"),this.ya^=512;var i=this.g;if(this.h("isSubGraphExpanded",n,t),null!==(n=this.IJ)){var e=!0;null!==i&&(e=i.Ua,i.Ua=!0),n(this),null!==i&&(i.Ua=e)}null!==i&&i.oa.hb?null!==this.Kb&&this.Kb.H():t?this.expandSubGraph():this.collapseSubGraph()}}),Yh.defineProperty(Ll,{AB:"wasSubGraphExpanded"},function(){return 0!=(1024&this.ya)},function(t){var n=0!=(1024&this.ya);n!==t&&(Yh.j(t,"boolean",Ll,"wasSubGraphExpanded"),this.ya^=1024,this.h("wasSubGraphExpanded",n,t))}),Yh.defineProperty(Ll,{IJ:"subGraphExpandedChanged"},function(){return this.et},function(t){var n=this.et;n!==t&&(null!==t&&Yh.j(t,"function",Ll,"subGraphExpandedChanged"),this.et=t,this.h("subGraphExpandedChanged",n,t))}),Ll.prototype.move=function(t){var n=this.position,i=n.x;isNaN(i)&&(i=0),n=n.y,isNaN(n)&&(n=0);var i=t.x-i,n=t.y-n,e=Yh.xb(i,n);for(As.prototype.move.call(this,t),t=this.Tp().i;t.next();){var o=t.value;if(!(o instanceof Js||o instanceof As&&o.mf)){var r=o.position,s=o.location;r.I()?(e.x=r.x+i,e.y=r.y+n,o.position=e):s.I()&&(e.x=s.x+i,e.y=s.y+n,o.location=e)}}for(t.reset();t.next();)(o=t.value)instanceof Js&&(r=o.position,e.x=r.x+i,e.y=r.y+n,o.move(e));Yh.v(e)},Yh.defineProperty(Ll,{Rn:null},function(){return 0!=(32768&this.ya)},function(t){0!=(32768&this.ya)!==t&&(this.ya^=32768)}),Yh.Ka(Bl,To),Yh.ga("Placeholder",Bl),Bl.prototype.cloneProtected=function(t){To.prototype.cloneProtected.call(this,t),t.ff=this.ff.S(),t.Ps=this.Ps.copy()},Bl.prototype.vk=function(t){if(null===this.background&&null===this.jn)return!1;var n=this.Ia;return _h(0,0,n.width,n.height,t.x,t.y)},Bl.prototype.Mn=function(){var t=this.U;if(null!==t&&(t instanceof Ll||t instanceof Ds)||Yh.k("Placeholder is not inside a Group or Adornment."),t instanceof Ll){var n=this.computeBorder(this.Ps),i=this.Tc;T(i,n.width||0,n.height||0),jo(this,0,0,i.width,i.height);for(var i=t.Nc,e=!1;i.next();)if(i.value.isVisible()){e=!0;break}!e||isNaN(n.x)||isNaN(n.y)||(i=new x,i.Wn(n,t.Bf),t.location=new x(i.x,i.y))}else{var n=this.Ba,i=this.Tc,e=this.padding,o=e.left+e.right,r=e.top+e.bottom;if(n.I())T(i,n.width+o||0,n.height+r||0),jo(this,-e.left,-e.top,i.width,i.height);else{var s=t.rb,l=s.Xa(eu,Yh.K()),n=Yh.ig(l.x,l.y,0,0);n.si(s.Xa(fu,l)),n.si(s.Xa(ru,l)),n.si(s.Xa(hu,l)),t.Ri.m(n.x,n.y),T(i,n.width+o||0,n.height+r||0),jo(this,-e.left,-e.top,i.width,i.height),Yh.v(l),Yh.Db(n)}}},Bl.prototype.ij=function(t,n,i,e){var o=this.W;o.x=t,o.y=n,o.width=i,o.height=e},Bl.prototype.computeBorder=function(t){var n=this.U;if(n instanceof Ll){var i=n;if(i.wH&&this.Ps.I()){var e=i.g;if(null!==e&&(e=e.$a)instanceof yn&&!e.or&&null!==e.Xb&&!e.Xb.contains(i))return t.assign(this.Ps),t}}var i=Yh.Ff(),e=this.computeMemberBounds(i),o=this.padding;return t.m(e.x-o.left,e.y-o.top,Math.max(e.width+o.left+o.right,0),Math.max(e.height+o.top+o.bottom,0)),Yh.Db(i),n instanceof Ll&&(i=n,i.xH&&i.location.I()&&t.si(i.location)),t},Bl.prototype.computeMemberBounds=function(t){if(!(this.U instanceof Ll))return t.m(0,0,0,0),t;for(var n=this.U,i=1/0,e=1/0,o=-1/0,r=-1/0,s=n.Nc;s.next();){var l=s.value;if(l.isVisible()){if(l instanceof Js){var a=l;if(!n.Xw)continue;if(Jo(a))continue;if(a.Y===n||a.$===n)continue}l=l.W,l.left<i&&(i=l.left),l.top<e&&(e=l.top),l.right>o&&(o=l.right),l.bottom>r&&(r=l.bottom)}}return isFinite(i)&&isFinite(e)?t.m(i,e,o-i,r-e):(n=n.location,i=this.padding,t.m(n.x+i.left,n.y+i.top,0,0)),t},Yh.defineProperty(Bl,{padding:"padding"},function(){return this.ff},function(t){"number"==typeof t?t=new D(t):Yh.G(t,D,Bl,"padding");var n=this.ff;n.L(t)||(this.ff=t=t.S(),this.h("padding",n,t))}),Yh.ga("Layout",ql),ql.prototype.cloneProtected=function(t){t.Jr=this.Jr,t.Xj=this.Xj,t.Pr=this.Pr,t.Jq.assign(this.Jq),t.Mr=this.Mr,t.Lr=this.Lr,t.vC=this.vC,this.Xj||(t.To=!0)},ql.prototype.copy=function(){var t=new this.constructor;return this.cloneProtected(t),t},ql.prototype.hc=function(t){Yh.Ej(this,t)},ql.prototype.toString=function(){var t=Yh.jf(Object.getPrototypeOf(this)),t=t+"(";return null!==this.group&&(t+=" in "+this.group),null!==this.g&&(t+=" for "+this.g),t+")"},Yh.defineProperty(ql,{g:"diagram"},function(){return this.Z},function(t){null!==t&&Yh.G(t,Ei,ql,"diagram"),this.Z=t}),Yh.defineProperty(ql,{group:"group"},function(){return this.fz},function(t){this.fz!==t&&(null!==t&&Yh.G(t,Ll,ql,"group"),this.fz=t,null!==t&&(this.Z=t.g))}),Yh.defineProperty(ql,{yI:"isOngoing"},function(){return this.Jr},function(t){this.Jr!==t&&(Yh.j(t,"boolean",ql,"isOngoing"),this.Jr=t)}),Yh.defineProperty(ql,{oF:"isInitial"},function(){return this.Xj},function(t){Yh.j(t,"boolean",ql,"isInitial"),this.Xj=t,t||(this.To=!0)}),Yh.defineProperty(ql,{Dx:"isViewportSized"},function(){return this.Pr},function(t){this.Pr!==t&&(Yh.j(t,"boolean",ql,"isViewportSized"),(this.Pr=t)&&this.J())}),Yh.defineProperty(ql,{gu:"isRouting"},function(){return this.Mr},function(t){this.Mr!==t&&(Yh.j(t,"boolean",ql,"isRouting"),this.Mr=t)}),Yh.defineProperty(ql,{rF:"isRealtime"},function(){return this.Lr},function(t){this.Lr!==t&&(Yh.j(t,"boolean",ql,"isRealtime"),this.Lr=t)}),Yh.defineProperty(ql,{Af:"isValidLayout"},function(){return this.To},function(t){this.To!==t&&(Yh.j(t,"boolean",ql,"isValidLayout"),this.To=t,t||null!==(t=this.g)&&(t.dv=!0))}),ql.prototype.invalidateLayout=ql.prototype.J=function(){if(this.To){var t=this.g;if(null!==t&&!t.oa.hb){var n=t.Oa;!n.So&&(n.lf&&n.qi(),this.yI&&t.Gn||this.oF&&!t.Gn)&&(this.Af=!1,t.Le())}}},Yh.defineProperty(ql,{network:"network"},function(){return this.sz},function(t){var n=this.sz;n!==t&&(null!==t&&Yh.G(t,Il,ql,"network"),null!==n&&(n.Sb=null),this.sz=t,null!==t&&(t.Sb=this))}),ql.prototype.createNetwork=function(){return new Il},ql.prototype.makeNetwork=function(t){var n=this.createNetwork();return n.Sb=this,t instanceof Ei?(n.sk(t.fg,!0),n.sk(t.links,!0)):t instanceof Ll?n.sk(t.Nc):n.sk(t.i),n},ql.prototype.updateParts=function(){var t=this.g;if(null===t&&null!==this.network)for(var n=this.network.vertexes.i;n.next();){var i=n.value.Oc;if(null!==i&&null!==(t=i.g))break}this.Af=!0;try{null!==t&&t.Ub("Layout"),this.commitLayout()}finally{null!==t&&t.Gd("Layout")}},ql.prototype.commitLayout=function(){for(var t=this.network.vertexes.i;t.next();)t.value.commit();if(this.gu)for(t=this.network.edges.i;t.next();)t.value.commit()},ql.prototype.doLayout=function(t){null===t&&Yh.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts");var n=new d(as);t instanceof Ei?(zl(this,n,t.fg,!0,this.Rn,!0,!1,!0),zl(this,n,t.Jk,!0,this.Rn,!0,!1,!0)):t instanceof Ll?zl(this,n,t.Nc,!1,this.Rn,!0,!1,!0):n.Hc(t.i);var i=n.count;if(0<i){t=this.g,null!==t&&t.Ub("Layout");for(var i=Math.ceil(Math.sqrt(i)),e=this.oe.x,o=e,r=this.oe.y,s=0,l=0,n=n.i;n.next();){var a=n.value;a.$e();var h=a.za,u=h.width,h=h.height;a.moveTo(o,r),a instanceof Ll&&(a.Rn=!1),o+=Math.max(u,50)+20,l=Math.max(l,Math.max(h,50)),s>=i-1?(s=0,o=e,r+=l+20,l=0):s++}null!==t&&t.Gd("Layout")}this.Af=!0},ql.prototype.Rn=function(t){return!(t.location.I()&&!(t instanceof Ll&&t.Rn))},ql.prototype.collectParts=ql.prototype.qH=function(t){var n=new d(as);return t instanceof Ei?(zl(this,n,t.fg,!0,null,!0,!0,!0),zl(this,n,t.links,!0,null,!0,!0,!0),zl(this,n,t.Jk,!0,null,!0,!0,!0)):t instanceof Ll?zl(this,n,t.Nc,!1,null,!0,!0,!0):zl(this,n,t.i,!1,null,!0,!0,!0),n},Yh.defineProperty(ql,{oe:"arrangementOrigin"},function(){return this.Jq},function(t){Yh.G(t,x,ql,"arrangementOrigin"),this.Jq.L(t)||(this.Jq.assign(t),this.J())}),ql.prototype.initialOrigin=function(t){var n=this.group;if(null!==n){var i=n.position.copy();return(isNaN(i.x)||isNaN(i.y))&&i.set(t),n=n.placeholder,null!==n&&(i=n.Xa(eu),(isNaN(i.x)||isNaN(i.y))&&i.set(t),i.x+=n.padding.left,i.y+=n.padding.top),i}return t},Yh.ga("LayoutNetwork",Il),Il.prototype.clear=function(){if(this.vertexes)for(var t=this.vertexes.i;t.next();){var n=t.value;n.clear(),n.network=null}if(this.edges)for(t=this.edges.i;t.next();)n=t.value,n.clear(),n.network=null;this.vertexes=new d(Kl),this.edges=new d(Ul),this.Mx=new b(As,Kl),this.Ix=new b(Js,Ul)},Il.prototype.toString=function(t){void 0===t&&(t=0);var n="LayoutNetwork"+(null!==this.Sb?"("+this.Sb.toString()+")":"");if(0>=t)return n;if(n+=" vertexes: "+this.vertexes.count+" edges: "+this.edges.count,1<t){for(var i=this.vertexes.i;i.next();)n+="\n    "+i.value.toString(t-1);for(i=this.edges.i;i.next();)n+="\n    "+i.value.toString(t-1)}return n},Yh.defineProperty(Il,{Sb:"layout"},function(){return this.ie},function(t){this.ie=t}),Il.prototype.createVertex=function(){return new Kl},Il.prototype.createEdge=function(){return new Ul},Il.prototype.addParts=Il.prototype.sk=function(t,n,i){if(null!==t){for(void 0===n&&(n=!1),Yh.j(n,"boolean",Il,"addParts:toplevelonly"),void 0===i&&(i=null),null===i&&(i=function(t){if(t instanceof As)return!t.mf;if(t instanceof Js){var n=t.Y;return null!==n&&!n.mf&&(null!==(t=t.$)&&!t.mf)}return!1}),t=t.i;t.next();){var e=t.value;if(e instanceof As&&(!n||e.aq)&&e.canLayout()&&i(e))if(e instanceof Ll&&null===e.Sb)this.sk(e.Nc,!1);else if(null===this.yn(e)){var o=this.createVertex();o.Oc=e,this.Dl(o)}}for(t.reset();t.next();)if((e=t.value)instanceof Js&&(!n||e.aq)&&e.canLayout()&&i(e)&&null===this.kx(e)){var r=e.Y,o=e.$;null!==r&&null!==o&&r!==o&&(r=this.findGroupVertex(r),o=this.findGroupVertex(o),null!==r&&null!==o&&this.fq(r,o,e))}}},Il.prototype.findGroupVertex=function(t){if(null===t)return null;var n=t.findVisibleNode();if(null===n)return null;if(null!==(t=this.yn(n)))return t;for(n=n.Pa;null!==n;){if(null!==(t=this.yn(n)))return t;n=n.Pa}return null};Il.prototype.addVertex=Il.prototype.Dl=function(t){if(null!==t){this.vertexes.add(t);var n=t.Oc;null!==n&&this.Mx.add(n,t),t.network=this}},Il.prototype.addNode=Il.prototype.vt=function(t){if(null===t)return null;var n=this.yn(t);return null===n&&(n=this.createVertex(),n.Oc=t,this.Dl(n)),n},Il.prototype.deleteVertex=Il.prototype.BE=function(t){if(null!==t&&Rl(this,t)){for(var n=t.Oe,i=n.count-1;0<=i;i--){var e=n.ea(i);this.Op(e)}for(n=t.He,i=n.count-1;0<=i;i--)e=n.ea(i),this.Op(e)}},Il.prototype.deleteNode=function(t){null!==t&&null!==(t=this.yn(t))&&this.BE(t)},Il.prototype.findVertex=Il.prototype.yn=function(t){return null===t?null:this.Mx.ja(t)},Il.prototype.addEdge=Il.prototype.Dp=function(t){if(null!==t){this.edges.add(t);var n=t.link;null!==n&&null===this.kx(n)&&this.Ix.add(n,t),n=t.toVertex,null!==n&&n.gE(t),n=t.fromVertex,null!==n&&n.eE(t),t.network=this}},Il.prototype.addLink=function(t){if(null===t)return null;var n=t.Y,i=t.$,e=this.kx(t);return null===e?(e=this.createEdge(),e.link=t,null!==n&&(e.fromVertex=this.vt(n)),null!==i&&(e.toVertex=this.vt(i)),this.Dp(e)):(e.fromVertex=null!==n?this.vt(n):null,e.toVertex=null!==i?this.vt(i):null),e},Il.prototype.deleteEdge=Il.prototype.Op=function(t){if(null!==t){var n=t.toVertex;null!==n&&n.AE(t),n=t.fromVertex,null!==n&&n.zE(t),Gl(this,t)}},Il.prototype.deleteLink=function(t){null!==t&&null!==(t=this.kx(t))&&this.Op(t)},Il.prototype.findEdge=Il.prototype.kx=function(t){return null===t?null:this.Ix.ja(t)},Il.prototype.linkVertexes=Il.prototype.fq=function(t,n,i){if(null===t||null===n)return null;if(t.network===this&&n.network===this){var e=this.createEdge();return e.link=i,e.fromVertex=t,e.toVertex=n,this.Dp(e),e}return null},Il.prototype.reverseEdge=Il.prototype.ay=function(t){if(null!==t){var n=t.fromVertex,i=t.toVertex;null!==n&&null!==i&&(n.zE(t),i.AE(t),t.ay(),n.gE(t),i.eE(t))}},Il.prototype.deleteSelfEdges=Il.prototype.ex=function(){for(var t=Yh.lb(),n=this.edges.i;n.next();){var i=n.value;i.fromVertex===i.toVertex&&t.push(i)}for(n=t.length,i=0;i<n;i++)this.Op(t[i]);Yh.wa(t)},Il.prototype.deleteArtificialVertexes=function(){for(var t=Yh.lb(),n=this.vertexes.i;n.next();){var i=n.value;null===i.Oc&&t.push(i)}for(var i=t.length,e=0;e<i;e++)this.BE(t[e]);for(n=Yh.lb(),i=this.edges.i;i.next();)e=i.value,null===e.link&&n.push(e);for(i=n.length,e=0;e<i;e++)this.Op(n[e]);Yh.wa(t),Yh.wa(n)},Il.prototype.splitIntoSubNetworks=Il.prototype.HJ=function(){this.deleteArtificialVertexes(),Vl(this),this.ex();for(var t=new f(Il),n=!0;n;)for(var n=!1,i=this.vertexes.i;i.next();){var e=i.value;if(0<e.Oe.count||0<e.He.count){n=this.Sb.createNetwork(),t.add(n),Hl(this,n,e),n=!0;break}}return t.sort(function(t,n){return null===t||null===n||t===n?0:n.vertexes.count-t.vertexes.count}),t},Il.prototype.findAllParts=function(){for(var t=new d(as),n=this.vertexes.i;n.next();)t.add(n.value.Oc);for(n=this.edges.i;n.next();)t.add(n.value.link);return t},Yh.ga("LayoutVertex",Kl),Kl.prototype.clear=function(){this.rd=this.Vd=null,this.Oe=new f(Ul),this.He=new f(Ul)},Kl.prototype.toString=function(t){void 0===t&&(t=0);var n="LayoutVertex#"+Yh.Kd(this);if(0<t&&(n+=null!==this.Oc?"("+this.Oc.toString()+")":"",1<t)){t="";for(var i=!0,e=this.Oe.i;e.next();){var o=e.value;i?i=!1:t+=",",t+=o.toString(0)}for(o="",i=!0,e=this.He.i;e.next();){var r=e.value;i?i=!1:o+=",",o+=r.toString(0)}n+=" sources: "+t+" destinations: "+o}return n},Yh.defineProperty(Kl,{data:"data"},function(){return this.Vd},function(t){if(this.Vd=t,null!==t){var n=t.bounds;t=n.x;var i=n.y,e=n.width,n=n.height;this.T.m(e/2,n/2),this.M.m(t,i,e,n)}}),Yh.defineProperty(Kl,{Oc:"node"},function(){return this.rd},function(t){if(this.rd!==t){this.rd=t,t.$e();var n=t.W,i=n.x,e=n.y,o=n.width,n=n.height;if(isNaN(i)&&(i=0),isNaN(e)&&(e=0),this.M.m(i,e,o,n),!(t instanceof Ll)&&(t=t.Zf.Xa(lu),t.I()))return void this.T.m(t.x-i,t.y-e);this.T.m(o/2,n/2)}}),Yh.defineProperty(Kl,{eb:"bounds"},function(){return this.M},function(t){this.M.L(t)||this.M.assign(t)}),Yh.defineProperty(Kl,{focus:"focus"},function(){return this.T},function(t){this.T.L(t)||this.T.assign(t)}),Yh.defineProperty(Kl,{ka:"centerX"},function(){return this.M.x+this.T.x},function(t){var n=this.M;n.x+this.T.x!==t&&(n.Ra(),n.x=t-this.T.x,n.freeze())}),Yh.defineProperty(Kl,{ra:"centerY"},function(){return this.M.y+this.T.y},function(t){var n=this.M;n.y+this.T.y!==t&&(n.Ra(),n.y=t-this.T.y,n.freeze())}),Yh.defineProperty(Kl,{Rt:"focusX"},function(){return this.T.x},function(t){var n=this.T;n.x!==t&&(n.Ra(),n.x=t,n.freeze())}),Yh.defineProperty(Kl,{St:"focusY"},function(){return this.T.y},function(t){var n=this.T;n.y!==t&&(n.Ra(),n.y=t,n.freeze())}),Yh.defineProperty(Kl,{x:"x"},function(){return this.M.x},function(t){var n=this.M;n.x!==t&&(n.Ra(),n.x=t,n.freeze())}),Yh.defineProperty(Kl,{y:"y"},function(){return this.M.y},function(t){var n=this.M;n.y!==t&&(n.Ra(),n.y=t,n.freeze())}),Yh.defineProperty(Kl,{width:"width"},function(){return this.M.width},function(t){var n=this.M;n.width!==t&&(n.Ra(),n.width=t,n.freeze())}),Yh.defineProperty(Kl,{height:"height"},function(){return this.M.height},function(t){var n=this.M;n.height!==t&&(n.Ra(),n.height=t,n.freeze())}),Kl.prototype.commit=function(){var t=this.Vd;if(null!==t){var n=this.eb,i=t.bounds;Yh.Qa(i)?(i.x=n.x,i.y=n.y,i.width=n.width,i.height=n.height):t.bounds=n.copy()}else if(null!==(t=this.Oc)){if(n=this.eb,!(t instanceof Ll)){var i=t.W,e=t.Zf.Xa(lu);if(i.I()&&e.I())return void t.moveTo(n.x+this.Rt-(e.x-i.x),n.y+this.St-(e.y-i.y))}t.moveTo(n.x,n.y)}},Kl.prototype.addSourceEdge=Kl.prototype.gE=function(t){null!==t&&(this.Oe.contains(t)||this.Oe.add(t))},Kl.prototype.deleteSourceEdge=Kl.prototype.AE=function(t){null!==t&&this.Oe.remove(t)},Kl.prototype.addDestinationEdge=Kl.prototype.eE=function(t){null!==t&&(this.He.contains(t)||this.He.add(t))},Kl.prototype.deleteDestinationEdge=Kl.prototype.zE=function(t){null!==t&&this.He.remove(t)},Yh.u(Kl,{GJ:"sourceVertexes"},function(){for(var t=new d(Kl),n=this.lc;n.next();)t.add(n.value.fromVertex);return t.i}),Yh.u(Kl,{KH:"destinationVertexes"},function(){for(var t=new d(Kl),n=this.jc;n.next();)t.add(n.value.toVertex);return t.i}),Yh.u(Kl,{vertexes:"vertexes"},function(){for(var t=new d(Kl),n=this.lc;n.next();)t.add(n.value.fromVertex);for(n=this.jc;n.next();)t.add(n.value.toVertex);return t.i}),Yh.u(Kl,{lc:"sourceEdges"},function(){return this.Oe.i}),Yh.u(Kl,{jc:"destinationEdges"},function(){return this.He.i}),Yh.u(Kl,{edges:"edges"},function(){for(var t=new f(Ul),n=this.lc;n.next();)t.add(n.value);for(n=this.jc;n.next();)t.add(n.value);return t.i}),Yh.u(Kl,{PH:"edgesCount"},function(){return this.Oe.count+this.He.count});var ep;Kl.standardComparer=ep=function(t,n){var i=t.rd,e=n.rd;return i?e?(i=i.text,e=e.text,i<e?-1:i>e?1:0):1:null!==e?-1:0},Kl.smartComparer=function(t,n){if(null!==t){if(null!==n){var i=t.rd,e=n.rd;if(null!==i){if(null!==e){for(var i=i.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=e.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),o=0;o<i.length;o++)if(""!==e[o]&&void 0!==e[o]){var r=parseFloat(i[o]),s=parseFloat(e[o]);if(isNaN(r)){if(!isNaN(s))return 1;if(0!==i[o].localeCompare(e[o]))return i[o].localeCompare(e[o])}else{if(isNaN(s))return-1;if(0!=r-s)return r-s}}else if(""!==i[o])return 1;return""!==e[o]&&void 0!==e[o]?-1:0}return 1}return null!==e?-1:0}return 1}return null!==n?-1:0},Yh.ga("LayoutEdge",Ul),Ul.prototype.clear=function(){this.toVertex=this.fromVertex=this.link=this.data=null},Ul.prototype.toString=function(t){void 0===t&&(t=0);var n="LayoutEdge#"+Yh.Kd(this);return 0<t&&(n+=null!==this.link?"("+this.link.toString()+")":"",1<t&&(n+=" "+(this.fromVertex?this.fromVertex.toString():"null")+" --\x3e "+(this.toVertex?this.toVertex.toString():"null"))),n},Ul.prototype.ay=function(){var t=this.fromVertex;this.fromVertex=this.toVertex,this.toVertex=t},Ul.prototype.commit=function(){},Ul.prototype.getOtherVertex=Ul.prototype.ZH=function(t){return this.toVertex===t?this.fromVertex:this.fromVertex===t?this.toVertex:null},Yh.Ka(Jl,ql),Yh.ga("GridLayout",Jl),Jl.prototype.cloneProtected=function(t){ql.prototype.cloneProtected.call(this,t),t.rt=this.rt,t.qt=this.qt,t.Jj.assign(this.Jj),t.bi.assign(this.bi),t.ge=this.ge,t.ld=this.ld,t.ai=this.ai,t.Kh=this.Kh},Jl.prototype.hc=function(t){t.De===Jl?t===fp||t===cp||t===hp||t===up?this.sorting=t:t===lp||t===ap?this.Qf=t:t===sp||t===rp?this.alignment=t:Yh.k("Unknown enum value: "+t):ql.prototype.hc.call(this,t)},Jl.prototype.doLayout=function(t){null===t&&Yh.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),this.oe=this.initialOrigin(this.oe);var n=this.g;t=this.qH(t);for(var i=t.copy().i;i.next();){var e=i.value;if(e instanceof Js){var o=e;if(null!==o.Y||null!==o.$){t.remove(o);continue}}if(e.$e(),e instanceof Ll)for(e=e.Nc;e.next();)t.remove(e.value)}if(o=t.fc(),0!==o.length){switch(this.sorting){case up:o.reverse();break;case fp:o.sort(this.comparer);break;case cp:o.sort(this.comparer),o.reverse()}var r=this.XJ;isNaN(r)&&(r=0);var s=this.CG,s=isNaN(s)&&null!==n?Math.max(n.pb.width-n.padding.left-n.padding.right,0):Math.max(this.CG,0);switch(0>=r&&0>=s&&(r=1),t=this.spacing.width,isFinite(t)||(t=0),i=this.spacing.height,isFinite(i)||(i=0),null!==n&&n.Ub("Layout"),e=[],this.alignment){case rp:var l=t,a=i,h=Math.max(this.Gp.width,1);if(!isFinite(h))for(var u=h=0;u<o.length;u++)var f=o[u],c=f.za,h=Math.max(h,c.width);var h=Math.max(h+l,1),d=Math.max(this.Gp.height,1);if(!isFinite(d))for(u=d=0;u<o.length;u++)f=o[u],c=f.za,d=Math.max(d,c.height);for(var d=Math.max(d+a,1),p=this.Qf,y=this.oe.x,v=y,g=this.oe.y,m=0,b=0,u=0;u<o.length;u++){var f=o[u],c=f.za,w=Math.ceil((c.width+l)/h)*h,k=Math.ceil((c.height+a)/d)*d,M=0;switch(p){case ap:M=Math.abs(v-c.width);break;default:M=v+c.width}switch((0<r&&m>r-1||0<s&&0<m&&M>s)&&(e.push(new P(0,g,s+l,b)),m=0,v=y,g+=b,b=0),b=Math.max(b,k),k=0,p){case ap:k=-c.width;break;default:k=0}switch(f.moveTo(v+k,g),p){case ap:v-=w;break;default:v+=w}m++}e.push(new P(0,g,s+l,b));break;case sp:for(l=r,a=t,h=i,u=Math.max(this.Gp.width,1),f=g=w=0,c=Yh.K(),r=0;r<o.length;r++)d=o[r],p=d.za,y=ds(d,d.Zf,d.Bf,c),w=Math.max(w,y.x),g=Math.max(g,p.width-y.x),f=Math.max(f,y.y);switch(v=this.Qf){case ap:w+=a;break;default:g+=a}var u=isFinite(u)?Math.max(u+a,1):Math.max(w+g,1),T=g=this.oe.x,m=this.oe.y,b=0;s>=w&&(s-=w);for(var w=k=0,M=Math.max(this.Gp.height,1),S=f=0,C=!0,N=Yh.K(),r=0;r<o.length;r++){if(d=o[r],p=d.za,y=ds(d,d.Zf,d.Bf,c),0<b)switch(v){case ap:T=(T-g-(p.width-y.x))/u,T=X(Math.round(T),T)?Math.round(T):Math.floor(T),T=T*u+g;break;default:T=(T-g+y.x)/u,T=X(Math.round(T),T)?Math.round(T):Math.ceil(T),T=T*u+g}else switch(v){case ap:k=T+y.x+p.width;break;default:k=T-y.x}var j=0;switch(v){case ap:j=-(T+y.x)+k;break;default:j=T+p.width-y.x-k}if(0<l&&b>l-1||0<s&&0<b&&j>s){for(e.push(new P(0,C?m-f:m,s+a,S+f+h)),T=0;T<b&&r!==b;T++){var j=o[r-b+T],L=ds(j,j.Zf,j.Bf,N);j.moveTo(j.position.x,j.position.y+f-L.y)}S+=h,m=C?m+S:m+(S+f),b=S=f=0,T=g,C=!1}switch(T===g&&(w=v===ap?Math.max(w,p.width-y.x):Math.min(w,-y.x)),f=Math.max(f,y.y),S=Math.max(S,p.height-y.y),isFinite(M)&&(S=Math.max(S,Math.max(p.height,M)-y.y)),C?d.moveTo(T-y.x,m-y.y):d.moveTo(T-y.x,m),v){case ap:T-=y.x+a;break;default:T+=p.width-y.x+a}b++}for(e.push(new P(0,m,s+a,(C?S:S+f)+h)),T=0;T<b&&r!==b;T++)j=o[r-b+T],L=ds(j,j.Zf,j.Bf,c),j.moveTo(j.position.x,j.position.y+f-L.y);if(Yh.v(c),Yh.v(N),v===ap)for(r=0;r<e.length;r++)o=e[r],o.width+=w,o.x-=w;else for(r=0;r<e.length;r++)o=e[r],o.x>w&&(o.width+=o.x-w,o.x=w)}for(l=r=s=o=0;l<e.length;l++)a=e[l],o=Math.min(o,a.x),s=Math.min(s,a.y),r=Math.max(r,a.x+a.width);this.Qf===ap?this.commitLayers(e,new x(o+t/2-(r+o),s-i/2)):this.commitLayers(e,new x(o-t/2,s-i/2)),null!==n&&n.Gd("Layout"),this.Af=!0}},Jl.prototype.commitLayers=function(){},Yh.defineProperty(Jl,{CG:"wrappingWidth"},function(){return this.rt},function(t){this.rt!==t&&(Yh.j(t,"number",Jl,"wrappingWidth"),0<t||isNaN(t))&&(this.rt=t,this.Dx=isNaN(t),this.J())}),Yh.defineProperty(Jl,{XJ:"wrappingColumn"},function(){return this.qt},function(t){this.qt!==t&&(Yh.j(t,"number",Jl,"wrappingColumn"),0<t||isNaN(t))&&(this.qt=t,this.J())}),Yh.defineProperty(Jl,{Gp:"cellSize"},function(){return this.Jj},function(t){Yh.G(t,M,Jl,"cellSize"),this.Jj.L(t)||(this.Jj.assign(t),this.J())}),Yh.defineProperty(Jl,{spacing:"spacing"},function(){return this.bi},function(t){Yh.G(t,M,Jl,"spacing"),this.bi.L(t)||(this.bi.assign(t),this.J())}),Yh.defineProperty(Jl,{alignment:"alignment"},function(){return this.ge},function(t){this.ge!==t&&(Yh.mb(t,Jl,Jl,"alignment"),t===sp||t===rp)&&(this.ge=t,this.J())}),Yh.defineProperty(Jl,{Qf:"arrangement"},function(){return this.ld},function(t){this.ld!==t&&(Yh.mb(t,Jl,Jl,"arrangement"),t===lp||t===ap)&&(this.ld=t,this.J())}),Yh.defineProperty(Jl,{sorting:"sorting"},function(){return this.ai},function(t){this.ai!==t&&(Yh.mb(t,Jl,Jl,"sorting"),t===hp||t===up||t===fp||t===cp)&&(this.ai=t,this.J())}),Yh.defineProperty(Jl,{comparer:"comparer"},function(){return this.Kh},function(t){this.Kh!==t&&(Yh.j(t,"function",Jl,"comparer"),this.Kh=t,this.J())});var op;Jl.standardComparer=op=function(t,n){var i=t.text,e=n.text;return i<e?-1:i>e?1:0},Jl.smartComparer=function(t,n){if(null!==t){if(null!==n){for(var i=t.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),e=n.text.toLocaleLowerCase().split(/([+\-]?[\.]?\d+(?:\.\d*)?(?:e[+\-]?\d+)?)/),o=0;o<i.length;o++)if(""!==e[o]&&void 0!==e[o]){var r=parseFloat(i[o]),s=parseFloat(e[o]);if(isNaN(r)){if(!isNaN(s))return 1;if(0!==i[o].localeCompare(e[o]))return i[o].localeCompare(e[o])}else{if(isNaN(s))return-1;if(0!=r-s)return r-s}}else if(""!==i[o])return 1;return""!==e[o]&&void 0!==e[o]?-1:0}return 1}return null!==n?-1:0};var rp;Jl.Position=rp=Yh.p(Jl,"Position",0);var sp;Jl.Location=sp=Yh.p(Jl,"Location",1);var lp;Jl.LeftToRight=lp=Yh.p(Jl,"LeftToRight",2);var ap;Jl.RightToLeft=ap=Yh.p(Jl,"RightToLeft",3);var hp;Jl.Forward=hp=Yh.p(Jl,"Forward",4);var up;Jl.Reverse=up=Yh.p(Jl,"Reverse",5);var fp;Jl.Ascending=fp=Yh.p(Jl,"Ascending",6);var cp;Jl.Descending=cp=Yh.p(Jl,"Descending",7),Yh.Ka(Yl,ql),Yh.ga("CircularLayout",Yl),Yl.prototype.cloneProtected=function(t){ql.prototype.cloneProtected.call(this,t),t.Ds=this.Ds,t.Lq=this.Lq,t.dt=this.dt,t.ft=this.ft,t.ld=this.ld,t.aa=this.aa,t.ai=this.ai,t.Kh=this.Kh,t.bi=this.bi,t.rs=this.rs},Yl.prototype.hc=function(t){t.De===Yl?t===Mp||t===Pp||t===wp||t===kp||t===Tp?this.sorting=t:t===bp||t===xp||t===gp||t===mp?this.direction=t:t===yp||t===pp||t===dp||t===vp?this.Qf=t:t!==Cp&&t!==Sp||(this.Lx=t):ql.prototype.hc.call(this,t)},Yl.prototype.createNetwork=function(){return new sa},Yl.prototype.doLayout=function(t){if(null===t&&Yh.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(t)),t=this.network.vertexes,1>=t.count)1===t.count&&(t=t.first(),t.ka=0,t.ra=0);else{var n=new f(la);n.Hc(t.i),t=new f(la);var i,e=new f(la);i=this.sort(n);var o=this.Wy,r=this.BC,s=this.Wd,l=this.Eo,a=this.Xy,h=this.pr,n=this.bl,u=this.SD,c=this.Hg,d=this.kv,o=this.Qf,r=this.Lx,s=this.hJ;if((!isFinite(s)||0>=s)&&(s=NaN),l=this.jH,(!isFinite(l)||0>=l)&&(l=1),a=this.ye,isFinite(a)||(a=0),h=this.pf,(!isFinite(h)||360<h||1>h)&&(h=360),n=this.spacing,isFinite(n)||(n=NaN),o===vp&&r===Cp?o=dp:o===vp&&r!==Cp&&(r=Cp,o=this.Qf),(this.direction===bp||this.direction===xp)&&this.sorting!==Tp){for(var p=0;!(p>=i.length)&&(t.add(i.ea(p)),!(p+1>=i.length));p+=2)e.add(i.ea(p+1));this.direction===bp?(this.Qf===vp&&t.reverse(),i=new f(la),i.Hc(t),i.Hc(e)):(this.Qf===vp&&e.reverse(),i=new f(la),i.Hc(e),i.Hc(t))}for(var y=i.length,v=u=0,p=0;p<i.length;p++){var c=a+h*v*(this.direction===gp?1:-1)/y,g=i.ea(p).diameter;isNaN(g)&&(g=aa(i.ea(p),c)),360>h&&(0===p||p===i.length-1)&&(g/=2),u+=g,v++}if(isNaN(s)||o===vp){if(isNaN(n)&&(n=6),o!==dp&&o!==vp){for(g=-1/0,p=0;p<y;p++){var d=i.ea(p),m=i.ea(p===y-1?0:p+1);isNaN(d.diameter)&&aa(d,0),isNaN(m.diameter)&&aa(m,0),g=Math.max(g,(d.diameter+m.diameter)/2)}d=g+n,o===yp?(c=2*Math.PI/y,s=(g+n)/c):s=ea(this,d*(360<=h?y:y-1),l,a*Math.PI/180,h*Math.PI/180)}else s=ea(this,u+(360<=h?y:y-1)*(o!==vp?n:1.6*n),l,a*Math.PI/180,h*Math.PI/180);c=s*l}else if(c=s*l,v=ia(this,s,c,a*Math.PI/180,h*Math.PI/180),isNaN(n))o!==dp&&o!==vp||(n=(v-u)/(360<=h?y:y-1));else if(o===dp||o===vp)p=(v-u)/(360<=h?y:y-1),p<n?(s=ea(this,u+n*(360<=h?y:y-1),l,a*Math.PI/180,h*Math.PI/180),c=s*l):n=p;else{for(g=-1/0,p=0;p<y;p++)d=i.ea(p),m=i.ea(p===y-1?0:p+1),isNaN(d.diameter)&&aa(d,0),isNaN(m.diameter)&&aa(m,0),g=Math.max(g,(d.diameter+m.diameter)/2);d=g+n,p=ea(this,d*(360<=h?y:y-1),l,a*Math.PI/180,h*Math.PI/180),p>s?(s=p,c=s*l):d=v/(360<=h?y:y-1)}if(this.Wy=o,this.BC=r,this.Wd=s,this.Eo=l,this.Xy=a,this.pr=h,this.bl=n,this.SD=u,this.Hg=c,this.kv=d,n=i,i=this.Wy,o=this.Wd,r=this.Xy,l=this.pr,a=this.bl,h=this.Hg,u=this.kv,this.direction!==bp&&this.direction!==xp||i!==vp)if(this.direction===bp||this.direction===xp){switch(s=0,i){case pp:s=180*oa(this,o,h,r,u)/Math.PI;break;case dp:u=n=0,s=t.first(),null!==s&&(n=aa(s,Math.PI/2)),s=e.first(),null!==s&&(u=aa(s,Math.PI/2)),s=180*oa(this,o,h,r,a+(n+u)/2)/Math.PI;break;case yp:s=l/n.length}if(this.direction===bp){switch(i){case pp:$l(this,t,r,mp);break;case dp:Xl(this,t,r,mp);break;case yp:Wl(this,t,l/2,r,mp)}switch(i){case pp:$l(this,e,r+s,gp);break;case dp:Xl(this,e,r+s,gp);break;case yp:Wl(this,e,l/2,r+s,gp)}}else{switch(i){case pp:$l(this,e,r,mp);break;case dp:Xl(this,e,r,mp);break;case yp:Wl(this,e,l/2,r,mp)}switch(i){case pp:$l(this,t,r+s,gp);break;case dp:Xl(this,t,r+s,gp);break;case yp:Wl(this,t,l/2,r+s,gp)}}}else switch(i){case pp:$l(this,n,r,this.direction);break;case dp:Xl(this,n,r,this.direction);break;case yp:Wl(this,n,l,r,this.direction);break;case vp:Ql(this,n,l,r,this.direction)}else Ql(this,n,l,r-l/2,gp)}this.updateParts(),this.network=null,this.Af=!0},Yl.prototype.commitLayout=function(){this.commitNodes(),this.gu&&this.commitLinks()},Yl.prototype.commitNodes=function(){for(var t=this.ZG,n=this.network.vertexes.i;n.next();){var i=n.value;i.x+=t.x,i.y+=t.y,i.commit()}},Yl.prototype.commitLinks=function(){for(var t=this.network.edges.i;t.next();)t.value.commit()},Yl.prototype.sort=function(t){switch(this.sorting){case wp:break;case kp:t.reverse();break;case Mp:t.sort(this.comparer);break;case Pp:t.sort(this.comparer),t.reverse();break;case Tp:for(var n=[],i=0;i<t.length;i++)n.push(0);for(var e=new f(la),i=0;i<t.length;i++){var o=-1,r=-1;if(0===i)for(var s=0;s<t.length;s++){var l=t.ea(s).PH;l>o&&(o=l,r=s)}else for(s=0;s<t.length;s++)(l=n[s])>o&&(o=l,r=s);for(e.add(t.ea(r)),n[r]=-1,r=t.ea(r),o=0,s=r.lc;s.next();)0>(o=t.indexOf(s.value.fromVertex))||0<=n[o]&&n[o]++;for(r=r.jc;r.next();)0>(o=t.indexOf(r.value.toVertex))||0<=n[o]&&n[o]++}for(t=[],r=0;r<e.length;r++){n=e.ea(r),t[r]=[];for(var a=0,i=n.jc;i.next();)(a=e.indexOf(i.value.toVertex))!==r&&0>t[r].indexOf(a)&&t[r].push(a);for(n=n.lc;n.next();)(a=e.indexOf(n.value.fromVertex))!==r&&0>t[r].indexOf(a)&&t[r].push(a)}for(s=[],r=0;r<t.length;r++)s[r]=0;for(var n=[],l=[],h=[],i=[],o=new f(la),u=0,r=0;r<t.length;r++){var c=t[r].length;if(1===c)i.push(r);else if(0===c)o.add(e.ea(r));else{if(0===u)n.push(r);else{for(var d=1/0,p=1/0,y=-1,v=[],c=0;c<n.length;c++)0>t[n[c]].indexOf(n[c===n.length-1?0:c+1])&&v.push(c===n.length-1?0:c+1);if(0===v.length)for(c=0;c<n.length;c++)v.push(c);for(c=0;c<v.length;c++){var g,m=v[c],a=t[r];g=l;for(var b=h,x=s,w=m,k=n,M=0,P=0;P<g.length;P++){var T=x[g[P]],S=x[b[P]],C=0,N=0;if(T<S?(C=T,N=S):(C=S,N=T),C<w&&w<=N)for(T=0;T<a.length;T++)S=a[T],0>k.indexOf(S)||C<x[S]&&x[S]<N||C===x[S]||N===x[S]||M++;else for(T=0;T<a.length;T++)S=a[T],0>k.indexOf(S)||C<x[S]&&x[S]<N&&C!==x[S]&&N!==x[S]&&M++}for(g=M,x=b=0;x<t[r].length;x++)0<=(a=n.indexOf(t[r][x]))&&(a=Math.abs(m-(a>=m?a+1:a)),b+=a<n.length+1-a?a:n.length+1-a);for(x=0;x<l.length;x++)a=s[l[x]],w=s[h[x]],a>=m&&a++,w>=m&&w++,a>w&&(k=w,w=a,a=k),w-a<(n.length+2)/2==(a<m&&m<=w)&&b++;(g<d||g===d&&b<p)&&(d=g,p=b,y=m)}for(n.splice(y,0,r),c=0;c<n.length;c++)s[n[c]]=c;for(c=0;c<t[r].length;c++)d=t[r][c],0<=n.indexOf(d)&&(l.push(r),h.push(d))}u++}}for(r=!1,s=n.length;;){for(r=!0,l=0;l<i.length;l++)if(h=i[l],u=t[h][0],0<=(a=n.indexOf(u))){for(p=c=0;p<t[u].length;p++)d=t[u][p],0>(d=n.indexOf(d))||d===a||(y=d>a?d-a:a-d,c+=d<a!=y>s-y?1:-1);n.splice(0>c?a:a+1,0,h),i.splice(l,1),l--}else r=!1;if(r)break;n.push(i[0]),i.splice(0,1)}for(r=0;r<n.length;r++)o.add(e.ea(n[r]));return o;default:Yh.k("Invalid sorting type.")}return t},Yh.defineProperty(Yl,{hJ:"radius"},function(){return this.Ds},function(t){this.Ds!==t&&(Yh.j(t,"number",Yl,"radius"),0<t||isNaN(t))&&(this.Ds=t,this.J())}),Yh.defineProperty(Yl,{jH:"aspectRatio"},function(){return this.Lq},function(t){this.Lq!==t&&(Yh.j(t,"number",Yl,"aspectRatio"),0<t&&(this.Lq=t,this.J()))}),Yh.defineProperty(Yl,{ye:"startAngle"},function(){return this.dt},function(t){this.dt!==t&&(Yh.j(t,"number",Yl,"startAngle"),this.dt=t,this.J())}),Yh.defineProperty(Yl,{pf:"sweepAngle"},function(){return this.ft},function(t){this.ft!==t&&(Yh.j(t,"number",Yl,"sweepAngle"),this.ft=0<t&&360>=t?t:360,this.J())}),Yh.defineProperty(Yl,{Qf:"arrangement"},function(){return this.ld},function(t){this.ld!==t&&(Yh.mb(t,Yl,Yl,"arrangement"),t===vp||t===dp||t===pp||t===yp)&&(this.ld=t,this.J())}),Yh.defineProperty(Yl,{direction:"direction"},function(){return this.aa},function(t){this.aa!==t&&(Yh.mb(t,Yl,Yl,"direction"),t===gp||t===mp||t===bp||t===xp)&&(this.aa=t,this.J())}),Yh.defineProperty(Yl,{sorting:"sorting"},function(){return this.ai},function(t){this.ai!==t&&(Yh.mb(t,Yl,Yl,"sorting"),t===wp||t===kp||t===Mp||Pp||t===Tp)&&(this.ai=t,this.J())}),Yh.defineProperty(Yl,{comparer:"comparer"},function(){return this.Kh},function(t){this.Kh!==t&&(Yh.j(t,"function",Yl,"comparer"),this.Kh=t,this.J())}),Yh.defineProperty(Yl,{spacing:"spacing"},function(){return this.bi},function(t){this.bi!==t&&(Yh.j(t,"number",Yl,"spacing"),this.bi=t,this.J())}),Yh.defineProperty(Yl,{Lx:"nodeDiameterFormula"},function(){return this.rs},function(t){this.rs!==t&&(Yh.mb(t,Yl,Yl,"nodeDiameterFormula"),t===Sp||t===Cp)&&(this.rs=t,this.J())}),Yh.u(Yl,{$G:"actualXRadius"},function(){return this.Wd}),Yh.u(Yl,{aH:"actualYRadius"},function(){return this.Hg}),Yh.u(Yl,{ZJ:"actualSpacing"},function(){return this.bl}),Yh.u(Yl,{ZG:"actualCenter"},function(){return isNaN(this.oe.x)||isNaN(this.oe.y)?new x(0,0):new x(this.oe.x+this.$G,this.oe.y+this.aH)});var dp;Yl.ConstantSpacing=dp=Yh.p(Yl,"ConstantSpacing",0);var pp;Yl.ConstantDistance=pp=Yh.p(Yl,"ConstantDistance",1);var yp;Yl.ConstantAngle=yp=Yh.p(Yl,"ConstantAngle",2);var vp;Yl.Packed=vp=Yh.p(Yl,"Packed",3);var gp;Yl.Clockwise=gp=Yh.p(Yl,"Clockwise",4);var mp;Yl.Counterclockwise=mp=Yh.p(Yl,"Counterclockwise",5);var bp;Yl.BidirectionalLeft=bp=Yh.p(Yl,"BidirectionalLeft",6);var xp;Yl.BidirectionalRight=xp=Yh.p(Yl,"BidirectionalRight",7);var wp;Yl.Forwards=wp=Yh.p(Yl,"Forwards",8);var kp;Yl.Reverse=kp=Yh.p(Yl,"Reverse",9);var Mp;Yl.Ascending=Mp=Yh.p(Yl,"Ascending",10);var Pp;Yl.Descending=Pp=Yh.p(Yl,"Descending",11);var Tp;Yl.Optimized=Tp=Yh.p(Yl,"Optimized",12);var Sp;Yl.Pythagorean=Sp=Yh.p(Yl,"Pythagorean",13);var Cp;Yl.Circular=Cp=Yh.p(Yl,"Circular",14),ra.prototype.compare=function(t,n){if(0<t&&0>this.Up||Math.abs(t)<Math.abs(this.Up)&&!(0>t&&0<this.Up)){this.Up=t,this.eo=[],this.zq=[];for(var i=0;i<n.length;i++)this.eo[i]=n[i].eb.x,this.zq[i]=n[i].eb.y}},ra.prototype.commit=function(t){if(null!==this.eo&&null!==this.zq)for(var n=0;n<this.eo.length;n++){var i=t.ea(n);i.x=this.eo[n],i.y=this.zq[n]}},Yh.Ka(sa,Il),Yh.ga("CircularNetwork",sa),sa.prototype.createVertex=function(){return new la},sa.prototype.createEdge=function(){return new ha},Yh.Ka(la,Kl),Yh.ga("CircularVertex",la),Yh.Ka(ha,Ul),Yh.ga("CircularEdge",ha),Yh.Ka(ua,ql),Yh.ga("ForceDirectedLayout",ua),ua.prototype.cloneProtected=function(t){ql.prototype.cloneProtected.call(this,t),t.kg.assign(this.kg),t.Kq=this.Kq,t.$h=this.$h,t.Jh=this.Jh,t.bp=this.bp,t.sr=this.sr,t.Ph=this.Ph,t.Es=this.Es,t.Ao=this.Ao,t.zo=this.zo,t.xo=this.xo,t.yo=this.yo,t.hr=this.hr,t.gr=this.gr},ua.prototype.createNetwork=function(){return new wa},ua.prototype.doLayout=function(t){if(null===t&&Yh.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(t)),t=this.IA,0<this.network.vertexes.count){this.network.ex();for(var n=this.network.vertexes.i;n.next();){var i=n.value;i.charge=this.electricalCharge(i),i.mass=this.gravitationalMass(i)}for(n=this.network.edges.i;n.next();)i=n.value,i.stiffness=this.springStiffness(i),i.length=this.springLength(i);if(this.Rz(),this.Rr=0,this.needsClusterLayout()){for(n=this.network,i=n.HJ().i;i.next();){this.network=i.value;for(var e=this.network.vertexes.i;e.next();){var o=e.value;o.gg=o.vertexes.count,o.Ik=1,o.pn=null,o.Eh=null}fa(this,0,t)}this.network=n,i.reset();for(var e=this.lE,r=i.count,s=!0,l=o=0,a=Yh.lb(),h=0;h<r+n.vertexes.count+2;h++)a[h]=null;r=0,i.reset();for(var u=Yh.Ff();i.next();)if(h=i.value,this.th(h,u),s)s=!1,o=u.x+u.width/2,l=u.y+u.height/2,a[0]=new x(u.x+u.width+e.width,u.y),a[1]=new x(u.x,u.y+u.height+e.height),r=2;else{var f=va(a,r,o,l,u.width,u.height,e),c=a[f],d=new x(c.x+u.width+e.width,c.y),p=new x(c.x,c.y+u.height+e.height);for(f+1<r&&a.splice(f+1,0,null),a[f]=d,a[f+1]=p,r++,f=c.x-u.x,c=c.y-u.y,h=h.vertexes.i;h.next();)d=h.value,d.ka+=f,d.ra+=c}for(Yh.Db(u),h=n.vertexes.i;h.next();)s=h.value,u=s.eb,2>r?(o=u.x+u.width/2,l=u.y+u.height/2,a[0]=new x(u.x+u.width+e.width,u.y),a[1]=new x(u.x,u.y+u.height+e.height),r=2):(f=va(a,r,o,l,u.width,u.height,e),c=a[f],d=new x(c.x+u.width+e.width,c.y),p=new x(c.x,c.y+u.height+e.height),f+1<r&&a.splice(f+1,0,null),a[f]=d,a[f+1]=p,r++,s.ka=c.x+s.width/2,s.ra=c.y+s.height/2);for(Yh.wa(a),i.reset();i.next();){for(e=i.value,o=e.vertexes.i;o.next();)n.Dl(o.value);for(e=e.edges.i;e.next();)n.Dp(e.value)}}ma(this,t),this.updateParts()}this.bp=t,this.network=null,this.Af=!0},ua.prototype.needsClusterLayout=function(){if(3>this.network.vertexes.count)return!1;for(var t=0,n=0,i=this.network.vertexes.first().eb,e=this.network.vertexes.i;e.next();){if(e.value.eb.Uf(i)&&2<++t)return!0;if(10<n)break;n++}return!1},ua.prototype.th=function(t,n){for(var i=!0,e=t.vertexes.i;e.next();){var o=e.value;i?(i=!1,n.set(o.eb)):n.Hh(o.eb)}return n},ua.prototype.Rz=function(){if(this.comments)for(var t=this.network.vertexes.i;t.next();)this.addComments(t.value)},ua.prototype.addComments=function(t){var n=t.Oc;if(null!==n)for(n=n.JE();n.next();){var i=n.value;if("Comment"===i.td&&i.isVisible()){var e=this.network.yn(i);null===e&&(e=this.network.vt(i)),e.charge=this.FH;for(var i=null,o=e.jc;o.next();){var r=o.value;if(r.toVertex===t){i=r;break}}if(null===i)for(o=e.lc;o.next();)if(r=o.value,r.fromVertex===t){i=r;break}null===i&&(i=this.network.fq(t,e,null)),i.length=this.GH}}},ua.prototype.moveFixedVertex=function(){},ua.prototype.commitLayout=function(){this.gB(),this.commitNodes(),this.gu&&this.commitLinks()},ua.prototype.gB=function(){if(this.tq)for(var t=this.network.edges.i;t.next();){var n=t.value.link;null!==n&&(n.Ab=iu,n.Bb=iu)}},ua.prototype.commitNodes=function(){var t=0,n=0;if(this.iH){var i=Yh.Ff();this.th(this.network,i),n=this.oe,t=n.x-i.x,n=n.y-i.y,Yh.Db(i)}for(var i=Yh.Ff(),e=this.network.vertexes.i;e.next();){var o=e.value;0===t&&0===n||(i.assign(o.eb),i.x+=t,i.y+=n,o.eb=i),o.commit()}Yh.Db(i)},ua.prototype.commitLinks=function(){for(var t=this.network.edges.i;t.next();)t.value.commit()},ua.prototype.springStiffness=function(t){return t=t.stiffness,isNaN(t)?this.Ao:t},ua.prototype.springLength=function(t){return t=t.length,isNaN(t)?this.zo:t},ua.prototype.electricalCharge=function(t){return t=t.charge,isNaN(t)?this.xo:t},ua.prototype.electricalFieldX=function(){return 0},ua.prototype.electricalFieldY=function(){return 0},ua.prototype.gravitationalMass=function(t){return t=t.mass,isNaN(t)?this.yo:t},ua.prototype.gravitationalFieldX=function(){return 0},ua.prototype.gravitationalFieldY=function(){return 0},ua.prototype.isFixed=function(t){return t.isFixed},Yh.u(ua,{DK:"currentIteration"},function(){return this.Rr}),Yh.defineProperty(ua,{lE:"arrangementSpacing"},function(){return this.kg},function(t){Yh.G(t,M,ua,"arrangementSpacing"),this.kg.L(t)||(this.kg.assign(t),this.J())}),Yh.defineProperty(ua,{iH:"arrangesToOrigin"},function(){return this.Kq},function(t){this.Kq!==t&&(Yh.j(t,"boolean",ua,"arrangesToOrigin"),this.Kq=t,this.J())}),Yh.defineProperty(ua,{tq:"setsPortSpots"},function(){return this.$h},function(t){this.$h!==t&&(Yh.j(t,"boolean",ua,"setsPortSpots"),this.$h=t,this.J())}),Yh.defineProperty(ua,{comments:"comments"},function(){return this.Jh},function(t){this.Jh!==t&&(Yh.j(t,"boolean",ua,"comments"),this.Jh=t,this.J())}),Yh.defineProperty(ua,{IA:"maxIterations"},function(){return this.bp},function(t){this.bp!==t&&(Yh.j(t,"number",ua,"maxIterations"),0<=t&&(this.bp=t,this.J()))}),Yh.defineProperty(ua,{GE:"epsilonDistance"},function(){return this.sr},function(t){this.sr!==t&&(Yh.j(t,"number",ua,"epsilonDistance"),0<t&&(this.sr=t,this.J()))}),Yh.defineProperty(ua,{XK:"infinityDistance"},function(){return this.Ph},function(t){this.Ph!==t&&(Yh.j(t,"number",ua,"infinityDistance"),1<t&&(this.Ph=t,this.J()))}),Yh.defineProperty(ua,{Ux:"randomNumberGenerator"},function(){return this.Es},function(t){this.Es!==t&&(null!==t&&"function"!=typeof t.random&&Yh.k('ForceDirectedLayout.randomNumberGenerator must have a "random()" function on it: '+t),this.Es=t)}),Yh.defineProperty(ua,{PK:"defaultSpringStiffness"},function(){return this.Ao},function(t){this.Ao!==t&&(Yh.j(t,"number",ua,"defaultSpringStiffness"),this.Ao=t,this.J())}),Yh.defineProperty(ua,{OK:"defaultSpringLength"},function(){return this.zo},function(t){this.zo!==t&&(Yh.j(t,"number",ua,"defaultSpringLength"),this.zo=t,this.J())}),Yh.defineProperty(ua,{IK:"defaultElectricalCharge"},function(){return this.xo},function(t){this.xo!==t&&(Yh.j(t,"number",ua,"defaultElectricalCharge"),this.xo=t,this.J())}),Yh.defineProperty(ua,{JK:"defaultGravitationalMass"},function(){return this.yo},function(t){this.yo!==t&&(Yh.j(t,"number",ua,"defaultGravitationalMass"),this.yo=t,this.J())}),Yh.defineProperty(ua,{GH:"defaultCommentSpringLength"},function(){return this.hr},function(t){this.hr!==t&&(Yh.j(t,"number",ua,"defaultCommentSpringLength"),this.hr=t,this.J())}),Yh.defineProperty(ua,{FH:"defaultCommentElectricalCharge"},function(){return this.gr},function(t){this.gr!==t&&(Yh.j(t,"number",ua,"defaultCommentElectricalCharge"),this.gr=t,this.J())}),Yh.Ka(wa,Il),Yh.ga("ForceDirectedNetwork",wa),wa.prototype.createVertex=function(){return new ka},wa.prototype.createEdge=function(){return new Ma},Yh.Ka(ka,Kl),Yh.ga("ForceDirectedVertex",ka),Yh.Ka(Ma,Ul),Yh.ga("ForceDirectedEdge",Ma),Yh.Ka(Pa,ql),Yh.ga("LayeredDigraphLayout",Pa),Pa.prototype.cloneProtected=function(t){ql.prototype.cloneProtected.call(this,t),t.Hm=this.Hm,t.Ud=this.Ud,t.aa=this.aa,t.wo=this.wo,t.Yo=this.Yo,t.No=this.No,t.Fm=this.Fm,t.jo=this.jo,t.Yi=this.Yi,t.$h=this.$h,t.Wr=this.Wr},Pa.prototype.hc=function(t){t.De===Pa?0===t.name.indexOf("Aggressive")?this.gH=t:0===t.name.indexOf("Cycle")?this.EH=t:0===t.name.indexOf("Init")?this.qI=t:0===t.name.indexOf("Layer")?this.EI=t:Yh.k("Unknown enum value: "+t):ql.prototype.hc.call(this,t)},Pa.prototype.createNetwork=function(){return new rh},Pa.prototype.doLayout=function(t){for(null===t&&Yh.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(t)),this.oe=this.initialOrigin(this.oe),this.Yv=-1,this.Mf=this.es=0,this.os=this.ms=this.Mm=null,t=0;t<this.ih.length;t++)this.ih[t]=null;if(0<this.network.vertexes.count){for(this.network.ex(),t=this.network.edges.i;t.next();)t.value.rev=!1;switch(this.wo){default:case jp:t=this.network;var n=0,i=t.vertexes.count-1,e=[];e.length=i+1;for(var o=t.vertexes.i;o.next();)o.value.valid=!0;for(;null!==Oa(t);){for(o=Ba(t);null!==o;)e[i]=o,i--,o.valid=!1,o=Ba(t);for(o=qa(t);null!==o;)e[n]=o,n++,o.valid=!1,o=qa(t);for(var o=null,r=0,s=this.network.vertexes.i;s.next();){var l=s.value;if(l.valid){for(var a=0,h=l.jc;h.next();)h.value.toVertex.valid&&a++;for(var h=0,u=l.lc;u.next();)u.value.fromVertex.valid&&h++;(null===o||r<a-h)&&(o=l,r=a-h)}}null!==o&&(e[n]=o,n++,o.valid=!1)}for(n=0;n<t.vertexes.count;n++)e[n].index=n;for(e=t.edges.i;e.next();)n=e.value,n.fromVertex.index>n.toVertex.index&&(t.ay(n),n.rev=!0);break;case Np:for(e=this.network.vertexes.i;e.next();)t=e.value,t.Pp=-1,t.finish=-1;for(t=this.network.edges.i;t.next();)t.value.forest=!1;for(this.ns=0,e.reset();e.next();)n=e.value,0===n.lc.count&&za(this,n);for(e.reset();e.next();)n=e.value,-1===n.Pp&&za(this,n);for(t.reset();t.next();)e=t.value,e.forest||(n=e.fromVertex,i=n.finish,o=e.toVertex,r=o.finish,o.Pp<n.Pp&&i<r&&(this.network.ay(e),e.rev=!0))}for(t=this.network.vertexes.i;t.next();)t.value.layer=-1;for(this.qb=-1,this.assignLayers(),t.reset();t.next();)this.qb=Math.max(this.qb,t.value.layer);for(t=this.network,e=[],i=t.edges.i;i.next();)n=i.value,n.valid=!1,e.push(n);for(i=0;i<e.length;i++)if(n=e[i],r=n.fromVertex,o=n.toVertex,!n.valid&&(null!==r.rd&&null!==o.rd||r.layer!==o.layer)){if(h=l=a=s=0,null!==n.link){if(null===(a=n.link))continue;var f=r.rd,s=o.rd;if(null===f||null===s)continue;var c=a.Y,l=a.$,d=a.Jc,h=a.jd;n.rev&&(a=c,u=d,c=l,d=h,l=a,h=u);var p=r.T,a=o.T,y=n.rev?o.M:r.M,u=Yh.K();y.I()?(ds(c,d,lu,u),u.I()||u.assign(p)):u.assign(p),f!==c&&y.I()&&c.isVisible()&&(f=r.M,f.I()&&(u.x+=y.x-f.x,u.y+=y.y-f.y)),c=n.rev?r.M:o.M,f=Yh.K(),c.I()?(ds(l,h,lu,f),f.I()||f.assign(a)):f.assign(a),s!==l&&c.I()&&l.isVisible()&&(s=o.M,s.I()&&(f.x+=c.x-s.x,f.y+=c.y-s.y)),90===this.aa||270===this.aa?(s=Math.round((u.x-p.x)/this.Ud),l=u.x,a=Math.round((f.x-a.x)/this.Ud),h=f.x):(s=Math.round((u.y-p.y)/this.Ud),l=u.y,a=Math.round((f.y-a.y)/this.Ud),h=f.y),Yh.v(u),Yh.v(f),n.portFromColOffset=s,n.portFromPos=l,n.portToColOffset=a,n.portToPos=h}else n.portFromColOffset=0,n.portFromPos=0,n.portToColOffset=0,n.portToPos=0;u=r.layer,p=o.layer;t:if(f=n,c=0,null!==(y=f.link)){var v=y.Jc,g=y.jd;if(null!==v&&null!==g){var m=y.Y,d=y.$;if(null!==m&&null!==d){var b=v.Ab,x=g.Bb;this.tq||(y.Ab.Vc()||(b=y.Ab),y.Bb.Vc()||(x=y.Bb));var w=y.Zb,k=th(this,!0);(b.Vc()||b===nu)&&(b=k);var M=th(this,!1);if((x.Vc()||x===nu)&&(x=M),b.tj()&&b.rj(M)&&x.tj()&&x.rj(k)){c=0;break t}k=y.getLinkPoint(m,v,b,!0,w,d,g,Yh.K()),b=y.getLinkDirection(m,v,k,b,!0,w,d,g),Yh.v(k),b===Va(this,f,!0)?c+=1:this.tq&&null!==m&&1===m.ports.count&&f.rev&&(c+=1),b=y.getLinkPoint(d,g,x,!1,w,m,v,Yh.K()),y=y.getLinkDirection(d,g,b,x,!1,w,m,v),Yh.v(b),y===Va(this,f,!1)?c+=2:this.tq&&null!==d&&1===d.ports.count&&f.rev&&(c+=2)}}}if(f=1===c||3===c,(c=2===c||3===c)&&(d=t.createVertex(),d.rd=null,d.kn=1,d.layer=u,d.near=r,t.Dl(d),r=t.fq(r,d,n.link),r.valid=!1,r.rev=n.rev,r.portFromColOffset=s,r.portToColOffset=0,r.portFromPos=l,r.portToPos=0,r=d),y=1,f&&y--,u-p>y&&0<u){for(n.valid=!1,d=t.createVertex(),d.rd=null,d.kn=2,d.layer=u-1,t.Dl(d),r=t.fq(r,d,n.link),r.valid=!0,r.rev=n.rev,r.portFromColOffset=c?0:s,r.portToColOffset=0,r.portFromPos=c?0:l,r.portToPos=0,r=d,u--;u-p>y&&0<u;)d=t.createVertex(),d.rd=null,d.kn=3,d.layer=u-1,t.Dl(d),r=t.fq(r,d,n.link),r.valid=!0,r.rev=n.rev,r.portFromColOffset=0,r.portToColOffset=0,r.portFromPos=0,r.portToPos=0,r=d,u--;r=t.fq(d,o,n.link),r.valid=!f,f&&(d.near=o),r.rev=n.rev,r.portFromColOffset=0,r.portToColOffset=a,r.portFromPos=0,r.portToPos=h}else n.valid=!0}for(e=this.he=[],n=0;n<=this.qb;n++)e[n]=0;for(t=this.network.vertexes.i;t.next();)t.value.index=-1;for(this.initializeIndices(),this.Yv=-1,n=this.Mf=this.es=0;n<=this.qb;n++)e[n]>e[this.Mf]&&(this.Yv=e[n]-1,this.Mf=n),e[n]<e[this.es]&&(this.es=n);for(this.os=[],n=0;n<e.length;n++)this.os[n]=[];for(t.reset();t.next();)e=t.value,this.os[e.layer][e.index]=e;for(this.Jb=-1,t=0;t<=this.qb;t++){for(e=ih(this,t),n=0,i=this.he[t],o=0;o<i;o++)r=e[o],n+=this.nodeMinColumnSpace(r,!0),r.column=n,n+=1,n+=this.nodeMinColumnSpace(r,!1);this.Jb=Math.max(this.Jb,n-1),eh(this,t,e)}this.reduceCrossings(),this.straightenAndPack(),this.updateParts()}this.network=null,this.Af=!0},Pa.prototype.linkMinLength=function(){return 1},Pa.prototype.nodeMinLayerSpace=function(t,n){return null===t.rd?0:90===this.aa||270===this.aa?n?t.T.y+10:t.M.height-t.T.y+10:n?t.T.x+10:t.M.width-t.T.x+10},Pa.prototype.nodeMinColumnSpace=function(t,n){if(null===t.rd)return 0;var i=n?t.PA:t.OA;return null!==i?i:(i=this.aa,90===i||270===i?n?t.PA=t.T.x/this.Ud+1|0:t.OA=(t.M.width-t.T.x)/this.Ud+1|0:n?t.PA=t.T.y/this.Ud+1|0:t.OA=(t.M.height-t.T.y)/this.Ud+1|0)},Pa.prototype.countCrossings=function(){for(var t=0,n=0;n<=this.qb;n++)for(var i=Na(this,n,1),e=this.he[n],o=0;o<e;o++)for(var r=o;r<e;r++)t+=i[o*e+r];return t},Pa.prototype.normalize=function(){var t=1/0;this.Jb=-1;for(var n=this.network.vertexes.i;n.next();){var i=n.value,t=Math.min(t,i.column-this.nodeMinColumnSpace(i,!0));this.Jb=Math.max(this.Jb,i.column+this.nodeMinColumnSpace(i,!1))}for(n.reset();n.next();)n.value.column-=t;this.Jb-=t},Pa.prototype.assignLayers=function(){switch(this.Yo){case Dp:Ea(this);break;case Ap:for(var t=0,n=this.network.vertexes.i;n.next();)t=Ra(this,n.value),this.qb=Math.max(t,this.qb);for(n.reset();n.next();)t=n.value,t.layer=this.qb-t.layer;break;default:case Lp:for(Ea(this),n=this.network.vertexes.i;n.next();)n.value.valid=!1;for(n.reset();n.next();)t=n.value,0===t.lc.count&&Ga(this,t);for(t=1/0,n.reset();n.next();)t=Math.min(t,n.value.layer);for(this.qb=-1,n.reset();n.next();){var i=n.value;i.layer-=t,this.qb=Math.max(this.qb,i.layer)}}},Pa.prototype.initializeIndices=function(){switch(this.No){default:case Bp:for(var t=this.network.vertexes.i;t.next();){var n=t.value,i=n.layer;n.index=this.he[i],this.he[i]++}break;case Fp:for(t=this.network.vertexes.i,n=this.qb;0<=n;n--)for(t.reset();t.next();)i=t.value,i.layer===n&&-1===i.index&&Ha(this,i);break;case Op:for(t=this.network.vertexes.i,n=0;n<=this.qb;n++)for(t.reset();t.next();)i=t.value,i.layer===n&&-1===i.index&&Ka(this,i)}},Pa.prototype.reduceCrossings=function(){for(var t=this.countCrossings(),n=Sa(this),i=0,e=0,o=0,i=0;i<this.Fm;i++){for(e=0;e<=this.qb;e++)Ua(this,e,1),Ja(this,e,1);for(o=this.countCrossings(),o<t&&(t=o,n=Sa(this)),e=this.qb;0<=e;e--)Ua(this,e,-1),Ja(this,e,-1);o=this.countCrossings(),o<t&&(t=o,n=Sa(this))}for(Ca(this,n),i=0;i<this.Fm;i++){for(e=0;e<=this.qb;e++)Ua(this,e,0),Ja(this,e,0);for(o=this.countCrossings(),o<t&&(t=o,n=Sa(this)),e=this.qb;0<=e;e--)Ua(this,e,0),Ja(this,e,0);o=this.countCrossings(),o<t&&(t=o,n=Sa(this))}Ca(this,n);var r=!1,s=i=0,l=0,e=0;switch(this.jo){case qp:break;case Ep:for(l=t+1;(e=this.countCrossings())<l;)for(l=e,i=this.qb;0<=i;i--)for(s=0;s<=i;s++){for(r=!0;r;)for(r=!1,e=i;e>=s;e--)r=Ja(this,e,-1)||r;for(o=this.countCrossings(),o>=t?Ca(this,n):(t=o,n=Sa(this)),r=!0;r;)for(r=!1,e=i;e>=s;e--)r=Ja(this,e,1)||r;for(o=this.countCrossings(),o>=t?Ca(this,n):(t=o,n=Sa(this)),r=!0;r;)for(r=!1,e=s;e<=i;e++)r=Ja(this,e,1)||r;for(o>=t?Ca(this,n):(t=o,n=Sa(this)),r=!0;r;)for(r=!1,e=s;e<=i;e++)r=Ja(this,e,-1)||r;for(o>=t?Ca(this,n):(t=o,n=Sa(this)),r=!0;r;)for(r=!1,e=i;e>=s;e--)r=Ja(this,e,0)||r;for(o>=t?Ca(this,n):(t=o,n=Sa(this)),r=!0;r;)for(r=!1,e=s;e<=i;e++)r=Ja(this,e,0)||r;o>=t?Ca(this,n):(t=o,n=Sa(this))}break;default:case zp:for(i=this.qb,s=0,l=t+1;(e=this.countCrossings())<l;){for(l=e,r=!0;r;)for(r=!1,e=i;e>=s;e--)r=Ja(this,e,-1)||r;for(o=this.countCrossings(),o>=t?Ca(this,n):(t=o,n=Sa(this)),r=!0;r;)for(r=!1,e=i;e>=s;e--)r=Ja(this,e,1)||r;for(o=this.countCrossings(),o>=t?Ca(this,n):(t=o,n=Sa(this)),r=!0;r;)for(r=!1,e=s;e<=i;e++)r=Ja(this,e,1)||r;for(o>=t?Ca(this,n):(t=o,n=Sa(this)),r=!0;r;)for(r=!1,e=s;e<=i;e++)r=Ja(this,e,-1)||r;for(o>=t?Ca(this,n):(t=o,n=Sa(this)),r=!0;r;)for(r=!1,e=i;e>=s;e--)r=Ja(this,e,0)||r;for(o>=t?Ca(this,n):(t=o,n=Sa(this)),r=!0;r;)for(r=!1,e=s;e<=i;e++)r=Ja(this,e,0)||r;o>=t?Ca(this,n):(t=o,n=Sa(this))}}Ca(this,n)},Pa.prototype.straightenAndPack=function(){var t=0,n=!1,i=0!=(this.Yi&Ip),t=this.Yi===Vp;if(1e3<this.network.edges.count&&!t&&(i=!1),i){for(n=[],t=t=0;t<=this.qb;t++)n[t]=0;for(var e=0,o=this.network.vertexes.i;o.next();){var r=o.value,t=r.layer,e=r.column,r=this.nodeMinColumnSpace(r,!1);n[t]=Math.max(n[t],e+r)}for(o.reset();o.next();)r=o.value,t=r.layer,e=r.column,r.column=(8*(this.Jb-n[t])>>1)+8*e;this.Jb*=8}if(0!=(this.Yi&Rp))for(n=!0;n;){for(n=!1,t=this.Mf+1;t<=this.qb;t++)n=Ya(this,t,1)||n;for(t=this.Mf-1;0<=t;t--)n=Ya(this,t,-1)||n;n=Ya(this,this.Mf,0)||n}if(0!=(this.Yi&Gp)){for(t=this.Mf+1;t<=this.qb;t++)Xa(this,t,1);for(t=this.Mf-1;0<=t;t--)Xa(this,t,-1);Xa(this,this.Mf,0)}if(i&&(Za(this,-1),Za(this,1)),0!=(this.Yi&Rp))for(n=!0;n;){for(n=!1,n=Ya(this,this.Mf,0)||n,t=this.Mf+1;t<=this.qb;t++)n=Ya(this,t,0)||n;for(t=this.Mf-1;0<=t;t--)n=Ya(this,t,0)||n}},Pa.prototype.commitLayout=function(){if(this.tq)for(var t=th(this,!0),n=th(this,!1),i=this.network.edges.i;i.next();){var e=i.value.link;null!==e&&(e.Ab=t,e.Bb=n)}this.commitNodes(),this.Wz(),this.gu&&this.commitLinks()},Pa.prototype.commitNodes=function(){this.wg=[],this.Lf=[],this.Kf=[],this.Nb=[];for(var t=0;t<=this.qb;t++)this.wg[t]=0,this.Lf[t]=0,this.Kf[t]=0,this.Nb[t]=0;for(t=this.network.vertexes.i;t.next();){var n=t.value,i=n.layer;this.wg[i]=Math.max(this.wg[i],this.nodeMinLayerSpace(n,!0)),this.Lf[i]=Math.max(this.Lf[i],this.nodeMinLayerSpace(n,!1))}for(var n=0,e=this.Hm,i=0;i<=this.qb;i++){var o=e;0>=this.wg[i]+this.Lf[i]&&(o=0),0<i&&(n+=o/2),90===this.aa||0===this.aa?(n+=this.Lf[i],this.Kf[i]=n,n+=this.wg[i]):(n+=this.wg[i],this.Kf[i]=n,n+=this.Lf[i]),i<this.qb&&(n+=o/2),this.Nb[i]=n}for(e=n,n=this.oe,i=0;i<=this.qb;i++)270===this.aa?this.Kf[i]=n.y+this.Kf[i]:90===this.aa?(this.Kf[i]=n.y+e-this.Kf[i],this.Nb[i]=e-this.Nb[i]):180===this.aa?this.Kf[i]=n.x+this.Kf[i]:(this.Kf[i]=n.x+e-this.Kf[i],this.Nb[i]=e-this.Nb[i]);for(t.reset(),e=o=1/0;t.next();){var i=t.value,r=i.layer,s=0|i.column,l=0,a=0;270===this.aa||90===this.aa?(l=n.x+this.Ud*s,a=this.Kf[r]):(l=this.Kf[r],a=n.y+this.Ud*s),i.ka=l,i.ra=a,o=Math.min(i.x,o),e=Math.min(i.y,e)}for(o=n.x-o,n=n.y-e,this.SB=new x(o,n),t.reset();t.next();)i=t.value,i.x+=o,i.y+=n,i.commit()},Pa.prototype.Wz=function(){for(var t=0,n=this.Hm,i=0;i<=this.qb;i++)t+=this.wg[i],t+=this.Lf[i];for(var t=t+this.qb*n,n=[],i=this.Ud*this.Jb,e=this.NI;0<=e;e--)270===this.aa?0===e?n.push(new P(0,0,i,Math.abs(this.Nb[0]))):n.push(new P(0,this.Nb[e-1],i,Math.abs(this.Nb[e-1]-this.Nb[e]))):90===this.aa?0===e?n.push(new P(0,this.Nb[0],i,Math.abs(this.Nb[0]-t))):n.push(new P(0,this.Nb[e],i,Math.abs(this.Nb[e-1]-this.Nb[e]))):180===this.aa?0===e?n.push(new P(0,0,Math.abs(this.Nb[0]),i)):n.push(new P(this.Nb[e-1],0,Math.abs(this.Nb[e-1]-this.Nb[e]),i)):0===e?n.push(new P(this.Nb[0],0,Math.abs(this.Nb[0]-t),i)):n.push(new P(this.Nb[e],0,Math.abs(this.Nb[e-1]-this.Nb[e]),i));this.commitLayers(n,this.SB)},Pa.prototype.commitLayers=function(){},Pa.prototype.commitLinks=function(){for(var t,n=this.network.edges.i;n.next();)null!==(t=n.value.link)&&(t.fm(),t.Hp(),t.jj());for(n.reset();n.next();)null!==(t=n.value.link)&&t.bo();for(n.reset();n.next();){var i=n.value;if(null!==(t=i.link)){t.fm();var e=t,o=e.Y,r=e.$,s=e.Jc,l=e.jd,a=i.fromVertex,h=i.toVertex;if(i.valid){if(t.Ze===Hd&&4===t.qa){if(i.rev)var u=o,o=r,r=u,c=s,s=l,l=c;if(a.column===h.column){var d=t.getLinkPoint(o,s,t.computeSpot(!0),!0,!1,r,l),p=t.getLinkPoint(r,l,t.computeSpot(!1),!1,!1,o,s);d.I()||d.set(o.W.Hl),p.I()||p.set(r.W.Hl),t.Hp(),t.hj(d.x,d.y),t.hj((2*d.x+p.x)/3,(2*d.y+p.y)/3),t.hj((d.x+2*p.x)/3,(d.y+2*p.y)/3),t.hj(p.x,p.y)}else{var y=!1,v=!1;if(null!==s&&t.computeSpot(!0)===nu&&(y=!0),null!==l&&t.computeSpot(!1)===nu&&(v=!0),y||v){var g=t.l(0).x,m=t.l(0).y,b=t.l(1).x,x=t.l(1).y,w=t.l(2).x,k=t.l(2).y,M=t.l(3).x,P=t.l(3).y;if(y){90===this.aa||270===this.aa?(b=g,x=(m+P)/2):(b=(g+M)/2,x=m),t.ca(1,b,x);var T=t.getLinkPoint(o,s,t.computeSpot(!0),!0,!1,r,l);T.I()||T.set(o.W.Hl),t.ca(0,T.x,T.y)}v&&(90===this.aa||270===this.aa?(w=M,k=(m+P)/2):(w=(g+M)/2,k=P),t.ca(2,w,k),T=t.getLinkPoint(r,l,t.computeSpot(!1),!1,!1,o,s),T.I()||T.set(r.W.Hl),t.ca(3,T.x,T.y))}}}t.jj()}else if(a.layer===h.layer)t.jj();else{var S=!1,C=!1,N=0,j=t.Nt+1;if(t.Zb)C=!0,4<(N=t.qa)&&t.points.removeRange(2,N-3);else if(t.Ze===Hd)S=!0,N=t.qa,4<N&&t.points.removeRange(2,N-3),j=2;else{var N=t.qa,L=t.computeSpot(!0)===nu,D=t.computeSpot(!1)===nu;2<N&&L&&D?t.points.removeRange(1,N-2):3<N&&L&&!D?t.points.removeRange(1,N-3):3<N&&!L&&D?t.points.removeRange(2,N-2):4<N&&!L&&!D&&t.points.removeRange(2,N-3)}var A,F;if(i.rev){for(var O=0;null!==h&&a!==h;){F=A=null;for(var B=h.lc.i;B.next();){var q=B.value;if(q.link===i.link&&(A=q.fromVertex,F=q.toVertex,null===A.rd))break}if(A!==a)if(V=t.l(j-1).x,H=t.l(j-1).y,K=A.ka,U=A.ra,C)180===this.aa||0===this.aa?2===j?(t.w(j++,V,H),t.w(j++,V,U)):(X=null!==F?F.ra:H)!==U&&(J=this.Nb[A.layer-1],t.w(j++,J,H),t.w(j++,J,U)):2===j?(t.w(j++,V,H),t.w(j++,K,H)):($=null!==F?F.ka:V)!==K&&(J=this.Nb[A.layer-1],t.w(j++,V,J),t.w(j++,K,J));else if(2===j)if(Y=Math.max(10,this.wg[h.layer]),W=Math.max(10,this.Lf[h.layer]),S)180===this.aa?K<=h.M.x?(O=h.M.x,t.w(j++,O-Y,U),t.w(j++,O,U),t.w(j++,O+W,U)):(t.w(j++,K-Y,U),t.w(j++,K,U),t.w(j++,K+W,U)):90===this.aa?U>=h.M.bottom?(O=h.M.y+h.M.height,t.w(j++,K,O+W),t.w(j++,K,O),t.w(j++,K,O-Y)):(t.w(j++,K,U+W),t.w(j++,K,U),t.w(j++,K,U-Y)):270===this.aa?U<=h.M.y?(O=h.M.y,t.w(j++,K,O-Y),t.w(j++,K,O),t.w(j++,K,O+W)):(t.w(j++,K,U-Y),t.w(j++,K,U),t.w(j++,K,U+W)):0===this.aa&&(K>=h.M.right?(O=h.M.x+h.M.width,t.w(j++,O+W,U),t.w(j++,O,U),t.w(j++,O-Y,U)):(t.w(j++,K+W,U),t.w(j++,K,U),t.w(j++,K-Y,U)));else{t.w(j++,V,H);var z=0;180===this.aa||0===this.aa?((180===this.aa?K>=h.M.right:K<=h.M.x)&&(z=(0===this.aa?-Y:W)/2),t.w(j++,V+z,U)):((270===this.aa?U>=h.M.bottom:U<=h.M.y)&&(z=(90===this.aa?-Y:W)/2),t.w(j++,K,H+z)),t.w(j++,K,U)}else Y=Math.max(10,this.wg[A.layer]),W=Math.max(10,this.Lf[A.layer]),180===this.aa?(S&&t.w(j++,K-Y,U),t.w(j++,K,U),S&&t.w(j++,K+W,U)):90===this.aa?(S&&t.w(j++,K,U+W),t.w(j++,K,U),S&&t.w(j++,K,U-Y)):270===this.aa?(S&&t.w(j++,K,U-Y),t.w(j++,K,U),S&&t.w(j++,K,U+W)):(S&&t.w(j++,K+W,U),t.w(j++,K,U),S&&t.w(j++,K-Y,U));h=A}if(null===l||t.computeSpot(!1)!==nu||C)if(V=t.l(j-1).x,H=t.l(j-1).y,K=t.l(j).x,U=t.l(j).y,C){var E=this.Lf[a.layer],I=0;180===this.aa||0===this.aa?(I=H,I>=a.M.y&&I<=a.M.bottom&&(180===this.aa?K>=a.M.x:K<=a.M.right)&&(O=a.ka+(180===this.aa?-E:E),I=I<a.M.y+a.M.height/2?a.M.y-this.Ud/2:a.M.bottom+this.Ud/2,t.w(j++,O,H),t.w(j++,O,I)),t.w(j++,K,I)):(I=V,I>=a.M.x&&I<=a.M.right&&(270===this.aa?U>=a.M.y:U<=a.M.bottom)&&(O=a.ra+(270===this.aa?-E:E),I=I<a.M.x+a.M.width/2?a.M.x-this.Ud/2:a.M.right+this.Ud/2,t.w(j++,V,O),t.w(j++,I,O)),t.w(j++,I,U)),t.w(j++,K,U)}else S?(Y=Math.max(10,this.wg[a.layer]),W=Math.max(10,this.Lf[a.layer]),180===this.aa&&K>=a.M.x?(O=a.M.x+a.M.width,t.ca(j-2,O,H),t.ca(j-1,O+W,H)):90===this.aa&&U<=a.M.bottom?(O=a.M.y,t.ca(j-2,V,O),t.ca(j-1,V,O-Y)):270===this.aa&&U>=a.M.y?(O=a.M.y+a.M.height,t.ca(j-2,V,O),t.ca(j-1,V,O+W)):0===this.aa&&K<=a.M.right&&(O=a.M.x,t.ca(j-2,O,H),t.ca(j-1,O-Y,H))):(Y=Math.max(10,this.wg[a.layer]),W=Math.max(10,this.Lf[a.layer]),z=0,180===this.aa||0===this.aa?((180===this.aa?K<=a.M.x:K>=a.M.right)&&(z=(0===this.aa?W:-Y)/2),t.w(j++,K+z,H)):((270===this.aa?U<=a.M.y:U>=a.M.bottom)&&(z=(90===this.aa?W:-Y)/2),t.w(j++,V,U+z)),t.w(j++,K,U))}else{for(;null!==a&&a!==h;){F=A=null;for(var R=a.jc.i;R.next();){var G=R.value;if(G.link===i.link&&(A=G.toVertex,F=G.fromVertex,null!==F.rd&&(F=null),null===A.rd))break}var V=0,H=0,K=0,U=0,J=0,Y=0,W=0;if(A!==h)if(V=t.l(j-1).x,H=t.l(j-1).y,K=A.ka,U=A.ra,C)if(180===this.aa||0===this.aa){var X=null!==F?F.ra:H;X!==U&&(J=this.Nb[A.layer],2===j&&(J=0===this.aa?Math.max(J,V):Math.min(J,V)),t.w(j++,J,H),t.w(j++,J,U))}else{var $=null!==F?F.ka:V;$!==K&&(J=this.Nb[A.layer],2===j&&(J=90===this.aa?Math.max(J,H):Math.min(J,H)),t.w(j++,V,J),t.w(j++,K,J))}else Y=Math.max(10,this.wg[A.layer]),W=Math.max(10,this.Lf[A.layer]),180===this.aa?(t.w(j++,K+W,U),S&&t.w(j++,K,U),t.w(j++,K-Y,U)):90===this.aa?(t.w(j++,K,U-Y),S&&t.w(j++,K,U),t.w(j++,K,U+W)):270===this.aa?(t.w(j++,K,U+W),S&&t.w(j++,K,U),t.w(j++,K,U-Y)):(t.w(j++,K-Y,U),S&&t.w(j++,K,U),t.w(j++,K+W,U));a=A}C&&(V=t.l(j-1).x,H=t.l(j-1).y,K=t.l(j).x,U=t.l(j).y,180===this.aa||0===this.aa?H!==U&&(J=0===this.aa?Math.min(Math.max((K+V)/2,this.Nb[h.layer]),K):Math.max(Math.min((K+V)/2,this.Nb[h.layer]),K),t.w(j++,J,H),t.w(j++,J,U)):V!==K&&(J=90===this.aa?Math.min(Math.max((U+H)/2,this.Nb[h.layer]),U):Math.max(Math.min((U+H)/2,this.Nb[h.layer]),U),t.w(j++,V,J),t.w(j++,K,J)))}if(null!==e&&S){if(null!==s){if(t.computeSpot(!0)===nu){var Q=t.l(0),Z=t.l(2);Q.L(Z)||t.ca(1,(Q.x+Z.x)/2,(Q.y+Z.y)/2)}T=t.getLinkPoint(o,s,nu,!0,!1,r,l),T.I()||T.set(o.W.Hl),t.ca(0,T.x,T.y)}null!==l&&(t.computeSpot(!1)===nu&&(Q=t.l(t.qa-1),Z=t.l(t.qa-3),Q.L(Z)||t.ca(t.qa-2,(Q.x+Z.x)/2,(Q.y+Z.y)/2)),T=t.getLinkPoint(r,l,nu,!1,!1,o,s),T.I()||T.set(r.W.Hl),t.ca(t.qa-1,T.x,T.y))}t.jj(),i.commit()}}}for(var _=new f(Js),tt=this.network.edges.i;tt.next();){var nt=tt.value.link;null!==nt&&nt.Zb&&!_.contains(nt)&&_.add(nt)}if(0<_.count)if(90===this.aa||270===this.aa){for(var it,et,ot=0,rt=new f(oh),st=_.i;st.next();){var lt=st.value;if(null!==lt&&lt.Zb)for(var at=2;at<lt.qa-3;at++)if(it=lt.l(at),et=lt.l(at+1),nh(it.y,et.y)&&!nh(it.x,et.x)){var ht=new oh;ht.layer=Math.floor(it.y/2);var ut=lt.l(0),ft=lt.l(lt.qa-1);if(ht.first=ut.x*ut.x+ut.y,ht.ee=ft.x*ft.x+ft.y,ht.Xe=Math.min(it.x,et.x),ht.pe=Math.max(it.x,et.x),ht.index=at,ht.link=lt,at+2<lt.qa){var ct=lt.l(at-1),dt=lt.l(at+2),pt=0;ct.y<it.y?pt=dt.y<it.y?3:it.x<et.x?2:1:ct.y>it.y&&(pt=dt.y>it.y?0:et.x<it.x?2:1),ht.ri=pt}rt.add(ht)}}if(1<rt.count){rt.sort(this.cG);for(var yt=0;yt<rt.count;){for(var vt=rt.n[yt].layer,gt=yt+1;gt<rt.count&&rt.n[gt].layer===vt;)gt++;if(1<gt-yt)for(var mt=yt;mt<gt;){for(var bt=rt.n[mt].pe,xt=yt+1;xt<gt&&rt.n[xt].Xe<bt;)bt=Math.max(bt,rt.n[xt].pe),xt++;var wt=xt-mt;if(1<wt){rt.wq(this.ey,mt,mt+wt);for(var kt=1,Mt=rt.n[mt].ee,at=mt;at<xt;at++){var Pt=rt.n[at];Pt.ee!==Mt&&(kt++,Mt=Pt.ee)}rt.wq(this.bG,mt,mt+wt);for(var Tt=1,Mt=rt.n[mt].first,at=mt;at<xt;at++)Pt=rt.n[at],Pt.first!==Mt&&(Tt++,Mt=Pt.first);var St=!0,Ct=Tt;kt<Tt?(St=!1,Ct=kt,Mt=rt.n[mt].ee,rt.wq(this.ey,mt,mt+wt)):Mt=rt.n[mt].first;for(var Nt=0,at=mt;at<xt;at++){Pt=rt.n[at],(St?Pt.first:Pt.ee)!==Mt&&(Nt++,Mt=St?Pt.first:Pt.ee),lt=Pt.link,it=lt.l(Pt.index),et=lt.l(Pt.index+1);var jt=this.wF*(Nt-(Ct-1)/2);ot++,lt.fm(),lt.ca(Pt.index,it.x,it.y+jt),lt.ca(Pt.index+1,et.x,et.y+jt),lt.jj()}}mt=xt}yt=gt}}}else{for(var Lt,Dt,At=0,Ft=new f(oh),Ot=_.i;Ot.next();){var Bt=Ot.value;if(null!==Bt&&Bt.Zb)for(var qt=2;qt<Bt.qa-3;qt++)if(Lt=Bt.l(qt),Dt=Bt.l(qt+1),nh(Lt.x,Dt.x)&&!nh(Lt.y,Dt.y)){var zt=new oh;zt.layer=Math.floor(Lt.x/2);var Et=Bt.l(0),It=Bt.l(Bt.qa-1);if(zt.first=Et.x+Et.y*Et.y,zt.ee=It.x+It.y*It.y,zt.Xe=Math.min(Lt.y,Dt.y),zt.pe=Math.max(Lt.y,Dt.y),zt.index=qt,zt.link=Bt,qt+2<Bt.qa){var Rt=Bt.l(qt-1),Gt=Bt.l(qt+2),Vt=0;Rt.x<Lt.x?Vt=Gt.x<Lt.x?3:Lt.y<Dt.y?2:1:Rt.x>Lt.x&&(Vt=Gt.x>Lt.x?0:Dt.y<Lt.y?2:1),zt.ri=Vt}Ft.add(zt)}}if(1<Ft.count){Ft.sort(this.cG);for(var Ht=0;Ht<Ft.count;){for(var Kt=Ft.n[Ht].layer,Ut=Ht+1;Ut<Ft.count&&Ft.n[Ut].layer===Kt;)Ut++;if(1<Ut-Ht)for(var Jt=Ht;Jt<Ut;){for(var Yt=Ft.n[Jt].pe,Wt=Ht+1;Wt<Ut&&Ft.n[Wt].Xe<Yt;)Yt=Math.max(Yt,Ft.n[Wt].pe),Wt++;var Xt=Wt-Jt;if(1<Xt){Ft.wq(this.ey,Jt,Jt+Xt);for(var $t=1,Qt=Ft.n[Jt].ee,qt=Jt;qt<Wt;qt++){var Zt=Ft.n[qt];Zt.ee!==Qt&&($t++,Qt=Zt.ee)}Ft.wq(this.bG,Jt,Jt+Xt);for(var _t=1,Qt=Ft.n[Jt].first,qt=Jt;qt<Wt;qt++)Zt=Ft.n[qt],Zt.first!==Qt&&(_t++,Qt=Zt.first);var tn=!0,nn=_t;$t<_t?(tn=!1,nn=$t,Qt=Ft.n[Jt].ee,Ft.wq(this.ey,Jt,Jt+Xt)):Qt=Ft.n[Jt].first;for(var en=0,qt=Jt;qt<Wt;qt++){Zt=Ft.n[qt],(tn?Zt.first:Zt.ee)!==Qt&&(en++,Qt=tn?Zt.first:Zt.ee),Bt=Zt.link,Lt=Bt.l(Zt.index),Dt=Bt.l(Zt.index+1);var on=this.wF*(en-(nn-1)/2);At++,Bt.fm(),Bt.ca(Zt.index,Lt.x+on,Lt.y),Bt.ca(Zt.index+1,Dt.x+on,Dt.y),Bt.jj()}}Jt=Wt}Ht=Ut}}}},Pa.prototype.cG=function(t,n){return t instanceof oh&&n instanceof oh&&t!==n?t.layer<n.layer?-1:t.layer>n.layer?1:t.Xe<n.Xe?-1:t.Xe>n.Xe?1:t.pe<n.pe?-1:t.pe>n.pe?1:0:0},Pa.prototype.bG=function(t,n){return t instanceof oh&&n instanceof oh&&t!==n?t.first<n.first?-1:t.first>n.first||t.ri<n.ri?1:t.ri>n.ri||t.Xe<n.Xe?-1:t.Xe>n.Xe?1:t.pe<n.pe?-1:t.pe>n.pe?1:0:0},Pa.prototype.ey=function(t,n){return t instanceof oh&&n instanceof oh&&t!==n?t.ee<n.ee?-1:t.ee>n.ee||t.ri<n.ri?1:t.ri>n.ri||t.Xe<n.Xe?-1:t.Xe>n.Xe?1:t.pe<n.pe?-1:t.pe>n.pe?1:0:0},Yh.defineProperty(Pa,{layerSpacing:"layerSpacing"},function(){return this.Hm},function(t){this.Hm!==t&&(Yh.j(t,"number",Pa,"layerSpacing"),0<=t&&(this.Hm=t,this.J()))}),Yh.defineProperty(Pa,{AK:"columnSpacing"},function(){return this.Ud},function(t){this.Ud!==t&&(Yh.j(t,"number",Pa,"columnSpacing"),0<t&&(this.Ud=t,this.J()))}),Yh.defineProperty(Pa,{direction:"direction"},function(){return this.aa},function(t){this.aa!==t&&(Yh.j(t,"number",Pa,"direction"),0===t||90===t||180===t||270===t?(this.aa=t,this.J()):Yh.k("LayeredDigraphLayout.direction must be 0, 90, 180, or 270"))}),Yh.defineProperty(Pa,{angle:"angle"},function(){return this.direction},function(t){this.direction=t}),Yh.defineProperty(Pa,{EH:"cycleRemoveOption"},function(){return this.wo},function(t){this.wo!==t&&(Yh.mb(t,Pa,Pa,"cycleRemoveOption"),t===jp||t===Np)&&(this.wo=t,this.J())}),Yh.defineProperty(Pa,{EI:"layeringOption"},function(){return this.Yo},function(t){this.Yo!==t&&(Yh.mb(t,Pa,Pa,"layeringOption"),t===Lp||t===Dp||t===Ap)&&(this.Yo=t,this.J())}),Yh.defineProperty(Pa,{qI:"initializeOption"},function(){return this.No},function(t){this.No!==t&&(Yh.mb(t,Pa,Pa,"initializeOption"),t===Fp||t===Op||t===Bp)&&(this.No=t,this.J())}),Yh.defineProperty(Pa,{fL:"iterations"},function(){return this.Fm},function(t){this.Fm!==t&&(Yh.Fd(t,rh,"iterations"),0<=t&&(this.Fm=t,this.J()))}),Yh.defineProperty(Pa,{gH:"aggressiveOption"},function(){return this.jo},function(t){this.jo!==t&&(Yh.mb(t,Pa,Pa,"aggressiveOption"),t===qp||t===zp||t===Ep)&&(this.jo=t,this.J())}),Yh.defineProperty(Pa,{AL:"packOption"},function(){return this.Yi},function(t){this.Yi!==t&&(Yh.j(t,"number",Pa,"packOption"),0<=t&&8>t&&(this.Yi=t,this.J()))}),Yh.defineProperty(Pa,{tq:"setsPortSpots"},function(){return this.$h},function(t){this.$h!==t&&(Yh.j(t,"boolean",Pa,"setsPortSpots"),this.$h=t,this.J())}),Yh.defineProperty(Pa,{wF:"linkSpacing"},function(){return this.Wr},function(t){this.Wr!==t&&(Yh.j(t,"number",Pa,"linkSpacing"),0<=t&&(this.Wr=t,this.J()))}),Yh.u(Pa,{NI:"maxLayer"},function(){return this.qb}),Yh.u(Pa,{lL:"maxIndex"},function(){return this.Yv}),Yh.u(Pa,{kL:"maxColumn"},function(){return this.Jb}),Yh.u(Pa,{qL:"minIndexLayer"},function(){return this.es}),Yh.u(Pa,{mL:"maxIndexLayer"},function(){return this.Mf});var Np;Pa.CycleDepthFirst=Np=Yh.p(Pa,"CycleDepthFirst",0);var jp;Pa.CycleGreedy=jp=Yh.p(Pa,"CycleGreedy",1);var Lp;Pa.LayerOptimalLinkLength=Lp=Yh.p(Pa,"LayerOptimalLinkLength",0);var Dp;Pa.LayerLongestPathSink=Dp=Yh.p(Pa,"LayerLongestPathSink",1);var Ap;Pa.LayerLongestPathSource=Ap=Yh.p(Pa,"LayerLongestPathSource",2);var Fp;Pa.InitDepthFirstOut=Fp=Yh.p(Pa,"InitDepthFirstOut",0);var Op;Pa.InitDepthFirstIn=Op=Yh.p(Pa,"InitDepthFirstIn",1);var Bp;Pa.InitNaive=Bp=Yh.p(Pa,"InitNaive",2);var qp;Pa.AggressiveNone=qp=Yh.p(Pa,"AggressiveNone",0);var zp;Pa.AggressiveLess=zp=Yh.p(Pa,"AggressiveLess",1);var Ep;Pa.AggressiveMore=Ep=Yh.p(Pa,"AggressiveMore",2),Pa.PackNone=0;var Ip;Pa.PackExpand=Ip=1;var Rp;Pa.PackStraighten=Rp=2;var Gp;Pa.PackMedian=Gp=4;var Vp;Pa.PackAll=Vp=7,Yh.$d(oh,{layer:!0,first:!0,ee:!0,Xe:!0,pe:!0,index:!0,link:!0,ri:!0}),Yh.Ka(rh,Il),Yh.ga("LayeredDigraphNetwork",rh),rh.prototype.createVertex=function(){return new sh},rh.prototype.createEdge=function(){return new lh},Yh.Ka(sh,Kl),Yh.ga("LayeredDigraphVertex",sh),Yh.Ka(lh,Ul),Yh.ga("LayeredDigraphEdge",lh),Yh.Ka(ah,ql),Yh.ga("TreeLayout",ah),ah.prototype.cloneProtected=function(t){ql.prototype.cloneProtected.call(this,t),t.ys=this.ys,t.ot=this.ot,t.Vv=this.Vv,t.Jh=this.Jh,t.ld=this.ld,t.kg.assign(this.kg),t.ua.copyInheritedPropertiesFrom(this.ua),t.va.copyInheritedPropertiesFrom(this.va)},ah.prototype.hc=function(t){t.De===ah?0===t.name.indexOf("Alignment")?this.alignment=t:0===t.name.indexOf("Arrangement")?this.Qf=t:0===t.name.indexOf("Compaction")?this.compaction=t:0===t.name.indexOf("Path")?this.path=t:0===t.name.indexOf("Sorting")?this.sorting=t:0===t.name.indexOf("Style")?this.SJ=t:Yh.k("Unknown enum value: "+t):ql.prototype.hc.call(this,t)},ah.prototype.createNetwork=function(){return new Gh},ah.prototype.makeNetwork=function(t){function n(t){if(t instanceof As)return!t.mf&&"Comment"!==t.td;if(t instanceof Js){var n=t.Y;return null!==n&&!n.mf&&"Comment"!==n.td&&(null!==(t=t.$)&&!t.mf&&"Comment"!==t.td)}return!1}var i=this.createNetwork();return i.Sb=this,t instanceof Ei?(i.sk(t.fg,!0,n),i.sk(t.links,!0,n)):t instanceof Ll?i.sk(t.Nc,!1,n):i.sk(t.i,!1,n),i},ah.prototype.doLayout=function(t){null===t&&Yh.k("Layout.doLayout(collection) argument must not be null but a Diagram, a Group, or an Iterable of Parts"),null===this.network&&(this.network=this.makeNetwork(t)),this.Qf!==cy&&(this.oe=this.initialOrigin(this.oe));var n=this.g;if(null===n&&t instanceof Ei&&(n=t),this.Jf=this.path===Hp&&null!==n?n.Pd?Kp:Up:this.path===Hp?Kp:this.path,0<this.network.vertexes.count){for(this.network.ex(),t=this.network.vertexes.i;t.next();)n=t.value,n.initialized=!1,n.level=0,n.parent=null,n.children=[];if(0<this.sd.count){for(t=new d(Vh),n=this.sd.i;n.next();){var i=n.value;i instanceof As?null!==(i=this.network.yn(i))&&t.add(i):i instanceof Vh&&t.add(i)}this.sd=t}for(0===this.sd.count&&this.findRoots(),t=this.sd.copy().i;t.next();)n=t.value,n.initialized||(n.initialized=!0,fh(this,n));for(n=this.network.vertexes,t=null;t=hh(n),0<t.count;)n=uh(this,t),null!==n&&this.sd.add(n),n.initialized=!0,fh(this,n),n=t;for(t=this.sd.i;t.next();)(n=t.value)instanceof Vh&&dh(this,n);for(t=this.sd.i;t.next();)(n=t.value)instanceof Vh&&yh(this,n);for(t=this.sd.i;t.next();)(n=t.value)instanceof Vh&&vh(this,n);if(this.Rz(),this.CA===yy){for(i=[],t=this.network.vertexes.i;t.next();){var e=t.value,n=e.parent;null===n&&(n=e);var n=0===n.angle||180===n.angle,o=i[e.level];void 0===o&&(o=0),i[e.level]=Math.max(o,n?e.width:e.height)}for(e=0;e<i.length;e++)void 0===i[e]&&(i[e]=0);for(this.NB=i,t=this.network.vertexes.i;t.next();)e=t.value,n=e.parent,null===n&&(n=e),0===n.angle||180===n.angle?(180===n.angle&&(e.Rt+=i[e.level]-e.width),e.width=i[e.level]):(270===n.angle&&(e.St+=i[e.level]-e.height),e.height=i[e.level])}else if(this.CA===py)for(t=this.network.vertexes.i;t.next();){for(i=t.value,n=0===i.angle||180===i.angle,o=-1,e=0;e<i.children.length;e++)var r=i.children[e],o=Math.max(o,n?r.width:r.height);if(0<=o)for(e=0;e<i.children.length;e++)r=i.children[e],n?(180===i.angle&&(r.Rt+=o-r.width),r.width=o):(270===i.angle&&(r.St+=o-r.height),r.height=o)}for(t=this.sd.i;t.next();)(n=t.value)instanceof Vh&&this.layoutTree(n);this.arrangeTrees(),this.updateParts()}this.network=null,this.sd=new d(Object),this.Af=!0},ah.prototype.findRoots=function(){for(var t=this.network.vertexes,n=t.i;n.next();){var i=n.value;switch(this.Jf){case Kp:0===i.lc.count&&this.sd.add(i);break;case Up:0===i.jc.count&&this.sd.add(i);break;default:Yh.k("Unhandled path value "+this.Jf.toString())}}0===this.sd.count&&null!==(t=uh(this,t))&&this.sd.add(t)},ah.prototype.removeChild=function(t,n){if(null!==t&&null!==n){for(var i=t.children,e=0,o=0;o<i.length;o++)i[o]===n&&e++;if(0<e){for(var e=Array(i.length-e),r=0,o=0;o<i.length;o++)i[o]!==n&&(e[r++]=i[o]);t.children=e}}},ah.prototype.initializeTreeVertexValues=function(t){var n=ph(this,t);if(t.copyInheritedPropertiesFrom(n),null!==t.parent&&t.parent.alignment===ny){for(var n=t.angle,i=t.parent.children,e=0;e<i.length&&t!==i[e];)e++;0==e%2?e!==i.length-1&&(n=90===n?180:180===n?270:270===n?180:270):n=90===n?0:180===n?90:270===n?0:90,t.angle=n}t.initialized=!0},ah.prototype.assignTreeVertexValues=function(){},ah.prototype.sortTreeVertexChildren=function(t){switch(t.sorting){case Jp:break;case Yp:t.children.reverse();break;case Wp:t.children.sort(t.comparer);break;case Xp:t.children.sort(t.comparer),t.children.reverse();break;default:Yh.k("Unhandled sorting value "+t.sorting.toString())}},ah.prototype.Rz=function(){if(this.comments)for(var t=this.network.vertexes.i;t.next();)this.addComments(t.value)},ah.prototype.addComments=function(t){var n=t.angle,i=t.parent,e=0,o=Qp,o=!1;null!==i&&(e=i.angle,o=i.alignment,o=gh(o));var n=90===n||270===n,e=90===e||270===e,i=0===t.on,r=0,s=0,l=0,a=t.commentSpacing;if(null!==t.Oc)for(var h=t.Oc.JE();h.next();){var u=h.value;"Comment"===u.td&&u.canLayout()&&(null===t.comments&&(t.comments=[]),t.comments.push(u),u.$e(),u=u.za,n&&!i||!o&&!e&&i||o&&e&&i?(r=Math.max(r,u.width),s+=u.height+Math.abs(l)):(r+=u.width+Math.abs(l),s=Math.max(s,u.height)),l=a)}null!==t.comments&&(n&&!i||!o&&!e&&i||o&&e&&i?(r+=Math.abs(t.commentMargin),s=Math.max(0,s-t.height)):(s+=Math.abs(t.commentMargin),r=Math.max(0,r-t.width)),o=Yh.ig(0,0,t.M.width+r,t.M.height+s),t.eb=o,Yh.Db(o))},ah.prototype.layoutComments=function(t){if(null!==t.comments){var n=t.Oc.za,i=t.parent,e=t.angle,o=0,r=Qp,r=!1;null!==i&&(o=i.angle,r=i.alignment,r=gh(r));for(var i=90===e||270===e,e=90===o||270===o,s=0===t.on,l=bh(t),a=0,h=t.comments,u=h.length,f=Yh.K(),c=0;c<u;c++){var d=h[c],p=d.za;if(i&&!s||!r&&!e&&s||r&&e&&s){if(135<o&&!r||e&&l)if(0<=t.commentMargin)for(f.m(t.M.x-t.commentMargin-p.width,t.M.y+a),d.move(f),d=d.Lg();d.next();){var y=d.value;y.Ab=du,y.Bb=pu}else for(f.m(t.M.x+2*t.T.x-t.commentMargin,t.M.y+a),d.move(f),d=d.Lg();d.next();)y=d.value,y.Ab=pu,y.Bb=du;else if(0<=t.commentMargin)for(f.m(t.M.x+2*t.T.x+t.commentMargin,t.M.y+a),d.move(f),d=d.Lg();d.next();)y=d.value,y.Ab=pu,y.Bb=du;else for(f.m(t.M.x+t.commentMargin-p.width,t.M.y+a),d.move(f),d=d.Lg();d.next();)y=d.value,y.Ab=du,y.Bb=pu;a=0<=t.commentSpacing?a+(p.height+t.commentSpacing):a+(t.commentSpacing-p.height)}else{if(135<o&&!r||!e&&l)if(0<=t.commentMargin)for(f.m(t.M.x+a,t.M.y-t.commentMargin-p.height),d.move(f),d=d.Lg();d.next();)y=d.value,y.Ab=cu,y.Bb=yu;else for(f.m(t.M.x+a,t.M.y+2*t.T.y-t.commentMargin),d.move(f),d=d.Lg();d.next();)y=d.value,y.Ab=yu,y.Bb=cu;else if(0<=t.commentMargin)for(f.m(t.M.x+a,t.M.y+2*t.T.y+t.commentMargin),d.move(f),d=d.Lg();d.next();)y=d.value,y.Ab=yu,y.Bb=cu;else for(f.m(t.M.x+a,t.M.y+t.commentMargin-p.height),d.move(f),d=d.Lg();d.next();)y=d.value,y.Ab=cu,y.Bb=yu;a=0<=t.commentSpacing?a+(p.width+t.commentSpacing):a+(t.commentSpacing-p.width)}}if(Yh.v(f),n=a-t.commentSpacing-(i?n.height:n.width),this.Jf===Kp)for(o=t.jc;o.next();)null===(t=o.value.link)||t.Xl||(t.Sl=0<n?n:NaN);else for(o=t.lc;o.next();)null===(t=o.value.link)||t.Xl||(t.km=0<n?n:NaN)}},ah.prototype.layoutTree=function(t){if(null!==t){for(var n=t.children,i=n.length,e=0;e<i;e++)this.layoutTree(n[e]);switch(t.compaction){case oy:xh(this,t);break;case ry:if(t.alignment===ny)xh(this,t);else if(0===t.on){var e=t.parent,n=!1,i=0,o=Qp;null!==e&&(i=e.angle,o=e.alignment,n=gh(o)),e=bh(t),t.pa.m(0,0),t.jb.m(t.width,t.height),null===t.parent||null===t.comments||(180!==i&&270!==i||n)&&!e?t.Na.m(0,0):180===i&&!n||(90===i||270===i)&&e?t.Na.m(t.width-2*t.T.x,0):t.Na.m(0,t.height-2*t.T.y),t.iu=null,t.Du=null}else{for(var r=Eh(t),n=90===r||270===r,s=0,l=t.children,a=l.length,h=0;h<a;h++)var u=l[h],s=Math.max(s,n?u.jb.width:u.jb.height);var f=t.alignment,e=f===Zp,c=f===_p,d=gh(f),p=Math.max(0,t.breadthLimit),i=Ih(t),y=t.nodeSpacing,v=Rh(t),g=t.rowSpacing,m=0;(e||c||t.nq||t.oq&&1===t.maxGenerationCount)&&(m=Math.max(0,t.rowIndent));var e=t.width,o=t.height,b=0,x=0,w=0,k=null,M=null,P=0,T=0,S=0,C=0,N=0,j=0,L=0,D=0,u=0;if(d&&!mh(f)&&135<r&&l.reverse(),mh(f))if(1<a)for(h=0;h<a;h++)0==h%2&&h!==a-1?D=Math.max(D,n?l[h].jb.width:l[h].jb.height):0!=h%2&&(u=Math.max(u,n?l[h].jb.width:l[h].jb.height));else 1===a&&(D=n?l[0].jb.width:l[0].jb.height);if(d){switch(f){case ty:x=135>r?wh(t,l,D,b,x):kh(t,l,D,b,x),D=x.x,b=x.width,x=x.height;break;case iy:for(h=0;h<a;h++){var u=l[h],A=u.jb,k=0===j?0:g;n?(u.pa.m(s-A.width,C+k),b=Math.max(b,A.width),x=Math.max(x,C+k+A.height),C+=k+A.height):(u.pa.m(S+k,s-A.height),b=Math.max(b,S+k+A.width),x=Math.max(x,A.height),S+=k+A.width),j++}break;case ey:for(h=0;h<a;h++)u=l[h],A=u.jb,k=0===j?0:g,n?(u.pa.m(y/2+t.T.x,C+k),b=Math.max(b,A.width),x=Math.max(x,C+k+A.height),C+=k+A.height):(u.pa.m(S+k,y/2+t.T.y),b=Math.max(b,S+k+A.width),x=Math.max(x,A.height),S+=k+A.width),j++}k=Oh(this,2),M=Oh(this,2),n?(k[0].m(0,0),k[1].m(0,x),M[0].m(b,0)):(k[0].m(0,0),k[1].m(b,0),M[0].m(0,x)),M[1].m(b,x)}else for(h=0;h<a;h++){if(u=l[h],A=u.jb,n){0<p&&0<j&&S+y+A.width>p&&(S<s&&jh(t,f,s-S,0,L,h-1),N++,j=0,L=h,w=x,S=0,C=135<r?-x-g:x+g),Dh(this,u,0,C);var F=0;if(0===j)k=u.iu,M=u.Du,P=A.width,T=A.height,(null===k||null===M||r!==Eh(u))&&(k=Oh(this,2),M=Oh(this,2),k[0].m(0,0),k[1].m(0,T),M[0].m(P,0),M[1].m(P,T));else{var O=Yh.lb(),T=Fh(this,t,u,k,M,P,T,O),F=T.x,k=O[0],M=O[1],P=T.width,T=T.height;Yh.wa(O),S<A.width&&0>F&&(Lh(t,-F,0,L,h-1),Ah(k,-F,0),Ah(M,-F,0),F=0)}u.pa.m(F,C),b=Math.max(b,P),x=Math.max(x,w+(0===N?0:g)+A.height),S=P}else 0<p&&0<j&&C+y+A.height>p&&(C<s&&jh(t,f,0,s-C,L,h-1),N++,j=0,L=h,w=b,C=0,S=135<r?-b-g:b+g),Dh(this,u,S,0),F=0,0===j?(k=u.iu,M=u.Du,P=A.width,T=A.height,(null===k||null===M||r!==Eh(u))&&(k=Oh(this,2),M=Oh(this,2),k[0].m(0,0),k[1].m(P,0),M[0].m(0,T),M[1].m(P,T))):(O=Yh.lb(),T=Fh(this,t,u,k,M,P,T,O),F=T.x,k=O[0],M=O[1],P=T.width,T=T.height,Yh.wa(O),C<A.height&&0>F&&(Lh(t,0,-F,L,h-1),Ah(k,0,-F),Ah(M,0,-F),F=0)),u.pa.m(S,F),x=Math.max(x,T),b=Math.max(b,w+(0===N?0:g)+A.width),C=T;j++}switch(0<N&&(n?(x+=Math.max(0,i),S<b&&jh(t,f,b-S,0,L,a-1),0<m&&(c||Lh(t,m,0,0,a-1),b+=m)):(b+=Math.max(0,i),C<x&&jh(t,f,0,x-C,L,a-1),0<m&&(c||Lh(t,0,m,0,a-1),x+=m))),m=c=0,f){case $p:n?c+=b/2-t.T.x-v/2:m+=x/2-t.T.y-v/2;break;case Qp:0<N?n?c+=b/2-t.T.x-v/2:m+=x/2-t.T.y-v/2:n?(D=l[0].pa.x+l[0].Na.x,h=l[a-1].pa.x+l[a-1].Na.x+2*l[a-1].T.x,c+=D+(h-D)/2-t.T.x-v/2):(D=l[0].pa.y+l[0].Na.y,h=l[a-1].pa.y+l[a-1].Na.y+2*l[a-1].T.y,m+=D+(h-D)/2-t.T.y-v/2);break;case Zp:n?(c-=v,b+=v):(m-=v,x+=v);break;case _p:n?(c+=b-t.width+v,b+=v):(m+=x-t.height+v,x+=v);break;case ty:n?c=1<a?c+(D+y/2-t.T.x):c+(l[0].T.x-t.T.x+l[0].Na.x):m=1<a?m+(D+y/2-t.T.y):m+(l[0].T.y-t.T.y+l[0].Na.y);break;case iy:n?c+=b+y/2-t.T.x:m+=x+y/2-t.T.y;break;case ey:break;default:Yh.k("Unhandled alignment value "+f.toString())}for(h=0;h<a;h++)u=l[h],n?u.pa.m(u.pa.x+u.Na.x-c,u.pa.y+(135<r?(d?-x:-u.jb.height)+u.Na.y-i:o+i+u.Na.y)):u.pa.m(u.pa.x+(135<r?(d?-b:-u.jb.width)+u.Na.x-i:e+i+u.Na.x),u.pa.y+u.Na.y-m);if(a=l=0,d?n?(b=Sh(t,b,c),0>c&&(c=0),135<r&&(m+=x+i),x+=o+i,f===ey&&(l+=y/2+t.T.x),a+=o+i):(135<r&&(c+=b+i),b+=e+i,x=Ch(t,x,m),0>m&&(m=0),f===ey&&(a+=y/2+t.T.y),l+=e+i):n?(null===t.comments?e>b&&(f=Nh(f,e-b,0),l=f.x,a=f.y,b=e,c=0):b=Sh(t,b,c),0>c&&(l-=c,c=0),135<r&&(m+=x+i),x=Math.max(Math.max(x,o),x+o+i),a+=o+i):(135<r&&(c+=b+i),b=Math.max(Math.max(b,e),b+e+i),null===t.comments?o>x&&(f=Nh(f,0,o-x),l=f.x,a=f.y,x=o,m=0):x=Ch(t,x,m),0>m&&(a-=m,m=0),l+=e+i),0<N)r=Oh(this,4),f=Oh(this,4),n?(r[2].m(0,o+i),r[3].m(r[2].x,x),f[2].m(b,r[2].y),f[3].m(f[2].x,r[3].y)):(r[2].m(e+i,0),r[3].m(b,r[2].y),f[2].m(r[2].x,x),f[3].m(r[3].x,f[2].y));else{for(r=Oh(this,k.length+2),f=Oh(this,M.length+2),h=0;h<k.length;h++)d=k[h],r[h+2].m(d.x+l,d.y+a);for(h=0;h<M.length;h++)d=M[h],f[h+2].m(d.x+l,d.y+a)}n?(r[0].m(c,0),r[1].m(r[0].x,o),r[2].y<r[1].y&&(r[2].x>r[0].x?r[2].assign(r[1]):r[1].assign(r[2])),r[3].y<r[2].y&&(r[3].x>r[0].x?r[3].assign(r[2]):r[2].assign(r[3])),f[0].m(c+e,0),f[1].m(f[0].x,o),f[2].y<f[1].y&&(f[2].x<f[0].x?f[2].assign(f[1]):f[1].assign(f[2])),f[3].y<f[2].y&&(f[3].x<f[0].x?f[3].assign(f[2]):f[2].assign(f[3])),r[2].y-=i/2,f[2].y-=i/2):(r[0].m(0,m),r[1].m(e,r[0].y),r[2].x<r[1].x&&(r[2].y>r[0].y?r[2].assign(r[1]):r[1].assign(r[2])),r[3].x<r[2].x&&(r[3].y>r[0].y?r[3].assign(r[2]):r[2].assign(r[3])),f[0].m(0,m+o),f[1].m(e,f[0].y),f[2].x<f[1].x&&(f[2].y<f[0].y?f[2].assign(f[1]):f[1].assign(f[2])),f[3].x<f[2].x&&(f[3].y<f[0].y?f[3].assign(f[2]):f[2].assign(f[3])),r[2].x-=i/2,f[2].x-=i/2),Bh(this,k),Bh(this,M),t.iu=r,t.Du=f,t.Na.m(c,m),t.jb.m(b,x)}break;default:Yh.k("Unhandled compaction value "+t.compaction.toString())}}},ah.prototype.arrangeTrees=function(){if(this.ld===cy)for(var t=this.sd.i;t.next();){var n=t.value;if(n instanceof Vh){var i=n.Oc;if(null!==i){var e=i.position,i=e.x,e=e.y;isFinite(i)||(i=0),isFinite(e)||(e=0),qh(this,n,i,e)}}}else{for(i=[],t=this.sd.i;t.next();)(n=t.value)instanceof Vh&&i.push(n);switch(this.sorting){case Jp:break;case Yp:i.reverse();break;case Wp:i.sort(this.comparer);break;case Xp:i.sort(this.comparer),i.reverse();break;default:Yh.k("Unhandled sorting value "+this.sorting.toString())}for(n=this.oe,t=n.x,n=n.y,e=0;e<i.length;e++){var o=i[e];switch(qh(this,o,t+o.Na.x,n+o.Na.y),this.ld){case uy:n+=o.jb.height+this.kg.height;break;case fy:t+=o.jb.width+this.kg.width;break;default:Yh.k("Unhandled arrangement value "+this.ld.toString())}}}},ah.prototype.commitLayout=function(){this.gB(),this.commitNodes(),this.Wz(),this.gu&&this.commitLinks()},ah.prototype.commitNodes=function(){for(var t=this.network.vertexes.i;t.next();)t.value.commit();for(t.reset();t.next();)this.layoutComments(t.value)},ah.prototype.Wz=function(){if(this.CA===yy){for(var t=this.NB,n=[],i=null,e=this.network.vertexes.i;e.next();){var o=e.value;null===i?i=o.eb.copy():i.Hh(o.eb);var r=n[o.level],r=void 0===r?Ih(o):Math.max(r,Ih(o));n[o.level]=r}for(e=0;e<n.length;e++)void 0===n[e]&&(n[e]=0);90===this.angle||270===this.angle?(i.yf(this.nodeSpacing/2,this.layerSpacing),o=new x(-this.nodeSpacing/2,-this.layerSpacing/2)):(i.yf(this.layerSpacing,this.nodeSpacing/2),o=new x(-this.layerSpacing/2,-this.nodeSpacing/2));var r=[],i=90===this.angle||270===this.angle?i.width:i.height,s=0;if(180===this.angle||270===this.angle)for(e=0;e<t.length;e++)s+=t[e]+n[e];for(e=0;e<t.length;e++){var l=t[e]+n[e];270===this.angle?(s-=l,r.push(new P(0,s,i,l))):90===this.angle?(r.push(new P(0,s,i,l)),s+=l):180===this.angle?(s-=l,r.push(new P(s,0,l,i))):(r.push(new P(s,0,l,i)),s+=l)}this.commitLayers(r,o)}},ah.prototype.commitLayers=function(){},ah.prototype.commitLinks=function(){for(var t=this.network.edges.i;t.next();)t.value.commit()},ah.prototype.gB=function(){for(var t=this.sd.i;t.next();){var n=t.value;n instanceof Vh&&zh(this,n)}},ah.prototype.setPortSpots=function(t){var n=t.alignment;if(gh(n)){var i,e=this.Jf===Kp,o=Eh(t);switch(o){case 0:i=pu;break;case 90:i=yu;break;case 180:i=du;break;default:i=cu}var r=t.children,s=r.length;switch(n){case ty:case ny:for(n=0;n<s;n++){var l=r[n],l=(e?l.lc:l.jc).first();if(null!==l&&null!==(l=l.link)){var a=90===o||270===o?du:cu;if(1===s||n===s-1&&1==s%2)switch(o){case 0:a=du;break;case 90:a=cu;break;case 180:a=pu;break;default:a=yu}else 0==n%2&&(a=90===o||270===o?pu:yu);e?(t.setsPortSpot&&(l.Ab=i),t.setsChildPortSpot&&(l.Bb=a)):(t.setsPortSpot&&(l.Ab=a),t.setsChildPortSpot&&(l.Bb=i))}}break;case iy:for(a=90===o||270===o?pu:yu,o=e?t.jc:t.lc;o.next();)null!==(l=o.value.link)&&(e?(t.setsPortSpot&&(l.Ab=i),t.setsChildPortSpot&&(l.Bb=a)):(t.setsPortSpot&&(l.Ab=a),t.setsChildPortSpot&&(l.Bb=i)));break;case ey:for(a=90===o||270===o?du:cu,o=e?t.jc:t.lc;o.next();)null!==(l=o.value.link)&&(e?(t.setsPortSpot&&(l.Ab=i),t.setsChildPortSpot&&(l.Bb=a)):(t.setsPortSpot&&(l.Ab=a),t.setsChildPortSpot&&(l.Bb=i)))}}else if(e=Eh(t),this.Jf===Kp){for(i=t.jc;i.next();)if(null!==(o=i.value.link)){if(t.setsPortSpot)if(t.portSpot.Vc())switch(e){case 0:o.Ab=pu;break;case 90:o.Ab=yu;break;case 180:o.Ab=du;break;default:o.Ab=cu}else o.Ab=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Vc())switch(e){case 0:o.Bb=du;break;case 90:o.Bb=cu;break;case 180:o.Bb=pu;break;default:o.Bb=yu}else o.Bb=t.childPortSpot}}else for(i=t.lc;i.next();)if(null!==(o=i.value.link)){if(t.setsPortSpot)if(t.portSpot.Vc())switch(e){case 0:o.Bb=pu;break;case 90:o.Bb=yu;break;case 180:o.Bb=du;break;default:o.Bb=cu}else o.Bb=t.portSpot;if(t.setsChildPortSpot)if(t.childPortSpot.Vc())switch(e){case 0:o.Ab=du;break;case 90:o.Ab=cu;break;case 180:o.Ab=pu;break;default:o.Ab=yu}else o.Ab=t.childPortSpot}},Yh.defineProperty(ah,{HL:"roots"},function(){return this.sd},function(t){this.sd!==t&&(Yh.G(t,d,ah,"roots"),this.sd=t,this.J())}),Yh.defineProperty(ah,{path:"path"},function(){return this.ys},function(t){this.ys!==t&&(Yh.mb(t,ah,ah,"path"),this.ys=t,this.J())}),Yh.defineProperty(ah,{SJ:"treeStyle"},function(){return this.ot},function(t){this.ld!==t&&(Yh.mb(t,ah,ah,"treeStyle"),t===sy||t===ay||t===ly||t===hy)&&(this.ot=t,this.J())}),Yh.defineProperty(ah,{CA:"layerStyle"},function(){return this.Vv},function(t){this.ld!==t&&(Yh.mb(t,ah,ah,"layerStyle"),t===dy||t===py||t===yy)&&(this.Vv=t,this.J())}),Yh.defineProperty(ah,{comments:"comments"},function(){return this.Jh},function(t){this.Jh!==t&&(Yh.j(t,"boolean",ah,"comments"),this.Jh=t,this.J())}),Yh.defineProperty(ah,{Qf:"arrangement"},function(){return this.ld},function(t){this.ld!==t&&(Yh.mb(t,ah,ah,"arrangement"),t===uy||t===fy||t===cy)&&(this.ld=t,this.J())}),Yh.defineProperty(ah,{lE:"arrangementSpacing"},function(){return this.kg},function(t){Yh.G(t,M,ah,"arrangementSpacing"),this.kg.L(t)||(this.kg.assign(t),this.J())}),Yh.defineProperty(ah,{GL:"rootDefaults"},function(){return this.ua},function(t){this.ua!==t&&(Yh.G(t,Vh,ah,"rootDefaults"),this.ua=t,this.J())}),Yh.defineProperty(ah,{iK:"alternateDefaults"},function(){return this.va},function(t){this.va!==t&&(Yh.G(t,Vh,ah,"alternateDefaults"),this.va=t,this.J())}),Yh.defineProperty(ah,{sorting:"sorting"},function(){return this.ua.sorting},function(t){this.ua.sorting!==t&&(Yh.mb(t,ah,ah,"sorting"),t===Jp||t===Yp||t===Wp||Xp)&&(this.ua.sorting=t,this.J())}),Yh.defineProperty(ah,{comparer:"comparer"},function(){return this.ua.comparer},function(t){this.ua.comparer!==t&&(Yh.j(t,"function",ah,"comparer"),this.ua.comparer=t,this.J())}),Yh.defineProperty(ah,{angle:"angle"},function(){return this.ua.angle},function(t){this.ua.angle!==t&&(Yh.j(t,"number",ah,"angle"),0===t||90===t||180===t||270===t?(this.ua.angle=t,this.J()):Yh.k("TreeLayout.angle must be 0, 90, 180, or 270"))}),Yh.defineProperty(ah,{alignment:"alignment"},function(){return this.ua.alignment},function(t){this.ua.alignment!==t&&(Yh.mb(t,ah,ah,"alignment"),this.ua.alignment=t,this.J())}),Yh.defineProperty(ah,{nodeIndent:"nodeIndent"},function(){return this.ua.nodeIndent},function(t){this.ua.nodeIndent!==t&&(Yh.j(t,"number",ah,"nodeIndent"),0<=t&&(this.ua.nodeIndent=t,this.J()))}),Yh.defineProperty(ah,{nodeIndentPastParent:"nodeIndentPastParent"},function(){return this.ua.nodeIndentPastParent},function(t){this.ua.nodeIndentPastParent!==t&&(Yh.j(t,"number",ah,"nodeIndentPastParent"),0<=t&&1>=t&&(this.ua.nodeIndentPastParent=t,this.J()))}),Yh.defineProperty(ah,{nodeSpacing:"nodeSpacing"},function(){return this.ua.nodeSpacing},function(t){this.ua.nodeSpacing!==t&&(Yh.j(t,"number",ah,"nodeSpacing"),this.ua.nodeSpacing=t,this.J())}),Yh.defineProperty(ah,{layerSpacing:"layerSpacing"},function(){return this.ua.layerSpacing},function(t){this.ua.layerSpacing!==t&&(Yh.j(t,"number",ah,"layerSpacing"),this.ua.layerSpacing=t,this.J())}),Yh.defineProperty(ah,{layerSpacingParentOverlap:"layerSpacingParentOverlap"},function(){return this.ua.layerSpacingParentOverlap},function(t){this.ua.layerSpacingParentOverlap!==t&&(Yh.j(t,"number",ah,"layerSpacingParentOverlap"),0<=t&&1>=t&&(this.ua.layerSpacingParentOverlap=t,this.J()))}),Yh.defineProperty(ah,{compaction:"compaction"},function(){return this.ua.compaction},function(t){this.ua.compaction!==t&&(Yh.mb(t,ah,ah,"compaction"),t===oy||t===ry)&&(this.ua.compaction=t,this.J())}),Yh.defineProperty(ah,{breadthLimit:"breadthLimit"},function(){return this.ua.breadthLimit},function(t){this.ua.breadthLimit!==t&&(Yh.j(t,"number",ah,"breadthLimit"),0<=t&&(this.ua.breadthLimit=t,this.J()))}),Yh.defineProperty(ah,{rowSpacing:"rowSpacing"},function(){return this.ua.rowSpacing},function(t){this.ua.rowSpacing!==t&&(Yh.j(t,"number",ah,"rowSpacing"),this.ua.rowSpacing=t,this.J())}),Yh.defineProperty(ah,{rowIndent:"rowIndent"},function(){return this.ua.rowIndent},function(t){this.ua.rowIndent!==t&&(Yh.j(t,"number",ah,"rowIndent"),0<=t&&(this.ua.rowIndent=t,this.J()))}),Yh.defineProperty(ah,{commentSpacing:"commentSpacing"},function(){return this.ua.commentSpacing},function(t){this.ua.commentSpacing!==t&&(Yh.j(t,"number",ah,"commentSpacing"),this.ua.commentSpacing=t,this.J())}),Yh.defineProperty(ah,{commentMargin:"commentMargin"},function(){return this.ua.commentMargin},function(t){this.ua.commentMargin!==t&&(Yh.j(t,"number",ah,"commentMargin"),this.ua.commentMargin=t,this.J())}),Yh.defineProperty(ah,{setsPortSpot:"setsPortSpot"},function(){return this.ua.setsPortSpot},function(t){this.ua.setsPortSpot!==t&&(Yh.j(t,"boolean",ah,"setsPortSpot"),this.ua.setsPortSpot=t,this.J())}),Yh.defineProperty(ah,{portSpot:"portSpot"},function(){return this.ua.portSpot},function(t){Yh.G(t,F,ah,"portSpot"),this.ua.portSpot.L(t)||(this.ua.portSpot=t,this.J())}),Yh.defineProperty(ah,{setsChildPortSpot:"setsChildPortSpot"},function(){return this.ua.setsChildPortSpot},function(t){this.ua.setsChildPortSpot!==t&&(Yh.j(t,"boolean",ah,"setsChildPortSpot"),this.ua.setsChildPortSpot=t,this.J())}),Yh.defineProperty(ah,{childPortSpot:"childPortSpot"},function(){return this.ua.childPortSpot},function(t){Yh.G(t,F,ah,"childPortSpot"),this.ua.childPortSpot.L(t)||(this.ua.childPortSpot=t,this.J())}),Yh.defineProperty(ah,{tK:"alternateSorting"},function(){return this.va.sorting},function(t){this.va.sorting!==t&&(Yh.mb(t,ah,ah,"alternateSorting"),t===Jp||t===Yp||t===Wp||Xp)&&(this.va.sorting=t,this.J())}),Yh.defineProperty(ah,{hK:"alternateComparer"},function(){return this.va.comparer},function(t){this.va.comparer!==t&&(Yh.j(t,"function",ah,"alternateComparer"),this.va.comparer=t,this.J())}),Yh.defineProperty(ah,{bK:"alternateAngle"},function(){return this.va.angle},function(t){this.va.angle!==t&&(Yh.j(t,"number",ah,"alternateAngle"),0===t||90===t||180===t||270===t)&&(this.va.angle=t,this.J())}),Yh.defineProperty(ah,{aK:"alternateAlignment"},function(){return this.va.alignment},function(t){this.va.alignment!==t&&(Yh.mb(t,ah,ah,"alternateAlignment"),this.va.alignment=t,this.J())}),Yh.defineProperty(ah,{lK:"alternateNodeIndent"},function(){return this.va.nodeIndent},function(t){this.va.nodeIndent!==t&&(Yh.j(t,"number",ah,"alternateNodeIndent"),0<=t&&(this.va.nodeIndent=t,this.J()))}),Yh.defineProperty(ah,{mK:"alternateNodeIndentPastParent"},function(){return this.va.nodeIndentPastParent},function(t){this.va.nodeIndentPastParent!==t&&(Yh.j(t,"number",ah,"alternateNodeIndentPastParent"),0<=t&&1>=t&&(this.va.nodeIndentPastParent=t,this.J()))}),Yh.defineProperty(ah,{nK:"alternateNodeSpacing"},function(){return this.va.nodeSpacing},function(t){this.va.nodeSpacing!==t&&(Yh.j(t,"number",ah,"alternateNodeSpacing"),this.va.nodeSpacing=t,this.J())}),Yh.defineProperty(ah,{jK:"alternateLayerSpacing"},function(){return this.va.layerSpacing},function(t){this.va.layerSpacing!==t&&(Yh.j(t,"number",ah,"alternateLayerSpacing"),this.va.layerSpacing=t,this.J())}),Yh.defineProperty(ah,{kK:"alternateLayerSpacingParentOverlap"},function(){return this.va.layerSpacingParentOverlap},function(t){this.va.layerSpacingParentOverlap!==t&&(Yh.j(t,"number",ah,"alternateLayerSpacingParentOverlap"),0<=t&&1>=t&&(this.va.layerSpacingParentOverlap=t,this.J()))}),Yh.defineProperty(ah,{gK:"alternateCompaction"},function(){return this.va.compaction},function(t){this.va.compaction!==t&&(Yh.mb(t,ah,ah,"alternateCompaction"),t===oy||t===ry)&&(this.va.compaction=t,this.J())}),Yh.defineProperty(ah,{cK:"alternateBreadthLimit"},function(){return this.va.breadthLimit},function(t){this.va.breadthLimit!==t&&(Yh.j(t,"number",ah,"alternateBreadthLimit"),0<=t&&(this.va.breadthLimit=t,this.J()))}),Yh.defineProperty(ah,{qK:"alternateRowSpacing"},function(){return this.va.rowSpacing},function(t){this.va.rowSpacing!==t&&(Yh.j(t,"number",ah,"alternateRowSpacing"),this.va.rowSpacing=t,this.J())}),Yh.defineProperty(ah,{pK:"alternateRowIndent"},function(){return this.va.rowIndent},function(t){this.va.rowIndent!==t&&(Yh.j(t,"number",ah,"alternateRowIndent"),0<=t&&(this.va.rowIndent=t,this.J()))}),Yh.defineProperty(ah,{fK:"alternateCommentSpacing"},function(){return this.va.commentSpacing},function(t){this.va.commentSpacing!==t&&(Yh.j(t,"number",ah,"alternateCommentSpacing"),this.va.commentSpacing=t,this.J())}),Yh.defineProperty(ah,{eK:"alternateCommentMargin"},function(){return this.va.commentMargin},function(t){this.va.commentMargin!==t&&(Yh.j(t,"number",ah,"alternateCommentMargin"),this.va.commentMargin=t,this.J())}),Yh.defineProperty(ah,{sK:"alternateSetsPortSpot"},function(){return this.va.setsPortSpot},function(t){this.va.setsPortSpot!==t&&(Yh.j(t,"boolean",ah,"alternateSetsPortSpot"),this.va.setsPortSpot=t,this.J())}),Yh.defineProperty(ah,{oK:"alternatePortSpot"},function(){return this.va.portSpot},function(t){Yh.G(t,F,ah,"alternatePortSpot"),this.va.portSpot.L(t)||(this.va.portSpot=t,this.J())}),Yh.defineProperty(ah,{rK:"alternateSetsChildPortSpot"},function(){return this.va.setsChildPortSpot},function(t){this.va.setsChildPortSpot!==t&&(Yh.j(t,"boolean",ah,"alternateSetsChildPortSpot"),this.va.setsChildPortSpot=t,this.J())}),Yh.defineProperty(ah,{dK:"alternateChildPortSpot"},function(){return this.va.childPortSpot},function(t){Yh.G(t,F,ah,"alternateChildPortSpot"),this.va.childPortSpot.L(t)||(this.va.childPortSpot=t,this.J())});var Hp;ah.PathDefault=Hp=Yh.p(ah,"PathDefault",-1);var Kp;ah.PathDestination=Kp=Yh.p(ah,"PathDestination",0);var Up;ah.PathSource=Up=Yh.p(ah,"PathSource",1);var Jp;ah.SortingForwards=Jp=Yh.p(ah,"SortingForwards",10);var Yp;ah.SortingReverse=Yp=Yh.p(ah,"SortingReverse",11);var Wp;ah.SortingAscending=Wp=Yh.p(ah,"SortingAscending",12);var Xp;ah.SortingDescending=Xp=Yh.p(ah,"SortingDescending",13);var $p;ah.AlignmentCenterSubtrees=$p=Yh.p(ah,"AlignmentCenterSubtrees",20);var Qp;ah.AlignmentCenterChildren=Qp=Yh.p(ah,"AlignmentCenterChildren",21);var Zp;ah.AlignmentStart=Zp=Yh.p(ah,"AlignmentStart",22);var _p;ah.AlignmentEnd=_p=Yh.p(ah,"AlignmentEnd",23);var ty;ah.AlignmentBus=ty=Yh.p(ah,"AlignmentBus",24);var ny;ah.AlignmentBusBranching=ny=Yh.p(ah,"AlignmentBusBranching",25);var iy;ah.AlignmentTopLeftBus=iy=Yh.p(ah,"AlignmentTopLeftBus",26);var ey;ah.AlignmentBottomRightBus=ey=Yh.p(ah,"AlignmentBottomRightBus",27);var oy;ah.CompactionNone=oy=Yh.p(ah,"CompactionNone",30);var ry;ah.CompactionBlock=ry=Yh.p(ah,"CompactionBlock",31);var sy;ah.StyleLayered=sy=Yh.p(ah,"StyleLayered",40);var ly;ah.StyleLastParents=ly=Yh.p(ah,"StyleLastParents",41);var ay;ah.StyleAlternating=ay=Yh.p(ah,"StyleAlternating",42);var hy;ah.StyleRootOnly=hy=Yh.p(ah,"StyleRootOnly",43);var uy;ah.ArrangementVertical=uy=Yh.p(ah,"ArrangementVertical",50);var fy;ah.ArrangementHorizontal=fy=Yh.p(ah,"ArrangementHorizontal",51);var cy;ah.ArrangementFixedRoots=cy=Yh.p(ah,"ArrangementFixedRoots",52);var dy;ah.LayerIndividual=dy=Yh.p(ah,"LayerIndividual",60);var py;ah.LayerSiblings=py=Yh.p(ah,"LayerSiblings",61);var yy;ah.LayerUniform=yy=Yh.p(ah,"LayerUniform",62),Yh.Ka(Gh,Il),Yh.ga("TreeNetwork",Gh),Gh.prototype.createVertex=function(){return new Vh},Gh.prototype.createEdge=function(){return new Hh},Yh.Ka(Vh,Kl),Yh.ga("TreeVertex",Vh),Vh.prototype.copyInheritedPropertiesFrom=function(t){null!==t&&(this.sorting=t.sorting,this.comparer=t.comparer,this.angle=t.angle,this.alignment=t.alignment,this.nodeIndent=t.nodeIndent,this.nodeIndentPastParent=t.nodeIndentPastParent,this.nodeSpacing=t.nodeSpacing,this.layerSpacing=t.layerSpacing,this.layerSpacingParentOverlap=t.layerSpacingParentOverlap,this.compaction=t.compaction,this.breadthLimit=t.breadthLimit,this.rowSpacing=t.rowSpacing,this.rowIndent=t.rowIndent,this.commentSpacing=t.commentSpacing,this.commentMargin=t.commentMargin,this.setsPortSpot=t.setsPortSpot,this.portSpot=t.portSpot,this.setsChildPortSpot=t.setsChildPortSpot,this.childPortSpot=t.childPortSpot)},Yh.u(Vh,{on:"childrenCount"},function(){return this.children.length}),Yh.defineProperty(Vh,{FL:"relativePosition"},function(){return this.pa},function(t){this.pa.set(t)}),Yh.defineProperty(Vh,{SL:"subtreeSize"},function(){return this.jb},function(t){this.jb.set(t)}),Yh.defineProperty(Vh,{RL:"subtreeOffset"},function(){return this.Na},function(t){this.Na.set(t)}),Yh.Ka(Hh,Ul),Yh.ga("TreeEdge",Hh),Hh.prototype.commit=function(){var t=this.link;if(null!==t&&!t.Xl){var n=this.network.Sb,i=null,e=null;switch(n.Jf){case Kp:i=this.fromVertex,e=this.toVertex;break;case Up:i=this.toVertex,e=this.fromVertex;break;default:Yh.k("Unhandled path value "+n.Jf.toString())}if(null!==i&&null!==e)if(n=this.Fs,0!==n.x||0!==n.y||i.vJ){var e=i.eb,o=Eh(i),r=Ih(i),s=i.rowSpacing;t.bo();var l,a,h=t.Ze===Hd,u=t.Zb,f=0;if(t.fm(),u||h){for(f=2;4<t.qa;)t.RF(2);l=t.l(1),a=t.l(2)}else{for(f=1;3<t.qa;)t.RF(1);l=t.l(0),a=t.l(t.qa-1)}var c=t.l(t.qa-1),d=0;0===o?(i.alignment===_p?(d=e.bottom+n.y,0===n.y&&l.y>c.y+i.rowIndent&&(d=Math.min(d,Math.max(l.y,d-Rh(i))))):i.alignment===Zp?(d=e.top+n.y,0===n.y&&l.y<c.y-i.rowIndent&&(d=Math.max(d,Math.min(l.y,d+Rh(i))))):d=i.nq||i.oq&&1===i.maxGenerationCount?e.top-i.Na.y+n.y:e.y+e.height/2+n.y,h?(t.w(f,l.x,d),f++,t.w(f,e.right+r,d),f++,t.w(f,e.right+r+(n.x-s)/3,d),f++,t.w(f,e.right+r+2*(n.x-s)/3,d),f++,t.w(f,e.right+r+(n.x-s),d),f++,t.w(f,a.x,d)):(u&&(t.w(f,e.right+r/2,l.y),f++),t.w(f,e.right+r/2,d),f++,t.w(f,e.right+r+n.x-(u?s/2:s),d),f++,u&&t.w(f,t.l(f-1).x,a.y))):90===o?(i.alignment===_p?(d=e.right+n.x,0===n.x&&l.x>c.x+i.rowIndent&&(d=Math.min(d,Math.max(l.x,d-Rh(i))))):i.alignment===Zp?(d=e.left+n.x,0===n.x&&l.x<c.x-i.rowIndent&&(d=Math.max(d,Math.min(l.x,d+Rh(i))))):d=i.nq||i.oq&&1===i.maxGenerationCount?e.left-i.Na.x+n.x:e.x+e.width/2+n.x,h?(t.w(f,d,l.y),f++,t.w(f,d,e.bottom+r),f++,t.w(f,d,e.bottom+r+(n.y-s)/3),f++,t.w(f,d,e.bottom+r+2*(n.y-s)/3),f++,t.w(f,d,e.bottom+r+(n.y-s)),f++,t.w(f,d,a.y)):(u&&(t.w(f,l.x,e.bottom+r/2),f++),t.w(f,d,e.bottom+r/2),f++,t.w(f,d,e.bottom+r+n.y-(u?s/2:s)),f++,u&&t.w(f,a.x,t.l(f-1).y))):180===o?(i.alignment===_p?(d=e.bottom+n.y,0===n.y&&l.y>c.y+i.rowIndent&&(d=Math.min(d,Math.max(l.y,d-Rh(i))))):i.alignment===Zp?(d=e.top+n.y,0===n.y&&l.y<c.y-i.rowIndent&&(d=Math.max(d,Math.min(l.y,d+Rh(i))))):d=i.nq||i.oq&&1===i.maxGenerationCount?e.top-i.Na.y+n.y:e.y+e.height/2+n.y,h?(t.w(f,l.x,d),f++,t.w(f,e.left-r,d),f++,t.w(f,e.left-r+(n.x+s)/3,d),f++,t.w(f,e.left-r+2*(n.x+s)/3,d),f++,t.w(f,e.left-r+(n.x+s),d),f++,t.w(f,a.x,d)):(u&&(t.w(f,e.left-r/2,l.y),f++),t.w(f,e.left-r/2,d),f++,t.w(f,e.left-r+n.x+(u?s/2:s),d),f++,u&&t.w(f,t.l(f-1).x,a.y))):270===o?(i.alignment===_p?(d=e.right+n.x,0===n.x&&l.x>c.x+i.rowIndent&&(d=Math.min(d,Math.max(l.x,d-Rh(i))))):i.alignment===Zp?(d=e.left+n.x,0===n.x&&l.x<c.x-i.rowIndent&&(d=Math.max(d,Math.min(l.x,d+Rh(i))))):d=i.nq||i.oq&&1===i.maxGenerationCount?e.left-i.Na.x+n.x:e.x+e.width/2+n.x,h?(t.w(f,d,l.y),f++,t.w(f,d,e.top-r),f++,t.w(f,d,e.top-r+(n.y+s)/3),f++,t.w(f,d,e.top-r+2*(n.y+s)/3),f++,t.w(f,d,e.top-r+(n.y+s)),f++,t.w(f,d,a.y)):(u&&(t.w(f,l.x,e.top-r/2),f++),t.w(f,d,e.top-r/2),f++,t.w(f,d,e.top-r+n.y+(u?s/2:s)),f++,u&&t.w(f,a.x,t.l(f-1).y))):Yh.k("Invalid angle "+o),t.jj()}else o=i,r=e,t=this.link,(i=Eh(o))!==Eh(r)&&(n=Ih(o),e=o.eb,o=r.eb,0===i&&o.left-e.right<n+1||90===i&&o.top-e.bottom<n+1||180===i&&e.left-o.right<n+1||270===i&&e.top-o.bottom<n+1||(t.bo(),o=t.Ze===Hd,r=t.Zb,s=gh(this.fromVertex.alignment),t.fm(),0===i?(i=e.right+n/2,o?4===t.qa&&(n=t.l(3).y,t.ca(1,i-20,t.l(1).y),t.w(2,i-20,n),t.w(3,i,n),t.w(4,i+20,n),t.ca(5,t.l(5).x,n)):r?s?t.ca(3,t.l(2).x,t.l(4).y):6===t.qa&&(t.ca(2,i,t.l(2).y),t.ca(3,i,t.l(3).y)):4===t.qa?t.w(2,i,t.l(2).y):3===t.qa?t.ca(1,i,t.l(2).y):2===t.qa&&t.w(1,i,t.l(1).y)):90===i?(n=e.bottom+n/2,o?4===t.qa&&(i=t.l(3).x,t.ca(1,t.l(1).x,n-20),t.w(2,i,n-20),t.w(3,i,n),t.w(4,i,n+20),t.ca(5,i,t.l(5).y)):r?s?t.ca(3,t.l(2).x,t.l(4).y):6===t.qa&&(t.ca(2,t.l(2).x,n),t.ca(3,t.l(3).x,n)):4===t.qa?t.w(2,t.l(2).x,n):3===t.qa?t.ca(1,t.l(2).x,n):2===t.qa&&t.w(1,t.l(1).x,n)):180===i?(i=e.left-n/2,o?4===t.qa&&(n=t.l(3).y,t.ca(1,i+20,t.l(1).y),t.w(2,i+20,n),t.w(3,i,n),t.w(4,i-20,n),t.ca(5,t.l(5).x,n)):r?s?t.ca(3,t.l(2).x,t.l(4).y):6===t.qa&&(t.ca(2,i,t.l(2).y),t.ca(3,i,t.l(3).y)):4===t.qa?t.w(2,i,t.l(2).y):3===t.qa?t.ca(1,i,t.l(2).y):2===t.qa&&t.w(1,i,t.l(1).y)):270===i&&(n=e.top-n/2,o?4===t.qa&&(i=t.l(3).x,t.ca(1,t.l(1).x,n+20),t.w(2,i,n+20),t.w(3,i,n),t.w(4,i,n-20),t.ca(5,i,t.l(5).y)):r?s?t.ca(3,t.l(2).x,t.l(4).y):6===t.qa&&(t.ca(2,t.l(2).x,n),t.ca(3,t.l(3).x,n)):4===t.qa?t.w(2,t.l(2).x,n):3===t.qa?t.ca(1,t.l(2).x,n):2===t.qa&&t.w(1,t.l(1).x,n)),t.jj()))}},Yh.defineProperty(Hh,{EL:"relativePoint"},function(){return this.Fs},function(t){this.Fs.set(t)}),Yh.Ka(Kh,To),Kh.prototype.cloneProtected=function(t){To.prototype.cloneProtected.call(this,t),t.element=this.Se.cloneNode(!0)},Kh.prototype.toString=function(){return"HTMLHost("+this.Se.toString()+")#"+Yh.Kd(this)},Kh.prototype.yk=function(t,n){var i=this.Se;if(null!==i){var e=this.Xa(lu);e.x-=this.W.width/2,e.y-=this.W.height/2,e.x-=this.W.x,e.y-=this.W.y;var e=n.vG(e),o=n.mj;null===o||o.contains(i)||o.appendChild(i),o=this.transform,i.style.transform="matrix("+o.m11+","+o.m12+","+o.m21+","+o.m22+","+o.dx+","+o.dy+")",i.style.transformOrigin="0 0",o=e.y,i.style.left=e.x+"px",i.style.top=o+"px"}},Kh.prototype.Mn=function(t,n,i,e){var o=this.Ba;isFinite(o.width)&&(t=o.width),isFinite(o.height)&&(n=o.height);var o=this.Cf,r=this.Ah;i=Math.max(i,r.width),e=Math.max(e,r.height),t=Math.min(o.width,t),n=Math.min(o.height,n),t=Math.max(i,t),n=Math.max(e,n),i=this.Se,null!==i&&(n=i.getBoundingClientRect(),t=n.width,n=n.height),T(this.Tc,t,n),jo(this,0,0,t,n)},Kh.prototype.ij=function(t,n,i,e){Ao(this,t,n,i,e)},Yh.u(Kh,{Ia:"naturalBounds"},function(){return this.Tc}),Yh.defineProperty(Kh,{element:"element"},function(){return this.Se},function(t){var n=this.Se;n!==t&&(t instanceof HTMLElement||Yh.k("HTMLHost.element must be an instance of Element."),this.Se=t,t.className="HTMLHost",this.h("element",n,t),this.na())}),Jh.version="1.7.12",n&&(n.module&&"object"==typeof n.module&&"object"==typeof n.module.exports?n.module.exports=Jh:n.define&&"function"==typeof n.define&&n.define.amd?(n.go=Jh,n.define(Jh)):n.go=Jh),void 0!==t&&"object"==typeof t.exports&&(t.exports=Jh)}(window)},TEGW:function(t,n,i){"use strict";function e(t){return s["ɵvid"](0,[(t()(),s["ɵeld"](0,null,null,8,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n        "])),(t()(),s["ɵeld"](0,null,null,1,"label",[["class","col-sm-2 col-form-label"],["for","inputDescription"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["Предыдущий файл"])),(t()(),s["ɵted"](null,["\n        "])),(t()(),s["ɵeld"](0,null,null,2,"div",[["class","col-sm-10"]],null,null,null,null,null)),(t()(),s["ɵeld"](0,null,null,1,"a",[["download",""],["target","_blank"]],[[8,"href",4]],null,null,null,null)),(t()(),s["ɵted"](null,["",""])),(t()(),s["ɵted"](null,["\n    "]))],null,function(t,n){var i=n.component;t(n,6,0,s["ɵinlineInterpolate"](1,"http://localhost:8000",i.theory.file.path,"")),t(n,7,0,i.theory.file.path)})}function o(t){return s["ɵvid"](0,[(t()(),s["ɵeld"](0,null,null,47,"form",[["enctype","multipart/form-data"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,n,i){var e=!0,o=t.component;if("submit"===n){e=!1!==s["ɵnov"](t,2).onSubmit(i)&&e}if("reset"===n){e=!1!==s["ɵnov"](t,2).onReset()&&e}if("ngSubmit"===n){e=!1!==o.save()&&e}return e},null,null)),s["ɵdid"](16384,null,0,a.m,[],null,null),s["ɵdid"](16384,null,0,a.n,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),s["ɵprd"](2048,null,a.j,null,[a.n]),s["ɵdid"](16384,null,0,a.o,[a.j],null,null),(t()(),s["ɵted"](null,["\n    "])),(t()(),s["ɵeld"](0,null,null,17,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n        "])),(t()(),s["ɵeld"](0,null,null,1,"label",[["class","col-sm-2 col-form-label"],["for","inputName"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["slideshare iframe"])),(t()(),s["ɵted"](null,["\n        "])),(t()(),s["ɵeld"](0,null,null,11,"div",[["class","col-sm-10"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n            "])),(t()(),s["ɵeld"](0,null,null,8,"textarea",[["class","form-control"],["id","inputName"],["name","iframe"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,i){var e=!0,o=t.component;if("input"===n){e=!1!==s["ɵnov"](t,14)._handleInput(i.target.value)&&e}if("blur"===n){e=!1!==s["ɵnov"](t,14).onTouched()&&e}if("compositionstart"===n){e=!1!==s["ɵnov"](t,14)._compositionStart()&&e}if("compositionend"===n){e=!1!==s["ɵnov"](t,14)._compositionEnd(i.target.value)&&e}if("ngModelChange"===n){e=!1!==(o.theory.iframe=i)&&e}return e},null,null)),s["ɵdid"](16384,null,0,a.f,[s.Renderer,s.ElementRef,[2,a.g]],null,null),s["ɵdid"](16384,null,0,a.s,[],{required:[0,"required"]},null),s["ɵprd"](1024,null,a.t,function(t){return[t]},[a.s]),s["ɵprd"](1024,null,a.h,function(t){return[t]},[a.f]),s["ɵdid"](671744,null,0,a.i,[[2,a.j],[2,a.t],[8,null],[2,a.h]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),s["ɵprd"](2048,null,a.k,null,[a.i]),s["ɵdid"](16384,null,0,a.l,[a.k],null,null),(t()(),s["ɵted"](null,["            "])),(t()(),s["ɵted"](null,["\n        "])),(t()(),s["ɵted"](null,["\n\n    "])),(t()(),s["ɵted"](null,["\n    "])),(t()(),s["ɵand"](16777216,null,null,1,null,e)),s["ɵdid"](16384,null,0,h.NgIf,[s.ViewContainerRef,s.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),s["ɵted"](null,["\n    "])),(t()(),s["ɵeld"](0,null,null,9,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n        "])),(t()(),s["ɵeld"](0,null,null,1,"label",[["class","col-sm-2 col-form-label"],["for","inputDescription"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["Файл"])),(t()(),s["ɵted"](null,["\n        "])),(t()(),s["ɵeld"](0,null,null,3,"div",[["class","col-sm-10"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n            "])),(t()(),s["ɵeld"](0,null,null,0,"input",[["class","form-control"],["id","inputDescription"],["name","file"],["type","file"]],null,[[null,"change"]],function(t,n,i){var e=!0,o=t.component;if("change"===n){e=!1!==o.onSelectFile(i)&&e}return e},null,null)),(t()(),s["ɵted"](null,["\n        "])),(t()(),s["ɵted"](null,["\n    "])),(t()(),s["ɵted"](null,["\n    "])),(t()(),s["ɵeld"](0,null,null,7,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n        "])),(t()(),s["ɵeld"](0,null,null,4,"div",[["class","offset-sm-2 col-sm-10"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["\n            "])),(t()(),s["ɵeld"](0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],null,null,null,null,null)),(t()(),s["ɵted"](null,["Добавить"])),(t()(),s["ɵted"](null,["\n        "])),(t()(),s["ɵted"](null,["\n    "])),(t()(),s["ɵted"](null,["\n"]))],function(t,n){var i=n.component;t(n,15,0,""),t(n,18,0,"iframe",i.theory.iframe),t(n,26,0,i.theory.file&&i.theory.file.path)},function(t,n){t(n,0,0,s["ɵnov"](n,4).ngClassUntouched,s["ɵnov"](n,4).ngClassTouched,s["ɵnov"](n,4).ngClassPristine,s["ɵnov"](n,4).ngClassDirty,s["ɵnov"](n,4).ngClassValid,s["ɵnov"](n,4).ngClassInvalid,s["ɵnov"](n,4).ngClassPending),t(n,13,0,s["ɵnov"](n,15).required?"":null,s["ɵnov"](n,20).ngClassUntouched,s["ɵnov"](n,20).ngClassTouched,s["ɵnov"](n,20).ngClassPristine,s["ɵnov"](n,20).ngClassDirty,s["ɵnov"](n,20).ngClassValid,s["ɵnov"](n,20).ngClassInvalid,s["ɵnov"](n,20).ngClassPending)})}function r(t){return s["ɵvid"](0,[(t()(),s["ɵeld"](0,null,null,1,"theory",[],null,null,null,o,d)),s["ɵdid"](245760,null,0,l.a,[u.a,f.a],null,null)],function(t,n){t(n,1,0)},null)}var s=i("3j3K"),l=i("D0P3"),a=i("NVOs"),h=i("2Je8"),u=i("2Khz"),f=i("aXs8");i.d(n,"a",function(){return p});var c=[],d=s["ɵcrt"]({encapsulation:2,styles:c,data:{}}),p=s["ɵccf"]("theory",l.a,r,{},{},[])},TemG:function(t,n,i){"use strict";var e=i("lHWG"),o=i("1nWc"),r=i("C/EC"),s=i("dZcA");i.d(n,"a",function(){return l});var l=function(){function t(t){this.http=t,this.maxQuestions=10,this.maxAnswers=4,this.prefix="test/",this.api=""+this.http.adminPrefix+this.prefix}return t.prototype.guid=function(){var t=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},t.prototype.initializeTest=function(t){var n=new o.a;n.hash=this.guid(),n.unit_id=t;for(var i=0;i<this.maxQuestions;++i){var e=new r.a;e.name="question "+(i+1);for(var l=0;l<this.maxAnswers;++l){var a=new s.a;a.hash=this.guid(),a.name="answer "+(l+1),e.answers.push(a)}e.hash=e.answers[Math.floor(Math.random()*e.answers.length)].hash,n.questions.push(e)}return n},t.prototype.fillableTest=function(t){var n=new o.a(t);return n.questions=[],t.questions.forEach(function(t){var i=new r.a(t);i.answers=[],t.answers.forEach(function(t){var n=new s.a(t);i.answers.push(n)}),n.questions.push(i)}),n},t.prototype.store=function(t){var n=this;return this.http.post(""+this.api,t).map(function(t){return n.fillableTest(t.json())})},t.ctorParameters=function(){return[{type:e.a}]},t}()},YJfO:function(t,n,i){"use strict";var e=i("EEr4"),o=(i.n(e),function(){function t(){this.items=[],this.itemsSource=new e.Subject,this.items$=this.itemsSource.asObservable(),this.levelColors=["#AC193D","#2672EC","#8C0095","#5133AB","#008299","#D24726","#008A00","#094AB2"],this.model={class:"go.TreeModel",nodeDataArray:[]}}return t.prototype.initDiagram=function(t){},t.prototype.getModel=function(){return{diagram:JSON.parse(this.diagram.model.toJson()),palette:this.items}},t.prototype.hash=function(){var t=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},t.prototype.itemContains=function(t){return this.items.find(function(n){return n.hash===t.hash})},t.prototype.highlight=function(t,n){var i=n.skipsUndoManager;n.skipsUndoManager=!0,n.startTransaction("highlight"),null!==t?n.highlight(t):n.clearHighlighteds(),n.commitTransaction("highlight"),n.skipsUndoManager=i},t.prototype.initItems=function(t){this.items=t,this.itemsSource.next(this.items)},t.prototype.addItem=function(t){this.items.push(t),this.itemsSource.next(this.items)},t.prototype.removeItem=function(t){this.items=this.items.filter(function(n){return t!==n}),this.itemsSource.next(this.items)},t}());n.a=o},aXs8:function(t,n,i){"use strict";var e=i("xAJs"),o=(i.n(e),i("lHWG")),r=i("1+LI"),s=i("EEr4");i.n(s);i.d(n,"a",function(){return l});var l=function(){function t(t){this.http=t,this.unitSource=new s.Subject,this.testSource=new s.Subject,this.theorySource=new s.Subject,this.schemaSource=new s.Subject,this.eventSource=new s.Subject,this.unit$=this.unitSource.asObservable(),this.test$=this.testSource.asObservable(),this.theory$=this.theorySource.asObservable(),this.schema$=this.schemaSource.asObservable(),this.event$=this.eventSource.asObservable(),this.prefix="units/",this.api=""+this.http.adminPrefix+this.prefix}return t.prototype.pushUnit=function(t){this.unitSource.next(t)},t.prototype.pushTest=function(t){this.testSource.next(t)},t.prototype.pushTheory=function(t){this.theorySource.next(t)},t.prototype.pushSchema=function(t){this.schemaSource.next(t)},t.prototype.callEvent=function(t){this.eventSource.next(t)},t.prototype.unit=function(t){return this.http.get(""+this.api+t).map(function(t){return new r.a(t.json().data)})},t.prototype.all=function(t){return this.http.get(this.api+"lesson/"+t).map(function(t){var n=[];return t.json().data.map(function(t){n.push(new r.a(t))}),n})},t.prototype.store=function(t){return this.http.post(""+this.api,t).map(function(t){return new r.a(t.json().data)})},t.prototype.update=function(t){return this.http.patch(""+this.api+t.id,t).map(function(t){return t.json()})},t.prototype.delete=function(t){return this.http.delete(""+this.api+t).map(function(t){return t.json()})},t.ctorParameters=function(){return[{type:o.a}]},t}()},atbp:function(t,n,i){"use strict";i.d(n,"a",function(){return e});var e=function(){function t(t){void 0===t&&(t={}),this.name="",this.description="",this.units=[],Object.assign(this,t)}return t}()},cm73:function(t,n,i){"use strict";var e=i("5oXY"),o=i("1+LI"),r=i("aXs8");i.d(n,"a",function(){return s});var s=function(){function t(t,n){this.UnitService=t,this.route=n,this.unit=new o.a}return t.prototype.ngOnInit=function(){var t=this;this.route.params.subscribe(function(n){var i=+n.id;t.UnitService.unit(i).subscribe(function(n){t.subEvent=t.UnitService.event$.subscribe(function(){t.UnitService.pushUnit(t.unit)}),t.subTest=t.UnitService.test$.subscribe(function(n){t.unit.test=n}),t.subTheory=t.UnitService.theory$.subscribe(function(n){t.unit.theory=n}),t.subSchema=t.UnitService.schema$.subscribe(function(n){t.unit.schema=n}),t.UnitService.pushUnit(n),t.unit=n})})},t.prototype.ngOnDestroy=function(){this.subEvent.unsubscribe(),this.subTest.unsubscribe(),this.subTheory.unsubscribe(),this.subSchema.unsubscribe()},t.ctorParameters=function(){return[{type:r.a},{type:e.a}]},t}()},dZcA:function(t,n,i){"use strict";i.d(n,"a",function(){return e});var e=function(){function t(t){void 0===t&&(t={}),this.name="",Object.assign(this,t)}return t}()},e7xV:function(t,n,i){"use strict";i.d(n,"a",function(){return e});var e=function(){function t(t){void 0===t&&(t={}),Object.assign(this,t)}return t}()},eBor:function(t,n,i){"use strict";function e(t){return l["ɵvid"](0,[(t()(),l["ɵeld"](0,null,null,1,"p",[],null,null,null,null,null)),(t()(),l["ɵted"](null,["Описание - ",""]))],null,function(t,n){t(n,1,0,n.component.lesson.description)})}function o(t){return l["ɵvid"](0,[(t()(),l["ɵeld"](0,null,null,23,"a",[["class","list-group-item list-group-item-action flex-column align-items-start active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,n,i){var e=!0;if("click"===n){e=!1!==l["ɵnov"](t,1).onClick(i.button,i.ctrlKey,i.metaKey,i.shiftKey)&&e}return e},null,null)),l["ɵdid"](671744,null,0,a.y,[a.c,a.a,h.LocationStrategy],{routerLink:[0,"routerLink"]},null),l["ɵpad"](1),(t()(),l["ɵted"](null,["\n                        "])),(t()(),l["ɵeld"](0,null,null,10,"div",[["class","d-flex w-100 justify-content-between"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n                            "])),(t()(),l["ɵeld"](0,null,null,1,"h5",[["class","mb-1"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["",""])),(t()(),l["ɵted"](null,["\n                            "])),(t()(),l["ɵeld"](0,null,null,4,"small",[],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n                                "])),(t()(),l["ɵeld"](0,null,null,1,"button",[["class","btn btn-danger btn-sm"],["type","button"]],null,[[null,"click"]],function(t,n,i){var e=!0,o=t.component;if("click"===n){e=!1!==o.removeUnit(i,t.context.$implicit.id)&&e}return e},null,null)),(t()(),l["ɵted"](null,["Удалить"])),(t()(),l["ɵted"](null,["\n                            "])),(t()(),l["ɵted"](null,["\n                        "])),(t()(),l["ɵted"](null,["\n                        "])),(t()(),l["ɵeld"](0,null,null,1,"p",[["class","mb-1"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["",""])),(t()(),l["ɵted"](null,["\n                        "])),(t()(),l["ɵeld"](0,null,null,3,"a",[["class","btn btn-primary btn-sm"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,n,i){var e=!0;if("click"===n){e=!1!==l["ɵnov"](t,20).onClick(i.button,i.ctrlKey,i.metaKey,i.shiftKey)&&e}return e},null,null)),l["ɵdid"](671744,null,0,a.y,[a.c,a.a,h.LocationStrategy],{routerLink:[0,"routerLink"]},null),l["ɵpad"](2),(t()(),l["ɵted"](null,["Редактировать"])),(t()(),l["ɵted"](null,["\n                    "]))],function(t,n){var i=n.component;t(n,1,0,t(n,2,0,"/panel/courses/course/"+i.courseId+"/lesson/"+i.lesson.id+"/unit/"+n.context.$implicit.id)),t(n,20,0,t(n,21,0,"/panel/courses/edit/unit",n.context.$implicit.id))},function(t,n){t(n,0,0,l["ɵnov"](n,1).target,l["ɵnov"](n,1).href),t(n,7,0,n.context.$implicit.name),t(n,17,0,n.context.$implicit.description),t(n,19,0,l["ɵnov"](n,20).target,l["ɵnov"](n,20).href)})}function r(t){return l["ɵvid"](0,[(t()(),l["ɵeld"](0,null,null,84,"div",[["class","row"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n    "])),(t()(),l["ɵeld"](0,null,null,7,"div",[["class","col-md-12"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n        "])),(t()(),l["ɵeld"](0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),l["ɵted"](null,["Урок - ",""])),(t()(),l["ɵted"](null,["\n        "])),(t()(),l["ɵand"](16777216,null,null,1,null,e)),l["ɵdid"](16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["ɵted"](null,["\n    "])),(t()(),l["ɵted"](null,["\n\n    "])),(t()(),l["ɵeld"](0,null,null,72,"div",[["class","col-md-12"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n\n        "])),(t()(),l["ɵeld"](0,null,null,69,"div",[["class","row"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n            "])),(t()(),l["ɵeld"](0,null,null,10,"div",[["class","col-md-6"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n                "])),(t()(),l["ɵeld"](0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),l["ɵted"](null,["Список тем"])),(t()(),l["ɵted"](null,["\n\n                "])),(t()(),l["ɵeld"](0,null,null,4,"div",[["class","list-group"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n                    "])),(t()(),l["ɵand"](16777216,null,null,1,null,o)),l["ɵdid"](802816,null,0,h.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(t()(),l["ɵted"](null,["\n                "])),(t()(),l["ɵted"](null,["\n\n            "])),(t()(),l["ɵted"](null,["\n            "])),(t()(),l["ɵeld"](0,null,null,54,"div",[["class","col-md-6"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n                "])),(t()(),l["ɵeld"](0,null,null,1,"h4",[],null,null,null,null,null)),(t()(),l["ɵted"](null,["Добавить тему"])),(t()(),l["ɵted"](null,["\n\n                "])),(t()(),l["ɵeld"](0,null,null,48,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,n,i){var e=!0,o=t.component;if("submit"===n){e=!1!==l["ɵnov"](t,34).onSubmit(i)&&e}if("reset"===n){e=!1!==l["ɵnov"](t,34).onReset()&&e}if("ngSubmit"===n){e=!1!==o.addUnit()&&e}return e},null,null)),l["ɵdid"](16384,null,0,f.m,[],null,null),l["ɵdid"](16384,null,0,f.n,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),l["ɵprd"](2048,null,f.j,null,[f.n]),l["ɵdid"](16384,null,0,f.o,[f.j],null,null),(t()(),l["ɵted"](null,["\n                    "])),(t()(),l["ɵeld"](0,null,null,16,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n                        "])),(t()(),l["ɵeld"](0,null,null,1,"label",[["class","col-sm-2 col-form-label"],["for","inputName"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["Имя"])),(t()(),l["ɵted"](null,["\n                        "])),(t()(),l["ɵeld"](0,null,null,10,"div",[["class","col-sm-10"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n                            "])),(t()(),l["ɵeld"](0,null,null,7,"input",[["class","form-control"],["id","inputName"],["name","name"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,i){var e=!0,o=t.component;if("input"===n){e=!1!==l["ɵnov"](t,46)._handleInput(i.target.value)&&e}if("blur"===n){e=!1!==l["ɵnov"](t,46).onTouched()&&e}if("compositionstart"===n){e=!1!==l["ɵnov"](t,46)._compositionStart()&&e}if("compositionend"===n){e=!1!==l["ɵnov"](t,46)._compositionEnd(i.target.value)&&e}if("ngModelChange"===n){e=!1!==(o.unit.name=i)&&e}return e},null,null)),l["ɵdid"](16384,null,0,f.f,[l.Renderer,l.ElementRef,[2,f.g]],null,null),l["ɵdid"](16384,null,0,f.s,[],{required:[0,"required"]},null),l["ɵprd"](1024,null,f.t,function(t){return[t]},[f.s]),l["ɵprd"](1024,null,f.h,function(t){return[t]},[f.f]),l["ɵdid"](671744,null,0,f.i,[[2,f.j],[2,f.t],[8,null],[2,f.h]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,f.k,null,[f.i]),l["ɵdid"](16384,null,0,f.l,[f.k],null,null),(t()(),l["ɵted"](null,["\n                        "])),(t()(),l["ɵted"](null,["\n\n                    "])),(t()(),l["ɵted"](null,["\n                    "])),(t()(),l["ɵeld"](0,null,null,14,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n                        "])),(t()(),l["ɵeld"](0,null,null,1,"label",[["class","col-sm-2 col-form-label"],["for","inputDescription"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["Описание"])),(t()(),l["ɵted"](null,["\n                        "])),(t()(),l["ɵeld"](0,null,null,8,"div",[["class","col-sm-10"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n                            "])),(t()(),l["ɵeld"](0,null,null,5,"input",[["class","form-control"],["id","inputDescription"],["name","description"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,i){var e=!0,o=t.component;if("input"===n){e=!1!==l["ɵnov"](t,64)._handleInput(i.target.value)&&e}if("blur"===n){e=!1!==l["ɵnov"](t,64).onTouched()&&e}if("compositionstart"===n){e=!1!==l["ɵnov"](t,64)._compositionStart()&&e}if("compositionend"===n){e=!1!==l["ɵnov"](t,64)._compositionEnd(i.target.value)&&e}if("ngModelChange"===n){e=!1!==(o.unit.description=i)&&e}return e},null,null)),l["ɵdid"](16384,null,0,f.f,[l.Renderer,l.ElementRef,[2,f.g]],null,null),l["ɵprd"](1024,null,f.h,function(t){return[t]},[f.f]),l["ɵdid"](671744,null,0,f.i,[[2,f.j],[8,null],[8,null],[2,f.h]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,f.k,null,[f.i]),l["ɵdid"](16384,null,0,f.l,[f.k],null,null),(t()(),l["ɵted"](null,["\n                        "])),(t()(),l["ɵted"](null,["\n                    "])),(t()(),l["ɵted"](null,["\n                    "])),(t()(),l["ɵeld"](0,null,null,7,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n                        "])),(t()(),l["ɵeld"](0,null,null,4,"div",[["class","offset-sm-2 col-sm-10"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n                            "])),(t()(),l["ɵeld"](0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["Добавить"])),(t()(),l["ɵted"](null,["\n                        "])),(t()(),l["ɵted"](null,["\n                    "])),(t()(),l["ɵted"](null,["\n                "])),(t()(),l["ɵted"](null,["\n\n            "])),(t()(),l["ɵted"](null,["\n        "])),(t()(),l["ɵted"](null,["\n\n    "])),(t()(),l["ɵted"](null,["\n\n"]))],function(t,n){var i=n.component;t(n,8,0,i.lesson.description),t(n,23,0,i.lesson.units),t(n,47,0,""),t(n,50,0,"name",i.unit.name),t(n,66,0,"description",i.unit.description)},function(t,n){t(n,5,0,n.component.lesson.name),t(n,32,0,l["ɵnov"](n,36).ngClassUntouched,l["ɵnov"](n,36).ngClassTouched,l["ɵnov"](n,36).ngClassPristine,l["ɵnov"](n,36).ngClassDirty,l["ɵnov"](n,36).ngClassValid,l["ɵnov"](n,36).ngClassInvalid,l["ɵnov"](n,36).ngClassPending),t(n,45,0,l["ɵnov"](n,47).required?"":null,l["ɵnov"](n,52).ngClassUntouched,l["ɵnov"](n,52).ngClassTouched,l["ɵnov"](n,52).ngClassPristine,l["ɵnov"](n,52).ngClassDirty,l["ɵnov"](n,52).ngClassValid,l["ɵnov"](n,52).ngClassInvalid,l["ɵnov"](n,52).ngClassPending),t(n,63,0,l["ɵnov"](n,68).ngClassUntouched,l["ɵnov"](n,68).ngClassTouched,l["ɵnov"](n,68).ngClassPristine,l["ɵnov"](n,68).ngClassDirty,l["ɵnov"](n,68).ngClassValid,l["ɵnov"](n,68).ngClassInvalid,l["ɵnov"](n,68).ngClassPending)})}function s(t){return l["ɵvid"](0,[(t()(),l["ɵeld"](0,null,null,1,"lesson",[],null,null,null,r,y)),l["ɵdid"](114688,null,0,u.a,[c.a,d.a,a.a],null,null)],function(t,n){t(n,1,0)},null)}var l=i("3j3K"),a=i("5oXY"),h=i("2Je8"),u=i("ge7+"),f=i("NVOs"),c=i("aXs8"),d=i("C6Wf");i.d(n,"a",function(){return v});var p=[],y=l["ɵcrt"]({encapsulation:2,styles:p,data:{}}),v=l["ɵccf"]("lesson",u.a,s,{},{},[])},ehvV:function(t,n,i){"use strict";function e(t){return r["ɵvid"](0,[(t()(),r["ɵeld"](0,null,null,57,"div",[["class","row"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["\n    "])),(t()(),r["ɵeld"](0,null,null,54,"div",[["class","col-md-12"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["\n\n        "])),(t()(),r["ɵeld"](0,null,null,1,"h4",[],null,null,null,null,null)),(t()(),r["ɵted"](null,["Редактирование"])),(t()(),r["ɵted"](null,["\n\n        "])),(t()(),r["ɵeld"](0,null,null,48,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,n,i){var e=!0,o=t.component;if("submit"===n){e=!1!==r["ɵnov"](t,9).onSubmit(i)&&e}if("reset"===n){e=!1!==r["ɵnov"](t,9).onReset()&&e}if("ngSubmit"===n){e=!1!==o.update()&&e}return e},null,null)),r["ɵdid"](16384,null,0,l.m,[],null,null),r["ɵdid"](16384,null,0,l.n,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),r["ɵprd"](2048,null,l.j,null,[l.n]),r["ɵdid"](16384,null,0,l.o,[l.j],null,null),(t()(),r["ɵted"](null,["\n            "])),(t()(),r["ɵeld"](0,null,null,16,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["\n                "])),(t()(),r["ɵeld"](0,null,null,1,"label",[["class","col-sm-2 col-form-label"],["for","inputName"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["Имя"])),(t()(),r["ɵted"](null,["\n                "])),(t()(),r["ɵeld"](0,null,null,10,"div",[["class","col-sm-10"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["\n                    "])),(t()(),r["ɵeld"](0,null,null,7,"input",[["class","form-control"],["id","inputName"],["name","name"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,i){var e=!0,o=t.component;if("input"===n){e=!1!==r["ɵnov"](t,21)._handleInput(i.target.value)&&e}if("blur"===n){e=!1!==r["ɵnov"](t,21).onTouched()&&e}if("compositionstart"===n){e=!1!==r["ɵnov"](t,21)._compositionStart()&&e}if("compositionend"===n){e=!1!==r["ɵnov"](t,21)._compositionEnd(i.target.value)&&e}if("ngModelChange"===n){e=!1!==(o.course.name=i)&&e}return e},null,null)),r["ɵdid"](16384,null,0,l.f,[r.Renderer,r.ElementRef,[2,l.g]],null,null),r["ɵdid"](16384,null,0,l.s,[],{required:[0,"required"]},null),r["ɵprd"](1024,null,l.t,function(t){return[t]},[l.s]),r["ɵprd"](1024,null,l.h,function(t){return[t]},[l.f]),r["ɵdid"](671744,null,0,l.i,[[2,l.j],[2,l.t],[8,null],[2,l.h]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["ɵprd"](2048,null,l.k,null,[l.i]),r["ɵdid"](16384,null,0,l.l,[l.k],null,null),(t()(),r["ɵted"](null,["\n                "])),(t()(),r["ɵted"](null,["\n\n            "])),(t()(),r["ɵted"](null,["\n            "])),(t()(),r["ɵeld"](0,null,null,14,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["\n                "])),(t()(),r["ɵeld"](0,null,null,1,"label",[["class","col-sm-2 col-form-label"],["for","inputDescription"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["Описание"])),(t()(),r["ɵted"](null,["\n                "])),(t()(),r["ɵeld"](0,null,null,8,"div",[["class","col-sm-10"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["\n                    "])),(t()(),r["ɵeld"](0,null,null,5,"input",[["class","form-control"],["id","inputDescription"],["name","description"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,i){var e=!0,o=t.component;if("input"===n){e=!1!==r["ɵnov"](t,39)._handleInput(i.target.value)&&e}if("blur"===n){e=!1!==r["ɵnov"](t,39).onTouched()&&e}if("compositionstart"===n){e=!1!==r["ɵnov"](t,39)._compositionStart()&&e}if("compositionend"===n){e=!1!==r["ɵnov"](t,39)._compositionEnd(i.target.value)&&e}if("ngModelChange"===n){e=!1!==(o.course.description=i)&&e}return e},null,null)),r["ɵdid"](16384,null,0,l.f,[r.Renderer,r.ElementRef,[2,l.g]],null,null),r["ɵprd"](1024,null,l.h,function(t){return[t]},[l.f]),r["ɵdid"](671744,null,0,l.i,[[2,l.j],[8,null],[8,null],[2,l.h]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["ɵprd"](2048,null,l.k,null,[l.i]),r["ɵdid"](16384,null,0,l.l,[l.k],null,null),(t()(),r["ɵted"](null,["\n                "])),(t()(),r["ɵted"](null,["\n            "])),(t()(),r["ɵted"](null,["\n            "])),(t()(),r["ɵeld"](0,null,null,7,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["\n                "])),(t()(),r["ɵeld"](0,null,null,4,"div",[["class","offset-sm-2 col-sm-10"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["\n                    "])),(t()(),r["ɵeld"](0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["Обновить"])),(t()(),r["ɵted"](null,["\n                "])),(t()(),r["ɵted"](null,["\n            "])),(t()(),r["ɵted"](null,["\n        "])),(t()(),r["ɵted"](null,["\n\n    "])),(t()(),r["ɵted"](null,["\n"]))],function(t,n){var i=n.component;t(n,22,0,""),t(n,25,0,"name",i.course.name),t(n,41,0,"description",i.course.description)},function(t,n){t(n,7,0,r["ɵnov"](n,11).ngClassUntouched,r["ɵnov"](n,11).ngClassTouched,r["ɵnov"](n,11).ngClassPristine,r["ɵnov"](n,11).ngClassDirty,r["ɵnov"](n,11).ngClassValid,r["ɵnov"](n,11).ngClassInvalid,r["ɵnov"](n,11).ngClassPending),t(n,20,0,r["ɵnov"](n,22).required?"":null,r["ɵnov"](n,27).ngClassUntouched,r["ɵnov"](n,27).ngClassTouched,r["ɵnov"](n,27).ngClassPristine,r["ɵnov"](n,27).ngClassDirty,r["ɵnov"](n,27).ngClassValid,r["ɵnov"](n,27).ngClassInvalid,r["ɵnov"](n,27).ngClassPending),t(n,38,0,r["ɵnov"](n,43).ngClassUntouched,r["ɵnov"](n,43).ngClassTouched,r["ɵnov"](n,43).ngClassPristine,r["ɵnov"](n,43).ngClassDirty,r["ɵnov"](n,43).ngClassValid,r["ɵnov"](n,43).ngClassInvalid,r["ɵnov"](n,43).ngClassPending)})}function o(t){return r["ɵvid"](0,[(t()(),r["ɵeld"](0,null,null,1,"edit-course",[],null,null,null,e,f)),r["ɵdid"](114688,null,0,s.a,[a.a,h.a,h.c],null,null)],function(t,n){t(n,1,0)},null)}var r=i("3j3K"),s=i("Ef0u"),l=i("NVOs"),a=i("F7VT"),h=i("5oXY");i.d(n,"a",function(){return c});var u=[],f=r["ɵcrt"]({encapsulation:2,styles:u,data:{}}),c=r["ɵccf"]("edit-course",s.a,o,{},{},[])},"ge7+":function(t,n,i){"use strict";var e=i("5oXY"),o=i("atbp"),r=i("1+LI"),s=i("aXs8"),l=i("C6Wf");i.d(n,"a",function(){return a});var a=function(){function t(t,n,i){this.UnitService=t,this.LessonService=n,this.route=i,this.lesson=new o.a,this.unit=new r.a}return t.prototype.ngOnInit=function(){var t=this;this.route.params.subscribe(function(n){var i=+n.id;t.courseId=+n.courseId,t.LessonService.lesson(i).subscribe(function(n){t.lesson=n,t.unit.lesson_id=t.lesson.id})})},t.prototype.addUnit=function(){var t=this;this.UnitService.store(this.unit).subscribe(function(n){t.lesson.units.push(n)})},t.prototype.removeUnit=function(t,n){var i=this;t.preventDefault(),t.stopPropagation(),this.UnitService.delete(n).subscribe(function(){i.lesson.units.map(function(t,e){t.id===n&&i.lesson.units.splice(e,1)})})},t.ctorParameters=function(){return[{type:s.a},{type:l.a},{type:e.a}]},t}()},htmy:function(t,n,i){"use strict";function e(t){return a["ɵvid"](0,[(t()(),a["ɵeld"](0,null,null,3,"option",[],null,null,null,null,null)),a["ɵdid"](147456,null,0,h.p,[a.ElementRef,a.Renderer,[2,h.q]],{value:[0,"value"]},null),a["ɵdid"](147456,null,0,h.r,[a.ElementRef,a.Renderer,[8,null]],{value:[0,"value"]},null),(t()(),a["ɵted"](null,["",""]))],function(t,n){t(n,1,0,n.context.$implicit.value),t(n,2,0,n.context.$implicit.value)},function(t,n){t(n,3,0,n.context.$implicit.name)})}function o(t){return a["ɵvid"](0,[(t()(),a["ɵeld"](0,null,null,1,"p",[["draggable","true"],["style","text-align: center"]],null,null,null,null,null)),(t()(),a["ɵted"](null,["",""]))],null,function(t,n){t(n,1,0,n.context.$implicit.name)})}function r(t){return a["ɵvid"](0,[a["ɵqud"](402653184,1,{div:0}),a["ɵqud"](402653184,2,{fullScreen:0}),(t()(),a["ɵeld"](0,[[2,0],["fullscreenContainer",1]],null,68,"div",[["class","col-md-12"]],null,null,null,null,null)),(t()(),a["ɵted"](null,["\n    "])),(t()(),a["ɵeld"](0,null,null,0,"br",[],null,null,null,null,null)),(t()(),a["ɵted"](null,["\n    "])),(t()(),a["ɵeld"](0,null,null,43,"div",[["class","row"]],null,null,null,null,null)),(t()(),a["ɵted"](null,["\n        "])),(t()(),a["ɵeld"](0,null,null,14,"select",[["class","col-md-2 form-control"],["name","type"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"change"],[null,"ngModelChange"],[null,"blur"]],function(t,n,i){var e=!0,o=t.component;if("change"===n){e=!1!==a["ɵnov"](t,9).onChange(i.target.value)&&e}if("blur"===n){e=!1!==a["ɵnov"](t,9).onTouched()&&e}if("change"===n){e=!1!==o.onSelectType()&&e}if("ngModelChange"===n){e=!1!==(o.type=i)&&e}return e},null,null)),a["ɵdid"](16384,null,0,h.q,[a.Renderer,a.ElementRef],null,null),a["ɵprd"](1024,null,h.h,function(t){return[t]},[h.q]),a["ɵdid"](671744,null,0,h.i,[[8,null],[8,null],[8,null],[2,h.h]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),a["ɵprd"](2048,null,h.k,null,[h.i]),a["ɵdid"](16384,null,0,h.l,[h.k],null,null),(t()(),a["ɵted"](null,["\n            "])),(t()(),a["ɵeld"](0,null,null,3,"option",[],null,null,null,null,null)),a["ɵdid"](147456,null,0,h.p,[a.ElementRef,a.Renderer,[2,h.q]],{value:[0,"value"]},null),a["ɵdid"](147456,null,0,h.r,[a.ElementRef,a.Renderer,[8,null]],{value:[0,"value"]},null),(t()(),a["ɵted"](null,["Выберите"])),(t()(),a["ɵted"](null,["\n            "])),(t()(),a["ɵand"](16777216,null,null,1,null,e)),a["ɵdid"](802816,null,0,f.NgForOf,[a.ViewContainerRef,a.TemplateRef,a.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(t()(),a["ɵted"](null,["\n        "])),(t()(),a["ɵted"](null,["\n\n        "])),(t()(),a["ɵeld"](0,null,null,1,"button",[["class","btn btn-primary btn-sm col-md-2"]],null,[[null,"click"]],function(t,n,i){var e=!0,o=t.component;if("click"===n){e=!1!==o.save()&&e}return e},null,null)),(t()(),a["ɵted"](null,["Сохранить"])),(t()(),a["ɵted"](null,["\n        "])),(t()(),a["ɵeld"](0,null,null,21,"div",[["class","icon"]],null,[[null,"click"]],function(t,n,i){var e=!0,o=t.component;if("click"===n){e=!1!==o.fullscreen()&&e}return e},null,null)),(t()(),a["ɵted"](null,["\n            "])),(t()(),a["ɵeld"](0,null,null,18,"a",[["class","fullscreen"]],null,null,null,null,null)),(t()(),a["ɵeld"](0,null,null,16,":svg:svg",[[":xml:space","preserve"],[":xmlns:xlink","http://www.w3.org/1999/xlink"],["class","fs-icon"],["enable-background","new 0 0 100 100"],["version","1.1"],["viewBox","0 0 100 100"],["x","0px"],["xmlns","http://www.w3.org/2000/svg"],["y","0px"]],null,null,null,null,null)),(t()(),a["ɵted"](null,["\n            "])),(t()(),a["ɵted"](null,["\n            "])),(t()(),a["ɵeld"](0,null,null,0,":svg:path",[["class","tr arrow"],["d","M74.6 33.6l0-4.3L63.2 40.7c-1.1 1.1-2.8 1.1-3.8 0c-1.1-1.1-1.1-2.8 0-3.9l11.4-11.4h-4.3 c-1.5 0-2.7-1.2-2.7-2.7c0-1.5 1.2-2.7 2.7-2.7h10.9c1.5 0 2.7 1.2 2.7 2.7v10.9c0 1.5-1.2 2.7-2.7 2.7 C75.8 36.3 74.6 35.1 74.6 33.6z"]],null,null,null,null,null)),(t()(),a["ɵted"](null,["\n                "])),(t()(),a["ɵted"](null,["\n            "])),(t()(),a["ɵeld"](0,null,null,0,":svg:path",[["class","tl arrow"],["d","M33.6 25.4h-4.3l11.4 11.4c1.1 1.1 1.1 2.8 0 3.8c-1.1 1.1-2.8 1.1-3.8 0L25.4 29.3v4.3 c0 1.5-1.2 2.7-2.7 2.7c-1.5 0-2.7-1.2-2.7-2.7V22.7c0-1.5 1.2-2.7 2.7-2.7l10.9 0c1.5 0 2.7 1.2 2.7 2.7 C36.3 24.2 35.1 25.4 33.6 25.4z"]],null,null,null,null,null)),(t()(),a["ɵted"](null,["\n                "])),(t()(),a["ɵted"](null,["\n            "])),(t()(),a["ɵeld"](0,null,null,0,":svg:path",[["class","bl arrow"],["d","M25.4 66.4l0 4.3l11.4-11.4c1.1-1.1 2.8-1.1 3.8 0c1.1 1.1 1.1 2.8 0 3.9L29.3 74.6h4.3 c1.5 0 2.7 1.2 2.7 2.7c0 1.5-1.2 2.7-2.7 2.7H22.7c-1.5 0-2.7-1.2-2.7-2.7V66.4c0-1.5 1.2-2.7 2.7-2.7 C24.2 63.7 25.4 64.9 25.4 66.4z"]],null,null,null,null,null)),(t()(),a["ɵted"](null,["\n                "])),(t()(),a["ɵted"](null,["\n            "])),(t()(),a["ɵeld"](0,null,null,0,":svg:path",[["class","br arrow"],["d","M66.4 74.6h4.3L59.3 63.2c-1.1-1.1-1.1-2.8 0-3.8c1.1-1.1 2.8-1.1 3.8 0l11.4 11.4v-4.3 c0-1.5 1.2-2.7 2.7-2.7c1.5 0 2.7 1.2 2.7 2.7v10.9c0 1.5-1.2 2.7-2.7 2.7l-10.9 0c-1.5 0-2.7-1.2-2.7-2.7 C63.7 75.8 64.9 74.6 66.4 74.6z"]],null,null,null,null,null)),(t()(),a["ɵted"](null,["\n                "])),(t()(),a["ɵted"](null,["\n            "])),(t()(),a["ɵeld"](0,null,null,0,":svg:path",[["class","outline"],["d","M94 5c0.5 0 1 0.5 1 1v88c0 0.5-0.5 1-1 1H6c-0.5 0-1-0.5-1-1V6c0-0.5 0.5-1 1-1H94 M94 0H6C2.7 0 0 2.7 0 6v88 c0 3.3 2.7 6 6 6h88c3.3 0 6-2.7 6-6V6C100 2.7 97.3 0 94 0L94 0z"]],null,null,null,null,null)),(t()(),a["ɵted"](null,["\n          "])),(t()(),a["ɵted"](null,["\n            "])),(t()(),a["ɵted"](null,["\n        "])),(t()(),a["ɵted"](null,["\n    "])),(t()(),a["ɵted"](null,["\n\n    "])),(t()(),a["ɵeld"](0,null,null,18,"div",[["class","row"]],null,null,null,null,null)),(t()(),a["ɵted"](null,["\n        "])),(t()(),a["ɵeld"](0,null,null,3,"div",[["class","col-md-10"]],null,null,null,null,null)),(t()(),a["ɵted"](null,["\n            "])),(t()(),a["ɵeld"](0,[[1,0],["goJSDiagram",1]],null,0,"div",[["style","width:100%; height:450px; background-color: #DAE4E4;"]],null,null,null,null,null)),(t()(),a["ɵted"](null,["\n        "])),(t()(),a["ɵted"](null,["\n        "])),(t()(),a["ɵeld"](0,null,null,10,"div",[["class","col-md-2"]],null,null,null,null,null)),(t()(),a["ɵted"](null,["\n            "])),(t()(),a["ɵeld"](0,null,null,1,"h6",[],null,null,null,null,null)),(t()(),a["ɵted"](null,["Скрытые элементы"])),(t()(),a["ɵted"](null,["\n            "])),(t()(),a["ɵeld"](0,null,null,4,"div",[["id","palette"],["style","border: solid 1px black; height: 400px"]],null,null,null,null,null)),(t()(),a["ɵted"](null,["\n                "])),(t()(),a["ɵand"](16777216,null,null,1,null,o)),a["ɵdid"](802816,null,0,f.NgForOf,[a.ViewContainerRef,a.TemplateRef,a.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(t()(),a["ɵted"](null,["\n            "])),(t()(),a["ɵted"](null,["\n        "])),(t()(),a["ɵted"](null,["\n    "])),(t()(),a["ɵted"](null,["\n\n"]))],function(t,n){var i=n.component;t(n,11,0,"type",i.type),t(n,16,0,null),t(n,17,0,null),t(n,21,0,i.types),t(n,66,0,i.items)},function(t,n){t(n,8,0,a["ɵnov"](n,13).ngClassUntouched,a["ɵnov"](n,13).ngClassTouched,a["ɵnov"](n,13).ngClassPristine,a["ɵnov"](n,13).ngClassDirty,a["ɵnov"](n,13).ngClassValid,a["ɵnov"](n,13).ngClassInvalid,a["ɵnov"](n,13).ngClassPending)})}function s(t){return a["ɵvid"](0,[(t()(),a["ɵeld"](0,null,null,1,"schema",[],null,null,null,r,v)),a["ɵdid"](245760,null,0,u.a,[c.a,d.a,p.a],null,null)],function(t,n){t(n,1,0)},null)}var l=i("5jXI"),a=i("3j3K"),h=i("NVOs"),u=i("DdRN"),f=i("2Je8"),c=i("jo6L"),d=i("5oXY"),p=i("aXs8");i.d(n,"a",function(){return g});var y=[l.a],v=a["ɵcrt"]({encapsulation:0,styles:y,data:{}}),g=a["ɵccf"]("schema",u.a,s,{},{},[])},"j/bF":function(t,n,i){"use strict";function e(t){return l["ɵvid"](0,[(t()(),l["ɵeld"](0,null,null,1,"p",[],null,null,null,null,null)),(t()(),l["ɵted"](null,["Описание - ",""]))],null,function(t,n){t(n,1,0,n.component.course.description)})}function o(t){return l["ɵvid"](0,[(t()(),l["ɵeld"](0,null,null,23,"a",[["class","list-group-item list-group-item-action flex-column align-items-start active"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,n,i){var e=!0;if("click"===n){e=!1!==l["ɵnov"](t,1).onClick(i.button,i.ctrlKey,i.metaKey,i.shiftKey)&&e}return e},null,null)),l["ɵdid"](671744,null,0,a.y,[a.c,a.a,h.LocationStrategy],{routerLink:[0,"routerLink"]},null),l["ɵpad"](1),(t()(),l["ɵted"](null,["\n                        "])),(t()(),l["ɵeld"](0,null,null,10,"div",[["class","d-flex w-100 justify-content-between"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n                            "])),(t()(),l["ɵeld"](0,null,null,1,"h5",[["class","mb-1"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["",""])),(t()(),l["ɵted"](null,["\n                            "])),(t()(),l["ɵeld"](0,null,null,4,"small",[],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n                                "])),(t()(),l["ɵeld"](0,null,null,1,"button",[["class","btn btn-danger btn-sm"],["type","button"]],null,[[null,"click"]],function(t,n,i){var e=!0,o=t.component;if("click"===n){e=!1!==o.removeLesson(i,t.context.$implicit.id)&&e}return e},null,null)),(t()(),l["ɵted"](null,["Удалить"])),(t()(),l["ɵted"](null,["\n                            "])),(t()(),l["ɵted"](null,["\n                        "])),(t()(),l["ɵted"](null,["\n                        "])),(t()(),l["ɵeld"](0,null,null,1,"p",[["class","mb-1"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["",""])),(t()(),l["ɵted"](null,["\n                        "])),(t()(),l["ɵeld"](0,null,null,3,"a",[["class","btn btn-primary btn-sm"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],function(t,n,i){var e=!0;if("click"===n){e=!1!==l["ɵnov"](t,20).onClick(i.button,i.ctrlKey,i.metaKey,i.shiftKey)&&e}return e},null,null)),l["ɵdid"](671744,null,0,a.y,[a.c,a.a,h.LocationStrategy],{routerLink:[0,"routerLink"]},null),l["ɵpad"](2),(t()(),l["ɵted"](null,["Редактировать"])),(t()(),l["ɵted"](null,["\n                    "]))],function(t,n){t(n,1,0,t(n,2,0,"/panel/courses/course/"+n.component.course.id+"/lesson/"+n.context.$implicit.id)),t(n,20,0,t(n,21,0,"/panel/courses/edit/lesson",n.context.$implicit.id))},function(t,n){t(n,0,0,l["ɵnov"](n,1).target,l["ɵnov"](n,1).href),t(n,7,0,n.context.$implicit.name),t(n,17,0,n.context.$implicit.description),t(n,19,0,l["ɵnov"](n,20).target,l["ɵnov"](n,20).href)})}function r(t){return l["ɵvid"](0,[(t()(),l["ɵeld"](0,null,null,84,"div",[["class","row"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n    "])),(t()(),l["ɵeld"](0,null,null,7,"div",[["class","col-md-12"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n        "])),(t()(),l["ɵeld"](0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),l["ɵted"](null,["Курс - ",""])),(t()(),l["ɵted"](null,["\n        "])),(t()(),l["ɵand"](16777216,null,null,1,null,e)),l["ɵdid"](16384,null,0,h.NgIf,[l.ViewContainerRef,l.TemplateRef],{ngIf:[0,"ngIf"]},null),(t()(),l["ɵted"](null,["\n    "])),(t()(),l["ɵted"](null,["\n\n    "])),(t()(),l["ɵeld"](0,null,null,72,"div",[["class","col-md-12"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n\n        "])),(t()(),l["ɵeld"](0,null,null,69,"div",[["class","row"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n            "])),(t()(),l["ɵeld"](0,null,null,10,"div",[["class","col-md-6"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n                "])),(t()(),l["ɵeld"](0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),l["ɵted"](null,["Список уроков"])),(t()(),l["ɵted"](null,["\n\n                "])),(t()(),l["ɵeld"](0,null,null,4,"div",[["class","list-group"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n                    "])),(t()(),l["ɵand"](16777216,null,null,1,null,o)),l["ɵdid"](802816,null,0,h.NgForOf,[l.ViewContainerRef,l.TemplateRef,l.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(t()(),l["ɵted"](null,["\n                "])),(t()(),l["ɵted"](null,["\n\n            "])),(t()(),l["ɵted"](null,["\n            "])),(t()(),l["ɵeld"](0,null,null,54,"div",[["class","col-md-6"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n                "])),(t()(),l["ɵeld"](0,null,null,1,"h4",[],null,null,null,null,null)),(t()(),l["ɵted"](null,["Добавить урок"])),(t()(),l["ɵted"](null,["\n\n                "])),(t()(),l["ɵeld"](0,null,null,48,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,n,i){var e=!0,o=t.component;if("submit"===n){e=!1!==l["ɵnov"](t,34).onSubmit(i)&&e}if("reset"===n){e=!1!==l["ɵnov"](t,34).onReset()&&e}if("ngSubmit"===n){e=!1!==o.addLesson()&&e}return e},null,null)),l["ɵdid"](16384,null,0,f.m,[],null,null),l["ɵdid"](16384,null,0,f.n,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),l["ɵprd"](2048,null,f.j,null,[f.n]),l["ɵdid"](16384,null,0,f.o,[f.j],null,null),(t()(),l["ɵted"](null,["\n                    "])),(t()(),l["ɵeld"](0,null,null,16,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n                        "])),(t()(),l["ɵeld"](0,null,null,1,"label",[["class","col-sm-2 col-form-label"],["for","inputName"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["Имя"])),(t()(),l["ɵted"](null,["\n                        "])),(t()(),l["ɵeld"](0,null,null,10,"div",[["class","col-sm-10"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n                            "])),(t()(),l["ɵeld"](0,null,null,7,"input",[["class","form-control"],["id","inputName"],["name","name"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,i){var e=!0,o=t.component;if("input"===n){e=!1!==l["ɵnov"](t,46)._handleInput(i.target.value)&&e}if("blur"===n){e=!1!==l["ɵnov"](t,46).onTouched()&&e}if("compositionstart"===n){e=!1!==l["ɵnov"](t,46)._compositionStart()&&e}if("compositionend"===n){e=!1!==l["ɵnov"](t,46)._compositionEnd(i.target.value)&&e}if("ngModelChange"===n){e=!1!==(o.lesson.name=i)&&e}return e},null,null)),l["ɵdid"](16384,null,0,f.f,[l.Renderer,l.ElementRef,[2,f.g]],null,null),l["ɵdid"](16384,null,0,f.s,[],{required:[0,"required"]},null),l["ɵprd"](1024,null,f.t,function(t){return[t]},[f.s]),l["ɵprd"](1024,null,f.h,function(t){return[t]},[f.f]),l["ɵdid"](671744,null,0,f.i,[[2,f.j],[2,f.t],[8,null],[2,f.h]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,f.k,null,[f.i]),l["ɵdid"](16384,null,0,f.l,[f.k],null,null),(t()(),l["ɵted"](null,["\n                        "])),(t()(),l["ɵted"](null,["\n\n                    "])),(t()(),l["ɵted"](null,["\n                    "])),(t()(),l["ɵeld"](0,null,null,14,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n                        "])),(t()(),l["ɵeld"](0,null,null,1,"label",[["class","col-sm-2 col-form-label"],["for","inputDescription"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["Описание"])),(t()(),l["ɵted"](null,["\n                        "])),(t()(),l["ɵeld"](0,null,null,8,"div",[["class","col-sm-10"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n                            "])),(t()(),l["ɵeld"](0,null,null,5,"input",[["class","form-control"],["id","inputDescription"],["name","description"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,i){var e=!0,o=t.component;if("input"===n){e=!1!==l["ɵnov"](t,64)._handleInput(i.target.value)&&e}if("blur"===n){e=!1!==l["ɵnov"](t,64).onTouched()&&e}if("compositionstart"===n){e=!1!==l["ɵnov"](t,64)._compositionStart()&&e}if("compositionend"===n){e=!1!==l["ɵnov"](t,64)._compositionEnd(i.target.value)&&e}if("ngModelChange"===n){e=!1!==(o.lesson.description=i)&&e}return e},null,null)),l["ɵdid"](16384,null,0,f.f,[l.Renderer,l.ElementRef,[2,f.g]],null,null),l["ɵprd"](1024,null,f.h,function(t){return[t]},[f.f]),l["ɵdid"](671744,null,0,f.i,[[2,f.j],[8,null],[8,null],[2,f.h]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),l["ɵprd"](2048,null,f.k,null,[f.i]),l["ɵdid"](16384,null,0,f.l,[f.k],null,null),(t()(),l["ɵted"](null,["\n                        "])),(t()(),l["ɵted"](null,["\n                    "])),(t()(),l["ɵted"](null,["\n                    "])),(t()(),l["ɵeld"](0,null,null,7,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n                        "])),(t()(),l["ɵeld"](0,null,null,4,"div",[["class","offset-sm-2 col-sm-10"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["\n                            "])),(t()(),l["ɵeld"](0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],null,null,null,null,null)),(t()(),l["ɵted"](null,["Добавить"])),(t()(),l["ɵted"](null,["\n                        "])),(t()(),l["ɵted"](null,["\n                    "])),(t()(),l["ɵted"](null,["\n                "])),(t()(),l["ɵted"](null,["\n\n            "])),(t()(),l["ɵted"](null,["\n        "])),(t()(),l["ɵted"](null,["\n\n    "])),(t()(),l["ɵted"](null,["\n\n"]))],function(t,n){var i=n.component;t(n,8,0,i.course.description),t(n,23,0,i.lessons),t(n,47,0,""),t(n,50,0,"name",i.lesson.name),t(n,66,0,"description",i.lesson.description)},function(t,n){t(n,5,0,n.component.course.name),t(n,32,0,l["ɵnov"](n,36).ngClassUntouched,l["ɵnov"](n,36).ngClassTouched,l["ɵnov"](n,36).ngClassPristine,l["ɵnov"](n,36).ngClassDirty,l["ɵnov"](n,36).ngClassValid,l["ɵnov"](n,36).ngClassInvalid,l["ɵnov"](n,36).ngClassPending),t(n,45,0,l["ɵnov"](n,47).required?"":null,l["ɵnov"](n,52).ngClassUntouched,l["ɵnov"](n,52).ngClassTouched,l["ɵnov"](n,52).ngClassPristine,l["ɵnov"](n,52).ngClassDirty,l["ɵnov"](n,52).ngClassValid,l["ɵnov"](n,52).ngClassInvalid,l["ɵnov"](n,52).ngClassPending),t(n,63,0,l["ɵnov"](n,68).ngClassUntouched,l["ɵnov"](n,68).ngClassTouched,l["ɵnov"](n,68).ngClassPristine,l["ɵnov"](n,68).ngClassDirty,l["ɵnov"](n,68).ngClassValid,l["ɵnov"](n,68).ngClassInvalid,l["ɵnov"](n,68).ngClassPending)})}function s(t){return l["ɵvid"](0,[(t()(),l["ɵeld"](0,null,null,1,"course",[],null,null,null,r,y)),l["ɵdid"](114688,null,0,u.a,[c.a,d.a,a.a],null,null)],function(t,n){t(n,1,0)},null)}var l=i("3j3K"),a=i("5oXY"),h=i("2Je8"),u=i("FIYr"),f=i("NVOs"),c=i("F7VT"),d=i("C6Wf");i.d(n,"a",function(){return v});var p=[],y=l["ɵcrt"]({encapsulation:2,styles:p,data:{}}),v=l["ɵccf"]("course",u.a,s,{},{},[])},jo6L:function(t,n,i){"use strict";var e=i("lHWG"),o=i("95fO"),r=i("xAJs");i.n(r);i.d(n,"a",function(){return s});var s=function(){function t(t){this.http=t,this.prefix="schema/",this.api=""+this.http.adminPrefix+this.prefix}return t.prototype.store=function(t){return this.http.post(""+this.api,t).map(function(t){return new o.a(t.json())})},t.ctorParameters=function(){return[{type:e.a}]},t}()},n0Q5:function(t,n,i){"use strict";function e(t){return r["ɵvid"](0,[(t()(),r["ɵeld"](0,null,null,57,"div",[["class","row"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["\n    "])),(t()(),r["ɵeld"](0,null,null,54,"div",[["class","col-md-12"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["\n\n        "])),(t()(),r["ɵeld"](0,null,null,1,"h4",[],null,null,null,null,null)),(t()(),r["ɵted"](null,["Редактирование"])),(t()(),r["ɵted"](null,["\n\n        "])),(t()(),r["ɵeld"](0,null,null,48,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(t,n,i){var e=!0,o=t.component;if("submit"===n){e=!1!==r["ɵnov"](t,9).onSubmit(i)&&e}if("reset"===n){e=!1!==r["ɵnov"](t,9).onReset()&&e}if("ngSubmit"===n){e=!1!==o.update()&&e}return e},null,null)),r["ɵdid"](16384,null,0,l.m,[],null,null),r["ɵdid"](16384,null,0,l.n,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),r["ɵprd"](2048,null,l.j,null,[l.n]),r["ɵdid"](16384,null,0,l.o,[l.j],null,null),(t()(),r["ɵted"](null,["\n            "])),(t()(),r["ɵeld"](0,null,null,16,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["\n                "])),(t()(),r["ɵeld"](0,null,null,1,"label",[["class","col-sm-2 col-form-label"],["for","inputName"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["Имя"])),(t()(),r["ɵted"](null,["\n                "])),(t()(),r["ɵeld"](0,null,null,10,"div",[["class","col-sm-10"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["\n                    "])),(t()(),r["ɵeld"](0,null,null,7,"input",[["class","form-control"],["id","inputName"],["name","name"],["required",""],["type","text"]],[[1,"required",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,i){var e=!0,o=t.component;if("input"===n){e=!1!==r["ɵnov"](t,21)._handleInput(i.target.value)&&e}if("blur"===n){e=!1!==r["ɵnov"](t,21).onTouched()&&e}if("compositionstart"===n){e=!1!==r["ɵnov"](t,21)._compositionStart()&&e}if("compositionend"===n){e=!1!==r["ɵnov"](t,21)._compositionEnd(i.target.value)&&e}if("ngModelChange"===n){e=!1!==(o.lesson.name=i)&&e}return e},null,null)),r["ɵdid"](16384,null,0,l.f,[r.Renderer,r.ElementRef,[2,l.g]],null,null),r["ɵdid"](16384,null,0,l.s,[],{required:[0,"required"]},null),r["ɵprd"](1024,null,l.t,function(t){return[t]},[l.s]),r["ɵprd"](1024,null,l.h,function(t){return[t]},[l.f]),r["ɵdid"](671744,null,0,l.i,[[2,l.j],[2,l.t],[8,null],[2,l.h]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["ɵprd"](2048,null,l.k,null,[l.i]),r["ɵdid"](16384,null,0,l.l,[l.k],null,null),(t()(),r["ɵted"](null,["\n                "])),(t()(),r["ɵted"](null,["\n\n            "])),(t()(),r["ɵted"](null,["\n            "])),(t()(),r["ɵeld"](0,null,null,14,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["\n                "])),(t()(),r["ɵeld"](0,null,null,1,"label",[["class","col-sm-2 col-form-label"],["for","inputDescription"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["Описание"])),(t()(),r["ɵted"](null,["\n                "])),(t()(),r["ɵeld"](0,null,null,8,"div",[["class","col-sm-10"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["\n                    "])),(t()(),r["ɵeld"](0,null,null,5,"input",[["class","form-control"],["id","inputDescription"],["name","description"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(t,n,i){var e=!0,o=t.component;if("input"===n){e=!1!==r["ɵnov"](t,39)._handleInput(i.target.value)&&e}if("blur"===n){e=!1!==r["ɵnov"](t,39).onTouched()&&e}if("compositionstart"===n){e=!1!==r["ɵnov"](t,39)._compositionStart()&&e}if("compositionend"===n){e=!1!==r["ɵnov"](t,39)._compositionEnd(i.target.value)&&e}if("ngModelChange"===n){e=!1!==(o.lesson.description=i)&&e}return e},null,null)),r["ɵdid"](16384,null,0,l.f,[r.Renderer,r.ElementRef,[2,l.g]],null,null),r["ɵprd"](1024,null,l.h,function(t){return[t]},[l.f]),r["ɵdid"](671744,null,0,l.i,[[2,l.j],[8,null],[8,null],[2,l.h]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),r["ɵprd"](2048,null,l.k,null,[l.i]),r["ɵdid"](16384,null,0,l.l,[l.k],null,null),(t()(),r["ɵted"](null,["\n                "])),(t()(),r["ɵted"](null,["\n            "])),(t()(),r["ɵted"](null,["\n            "])),(t()(),r["ɵeld"](0,null,null,7,"div",[["class","form-group row"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["\n                "])),(t()(),r["ɵeld"](0,null,null,4,"div",[["class","offset-sm-2 col-sm-10"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["\n                    "])),(t()(),r["ɵeld"](0,null,null,1,"button",[["class","btn btn-primary"],["type","submit"]],null,null,null,null,null)),(t()(),r["ɵted"](null,["Обновить"])),(t()(),r["ɵted"](null,["\n                "])),(t()(),r["ɵted"](null,["\n            "])),(t()(),r["ɵted"](null,["\n        "])),(t()(),r["ɵted"](null,["\n\n    "])),(t()(),r["ɵted"](null,["\n"]))],function(t,n){var i=n.component;t(n,22,0,""),t(n,25,0,"name",i.lesson.name),t(n,41,0,"description",i.lesson.description)},function(t,n){t(n,7,0,r["ɵnov"](n,11).ngClassUntouched,r["ɵnov"](n,11).ngClassTouched,r["ɵnov"](n,11).ngClassPristine,r["ɵnov"](n,11).ngClassDirty,r["ɵnov"](n,11).ngClassValid,r["ɵnov"](n,11).ngClassInvalid,r["ɵnov"](n,11).ngClassPending),t(n,20,0,r["ɵnov"](n,22).required?"":null,r["ɵnov"](n,27).ngClassUntouched,r["ɵnov"](n,27).ngClassTouched,r["ɵnov"](n,27).ngClassPristine,r["ɵnov"](n,27).ngClassDirty,r["ɵnov"](n,27).ngClassValid,r["ɵnov"](n,27).ngClassInvalid,r["ɵnov"](n,27).ngClassPending),t(n,38,0,r["ɵnov"](n,43).ngClassUntouched,r["ɵnov"](n,43).ngClassTouched,r["ɵnov"](n,43).ngClassPristine,r["ɵnov"](n,43).ngClassDirty,r["ɵnov"](n,43).ngClassValid,r["ɵnov"](n,43).ngClassInvalid,r["ɵnov"](n,43).ngClassPending)})}function o(t){return r["ɵvid"](0,[(t()(),r["ɵeld"](0,null,null,1,"edit-lesson",[],null,null,null,e,f)),r["ɵdid"](114688,null,0,s.a,[a.a,h.a,h.c],null,null)],function(t,n){t(n,1,0)},null)}var r=i("3j3K"),s=i("nakI"),l=i("NVOs"),a=i("C6Wf"),h=i("5oXY");i.d(n,"a",function(){return c});var u=[],f=r["ɵcrt"]({encapsulation:2,styles:u,data:{}}),c=r["ɵccf"]("edit-lesson",s.a,o,{},{},[])},nakI:function(t,n,i){"use strict";var e=i("5oXY"),o=i("atbp"),r=i("C6Wf");i.d(n,"a",function(){return s});var s=function(){function t(t,n,i){this.LessonService=t,this.route=n,this.router=i,this.lesson=new o.a}return t.prototype.ngOnInit=function(){var t=this;this.route.params.subscribe(function(n){t.LessonService.lesson(+n.id).subscribe(function(n){t.lesson=n})})},t.prototype.update=function(){var t=this;this.LessonService.update(this.lesson).subscribe(function(){t.router.navigate(["/panel/courses/course",t.lesson.cource_id])})},t.ctorParameters=function(){return[{type:r.a},{type:e.a},{type:e.c}]},t}()},"ncC/":function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=i("3j3K"),o=i("P2Rt"),r=i("7yQW"),s=i("ehvV"),l=i("j/bF"),a=i("n0Q5"),h=i("eBor"),u=i("4RwO"),f=i("+2IH"),c=i("TEGW"),d=i("htmy"),p=i("CWXz"),y=i("2Je8"),v=i("NVOs"),g=i("F7VT"),m=i("lHWG"),b=i("C6Wf"),x=i("aXs8"),w=i("2Khz"),k=i("Fzro"),M=i("OyfR"),P=i("TemG"),T=i("jo6L"),S=i("5oXY"),C=i("K3+O"),N=i("Ef0u"),j=i("FIYr"),L=i("nakI"),D=i("ge7+"),A=i("FLb2"),F=i("cm73"),O=i("D0P3"),B=i("DdRN"),q=i("0LsZ");i.d(n,"CourseModuleNgFactory",function(){return z});var z=e["ɵcmf"](o.a,[],function(t){return e["ɵmod"]([e["ɵmpd"](512,e.ComponentFactoryResolver,e["ɵCodegenComponentFactoryResolver"],[[8,[r.a,s.a,l.a,a.a,h.a,u.a,f.a,c.a,d.a,p.a]],[3,e.ComponentFactoryResolver],e.NgModuleRef]),e["ɵmpd"](4608,y.NgLocalization,y.NgLocaleLocalization,[e.LOCALE_ID]),e["ɵmpd"](4608,v.a,v.a,[]),e["ɵmpd"](4608,g.a,g.a,[m.a]),e["ɵmpd"](4608,b.a,b.a,[m.a]),e["ɵmpd"](4608,x.a,x.a,[m.a]),e["ɵmpd"](4608,w.a,w.a,[m.a,k.i,M.a]),e["ɵmpd"](4608,P.a,P.a,[m.a]),e["ɵmpd"](4608,T.a,T.a,[m.a]),e["ɵmpd"](512,y.CommonModule,y.CommonModule,[]),e["ɵmpd"](512,v.c,v.c,[]),e["ɵmpd"](512,v.d,v.d,[]),e["ɵmpd"](512,S.x,S.x,[[2,S.m],[2,S.c]]),e["ɵmpd"](512,o.a,o.a,[]),e["ɵmpd"](1024,S.t,function(){return[[{path:"",component:C.a},{path:"edit/:id",component:N.a},{path:"course/:id",component:j.a},{path:"edit/lesson/:id",component:L.a},{path:"course/:courseId/lesson/:id",component:D.a},{path:"edit/unit/:id",component:A.a},{path:"course/:courseId/lesson/:lessonId/unit/:id",component:F.a,children:[{path:"",redirectTo:"theory",pathMatch:"full"},{path:"theory",component:O.a},{path:"schema",component:B.a},{path:"test",component:q.a}]}]]},[])])})},ylOH:function(t,n,i){"use strict";i.d(n,"a",function(){return e});var e=function(){function t(t){void 0===t&&(t={}),this.name="",this.description="",this.lessons=[],Object.assign(this,t)}return t}()}});